<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data:; font-src 'self' data:; connect-src 'self' https://www.data.boem.gov https://gdr.openei.org https://factpages.npd.no https://raw.githubusercontent.com; media-src 'self' data:; object-src 'none'; base-uri 'self'; form-action 'self'">
    <meta name="description" content="Browse the unified Well-Tegra equipment catalog, inspect specifications, and assemble costed job plans.">
    <title>Equipment Browser | Well-Tegra</title>
    <link rel="icon" href="assets/logo.jpg" type="image/jpeg">
    <link rel="stylesheet" href="assets/css/tailwind.css">
</head>
<body class="bg-slate-950 text-slate-100 min-h-screen">
    <header class="border-b border-slate-800 bg-slate-900/70">
        <div class="mx-auto flex max-w-6xl flex-col gap-4 px-4 py-6 sm:flex-row sm:items-center sm:justify-between">
            <div>
                <p class="text-sm text-cyan-300">Well-Tegra Operations Suite</p>
                <h1 class="mt-1 text-3xl font-semibold">Equipment Browser &amp; Job Planner</h1>
                <p class="text-sm text-slate-400">Merged catalog with builder-ready data and costs.</p>
            </div>
            <nav aria-label="Breadcrumb">
                <ol class="flex items-center gap-2 text-sm text-slate-400">
                    <li><a class="text-cyan-300 hover:text-cyan-200" href="index.html">Home</a></li>
                    <li aria-hidden="true" class="text-slate-600">/</li>
                    <li class="text-slate-200">Equipment Browser</li>
                </ol>
            </nav>
        </div>
    </header>

    <main class="mx-auto flex max-w-6xl flex-col gap-8 px-4 py-6">
        <section class="flex flex-wrap items-center justify-between gap-4">
            <div class="flex gap-2">
                <button type="button" id="catalog-view-button" class="rounded-full bg-cyan-600 px-4 py-2 text-sm font-semibold text-white shadow hover:bg-cyan-500 focus:outline-none focus-visible:ring focus-visible:ring-cyan-300">Catalog</button>
                <button type="button" id="builder-view-button" class="rounded-full bg-slate-800 px-4 py-2 text-sm font-semibold text-slate-200 shadow hover:bg-slate-700 focus:outline-none focus-visible:ring focus-visible:ring-slate-500">Job Planner</button>
            </div>
            <div class="relative flex-1">
                <label for="catalog-search" class="sr-only">Search equipment</label>
                <input id="catalog-search" type="search" placeholder="Search by name, vendor, or code&hellip;" class="w-full rounded-full border border-slate-800 bg-slate-900/70 px-5 py-3 text-sm text-white placeholder:text-slate-500 focus:outline-none focus-visible:ring focus-visible:ring-cyan-400">
            </div>
        </section>

        <section id="catalog-view" class="flex flex-col gap-6">
            <div class="overflow-x-auto">
                <div class="flex gap-2" id="catalog-tabs" role="tablist" aria-label="Equipment categories"></div>
            </div>
            <div id="catalog-grid" class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"></div>
            <section id="search-results" class="hidden">
                <h2 class="text-lg font-semibold">Search results</h2>
                <p id="no-search-results" class="mt-2 text-sm text-slate-400">No matching equipment found.</p>
                <div id="search-results-grid" class="mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"></div>
            </section>
        </section>

        <section id="builder-view" class="hidden">
            <div class="grid grid-cols-1 gap-6 lg:grid-cols-3">
                <article class="lg:col-span-2 rounded-2xl border border-slate-800 bg-slate-900/60 p-6">
                    <header class="mb-5 flex items-center justify-between">
                        <div>
                            <h2 class="text-2xl font-semibold">Current Job Plan</h2>
                            <p class="text-sm text-slate-400">Drag equipment from the catalog or use the quick add buttons.</p>
                        </div>
                        <button type="button" id="reset-builder" class="text-xs font-semibold text-slate-400 hover:text-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-cyan-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900">Reset</button>
                    </header>
                    <section class="space-y-5">
                        <article>
                            <header class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-sky-300">Toolstring Assembly</h3>
                                <button type="button" id="clear-toolstring-builder" class="text-xs font-semibold text-slate-400 hover:text-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-cyan-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900">Clear</button>
                            </header>
                            <div id="builder-toolstring" class="mt-3 min-h-[8rem] rounded-xl border border-slate-800 bg-slate-950/40 p-3 text-sm text-slate-400">No tools added.</div>
                        </article>
                        <article>
                            <header class="flex items-center justify-between">
                                <h3 class="text-lg font-semibold text-emerald-300">Personnel on Job</h3>
                                <button type="button" id="clear-personnel-builder" class="text-xs font-semibold text-slate-400 hover:text-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-cyan-400 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900">Clear</button>
                            </header>
                            <div class="mt-3 flex flex-wrap gap-2">
                                <button type="button" class="rounded-full bg-emerald-600 px-3 py-1 text-xs font-semibold text-white hover:bg-emerald-500 focus:outline-none focus-visible:ring focus-visible:ring-emerald-300" data-add-personnel="PERS-001">Wellsite Engineer</button>
                                <button type="button" class="rounded-full bg-emerald-600 px-3 py-1 text-xs font-semibold text-white hover:bg-emerald-500 focus:outline-none focus-visible:ring focus-visible:ring-emerald-300" data-add-personnel="PERS-004">Wireline Engineer</button>
                                <button type="button" class="rounded-full bg-emerald-600 px-3 py-1 text-xs font-semibold text-white hover:bg-emerald-500 focus:outline-none focus-visible:ring focus-visible:ring-emerald-300" data-add-personnel="PERS-005">CT Supervisor</button>
                                <button type="button" class="rounded-full bg-emerald-600 px-3 py-1 text-xs font-semibold text-white hover:bg-emerald-500 focus:outline-none focus-visible:ring focus-visible:ring-emerald-300" data-add-personnel="PERS-006">Wireline Operator</button>
                            </div>
                            <div id="builder-personnel" class="mt-3 min-h-[6rem] rounded-xl border border-slate-800 bg-slate-950/40 p-3 text-sm text-slate-400">No personnel added.</div>
                        </article>
                    </section>
                </article>

                <article class="rounded-2xl border border-slate-800 bg-slate-900/70 p-6">
                    <header class="mb-5">
                        <h2 class="text-2xl font-semibold">Job Metrics</h2>
                        <p class="text-sm text-slate-400">Totals update automatically as you add items.</p>
                    </header>
                    <dl class="space-y-4 text-sm text-slate-300">
                        <div>
                            <dt>Total Assembly Length</dt>
                            <dd id="builder-metric-length" class="text-2xl font-semibold text-sky-300">0.00 ft</dd>
                        </div>
                        <div>
                            <dt>Maximum OD</dt>
                            <dd id="builder-metric-od" class="text-2xl font-semibold text-sky-300">0.00 in</dd>
                        </div>
                        <div>
                            <dt>Equipment Daily Cost</dt>
                            <dd id="builder-metric-equip" class="text-2xl font-semibold text-sky-300">$0</dd>
                        </div>
                        <div>
                            <dt>Personnel Daily Cost</dt>
                            <dd id="builder-metric-pers" class="text-2xl font-semibold text-sky-300">$0</dd>
                        </div>
                        <div class="border-t border-slate-800 pt-4">
                            <dt>Total Job Daily Rate</dt>
                            <dd id="builder-metric-total" class="text-3xl font-bold text-emerald-300">$0</dd>
                        </div>
                    </dl>
                    <button type="button" id="save-job-plan" class="mt-6 w-full rounded-full bg-cyan-500 px-4 py-3 text-sm font-semibold text-slate-900 shadow hover:bg-cyan-400 focus:outline-none focus-visible:ring focus-visible:ring-slate-100">Save &amp; Export Job Plan</button>
                </article>
            </div>
        </section>
    </main>

    <div id="modal-backdrop" class="fixed inset-0 hidden place-items-center bg-slate-950/80 backdrop-blur">
        <article class="max-h-[90vh] w-[min(90vw,48rem)] overflow-hidden rounded-2xl border border-slate-800 bg-slate-900 shadow-2xl">
            <header class="flex items-start justify-between border-b border-slate-800 bg-slate-900/80 px-6 py-4">
                <div>
                    <h2 id="modal-title" class="text-2xl font-semibold"></h2>
                    <p class="text-sm text-slate-400">Vendor: <span id="modal-vendor"></span> &middot; Code: <span id="modal-code"></span></p>
                </div>
                <button type="button" id="modal-close" class="rounded-full p-2 text-slate-400 hover:text-slate-200 focus:outline-none focus-visible:ring focus-visible:ring-cyan-400"><span class="sr-only">Close</span>&times;</button>
            </header>
            <nav class="flex border-b border-slate-800" aria-label="Tool details tabs">
                <button type="button" class="modal-tab active grow px-5 py-3 text-sm font-semibold text-cyan-300" data-tab="specs">Specifications</button>
                <button type="button" class="modal-tab grow px-5 py-3 text-sm font-semibold text-slate-400 hover:text-slate-200" data-tab="history">History &amp; NPT</button>
            </nav>
            <div id="modal-panels" class="overflow-y-auto px-6 py-4 text-sm">
                <section data-panel="specs" class="modal-panel space-y-5">
                    <p id="modal-use" class="text-slate-200"></p>
                    <div>
                        <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-400">Specifications</h3>
                        <ul id="modal-specs" class="mt-2 list-disc space-y-1 pl-5 text-slate-200"></ul>
                    </div>
                    <div>
                        <h3 class="text-xs font-semibold uppercase tracking-wide text-slate-400">Costs</h3>
                        <ul class="mt-2 space-y-1 text-slate-200">
                            <li id="modal-cost-rate"></li>
                            <li id="modal-cost-mob"></li>
                        </ul>
                    </div>
                    <button type="button" id="modal-add-to-builder" class="w-full rounded-full bg-cyan-500 px-4 py-3 text-sm font-semibold text-slate-900 shadow hover:bg-cyan-400 focus:outline-none focus-visible:ring focus-visible:ring-slate-100">Add to Job Planner</button>
                </section>
                <section data-panel="history" class="modal-panel hidden space-y-3">
                    <div id="modal-history" class="space-y-3"></div>
                </section>
            </div>
        </article>
    </div>

    <div id="toast" role="status" aria-live="polite" class="pointer-events-none fixed bottom-6 left-1/2 hidden -translate-x-1/2 rounded-full bg-emerald-500 px-5 py-3 text-sm font-semibold text-slate-900 shadow-lg">Job plan saved</div>

    <script src="assets/js/equipment-browser.js" defer></script>
</body>
</html>
