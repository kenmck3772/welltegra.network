/*! For license information please see main.65a62001.js.LICENSE.txt */
(()=>{var e={14(e){e.exports=function(){return!1}},61(e){e.exports=function(e,t){return e<t}},143(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},149(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},320(e){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},396(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},438(e,t,n){var r=n(2622);e.exports=function(e){return r(this,e).get(e)}},539(e,t,n){var r=n(9742),i=n(7498),a=n(3279);e.exports=function(e){return e&&e.length?r(e,a,i):void 0}},579(e,t,n){"use strict";e.exports=n(1153)},620(e,t,n){var r=n(6913),i=n(4052),a=n(2761);e.exports=function(e){return"string"==typeof e||!i(e)&&a(e)&&"[object String]"==r(e)}},643(e,t,n){var r=n(7676)("toUpperCase");e.exports=r},644(e){e.exports=function(e){return e!==e}},705(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},715(e){var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",a="[^"+t+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[a,o,s].join("|")+")"+c+l+")*"),d="(?:"+[a+r+"?",r,o,s,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+d+u,"g");e.exports=function(e){return e.match(h)||[]}},755(e,t,n){var r=n(8895),i=n(7116);e.exports=function e(t,n,a,o,s){var l=-1,c=t.length;for(a||(a=i),s||(s=[]);++l<c;){var u=t[l];n>0&&a(u)?n>1?e(u,n-1,a,o,s):r(s,u):o||(s[s.length]=u)}return s}},793(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},801(e,t,n){var r=n(1141),i=n(6686),a=n(9841),o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):o.test(e)?NaN:+e}},914(e,t,n){var r=n(9841);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},929(e,t,n){var r=n(3211),i=n(6571),a=n(9194),o=n(6686);e.exports=function(e,t,n){if(!o(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&a(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},977(e,t,n){var r=n(9096),i=n(4416);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},1069(e,t,n){var r=n(8541);e.exports=function(e){return null==e?"":r(e)}},1141(e,t,n){var r=n(143),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},1143(e,t,n){var r=n(3028)(Object.keys,Object);e.exports=r},1153(e,t,n){"use strict";var r=n(5043),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},1170(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},1268(e,t,n){var r=n(5428),i=n(7574),a=n(6832),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},1310(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},1340(e,t,n){var r=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1497(e,t,n){"use strict";var r=n(3218);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},1558(e){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},1629(e,t,n){var r=n(6913),i=n(6686);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1714(e,t,n){var r=n(1340);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},1733(e,t,n){var r=n(1775),i=n(4664),a=n(9096);e.exports=function(e,t){var n={};return t=a(t,3),i(e,function(e,i,a){r(n,i,t(e,i,a))}),n}},1775(e,t,n){var r=n(5654);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},1946(e,t,n){var r=n(1340);e.exports=function(e){return r(this.__data__,e)>-1}},2070(e,t,n){var r=n(7937)(n(6552),"Set");e.exports=r},2074(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},2154(e,t,n){var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},2165(e,t,n){var r=n(5652);e.exports=function(e,t){var n;return r(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}},2322(e,t,n){var r=n(6913),i=n(5990),a=n(2761),o=Function.prototype,s=Object.prototype,l=o.toString,c=s.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},2520(e,t,n){var r=n(5816),i=n(9096),a=n(9140),o=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:a(n);return l<0&&(l=o(s+l,0)),r(e,i(t,3),l)}},2536(e,t,n){var r=n(149),i=n(2969),a=n(9096),o=n(8883),s=n(320),l=n(7574),c=n(5893),u=n(3279),d=n(4052);e.exports=function(e,t,n){t=t.length?r(t,function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e}):[u];var h=-1;t=r(t,l(a));var p=o(e,function(e,n,i){return{criteria:r(t,function(t){return t(e)}),index:++h,value:e}});return s(p,function(e,t){return c(e,t,n)})}},2541(e){e.exports=function(e){return function(){return e}}},2587(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},2597(e,t,n){var r=n(4052),i=n(9841),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(o.test(e)||!a.test(e)||null!=t&&e in Object(t))}},2622(e,t,n){var r=n(705);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},2662(e,t,n){var r=n(5575);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},2730(e,t,n){"use strict";var r=n(5043),i=n(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function x(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,x);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),N=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,I=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case M:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function $(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xe(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,Ee=null;function Me(e){if(e=yi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Te(e){Se?Ee?Ee.push(e):Ee=[e]:Se=e}function Ne(){if(Se){var e=Se,t=Ee;if(Ee=Se=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var je=!1;function Pe(e,t,n){if(je)return e(t,n);je=!0;try{return Ce(e,t,n)}finally{je=!1,(null!==Se||null!==Ee)&&(Ae(),Ne())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var ke=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){ke=!1}function De(e,t,n,r,i,a,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Ie=null,Ue=!1,Fe=null,Be={onError:function(e){Le=!0,Ie=e}};function ze(e,t,n,r,i,a,o,s,l){Le=!1,Ie=null,De.apply(Be,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Ze=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=dt(s):0!==(a&=o)&&(r=dt(a))}else 0!==(o=n&~i)?r=dt(o):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,St,Et,Mt,Tt=!1,Nt=[],Ct=null,At=null,jt=null,Pt=new Map,Ot=new Map,kt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function It(e){var t=xi(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Mt(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==jt&&Ut(jt)&&(jt=null),Pt.forEach(Ft),Ot.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Ht(e){function t(t){return zt(t,e)}if(0<Nt.length){zt(Nt[0],e);for(var n=1;n<Nt.length;n++){var r=Nt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==At&&zt(At,e),null!==jt&&zt(jt,e),Pt.forEach(t),Ot.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)It(n),null===n.blockedOn&&kt.shift()}var Vt=b.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=1,qt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function Xt(e,t,n,r){var i=yt,a=Vt.transition;Vt.transition=null;try{yt=4,qt(e,t,n,r)}finally{yt=i,Vt.transition=a}}function qt(e,t,n,r){if(Wt){var i=Kt(e,t,n,r);if(null===i)Wr(e,t,r,Yt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Lt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&wt(a),null===(a=Kt(e,t,n,r))&&Wr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Yt=null;function Kt(e,t,n,r){if(Yt=null,null!==(e=xi(e=we(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=I({},cn,{view:0,detail:0}),hn=an(dn),pn=I({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(pn),mn=an(I({},pn,{dataTransfer:0})),gn=an(I({},dn,{relatedTarget:0})),vn=an(I({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=I({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(xn),bn=an(I({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Mn(){return En}var Tn=I({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Nn=an(Tn),Cn=an(I({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(I({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),jn=an(I({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=I({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Pn),kn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,In=u&&(!Rn||Dn&&8<Dn&&11>=Dn),Un=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Xr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,qn=null;function Yn(e){Ur(e,0)}function Kn(e){if(q(bi(e)))return e}function Zn(e,t){if("change"===e)return t}var Jn=!1;if(u){var $n;if(u){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}$n=Qn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Xn&&(Xn.detachEvent("onpropertychange",nr),qn=Xn=null)}function nr(e){if("value"===e.propertyName&&Kn(qn)){var t=[];Gn(t,qn,e,we(e)),Pe(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Xn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(qn)}function ar(e,t){if("click"===e)return Kn(t)}function or(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,xr=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&lr(xr,r)||(xr=r,0<(r=Xr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Sr={},Er={};function Mr(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Mr("animationend"),Nr=Mr("animationiteration"),Cr=Mr("animationstart"),Ar=Mr("transitionend"),jr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){jr.set(e,t),l(t,[e])}for(var kr=0;kr<Pr.length;kr++){var Rr=Pr[kr];Or(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Or(Tr,"onAnimationEnd"),Or(Nr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(a(198));var u=Ie;Le=!1,Ie=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Ir(i,s,c),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Ir(i,s,c),a=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Br("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Zt(t)){case 1:var i=Gt;break;case 4:i=Xt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=xi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe(function(){var r=a,i=we(n),o=[];e:{var s=jr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Nn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Tr:case Nr:case Cr:l=vn;break;case Ar:l=jn;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Oe(f,h))&&u.push(Gr(f,m,p)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,n,i),o.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!xi(c)&&!c[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xi(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:bi(l),p=null==c?s:bi(c),(s=new u(m,f+"leave",l,n,i)).target=d,s.relatedTarget=p,m=null,xi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=qr(p))f++;for(p=0,m=h;m;m=qr(m))p++;for(;0<f-p;)u=qr(u),f--;for(;0<p-f;)h=qr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=qr(u),h=qr(h)}u=null}else u=null;null!==l&&Yr(o,s,l,u,!1),null!==c&&null!==d&&Yr(o,d,c,u,!0)}if("select"===(l=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Zn;else if(Wn(s))if(Jn)g=or;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?bi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,xr=null);break;case"focusout":xr=vr=gr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var x;if(Rn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Hn?Bn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(In&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hn&&(x=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,Hn=!0)),0<(v=Xr(r,y)).length&&(y=new bn(y,e,null,n,i),o.push({event:y,listeners:v}),x?y.data=x:null!==(x=zn(n))&&(y.data=x))),(x=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Rn&&Bn(e,t)?(e=en(),Qt=$t=Jt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Xr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=x))}Ur(o,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Oe(n,a))&&o.unshift(Gr(n,l,s)):i||null!=(l=Oe(n,a))&&o.push(Gr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Zr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ht(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function xi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[pi]||null}var _i=[],Si=-1;function Ei(e){return{current:e}}function Mi(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function Ti(e,t){Si++,_i[Si]=e.current,e.current=t}var Ni={},Ci=Ei(Ni),Ai=Ei(!1),ji=Ni;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ni;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ki(){Mi(Ai),Mi(Ci)}function Ri(e,t,n){if(Ci.current!==Ni)throw Error(a(168));Ti(Ci,t),Ti(Ai,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return I({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,ji=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Ii(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Di(e,t,ji),r.__reactInternalMemoizedMergedChildContext=e,Mi(Ai),Mi(Ci),Ti(Ci,e)):Mi(Ai),Ti(Ai,n)}var Ui=null,Fi=!1,Bi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Hi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=yt;try{var n=Ui;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),qe(Qe,Hi),i}finally{yt=t,Bi=!1}}return null}var Vi=[],Wi=0,Gi=null,Xi=0,qi=[],Yi=0,Ki=null,Zi=1,Ji="";function $i(e,t){Vi[Wi++]=Xi,Vi[Wi++]=Gi,Gi=e,Xi=t}function Qi(e,t,n){qi[Yi++]=Zi,qi[Yi++]=Ji,qi[Yi++]=Ki,Ki=e;var r=Zi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Zi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&($i(e,1),Qi(e,1,0))}function ta(e){for(;e===Gi;)Gi=Vi[--Wi],Vi[Wi]=null,Xi=Vi[--Wi],Vi[Wi]=null;for(;e===Ki;)Ki=qi[--Yi],qi[Yi]=null,Ji=qi[--Yi],qi[Yi]=null,Zi=qi[--Yi],qi[Yi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:Zi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function pa(){ra=na=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=b.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xa(e){return(0,e._init)(e._payload)}function ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&xa(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=kc(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ic(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=kc(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case _:return(t=Ic(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Rc(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case O:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);va(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}function m(i,a,s,l){for(var c=null,u=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(i,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),a=o(v,a,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(i,d),ia&&$i(i,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(a=o(d,a,m),null===u?c=d:u.sibling=d,u=d);return ia&&$i(i,m),c}for(d=r(i,d);m<s.length;m++)null!==(g=f(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),ia&&$i(i,m),c}function g(i,s,l,c){var u=D(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var d=u=null,m=s,g=s=0,v=null,x=l.next();null!==m&&!x.done;g++,x=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=p(i,m,x.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(i,m),s=o(y,s,g),null===d?u=y:d.sibling=y,d=y,m=v}if(x.done)return n(i,m),ia&&$i(i,g),u;if(null===m){for(;!x.done;g++,x=l.next())null!==(x=h(i,x.value,c))&&(s=o(x,s,g),null===d?u=x:d.sibling=x,d=x);return ia&&$i(i,g),u}for(m=r(i,m);!x.done;g++,x=l.next())null!==(x=f(m,i,g,x.value,c))&&(e&&null!==x.alternate&&m.delete(null===x.key?g:x.key),s=o(x,s,g),null===d?u=x:d.sibling=x,d=x);return e&&m.forEach(function(e){return t(i,e)}),ia&&$i(i,g),u}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=a;null!==u;){if(u.key===c){if((c=o.type)===S){if(7===u.tag){n(r,u.sibling),(a=i(u,o.props.children)).return=r,r=a;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&xa(c)===u.type){n(r,u.sibling),(a=i(u,o.props)).ref=ga(r,u,o),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===S?((a=Rc(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=kc(o.type,o.key,o.props,null,r.mode,l)).ref=ga(r,a,o),l.return=r,r=l)}return s(r);case _:e:{for(u=o.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Ic(o,r.mode,l)).return=r,r=a}return s(r);case O:return e(r,a,(u=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(D(o))return g(r,a,o,l);va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Lc(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var ba=ya(!0),wa=ya(!1),_a=Ei(null),Sa=null,Ea=null,Ma=null;function Ta(){Ma=Ea=Sa=null}function Na(e){var t=_a.current;Mi(_a),e._currentValue=t}function Ca(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Aa(e,t){Sa=e,Ma=Ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ys=!0),e.firstContext=null)}function ja(e){var t=e._currentValue;if(Ma!==e)if(e={context:e,memoizedValue:t,next:null},null===Ea){if(null===Sa)throw Error(a(308));Ea=e,Sa.dependencies={lanes:0,firstContext:e}}else Ea=Ea.next=e;return t}var Pa=null;function Oa(e){null===Pa?Pa=[e]:Pa.push(e)}function ka(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Oa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ra(e,r)}function Ra(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function La(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ua(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ra(e,n)}return null===(i=r.interleaved)?(t.next=t,Oa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ra(e,n)}function Ba(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}function za(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ha(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?a=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(o=0,u=c=l=null,s=a;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=I({},d,h);break e;case 2:Da=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=d}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Wa={},Ga=Ei(Wa),Xa=Ei(Wa),qa=Ei(Wa);function Ya(e){if(e===Wa)throw Error(a(174));return e}function Ka(e,t){switch(Ti(qa,t),Ti(Xa,e),Ti(Ga,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Mi(Ga),Ti(Ga,t)}function Za(){Mi(Ga),Mi(Xa),Mi(qa)}function Ja(e){Ya(qa.current);var t=Ya(Ga.current),n=le(t,e.type);t!==n&&(Ti(Xa,e),Ti(Ga,n))}function $a(e){Xa.current===e&&(Mi(Ga),Mi(Xa))}var Qa=Ei(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,ao=0,oo=null,so=null,lo=null,co=!1,uo=!1,ho=0,po=0;function fo(){throw Error(a(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(ao=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Qo:es,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(a(301));o+=1,lo=so=null,t.updateQueue=null,ro.current=ts,e=n(r,i)}while(uo)}if(ro.current=$o,t=null!==so&&null!==so.next,ao=0,lo=so=oo=null,co=!1,t)throw Error(a(300));return e}function vo(){var e=0!==ho;return ho=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function yo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=yo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,c=null,u=o;do{var d=u.lane;if((ao&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=r):c=c.next=h,oo.lanes|=d,Dl|=d}u=u.next}while(null!==u&&u!==o);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(ys=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Dl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=yo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(ys=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Eo(e,t){var n=oo,r=yo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,ys=!0),r=r.queue,Lo(No.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,To.bind(null,n,r,i,t),void 0,null),null===Cl)throw Error(a(349));0!==(30&ao)||Mo(n,t,i)}return i}function Mo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&Ao(e)}function No(e,t,n){return n(function(){Co(t)&&Ao(e)})}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ao(e){var t=Ra(e,1);null!==t&&tc(t,e,1,-1)}function jo(e){var t=xo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return yo().memoizedState}function ko(e,t,n,r){var i=xo();oo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Ro(e,t,n,r){var i=yo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Po(t,n,a,r))}oo.flags|=e,i.memoizedState=Po(1|t,n,a,r)}function Do(e,t){return ko(8390656,8,e,t)}function Lo(e,t){return Ro(2048,8,e,t)}function Io(e,t){return Ro(4,2,e,t)}function Uo(e,t){return Ro(4,4,e,t)}function Fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4,4,Fo.bind(null,t,e),n)}function zo(){}function Ho(e,t){var n=yo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vo(e,t){var n=yo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t,n){return 0===(21&ao)?(e.baseState&&(e.baseState=!1,ys=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),oo.lanes|=n,Dl|=n,e.baseState=!0),t)}function Go(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{yt=n,io.transition=r}}function Xo(){return yo().memoizedState}function qo(e,t,n){var r=ec(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ko(e))Zo(t,n);else if(null!==(n=ka(e,t,n,r))){tc(n,e,r,Ql()),Jo(n,t,r)}}function Yo(e,t,n){var r=ec(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ko(e))Zo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Oa(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=ka(e,t,i,r))&&(tc(n,e,r,i=Ql()),Jo(n,t,r))}}function Ko(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Zo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xt(e,n)}}var $o={readContext:ja,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Qo={readContext:ja,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:ja,useEffect:Do,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4194308,4,Fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return ko(4,2,e,t)},useMemo:function(e,t){var n=xo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:jo,useDebugValue:zo,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Go.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=xo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Cl)throw Error(a(349));0!==(30&ao)||Mo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Do(No.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=xo(),t=Cl.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Zi&~(1<<32-ot(Zi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:ja,useCallback:Ho,useContext:ja,useEffect:Lo,useImperativeHandle:Bo,useInsertionEffect:Io,useLayoutEffect:Uo,useMemo:Vo,useReducer:wo,useRef:Oo,useState:function(){return wo(bo)},useDebugValue:zo,useDeferredValue:function(e){return Wo(yo(),so.memoizedState,e)},useTransition:function(){return[wo(bo)[0],yo().memoizedState]},useMutableSource:So,useSyncExternalStore:Eo,useId:Xo,unstable_isNewReconciler:!1},ts={readContext:ja,useCallback:Ho,useContext:ja,useEffect:Lo,useImperativeHandle:Bo,useInsertionEffect:Io,useLayoutEffect:Uo,useMemo:Vo,useReducer:_o,useRef:Oo,useState:function(){return _o(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=yo();return null===so?t.memoizedState=e:Wo(t,so.memoizedState,e)},useTransition:function(){return[_o(bo)[0],yo().memoizedState]},useMutableSource:So,useSyncExternalStore:Eo,useId:Xo,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ql(),i=ec(e),a=Ua(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,i))&&(tc(t,e,i,r),Ba(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ql(),i=ec(e),a=Ua(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,i))&&(tc(t,e,i,r),Ba(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ql(),r=ec(e),i=Ua(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fa(e,i,r))&&(tc(t,e,r,n),Ba(t,e,r))}};function as(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function os(e,t,n){var r=!1,i=Ni,a=t.contextType;return"object"===typeof a&&null!==a?a=ja(a):(i=Oi(t)?ji:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ni),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},La(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ja(a):(a=Oi(t)?ji:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Ha(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Ua(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Wl=r),ds(0,t)},n}function fs(e,t,n){(n=Ua(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ua(-1,1)).tag=2,Fa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xs=b.ReactCurrentOwner,ys=!1;function bs(e,t,n,r){t.child=null===e?wa(t,null,n,r):ba(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Aa(t,i),r=go(e,t,n,r,a,i),n=vo(),null===e||ys?(ia&&n&&ea(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function _s(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=kc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Vs(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(ys=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Vs(e,t,i);0!==(131072&e.flags)&&(ys=!0)}}return Ts(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Ol,Pl),Pl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Ol,Pl),Pl|=r;return bs(e,t,i,n),t.child}function Ms(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Oi(n)?ji:Ci.current;return a=Pi(t,a),Aa(t,i),n=go(e,t,n,r,a,i),r=vo(),null===e||ys?(ia&&r&&ea(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function Ns(e,t,n,r,i){if(Oi(n)){var a=!0;Li(t)}else a=!1;if(Aa(t,i),null===t.stateNode)Hs(e,t),os(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ja(c):c=Pi(t,c=Oi(n)?ji:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,o,r,c),Da=!1;var h=t.memoizedState;o.state=h,Ha(t,r,o,i),l=t.memoizedState,s!==r||h!==l||Ai.current||Da?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Da||as(t,n,s,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ia(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ja(l):l=Pi(t,l=Oi(n)?ji:Ci.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,o,r,l),Da=!1,h=t.memoizedState,o.state=h,Ha(t,r,o,i);var f=t.memoizedState;s!==d||h!==f||Ai.current||Da?("function"===typeof p&&(rs(t,n,p,r),f=t.memoizedState),(c=Da||as(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,a,i)}function Cs(e,t,n,r,i,a){Ms(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ii(t,n,!1),Vs(e,t,a);r=t.stateNode,xs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&Ii(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Ka(e,t.containerInfo)}function js(e,t,n,r,i){return pa(),fa(i),t.flags|=256,bs(e,t,n,r),t.child}var Ps,Os,ks,Rs={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,n){var r,i=t.pendingProps,o=Qa.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(Qa,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Dc(l,i,0,null),e=Rc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(n),t.memoizedState=Rs,e):Is(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=us(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Dc({mode:"visible",children:r.children},i,0,null),(o=Rc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ba(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=Rs,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Us(e,t,s,r=us(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),ys||l){if(null!==(r=Cl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ra(e,i),tc(r,e,i,-1))}return fc(),Us(e,t,s,r=us(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(qi[Yi++]=Zi,qi[Yi++]=Ji,qi[Yi++]=Ki,Zi=e.id,Ji=e.overflow,Ki=t),t=Is(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=Rc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ds(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Rs,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Is(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&fa(r),ba(t,e.child,null,n),(e=Is(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ca(e.return,t,n)}function Bs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=Qa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(Qa,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bs(t,!0,n,null,a);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Oi(t.type)&&ki(),Gs(t),null;case 3:return r=t.stateNode,Za(),Mi(Ai),Mi(Ci),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ac(aa),aa=null))),Gs(t),null;case 5:$a(t);var i=Ya(qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gs(t),null}if(e=Ya(Ga.current),da(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Z(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in xe(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":X(r),Q(r,o,!0);break;case"textarea":X(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,Ps(e,t),t.stateNode=e;e:{switch(l=ye(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Fr(Dr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Z(e,r),i=K(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=I({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in xe(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&y(e,o,u,l))}switch(n){case"input":X(e),Q(e,r,!1);break;case"textarea":X(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)ks(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(qa.current),Ya(Ga.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Mi(Qa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),pa(),t.flags|=98560,o=!1;else if(o=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),o=!1}else null!==aa&&(ac(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Qa.current)?0===kl&&(kl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Za(),null===e&&Hr(t.stateNode.containerInfo),Gs(t),null;case 10:return Na(t.type._context),Gs(t),null;case 19:if(Mi(Qa),null===(o=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ws(o,!1);else{if(0!==kl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Qa,1&Qa.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zl&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Gs(t),null}else 2*Je()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=Qa.current,Ti(Qa,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function qs(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&ki(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Za(),Mi(Ai),Mi(Ci),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $a(t),null;case 13:if(Mi(Qa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Mi(Qa),null;case 4:return Za(),null;case 10:return Na(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Ga.current);var a,o=null;switch(n){case"input":i=K(e,i),r=K(e,r),o=[];break;case"select":i=I({},i,{value:void 0}),r=I({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(u in xe(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},ks=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Ks=!1,Zs="function"===typeof WeakSet?WeakSet:Set,Js=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function Qs(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var el=!1;function tl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Qs(t,n,a)}i=i.next}while(i!==r)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function sl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(sl(e,t,n),e=e.sibling;null!==e;)sl(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,ul=!1;function dl(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ks||$s(n,t);case 6:var r=cl,i=ul;cl=null,dl(e,t,n),ul=i,null!==(cl=r)&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(ul?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ht(e)):li(cl,n.stateNode));break;case 4:r=cl,i=ul,cl=n.stateNode.containerInfo,ul=!0,dl(e,t,n),cl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Qs(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ks&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,dl(e,t,n),Ks=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach(function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,ul=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===cl)throw Error(a(160));hl(o,s,i),cl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&r){try{tl(3,e,e.return),nl(3,e)}catch(g){Sc(e,e.return,g)}try{tl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:fl(t,e),gl(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(fl(t,e),gl(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),ye(l,s);var u=ye(l,o);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):y(i,d,h,u)}switch(l){case"input":$(i,o);break;case"textarea":ae(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(fl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(fl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Je())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(u=Ks)||d,fl(t,e),Ks=u):fl(t,e),gl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(h=Js=d;null!==Js;){switch(f=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:tl(4,p,p.return);break;case 1:$s(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:$s(p,p.return);break;case 22:if(null!==p.memoizedState){bl(h);continue}}null!==f?(f.return=p,Js=f):bl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),gl(e),4&r&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ll(e,ol(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;sl(e,ol(e),o);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Js=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ks;s=Ys;var c=Ks;if(Ys=o,(Ks=l)&&!c)for(Js=i;null!==Js;)l=(o=Js).child,22===o.tag&&null!==o.memoizedState?wl(i):null!==l?(l.return=o,Js=l):wl(i);for(;null!==a;)Js=a,xl(a,t,n),a=a.sibling;Js=i,Ys=s,Ks=c}yl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):yl(e)}}function yl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||nl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ks)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(a(163))}Ks||512&t.flags&&rl(t)}catch(p){Sc(t,t.return,p)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function bl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var a=t.return;try{rl(t)}catch(l){Sc(t,a,l)}break;case 5:var o=t.return;try{rl(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var _l,Sl=Math.ceil,El=b.ReactCurrentDispatcher,Ml=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,Nl=0,Cl=null,Al=null,jl=0,Pl=0,Ol=Ei(0),kl=0,Rl=null,Dl=0,Ll=0,Il=0,Ul=null,Fl=null,Bl=0,zl=1/0,Hl=null,Vl=!1,Wl=null,Gl=null,Xl=!1,ql=null,Yl=0,Kl=0,Zl=null,Jl=-1,$l=0;function Ql(){return 0!==(6&Nl)?Je():-1!==Jl?Jl:Jl=Je()}function ec(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==jl?jl&-jl:null!==ma.transition?(0===$l&&($l=mt()),$l):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function tc(e,t,n,r){if(50<Kl)throw Kl=0,Zl=null,Error(a(185));vt(e,n,r),0!==(2&Nl)&&e===Cl||(e===Cl&&(0===(2&Nl)&&(Ll|=n),4===kl&&oc(e,jl)),nc(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(zl=Je()+500,Fi&&Hi()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Cl?jl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Fi=!0,zi(e)}(sc.bind(null,e)):zi(sc.bind(null,e)),oi(function(){0===(6&Nl)&&Hi()}),n=null;else{switch(bt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Jl=-1,$l=0,0!==(6&Nl))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Cl?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Nl;Nl|=2;var o=pc();for(Cl===e&&jl===t||(Hl=null,zl=Je()+500,dc(e,t));;)try{vc();break}catch(l){hc(e,l)}Ta(),El.current=o,Nl=i,null!==Al?t=0:(Cl=null,jl=0,t=kl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ic(e,i))),1===t)throw n=Rl,dc(e,0),oc(e,r),nc(e,Je()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=ft(e))&&(r=o,t=ic(e,o))),1===t))throw n=Rl,dc(e,0),oc(e,r),nc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Fl,Hl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Ql(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Fl,Hl),t);break}bc(e,Fl,Hl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Fl,Hl),r);break}bc(e,Fl,Hl);break;default:throw Error(a(329))}}}return nc(e,Je()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Fl,Fl=n,null!==t&&ac(t)),e}function ac(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function oc(e,t){for(t&=~Il,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Nl))throw Error(a(327));wc();var t=ht(e,0);if(0===(1&t))return nc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Rl,dc(e,0),oc(e,t),nc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Fl,Hl),nc(e,Je()),null}function lc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(zl=Je()+500,Fi&&Hi())}}function cc(e){null!==ql&&0===ql.tag&&0===(6&Nl)&&wc();var t=Nl;Nl|=1;var n=Tl.transition,r=yt;try{if(Tl.transition=null,yt=1,e)return e()}finally{yt=r,Tl.transition=n,0===(6&(Nl=t))&&Hi()}}function uc(){Pl=Ol.current,Mi(Ol)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ki();break;case 3:Za(),Mi(Ai),Mi(Ci),no();break;case 5:$a(r);break;case 4:Za();break;case 13:case 19:Mi(Qa);break;case 10:Na(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Cl=e,Al=e=Oc(e.current,null),jl=Pl=t,kl=0,Rl=null,Il=Ll=Dl=0,Fl=Ul=null,null!==Pa){for(t=0;t<Pa.length;t++)if(null!==(r=(n=Pa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Pa=null}return e}function hc(e,t){for(;;){var n=Al;try{if(Ta(),ro.current=$o,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(ao=0,lo=so=oo=null,uo=!1,ho=0,Ml.current=null,null===n||null===n.return){kl=1,Rl=t,Al=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ms(o,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(o,u,t),fc();break e}c=Error(a(426))}else if(ia&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),fa(cs(c,l));break e}}o=c=cs(c,l),4!==kl&&(kl=2),null===Ul?Ul=[o]:Ul.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,za(o,ps(0,c,t));break e;case 1:l=c;var x=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof x.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gl||!Gl.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,za(o,fs(o,l,t));break e}}o=o.return}while(null!==o)}yc(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=$o,null===e?$o:e}function fc(){0!==kl&&3!==kl&&2!==kl||(kl=4),null===Cl||0===(268435455&Dl)&&0===(268435455&Ll)||oc(Cl,jl)}function mc(e,t){var n=Nl;Nl|=2;var r=pc();for(Cl===e&&jl===t||(Hl=null,dc(e,t));;)try{gc();break}catch(i){hc(e,i)}if(Ta(),Nl=n,El.current=r,null!==Al)throw Error(a(261));return Cl=null,jl=0,kl}function gc(){for(;null!==Al;)xc(Al)}function vc(){for(;null!==Al&&!Ke();)xc(Al)}function xc(e){var t=_l(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?yc(e):Al=t,Ml.current=null}function yc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Pl)))return void(Al=n)}else{if(null!==(n=qs(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return kl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===kl&&(kl=5)}function bc(e,t,n){var r=yt,i=Tl.transition;try{Tl.transition=null,yt=1,function(e,t,n,r){do{wc()}while(null!==ql);if(0!==(6&Nl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Cl&&(Al=Cl=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Cc(tt,function(){return wc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var s=yt;yt=1;var l=Nl;Nl|=4,Ml.current=null,function(e,t){if(ei=Wt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=s),p===o&&++d===r&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=el,el=!1}(e,n),ml(n,e),fr(ti),Wt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ze(),Nl=l,yt=s,Tl.transition=o}else e.current=n;if(Xl&&(Xl=!1,ql=e,Yl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&wc(),o=e.pendingLanes,0!==(1&o)?e===Zl?Kl++:(Kl=0,Zl=e):Kl=0,Hi()}(e,t,n,r)}finally{Tl.transition=i,yt=r}return null}function wc(){if(null!==ql){var e=bt(Yl),t=Tl.transition,n=yt;try{if(Tl.transition=null,yt=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Yl=0,0!==(6&Nl))throw Error(a(331));var i=Nl;for(Nl|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:tl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Js=h;else for(;null!==Js;){var p=(d=Js).sibling,f=d.return;if(il(d),d===u){Js=null;break}if(null!==p){p.return=f,Js=p;break}Js=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:tl(9,o,o.return)}var x=o.sibling;if(null!==x){x.return=o.return,Js=x;break e}Js=o.return}}var y=e.current;for(Js=y;null!==Js;){var b=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Js=b;else e:for(s=y;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(_){Sc(l,l.return,_)}if(l===s){Js=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Js=w;break e}Js=l.return}}if(Nl=i,Hi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{yt=n,Tl.transition=t}}return!1}function _c(e,t,n){e=Fa(e,t=ps(0,t=cs(n,t),1),1),t=Ql(),null!==e&&(vt(e,1,t),nc(e,t))}function Sc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Fa(t,e=fs(t,e=cs(n,e),1),1),e=Ql(),null!==t&&(vt(t,1,e),nc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Ql(),e.pingedLanes|=e.suspendedLanes&n,Cl===e&&(jl&n)===n&&(4===kl||3===kl&&(130023424&jl)===jl&&500>Je()-Bl?dc(e,0):Il|=n),nc(e,t)}function Mc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=Ql();null!==(e=Ra(e,t))&&(vt(e,t,n),nc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Mc(e,n)}function Cc(e,t){return qe(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function kc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Pc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Rc(n.children,i,o,t);case E:s=8,i|=8;break;case M:return(e=jc(12,n,t,2|i)).elementType=M,e.lanes=o,e;case A:return(e=jc(13,n,t,i)).elementType=A,e.lanes=o,e;case j:return(e=jc(19,n,t,i)).elementType=j,e.lanes=o,e;case k:return Dc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case N:s=9;break e;case C:s=11;break e;case P:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=jc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Rc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Ic(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,r,i,a,o,s,l){return e=new Uc(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=jc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(a),e}function Bc(e){if(!e)return Ni;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Di(e,n,t)}return t}function zc(e,t,n,r,i,a,o,s,l){return(e=Fc(n,r,!0,e,0,a,0,s,l)).context=Bc(null),n=e.current,(a=Ua(r=Ql(),i=ec(n))).callback=void 0!==t&&null!==t?t:null,Fa(n,a,i),e.current.lanes=i,vt(e,i,r),nc(e,r),e}function Hc(e,t,n,r){var i=t.current,a=Ql(),o=ec(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ua(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fa(i,t,o))&&(tc(e,i,o,a),Ba(e,i,o)),o}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ys=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ys=!1,function(e,t,n){switch(t.tag){case 3:As(t),pa();break;case 5:Ja(t);break;case 1:Oi(t.type)&&Li(t);break;case 4:Ka(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(_a,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(Qa,1&Qa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ls(e,t,n):(Ti(Qa,1&Qa.current),null!==(e=Vs(e,t,n))?e.sibling:null);Ti(Qa,1&Qa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Qa,Qa.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Vs(e,t,n)}(e,t,n);ys=0!==(131072&e.flags)}else ys=!1,ia&&0!==(1048576&t.flags)&&Qi(t,Xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Aa(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,La(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Ns(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=_s(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ns(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ia(e,t),Ha(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=js(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=js(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Vs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ms(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Ls(e,t,n);case 4:return Ka(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ba(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ti(_a,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ai.current){t=Vs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ua(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ca(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ca(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Aa(t,n),r=r(i=ja(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),_s(e,t,r,i=ns(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Hs(e,t),t.tag=1,Oi(r)?(e=!0,Li(t)):e=!1,Aa(t,n),os(t,r,i),ls(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function $c(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Vc(o);s.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Vc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[fi]=o.current,Hr(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Vc(l);s.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fi]=l.current,Hr(8===e.nodeType?e.parentNode:e),cc(function(){Hc(t,l,n,r)}),l}(n,t,e,i,r);return Vc(o)}Yc.prototype.render=qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Hc(e,t,null,null)},Yc.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){Hc(null,e,null,null)}),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kt.length&&0!==t&&t<kt[n].priority;n++);kt.splice(n,0,e),0===n&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(xt(t,1|n),nc(t,Je()),0===(6&Nl)&&(zl=Je()+500,Hi()))}break;case 13:cc(function(){var t=Ra(e,1);if(null!==t){var n=Ql();tc(t,e,1,n)}}),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Ra(e,134217728);if(null!==t)tc(t,e,134217728,Ql());Gc(e,134217728)}},St=function(e){if(13===e.tag){var t=ec(e),n=Ra(e,t);if(null!==n)tc(n,e,t,Ql());Gc(e,t)}},Et=function(){return yt},Mt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},_e=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));q(r),$(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=cc;var Qc={usingClientEntryPoint:!1,Events:[yi,bi,wi,Te,Ne,lc]},eu={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:eu.bundleType,version:eu.version,rendererPackageName:eu.rendererPackageName,rendererConfig:eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:eu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{it=nu.inject(tu),at=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(a(299));var n=!1,r="",i=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Hr(8===e.nodeType?e.parentNode:e),new qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(a(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,s),e[fi]=t.current,Hr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(a(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(cc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2761(e){e.exports=function(e){return null!=e&&"object"==typeof e}},2777(e,t,n){var r=n(5193),i=n(2761),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},2866(e,t,n){var r=n(2969);e.exports=function(e){return function(t){return r(t,e)}}},2929(e,t,n){var r=n(6552).Uint8Array;e.exports=r},2969(e,t,n){var r=n(5324),i=n(914);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[i(t[n++])];return n&&n==a?e:void 0}},3028(e){e.exports=function(e,t){return function(n){return e(t(n))}}},3097(e,t,n){var r=n(2969);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},3204(e,t,n){var r=n(3343),i=n(2777),a=n(4052),o=n(4543),s=n(9194),l=n(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),u=!n&&i(e),d=!n&&!u&&o(e),h=!n&&!u&&!d&&l(e),p=n||u||d||h,f=p?r(e.length,String):[],m=f.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},3211(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},3218(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3279(e){e.exports=function(e){return e}},3331(e,t,n){var r=n(9676),i=n(929),a=n(7303);e.exports=function(e){return function(t,n,o){return o&&"number"!=typeof o&&i(t,n,o)&&(n=o=void 0),t=a(t),void 0===n?(n=t,t=0):n=a(n),o=void 0===o?t<n?1:-1:a(o),r(t,n,o,e)}}},3343(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},3366(e,t,n){var r=n(7894),i=n(9057);e.exports=function(e,t){return null!=e&&i(e,t,r)}},3411(e,t,n){var r=n(149),i=n(9096),a=n(8883),o=n(4052);e.exports=function(e,t){return(o(e)?r:a)(e,i(t,3))}},3440(e,t,n){var r=n(6552)["__core-js_shared__"];e.exports=r},3538(e,t,n){var r=n(755),i=n(3411);e.exports=function(e,t){return r(i(e,t),1)}},3668(e,t,n){var r=n(8902),i=n(2587),a=n(8114);e.exports=function(e,t,n,o,s,l){var c=1&n,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var h=l.get(e),p=l.get(t);if(h&&p)return h==t&&p==e;var f=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++f<u;){var v=e[f],x=t[f];if(o)var y=c?o(x,v,f,t,e,l):o(v,x,f,e,t,l);if(void 0!==y){if(y)continue;m=!1;break}if(g){if(!i(t,function(e,t){if(!a(g,t)&&(v===e||s(v,e,n,o,l)))return g.push(t)})){m=!1;break}}else if(v!==x&&!s(v,x,n,o,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},3713(e,t,n){var r=n(6140),i=n(1143),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},3781(e,t,n){var r=n(9417),i=n(8673);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var a=t[n],o=e[a];t[n]=[a,o,r(o)]}return t}},3871(e){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}},3892(e){e.exports=function(e){return this.__data__.has(e)}},3932(e,t,n){var r=n(396),i=n(2866),a=n(2597),o=n(914);e.exports=function(e){return a(e)?r(o(e)):i(e)}},3950(e,t,n){var r=n(6686),i=n(4757),a=n(801),o=Math.max,s=Math.min;e.exports=function(e,t,n){var l,c,u,d,h,p,f=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var n=l,r=c;return l=c=void 0,f=t,d=e.apply(r,n)}function y(e){var n=e-p;return void 0===p||n>=t||n<0||g&&e-f>=u}function b(){var e=i();if(y(e))return w(e);h=setTimeout(b,function(e){var n=t-(e-p);return g?s(n,u-(e-f)):n}(e))}function w(e){return h=void 0,v&&l?x(e):(l=c=void 0,d)}function _(){var e=i(),n=y(e);if(l=arguments,c=this,p=e,n){if(void 0===h)return function(e){return f=e,h=setTimeout(b,t),m?x(e):d}(p);if(g)return clearTimeout(h),h=setTimeout(b,t),x(p)}return void 0===h&&(h=setTimeout(b,t)),d}return t=a(t)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?o(a(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),_.cancel=function(){void 0!==h&&clearTimeout(h),f=0,l=p=c=h=void 0},_.flush=function(){return void 0===h?d:w(i())},_}},4020(e){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},4052(e){var t=Array.isArray;e.exports=t},4065(e){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},4079(e,t,n){var r=n(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)}),t});e.exports=o},4160(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},4190(e,t,n){var r=n(1340);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4202(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function x(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=v.prototype;var b=y.prototype=new x;b.constructor=y,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:S.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+C(l,0):a,w(o)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),A(o,t,i,"",function(e){return e})):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var u=a+C(s=e[c],c);l+=A(s,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=A(s=s.value,t,i,u=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},k={transition:null},R={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:k,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=y,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},4258(e,t,n){var r=n(5906)();e.exports=r},4262(e,t,n){var r=n(8895),i=n(4052);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},4391(e,t,n){"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4416(e,t,n){var r=n(8902),i=n(5866),a=n(1558),o=n(8114),s=n(8182),l=n(2074);e.exports=function(e,t,n){var c=-1,u=i,d=e.length,h=!0,p=[],f=p;if(n)h=!1,u=a;else if(d>=200){var m=t?null:s(e);if(m)return l(m);h=!1,u=o,f=new r}else f=t?[]:p;e:for(;++c<d;){var g=e[c],v=t?t(g):g;if(g=n||0!==g?g:0,h&&v===v){for(var x=f.length;x--;)if(f[x]===v)continue e;t&&f.push(v),p.push(g)}else u(f,v,n)||(f!==p&&f.push(v),p.push(g))}return p}},4543(e,t,n){e=n.nmd(e);var r=n(6552),i=n(14),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,s=o&&o.exports===a?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},4545(e,t,n){var r=n(7160);e.exports=function(){this.__data__=new r,this.size=0}},4552(e,t,n){var r=n(9812),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var i=o.call(e);return r&&(t?e[s]=n:delete e[s]),i}},4597(e,t,n){var r=n(2587),i=n(9096),a=n(2165),o=n(4052),s=n(929);e.exports=function(e,t,n){var l=o(e)?r:a;return n&&s(e,t,n)&&(t=void 0),l(e,i(t,3))}},4657(e){e.exports=function(e,t){return null==e?void 0:e[t]}},4664(e,t,n){var r=n(4258),i=n(8673);e.exports=function(e,t){return e&&r(e,t,i)}},4746(e,t,n){var r=n(5652);e.exports=function(e,t){var n=!0;return r(e,function(e,r,i){return n=!!t(e,r,i)}),n}},4757(e,t,n){var r=n(6552);e.exports=function(){return r.Date.now()}},4816(e,t,n){var r=n(7251),i=n(7159),a=n(438),o=n(9394),s=n(6874);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},5029(e,t,n){var r=n(6989),i=n(3097),a=n(3366),o=n(2597),s=n(9417),l=n(1310),c=n(914);e.exports=function(e,t){return o(e)&&s(t)?l(c(e),t):function(n){var o=i(n,e);return void 0===o&&o===t?a(n,e):r(t,o,3)}}},5043(e,t,n){"use strict";e.exports=n(4202)},5051(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},5173(e,t,n){e.exports=n(1497)()},5193(e,t,n){var r=n(6913),i=n(2761);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},5204(e,t,n){var r=n(7937)(n(6552),"Map");e.exports=r},5268(e,t,n){var r=n(9160);e.exports=function(e){return r(e)&&e!=+e}},5295(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},5324(e,t,n){var r=n(4052),i=n(2597),a=n(4079),o=n(1069);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:a(o(e))}},5387(e,t,n){var r=n(7937)(n(6552),"Promise");e.exports=r},5428(e,t,n){var r=n(6913),i=n(6173),a=n(2761),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[r(e)]}},5538(e,t,n){var r=n(7160),i=n(4545),a=n(793),o=n(7760),s=n(3892),l=n(6788);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=s,c.prototype.set=l,e.exports=c},5575(e,t,n){var r=n(7937)(Object,"create");e.exports=r},5636(e,t,n){var r=n(1170),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=i(a.length-t,0),l=Array(s);++o<s;)l[o]=a[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=a[o];return c[t]=n(l),r(e,this,c)}}},5647(e,t,n){var r=n(3279),i=n(5636),a=n(6350);e.exports=function(e,t){return a(i(e,t,r),e+"")}},5652(e,t,n){var r=n(4664),i=n(6516)(r);e.exports=i},5654(e,t,n){var r=n(7937),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},5713(e){e.exports=function(){}},5752(e,t,n){var r=n(9395),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,o,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var d=u;d--;){var h=c[d];if(!(l?h in t:i.call(t,h)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++d<u;){var v=e[h=c[d]],x=t[h];if(a)var y=l?a(x,v,h,t,e,s):a(v,x,h,e,t,s);if(!(void 0===y?v===x||o(v,x,n,a,s):y)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var b=e.constructor,w=t.constructor;b==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(m=!1)}return s.delete(e),s.delete(t),m}},5797(e,t,n){var r=n(4816);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},5816(e){e.exports=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}},5866(e,t,n){var r=n(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},5893(e,t,n){var r=n(6599);e.exports=function(e,t,n){for(var i=-1,a=e.criteria,o=t.criteria,s=a.length,l=n.length;++i<s;){var c=r(a[i],o[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},5906(e){e.exports=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}},5967(e){e.exports=function(e){return e.split("")}},5990(e,t,n){var r=n(3028)(Object.getPrototypeOf,Object);e.exports=r},6095(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},6140(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},6173(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6179(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6311(e){var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6350(e,t,n){var r=n(8325),i=n(6578)(r);e.exports=i},6361(e,t,n){var r=n(6913),i=n(2761);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},6378(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case h:case p:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case f:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isFragment=function(e){return v(e)===a}},6399(e,t,n){var r=n(5538),i=n(3668),a=n(9987),o=n(5752),s=n(6924),l=n(4052),c=n(4543),u=n(1268),d="[object Arguments]",h="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var x=l(e),y=l(t),b=x?h:s(e),w=y?h:s(t),_=(b=b==d?p:b)==p,S=(w=w==d?p:w)==p,E=b==w;if(E&&c(e)){if(!c(t))return!1;x=!0,_=!1}if(E&&!_)return v||(v=new r),x||u(e)?i(e,t,n,m,g,v):a(e,t,b,n,m,g,v);if(!(1&n)){var M=_&&f.call(e,"__wrapped__"),T=S&&f.call(t,"__wrapped__");if(M||T){var N=M?e.value():e,C=T?t.value():t;return v||(v=new r),g(N,C,n,m,v)}}return!!E&&(v||(v=new r),o(e,t,n,m,g,v))}},6516(e,t,n){var r=n(6571);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var a=n.length,o=t?a:-1,s=Object(n);(t?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},6532(e,t,n){var r=n(5538),i=n(6989);e.exports=function(e,t,n,a){var o=n.length,s=o,l=!a;if(null==e)return!s;for(e=Object(e);o--;){var c=n[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=n[o])[0],d=e[u],h=c[1];if(l&&c[2]){if(void 0===d&&!(u in e))return!1}else{var p=new r;if(a)var f=a(d,h,u,e,t,p);if(!(void 0===f?i(h,d,3,a,p):f))return!1}}return!0}},6552(e,t,n){var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},6571(e,t,n){var r=n(1629),i=n(6173);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},6578(e){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),a=16-(i-r);if(r=i,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},6599(e,t,n){var r=n(9841);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,a=e===e,o=r(e),s=void 0!==t,l=null===t,c=t===t,u=r(t);if(!l&&!u&&!o&&e>t||o&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!a)return 1;if(!i&&!o&&!u&&e<t||u&&n&&a&&!i&&!o||l&&n&&a||!s&&a||!c)return-1}return 0}},6600(e,t,n){var r=n(7937)(n(6552),"WeakMap");e.exports=r},6604(e,t,n){var r=n(3331)();e.exports=r},6686(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},6704(e){e.exports=function(e){return this.__data__.has(e)}},6745(e,t,n){var r=n(9742),i=n(61),a=n(3279);e.exports=function(e){return e&&e.length?r(e,a,i):void 0}},6788(e,t,n){var r=n(7160),i=n(5204),a=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}},6832(e,t,n){e=n.nmd(e);var r=n(7105),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s},6874(e,t,n){var r=n(2622);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},6913(e,t,n){var r=n(9812),i=n(4552),a=n(6095),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},6924(e,t,n){var r=n(7685),i=n(5204),a=n(5387),o=n(2070),s=n(6600),l=n(6913),c=n(6996),u="[object Map]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",f="[object DataView]",m=c(r),g=c(i),v=c(a),x=c(o),y=c(s),b=l;(r&&b(new r(new ArrayBuffer(1)))!=f||i&&b(new i)!=u||a&&b(a.resolve())!=d||o&&b(new o)!=h||s&&b(new s)!=p)&&(b=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return f;case g:return u;case v:return d;case x:return h;case y:return p}return t}),e.exports=b},6954(e,t,n){var r=n(1629),i=n(7857),a=n(6686),o=n(6996),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?h:s).test(o(e))}},6989(e,t,n){var r=n(6399),i=n(2761);e.exports=function e(t,n,a,o,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,a,o,e,s))}},6996(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},7002(e,t,n){var r=n(5295),i=n(4746),a=n(9096),o=n(4052),s=n(929);e.exports=function(e,t,n){var l=o(e)?r:i;return n&&s(e,t,n)&&(t=void 0),l(e,a(t,3))}},7105(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},7116(e,t,n){var r=n(9812),i=n(2777),a=n(4052),o=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(o&&e&&e[o])}},7159(e,t,n){var r=n(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},7160(e,t,n){var r=n(7563),i=n(9935),a=n(4190),o=n(1946),s=n(1714);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},7234(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>a(l,n))c<i&&0>a(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>a(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,x="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,k(_);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,x(T),T=-1),f=!0;var a=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,E=!1,M=null,T=-1,N=5,C=-1;function A(){return!(t.unstable_now()-C<N)}function j(){if(null!==M){var e=t.unstable_now();C=e;var n=!0;try{n=M(!0,e)}finally{n?S():(E=!1,M=null)}}else E=!1}if("function"===typeof y)S=function(){y(j)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=j,S=function(){O.postMessage(null)}}else S=function(){v(j,0)};function k(e){M=e,E||(E=!0,S())}function R(e,n){T=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,k(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(u,e),null===r(c)&&e===r(u)&&(g?(x(T),T=-1):g=!0,R(w,a-o))):(e.sortIndex=s,n(c,e),m||f||(m=!0,k(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7251(e,t,n){var r=n(8724),i=n(7160),a=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},7283(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,a),!0;case 6:return u.fn.call(u.context,t,r,i,a,o),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},7303(e,t,n){var r=n(801),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},7424(e,t,n){var r=n(755),i=n(2536),a=n(5647),o=n(929),s=a(function(e,t){if(null==e)return[];var n=t.length;return n>1&&o(e,t[0],t[1])?t=[]:n>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])});e.exports=s},7498(e){e.exports=function(e,t){return e>t}},7529(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}},7563(e){e.exports=function(){this.__data__=[],this.size=0}},7574(e){e.exports=function(e){return function(t){return e(t)}}},7615(e,t,n){var r=n(5575);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},7676(e,t,n){var r=n(8189),i=n(6311),a=n(9115),o=n(1069);e.exports=function(e){return function(t){t=o(t);var n=i(t)?a(t):void 0,s=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return s[e]()+l}}},7685(e,t,n){var r=n(7937)(n(6552),"DataView");e.exports=r},7760(e){e.exports=function(e){return this.__data__.get(e)}},7828(e){e.exports=function(){return[]}},7857(e,t,n){var r=n(3440),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},7894(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},7937(e,t,n){var r=n(6954),i=n(4657);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},7950(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8114(e){e.exports=function(e,t){return e.has(t)}},8182(e,t,n){var r=n(2070),i=n(5713),a=n(2074),o=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=o},8189(e,t,n){var r=n(3871);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},8210(e,t,n){var r;!function(){"use strict";var i,a=1e9,o={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",d=Math.floor,h=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=1e7,m=9007199254740991,g=d(1286742750677284.5),v={};function x(e,t){var n,r,i,a,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),s?C(t,h):t;if(c=e.d,u=t.d,o=e.e,i=t.e,c=c.slice(),a=o-i){for(a<0?(r=c,a=-a,l=u.length):(r=u,i=o,l=c.length),a>(l=(o=Math.ceil(h/7))>l?o+1:l+1)&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for((l=c.length)-(a=u.length)<0&&(a=l,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/f|0,c[a]%=f;for(n&&(c.unshift(n),++i),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=i,s?C(t,h):t}function y(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function b(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(a+=M(n)),a+=r;(n=7-(r=(o=e[t])+"").length)&&(a+=M(n))}else if(0===o)return"0";for(;o%10===0;)o/=10;return a+o}v.absoluteValue=v.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},v.comparedTo=v.cmp=function(e){var t,n,r,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(t=0,n=(r=a.d.length)<(i=e.d.length)?r:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1},v.decimalPlaces=v.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},v.dividedBy=v.div=function(e){return w(this,new this.constructor(e))},v.dividedToIntegerBy=v.idiv=function(e){var t=this.constructor;return C(w(this,new t(e),0,1),t.precision)},v.equals=v.eq=function(e){return!this.cmp(e)},v.exponent=function(){return S(this)},v.greaterThan=v.gt=function(e){return this.cmp(e)>0},v.greaterThanOrEqualTo=v.gte=function(e){return this.cmp(e)>=0},v.isInteger=v.isint=function(){return this.e>this.d.length-2},v.isNegative=v.isneg=function(){return this.s<0},v.isPositive=v.ispos=function(){return this.s>0},v.isZero=function(){return 0===this.s},v.lessThan=v.lt=function(e){return this.cmp(e)<0},v.lessThanOrEqualTo=v.lte=function(e){return this.cmp(e)<1},v.logarithm=v.log=function(e){var t,n=this,r=n.constructor,a=r.precision,o=a+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(i))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(s=!1,t=w(T(n,o),T(e,o),o),s=!0,C(t,a))},v.minus=v.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?A(t,e):x(t,(e.s=-e.s,e))},v.modulo=v.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(s=!1,t=w(n,e,0,1).times(e),s=!0,n.minus(t)):C(new r(n),i)},v.naturalExponential=v.exp=function(){return _(this)},v.naturalLogarithm=v.ln=function(){return T(this)},v.negated=v.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},v.plus=v.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?x(t,e):A(t,(e.s=-e.s,e))},v.precision=v.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=S(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},v.squareRoot=v.sqrt=function(){var e,t,n,r,i,a,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=S(c),s=!1,0==(i=Math.sqrt(+c))||i==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=d((e+1)/2)-(e<0||e%2),r=new u(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(i.toString()),i=o=(n=u.precision)+3;;)if(r=(a=r).plus(w(c,a,o+2)).times(.5),b(a.d).slice(0,o)===(t=b(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&"4999"==t){if(C(a,n+1,0),a.times(a).eq(c)){r=a;break}}else if("9999"!=t)break;o+=4}return s=!0,C(r,n)},v.times=v.mul=function(e){var t,n,r,i,a,o,l,c,u,d=this,h=d.constructor,p=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(c=p.length)<(u=m.length)&&(a=p,p=m,m=a,o=c,c=u,u=o),a=[],r=o=c+u;r--;)a.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)l=a[i]+m[r]*p[i-r-1]+t,a[i--]=l%f|0,t=l/f|0;a[i]=(a[i]+t)%f|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,s?C(e,h.precision):e},v.toDecimalPlaces=v.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(y(e,0,a),void 0===t?t=r.rounding:y(t,0,8),C(n,e+S(n)+1,t))},v.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=j(r,!0):(y(e,0,a),void 0===t?t=i.rounding:y(t,0,8),n=j(r=C(new i(r),e+1,t),!0,e+1)),n},v.toFixed=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?j(i):(y(e,0,a),void 0===t?t=o.rounding:y(t,0,8),n=j((r=C(new o(i),e+S(i)+1,t)).abs(),!1,e+S(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},v.toInteger=v.toint=function(){var e=this,t=e.constructor;return C(new t(e),S(e)+1,t.rounding)},v.toNumber=function(){return+this},v.toPower=v.pow=function(e){var t,n,r,a,o,c,u=this,h=u.constructor,p=+(e=new h(e));if(!e.s)return new h(i);if(!(u=new h(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(i))return u;if(r=h.precision,e.eq(i))return C(u,r);if(c=(t=e.e)>=(n=e.d.length-1),o=u.s,c){if((n=p<0?-p:p)<=m){for(a=new h(i),t=Math.ceil(r/7+4),s=!1;n%2&&P((a=a.times(u)).d,t),0!==(n=d(n/2));)P((u=u.times(u)).d,t);return s=!0,e.s<0?new h(i).div(a):C(a,r)}}else if(o<0)throw Error(l+"NaN");return o=o<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,s=!1,a=e.times(T(u,r+12)),s=!0,(a=_(a)).s=o,a},v.toPrecision=function(e,t){var n,r,i=this,o=i.constructor;return void 0===e?r=j(i,(n=S(i))<=o.toExpNeg||n>=o.toExpPos):(y(e,1,a),void 0===t?t=o.rounding:y(t,0,8),r=j(i=C(new o(i),e,t),e<=(n=S(i))||n<=o.toExpNeg,e)),r},v.toSignificantDigits=v.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(y(e,1,a),void 0===t?t=n.rounding:y(t,0,8)),C(new n(this),e,t)},v.toString=v.valueOf=v.val=v.toJSON=function(){var e=this,t=S(e),n=e.constructor;return j(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%f|0,r=n/f|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*f+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,a,o){var s,c,u,d,h,p,m,g,v,x,y,b,w,_,E,M,T,N,A=r.constructor,j=r.s==i.s?1:-1,P=r.d,O=i.d;if(!r.s)return new A(r);if(!i.s)throw Error(l+"Division by zero");for(c=r.e-i.e,T=O.length,E=P.length,g=(m=new A(j)).d=[],u=0;O[u]==(P[u]||0);)++u;if(O[u]>(P[u]||0)&&--c,(b=null==a?a=A.precision:o?a+(S(r)-S(i))+1:a)<0)return new A(0);if(b=b/7+2|0,u=0,1==T)for(d=0,O=O[0],b++;(u<E||d)&&b--;u++)w=d*f+(P[u]||0),g[u]=w/O|0,d=w%O|0;else{for((d=f/(O[0]+1)|0)>1&&(O=e(O,d),P=e(P,d),T=O.length,E=P.length),_=T,x=(v=P.slice(0,T)).length;x<T;)v[x++]=0;(N=O.slice()).unshift(0),M=O[0],O[1]>=f/2&&++M;do{d=0,(s=t(O,v,T,x))<0?(y=v[0],T!=x&&(y=y*f+(v[1]||0)),(d=y/M|0)>1?(d>=f&&(d=f-1),1==(s=t(h=e(O,d),v,p=h.length,x=v.length))&&(d--,n(h,T<p?N:O,p))):(0==d&&(s=d=1),h=O.slice()),(p=h.length)<x&&h.unshift(0),n(v,h,x),-1==s&&(s=t(O,v,T,x=v.length))<1&&(d++,n(v,T<x?N:O,x)),x=v.length):0===s&&(d++,v=[0]),g[u++]=d,s&&v[0]?v[x++]=P[_]||0:(v=[P[_]],x=1)}while((_++<E||void 0!==v[0])&&b--)}return g[0]||g.shift(),m.e=c,C(m,o?a+S(m)+1:a)}}();function _(e,t){var n,r,a,o,l,c=0,d=0,p=e.constructor,f=p.precision;if(S(e)>16)throw Error(u+S(e));if(!e.s)return new p(i);for(null==t?(s=!1,l=f):l=t,o=new p(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(l+=Math.log(h(2,d))/Math.LN10*2+5|0,n=r=a=new p(i),p.precision=l;;){if(r=C(r.times(e),l),n=n.times(++c),b((o=a.plus(w(r,n,l))).d).slice(0,l)===b(a.d).slice(0,l)){for(;d--;)a=C(a.times(a),l);return p.precision=f,null==t?(s=!0,C(a,f)):a}a=o}}function S(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function E(e,t,n){if(t>e.LN10.sd())throw s=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return C(new e(e.LN10),t)}function M(e){for(var t="";e--;)t+="0";return t}function T(e,t){var n,r,a,o,c,u,d,h,p,f=1,m=e,g=m.d,v=m.constructor,x=v.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(i))return new v(0);if(null==t?(s=!1,h=x):h=t,m.eq(10))return null==t&&(s=!0),E(v,h);if(h+=10,v.precision=h,r=(n=b(g)).charAt(0),o=S(m),!(Math.abs(o)<15e14))return d=E(v,h+2,x).times(o+""),m=T(new v(r+"."+n.slice(1)),h-10).plus(d),v.precision=x,null==t?(s=!0,C(m,x)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=b((m=m.times(e)).d)).charAt(0),f++;for(o=S(m),r>1?(m=new v("0."+n),o++):m=new v(r+"."+n.slice(1)),u=c=m=w(m.minus(i),m.plus(i),h),p=C(m.times(m),h),a=3;;){if(c=C(c.times(p),h),b((d=u.plus(w(c,new v(a),h))).d).slice(0,h)===b(u.d).slice(0,h))return u=u.times(2),0!==o&&(u=u.plus(E(v,h+2,x).times(o+""))),u=w(u,new v(f),h),v.precision=x,null==t?(s=!0,C(u,x)):u;u=d,a+=2}}function N(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=d(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),s&&(e.e>g||e.e<-g))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function C(e,t,n){var r,i,a,o,l,c,p,m,v=e.d;for(o=1,a=v[0];a>=10;a/=10)o++;if((r=t-o)<0)r+=7,i=t,p=v[m=0];else{if((m=Math.ceil((r+1)/7))>=(a=v.length))return e;for(p=a=v[m],o=1;a>=10;a/=10)o++;i=(r%=7)-7+o}if(void 0!==n&&(l=p/(a=h(10,o-i-1))%10|0,c=t<0||void 0!==v[m+1]||p%a,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?i>0?p/h(10,o-i):0:v[m-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return c?(a=S(e),v.length=1,t=t-a-1,v[0]=h(10,(7-t%7)%7),e.e=d(-t/7)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(0==r?(v.length=m,a=1,m--):(v.length=m+1,a=h(10,7-r),v[m]=i>0?(p/h(10,o-i)%h(10,i)|0)*a:0),c)for(;;){if(0==m){(v[0]+=a)==f&&(v[0]=1,++e.e);break}if(v[m]+=a,v[m]!=f)break;v[m--]=0,a=1}for(r=v.length;0===v[--r];)v.pop();if(s&&(e.e>g||e.e<-g))throw Error(u+S(e));return e}function A(e,t){var n,r,i,a,o,l,c,u,d,h,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),s?C(t,m):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r){for((d=o<0)?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),o>(i=Math.max(Math.ceil(m/7),l)+2)&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for((d=(i=c.length)<(l=h.length))&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){d=c[i]<h[i];break}o=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>o;){if(c[--i]<h[i]){for(a=i;a&&0===c[--a];)c[a]=f-1;--c[a],c[i]+=f}c[i]-=h[i]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,s?C(t,m):t):new p(0)}function j(e,t,n){var r,i=S(e),a=b(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+M(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+M(-i-1)+a,n&&(r=n-o)>0&&(a+=M(r))):i>=o?(a+=M(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+M(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=M(r))),e.s<0?"-"+a:a}function P(e,t){if(e.length>t)return e.length=t,!0}function O(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(d(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}o=function e(t){var n,r,i;function a(e){var t=this;if(!(t instanceof a))return new a(e);if(t.constructor=a,e instanceof a)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):N(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);N(t,e)}if(a.prototype=v,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=e,a.config=a.set=O,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(o),o.default=o.Decimal=o,i=new o(1),void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},8259(e,t,n){var r=n(5797);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},8325(e,t,n){var r=n(2541),i=n(5654),a=n(3279),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=o},8468(e,t,n){var r=n(5816),i=n(644),a=n(4020);e.exports=function(e,t,n){return t===t?a(e,t,n):r(e,i,n)}},8541(e,t,n){var r=n(9812),i=n(149),a=n(4052),o=n(9841),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},8673(e,t,n){var r=n(3204),i=n(3713),a=n(6571);e.exports=function(e){return a(e)?r(e):i(e)}},8724(e,t,n){var r=n(7615),i=n(5051),a=n(2154),o=n(8734),s=n(2662);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},8734(e,t,n){var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},8853(e,t,n){"use strict";e.exports=n(7234)},8883(e,t,n){var r=n(5652),i=n(6571);e.exports=function(e,t){var n=-1,a=i(e)?Array(e.length):[];return r(e,function(e,r,i){a[++n]=t(e,r,i)}),a}},8895(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},8902(e,t,n){var r=n(4816),i=n(6179),a=n(6704);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},8990(e,t,n){var r=n(9995)(n(2520));e.exports=r},9057(e,t,n){var r=n(5324),i=n(2777),a=n(4052),o=n(9194),s=n(6173),l=n(914);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,d=!1;++c<u;){var h=l(t[c]);if(!(d=null!=e&&n(e,h)))break;e=e[h]}return d||++c!=u?d:!!(u=null==e?0:e.length)&&s(u)&&o(h,u)&&(a(e)||i(e))}},9062(e,t,n){"use strict";e.exports=n(6378)},9096(e,t,n){var r=n(9256),i=n(5029),a=n(3279),o=n(4052),s=n(3932);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):r(e):s(e)}},9115(e,t,n){var r=n(5967),i=n(6311),a=n(715);e.exports=function(e){return i(e)?a(e):r(e)}},9140(e,t,n){var r=n(7303);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},9160(e,t,n){var r=n(6913),i=n(2761);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},9194(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},9256(e,t,n){var r=n(6532),i=n(3781),a=n(1310);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},9394(e,t,n){var r=n(2622);e.exports=function(e){return r(this,e).has(e)}},9395(e,t,n){var r=n(4262),i=n(9621),a=n(8673);e.exports=function(e){return r(e,a,i)}},9417(e,t,n){var r=n(6686);e.exports=function(e){return e===e&&!r(e)}},9621(e,t,n){var r=n(7529),i=n(7828),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),function(t){return a.call(e,t)}))}:i;e.exports=s},9676(e){var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,a){for(var o=-1,s=n(t((r-e)/(i||1)),0),l=Array(s);s--;)l[a?s:++o]=e,e+=i;return l}},9686(e){e.exports=function(e){return null==e}},9742(e,t,n){var r=n(9841);e.exports=function(e,t,n){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=t(o);if(null!=s&&(void 0===l?s===s&&!r(s):n(s,l)))var l=s,c=o}return c}},9812(e,t,n){var r=n(6552).Symbol;e.exports=r},9841(e,t,n){var r=n(6913),i=n(2761);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},9853(e,t,n){var r=n(6989);e.exports=function(e,t){return r(e,t)}},9889(e,t,n){var r=n(3950),i=n(6686);e.exports=function(e,t,n){var a=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),r(e,t,{leading:a,maxWait:t,trailing:o})}},9935(e,t,n){var r=n(1340),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},9987(e,t,n){var r=n(9812),i=n(2929),a=n(3211),o=n(3668),s=n(4160),l=n(2074),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var f=1&r;if(p||(p=l),e.size!=t.size&&!f)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var g=o(p(e),p(t),r,c,d,h);return h.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},9995(e,t,n){var r=n(9096),i=n(6571),a=n(8673);e.exports=function(e){return function(t,n,o){var s=Object(t);if(!i(t)){var l=r(n,3);t=a(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,o);return c>-1?s[l?t[c]:c]:void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>Wa,scaleDiverging:()=>_d,scaleDivergingLog:()=>Sd,scaleDivergingPow:()=>Md,scaleDivergingSqrt:()=>Td,scaleDivergingSymlog:()=>Ed,scaleIdentity:()=>gl,scaleImplicit:()=>Ha,scaleLinear:()=>ml,scaleLog:()=>Ml,scaleOrdinal:()=>Va,scalePoint:()=>Xa,scalePow:()=>Rl,scaleQuantile:()=>Xl,scaleQuantize:()=>ql,scaleRadial:()=>Il,scaleSequential:()=>md,scaleSequentialLog:()=>gd,scaleSequentialPow:()=>xd,scaleSequentialQuantile:()=>bd,scaleSequentialSqrt:()=>yd,scaleSequentialSymlog:()=>vd,scaleSqrt:()=>Dl,scaleSymlog:()=>Al,scaleThreshold:()=>Yl,scaleTime:()=>dd,scaleUtc:()=>hd,tickFormat:()=>pl});var t=n(5043),r=n(4391);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d=["color","size","strokeWidth","absoluteStrokeWidth","children"],h=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),p=(e,n)=>{const r=(0,t.forwardRef)((r,i)=>{let{color:a="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:p,children:f}=r,m=c(r,d);return(0,t.createElement)("svg",l(l({ref:i},u),{},{width:o,height:o,stroke:a,strokeWidth:p?24*Number(s)/Number(o):s,className:"lucide lucide-".concat(h(e))},m),[...n.map(e=>{let[n,r]=e;return(0,t.createElement)(n,r)}),...(Array.isArray(f)?f:[f])||[]])});return r.displayName="".concat(e),r},f=p("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),m=p("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),g=p("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),v=p("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),x=p("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),y=p("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),b=p("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),w=p("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),_=p("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),S=p("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),E=p("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var M=n(579);const T=e=>{let{onComplete:n}=e;const[r,i]=(0,t.useState)(!1);return(0,M.jsx)("div",{onClick:()=>{i(!0),setTimeout(n,1e3)},className:"fixed inset-0 z-[999] bg-[#000000] flex flex-col items-center justify-center cursor-pointer transition-opacity duration-1000 ".concat(r?"opacity-0 pointer-events-none":"opacity-100"),children:(0,M.jsxs)("div",{className:"relative flex flex-col items-center group",children:[(0,M.jsxs)("div",{className:"w-64 h-64 border border-blue-900/40 rounded-full flex items-center justify-center relative mb-10 overflow-hidden bg-black shadow-[0_0_50px_rgba(0,100,255,0.1)]",children:[(0,M.jsx)("div",{className:"absolute inset-0 opacity-20 animate-[spin_20s_linear_infinite]",style:{backgroundImage:"radial-gradient(circle, #1e3a8a 1px, transparent 1px)",backgroundSize:"20px 20px"}}),(0,M.jsx)("div",{className:"w-48 h-48 rounded-full bg-gradient-to-br from-cyan-900 to-blue-900 opacity-50 blur-xl animate-pulse absolute"}),(0,M.jsx)("div",{className:"absolute inset-0 border-t-2 border-cyan-500 rounded-full animate-[spin_3s_linear_infinite]"}),(0,M.jsx)("div",{className:"absolute inset-4 border-b-2 border-yellow-500/80 rounded-full animate-[spin_5s_linear_infinite_reverse]"}),(0,M.jsx)("div",{className:"relative z-10 flex flex-col items-center",children:(0,M.jsx)(x,{className:"text-cyan-400 fill-cyan-400/20",size:48})})]}),(0,M.jsx)("h1",{className:"text-5xl text-white tracking-[0.15em] font-bold mb-3 font-display",children:"WELL-TEGRA"}),(0,M.jsx)("h2",{className:"text-2xl text-yellow-500 tracking-[0.3em] font-bold mb-8 uppercase font-mono",children:"The Brahan Vertex Engine"}),(0,M.jsx)("div",{className:"px-12 py-4 bg-blue-900/20 border border-cyan-500/40 text-cyan-400 font-bold uppercase text-[10px] tracking-[0.2em]",children:"Initiate Sequence"})]})})},N=p("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),C=p("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),A=p("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),j=p("Cable",[["path",{d:"M4 9a2 2 0 0 1-2-2V5h6v2a2 2 0 0 1-2 2Z",key:"1s6oa5"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M7 5V3",key:"1t1388"}],["path",{d:"M19 15V6.5a3.5 3.5 0 0 0-7 0v11a3.5 3.5 0 0 1-7 0V9",key:"1ytv72"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M22 19h-6v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2Z",key:"sdz6o8"}]]),P=p("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),O=p("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),k=p("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),R=p("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),D=p("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),L=p("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),I=p("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),U=p("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),F=()=>{const[e,n]=(0,t.useState)(0),[r,i]=(0,t.useState)(50),[a]=(0,t.useState)(500),[o]=(0,t.useState)(800),[s,l]=(0,t.useState)(500),[c,u]=(0,t.useState)(800),[d,h]=(0,t.useState)("KICK"),[p,f]=(0,t.useState)(20),[m,g]=(0,t.useState)("STABLE"),[v,x]=(0,t.useState)("Maintain Constant Bottom Hole Pressure (BHP)"),[y,b]=(0,t.useState)("System Standby: Awaiting Driller Input"),[w,_]=(0,t.useState)("text-slate-400"),S=1200,E=(0,t.useRef)(0),T=(0,t.useRef)(50);(0,t.useEffect)(()=>{if("CIRCULATING"!==d)return;const t=e-E.current,n=r-T.current;if(Math.abs(t)>0||Math.abs(n)>0){let i="",a="text-slate-400";n>0?(i="Opening Choke: Reducing Backpressure",s<S?(i+=" \u26a0\ufe0f CAUTION: BHP already low!",a="text-red-400"):(i+=" (Lowering DPP)",a="text-blue-400")):n<0&&(i="Closing Choke: Increasing Backpressure",s>1400?(i+=" \u26a0\ufe0f CAUTION: BHP already high!",a="text-red-400"):(i+=" (Raising DPP)",a="text-amber-400")),t>0&&(i="Throttle Up: Increasing System Pressure"),t<0&&(i="Throttle Down: Decreasing System Pressure"),b(i),_(a),E.current=e,T.current=r}},[e,r,s,d]),(0,t.useEffect)(()=>{if("CIRCULATING"!==d)return;const t=setInterval(()=>{let t=0,n=0;l(n=>(t=n+.08*(a+12*e-.4*(100-r)-n),t)),u(t=>(n=t+.12*(o+8*e-3.5*(100-r)-t),n)),f(e=>{let r=0,i="BHP Steady",a="STABLE";t<1050?(r=1.8,i="UNDERBALANCED: Influx rate increasing!",a="RISING"):n>1800?(r=2.5,i="SHOE CRITICAL: Formation fracture imminent!",a="RISING"):t>=1150&&t<=1250?(r=-1.2,i="OPTIMAL: Constant BHP maintained.",a="FALLING"):t>1400?(r=.5,i="OVER-PRESSURE: Excessive mud gradient.",a="RISING"):(i="ADJUSTING: Target 1200 PSI on DPP.",a="STABLE");const o=Math.min(100,Math.max(0,e+r));return o>=100?(h("FAILED"),x("BLOWOUT: Surface equipment failure or formation breach."),100):(x(i),g(a),o)})},120);return()=>clearInterval(t)},[d,e,r,a,o]);return(0,M.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 animate-in fade-in duration-1000",children:[(0,M.jsxs)("header",{className:"flex flex-col md:flex-row items-center justify-between border-b border-slate-800 pb-8 gap-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,M.jsxs)("span",{className:"px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-[0.4em] border transition-colors ".concat("FAILED"===d?"bg-red-500/20 text-red-500 border-red-500":"bg-red-500/10 text-red-500 border-red-500/20"),children:["Simulator Environment: ","FAILED"===d?"CRITICAL FAILURE":"Level 4 High Fidelity"]}),(0,M.jsx)("div",{className:"w-2 h-2 rounded-full animate-pulse ".concat("CIRCULATING"===d?"bg-emerald-500":"bg-amber-500")})]}),(0,M.jsx)("h2",{className:"text-5xl font-black text-white italic uppercase tracking-tighter",children:"Driller's Console"})]}),(0,M.jsxs)("div",{className:"flex gap-4",children:[(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-2xl text-right min-w-[120px]",children:[(0,M.jsx)("span",{className:"text-[8px] font-black text-slate-500 uppercase block",children:"Pit Gain"}),(0,M.jsx)("span",{className:"text-xl font-bold ".concat("FAILED"===d?"text-red-600 animate-pulse":"text-red-500"),children:"FAILED"===d?"UNCONTROLLED":"+12.4 bbl"})]}),"FAILED"===d?(0,M.jsx)("button",{onClick:()=>{l(500),u(800),f(20),h("KICK"),x("Maintain Constant Bottom Hole Pressure (BHP)"),b("System Standby: Awaiting Driller Input"),_("text-slate-400"),E.current=0,T.current=50,n(0),i(50)},className:"bg-red-500 text-white px-8 py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-red-400 transition-all shadow-xl active:scale-95",children:"Restart Session"}):(0,M.jsx)("button",{onClick:()=>h("CIRCULATING"),disabled:"CIRCULATING"===d,className:"px-8 py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all shadow-xl active:scale-95 ".concat("CIRCULATING"===d?"bg-slate-800 text-slate-500 cursor-not-allowed":"bg-amber-500 text-slate-950 hover:bg-amber-400"),children:"CIRCULATING"===d?"Pumps Active":"Engage Mud Pumps"})]})]}),(0,M.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[(0,M.jsxs)("div",{className:"md:col-span-7 bg-slate-950 border border-slate-800 p-8 rounded-[2.5rem] relative overflow-hidden group shadow-2xl",children:[(0,M.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-red-500/5 -mr-32 -mt-32 rounded-full blur-[100px] pointer-events-none"}),(0,M.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,M.jsxs)("div",{className:"space-y-4",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsxs)("span",{className:"text-[11px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2",children:["Blowout Risk Index","RISING"===m&&(0,M.jsx)("span",{className:"text-red-500 animate-bounce",children:"\u25b2"}),"FALLING"===m&&(0,M.jsx)("span",{className:"text-emerald-500 animate-bounce",children:"\u25bc"})]}),(0,M.jsxs)("span",{className:"text-sm font-mono font-bold ".concat(p>70?"text-red-500":"text-slate-400"),children:[Math.round(p),"%"]})]}),(0,M.jsx)("div",{className:"h-5 w-full bg-slate-900 rounded-full overflow-hidden border border-slate-800 p-1",children:(0,M.jsx)("div",{className:"h-full transition-all duration-300 rounded-full ".concat(p>80?"bg-red-600 shadow-[0_0_15px_rgba(220,38,38,0.5)]":p>50?"bg-amber-500":"bg-emerald-500"),style:{width:"".concat(p,"%")}})})]}),(0,M.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 p-6 rounded-3xl flex flex-col items-center justify-center text-center",children:[(0,M.jsx)("span",{className:"text-[9px] font-black text-slate-600 uppercase tracking-[0.3em] mb-2",children:"Primary Barrier Status"}),(0,M.jsx)("p",{className:"text-2xl font-black italic tracking-tight ".concat(p>70?"text-red-400":"text-white"),children:v})]})]})]}),(0,M.jsxs)("div",{className:"md:col-span-5 bg-slate-900 border border-slate-800 p-8 rounded-[2.5rem] shadow-xl relative group",children:[(0,M.jsx)("div",{className:"absolute top-0 left-0 p-8 text-4xl opacity-[0.03] font-black italic group-hover:opacity-10 transition-opacity",children:"DATA"}),(0,M.jsxs)("div",{className:"relative z-10 flex flex-col h-full",children:[(0,M.jsxs)("span",{className:"text-[10px] font-black text-blue-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[(0,M.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"}),"Action Advisory Terminal"]}),(0,M.jsx)("div",{className:"flex-1 flex items-center justify-center bg-slate-950/50 border border-slate-800 rounded-2xl p-6",children:(0,M.jsx)("p",{className:"text-base font-black uppercase italic tracking-tighter leading-tight text-center ".concat(w),children:y})}),(0,M.jsx)("p",{className:"text-[8px] text-slate-500 font-bold uppercase mt-4 text-center tracking-widest italic opacity-50",children:"Physics response latency: 120ms"})]})]})]}),(0,M.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,M.jsxs)("div",{className:"lg:col-span-8 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,M.jsxs)("div",{className:"bg-slate-900 border-4 border-slate-800 rounded-[3rem] p-10 flex flex-col items-center justify-center relative overflow-hidden group shadow-2xl transition-all hover:border-slate-700",children:[(0,M.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-blue-500/5 to-transparent"}),(0,M.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,M.jsx)("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.5em]",children:"Drill Pipe (DPP)"}),"CIRCULATING"===d&&(0,M.jsx)("span",{className:"text-xs ".concat(s>S?"text-amber-500":"text-red-500"),children:s>S?"\u25b2":"\u25bc"})]}),(0,M.jsx)("div",{className:"text-7xl font-black tracking-tighter mb-2 font-mono transition-colors ".concat(Math.abs(s-S)<70?"text-emerald-400":s<1e3?"text-red-400":"text-white"),children:Math.round(s)}),(0,M.jsx)("div",{className:"text-[10px] font-bold text-blue-400 uppercase",children:"PSI (Lbs/SqIn)"}),(0,M.jsx)("div",{className:"w-full h-2 bg-slate-800 rounded-full mt-8 relative",children:(0,M.jsx)("div",{className:"absolute top-0 left-0 h-full bg-blue-500 transition-all duration-300 rounded-full shadow-[0_0_8px_rgba(59,130,246,0.5)]",style:{width:"".concat(s/3e3*100,"%")}})})]}),(0,M.jsxs)("div",{className:"bg-slate-900 border-4 border-slate-800 rounded-[3rem] p-10 flex flex-col items-center justify-center relative overflow-hidden group shadow-2xl transition-all hover:border-slate-700",children:[(0,M.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-amber-500/5 to-transparent"}),(0,M.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,M.jsx)("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.5em]",children:"Casing (CP)"}),"CIRCULATING"===d&&(0,M.jsx)("span",{className:"text-xs ".concat(c>1500?"text-red-500 animate-pulse":"text-slate-600"),children:c>1200?"\u25b2":"\u2501"})]}),(0,M.jsx)("div",{className:"text-7xl font-black tracking-tighter mb-2 font-mono transition-colors ".concat(c>1800?"text-red-500":"text-white"),children:Math.round(c)}),(0,M.jsx)("div",{className:"text-[10px] font-bold text-amber-500 uppercase",children:"PSI (Lbs/SqIn)"}),(0,M.jsx)("div",{className:"w-full h-2 bg-slate-800 rounded-full mt-8 relative",children:(0,M.jsx)("div",{className:"absolute top-0 left-0 h-full bg-amber-500 transition-all duration-300 rounded-full shadow-[0_0_8px_rgba(245,158,11,0.5)]",style:{width:"".concat(c/3e3*100,"%")}})})]}),(0,M.jsxs)("div",{className:"col-span-1 sm:col-span-2 bg-slate-950/80 border border-slate-800 p-8 rounded-[2.5rem] backdrop-blur-xl relative overflow-hidden group",children:[(0,M.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-grid-slate-100/[0.03] bg-[length:20px_20px]"}),(0,M.jsx)("h4",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-6 relative z-10",children:"Formation Profile: Transient Pressure Response"}),(0,M.jsx)("div",{className:"h-32 w-full flex items-end gap-1 px-4 relative z-10",children:Array.from({length:40}).map((e,t)=>(0,M.jsx)("div",{className:"flex-1 rounded-t-sm transition-all duration-500 ".concat(p>80?"bg-red-500/40":"bg-amber-500/20"),style:{height:"".concat(20+25*Math.sin(.4*t+.005*s)+s/120,"%")}},t))})]})]}),(0,M.jsxs)("div",{className:"lg:col-span-4 space-y-6",children:[(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-[2.5rem] shadow-2xl space-y-10",children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,M.jsx)("span",{className:"text-[10px] font-black text-white uppercase tracking-widest italic",children:"Pump Throttle"}),(0,M.jsxs)("span",{className:"text-sm font-black text-amber-500",children:[e," SPM"]})]}),(0,M.jsx)("input",{type:"range",min:"0",max:"100",value:e,disabled:"FAILED"===d,onChange:e=>n(Number(e.target.value)),className:"w-full accent-amber-500 bg-slate-800 h-3 rounded-full appearance-none cursor-pointer ".concat("FAILED"===d?"opacity-30":"")})]}),(0,M.jsxs)("div",{className:"space-y-6",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)("span",{className:"text-[10px] font-black text-white uppercase tracking-widest italic",children:"Remote Choke Control"}),(0,M.jsxs)("span",{className:"text-sm font-black text-blue-400",children:[r,"% OPEN"]})]}),(0,M.jsxs)("div",{className:"relative h-48 w-full bg-slate-950 rounded-3xl border border-slate-800 flex items-center justify-center group",children:[(0,M.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2 w-1 h-32 bg-slate-800"}),(0,M.jsx)("input",{type:"range",min:"0",max:"100",value:r,disabled:"FAILED"===d,onChange:e=>i(Number(e.target.value)),className:"absolute inset-0 opacity-0 cursor-pointer",style:{transform:"rotate(-90deg)"}}),(0,M.jsx)("div",{className:"relative w-14 h-14 bg-white rounded-xl shadow-[0_0_30px_rgba(255,255,255,0.2)] flex items-center justify-center transition-all group-hover:scale-105 active:scale-95",style:{transform:"translateY(".concat(50-r,"px)")},children:(0,M.jsx)("div",{className:"w-1.5 h-7 bg-slate-950 rounded-full"})})]}),(0,M.jsxs)("div",{className:"flex justify-between text-[8px] font-black text-slate-600 uppercase tracking-widest px-4",children:[(0,M.jsx)("span",{children:"Full Closed"}),(0,M.jsx)("span",{children:"Full Open"})]})]})]}),(0,M.jsxs)("div",{className:"bg-slate-950/40 p-8 rounded-[2rem] border border-slate-800 shadow-inner",children:[(0,M.jsx)("h5",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-4",children:"Well Control Method"}),(0,M.jsxs)("div",{className:"space-y-3",children:[(0,M.jsx)("button",{className:"w-full py-4 px-6 bg-slate-900 border border-slate-800 rounded-xl text-left text-[10px] font-black text-slate-400 uppercase tracking-tighter hover:text-white transition-all",children:"1. Driller's Method"}),(0,M.jsx)("button",{className:"w-full py-4 px-6 bg-slate-900 border border-slate-800 rounded-xl text-left text-[10px] font-black text-slate-400 uppercase tracking-tighter hover:text-white transition-all",children:"2. Wait and Weight"}),(0,M.jsx)("button",{className:"w-full py-4 px-6 bg-blue-500/20 border border-blue-500 text-blue-400 rounded-xl text-left text-[10px] font-black uppercase tracking-tighter",children:"3. Manual BHP Balance (Active)"})]})]})]})]}),(0,M.jsxs)("div",{className:"p-10 bg-blue-500/5 border border-blue-500/20 rounded-[3.5rem] flex flex-col md:flex-row items-center gap-10 group hover:border-blue-500/40 transition-colors",children:[(0,M.jsx)("div",{className:"w-20 h-20 bg-blue-500 rounded-3xl flex items-center justify-center text-4xl shadow-[0_0_30px_rgba(59,130,246,0.3)] shrink-0 group-hover:rotate-12 transition-transform",children:"\u26a0\ufe0f"}),(0,M.jsxs)("div",{className:"space-y-4",children:[(0,M.jsx)("h4",{className:"text-[11px] font-black text-blue-400 uppercase tracking-[0.5em]",children:"Active Scenario: Constant BHP Maintenance"}),(0,M.jsxs)("p",{className:"text-base text-slate-400 leading-relaxed font-medium",children:["You are managing a ",(0,M.jsx)("span",{className:"text-white font-bold italic",children:"12.4 bbl gas influx"}),". To keep the wellbore safe, you must maintain exactly ",(0,M.jsx)("span",{className:"text-white font-bold",children:"1200 PSI"})," on the Drill Pipe Pressure gauge. Use the Choke to manage backpressure as gas expands. ",(0,M.jsx)("span",{className:"text-red-400 font-bold uppercase italic",children:"Failure Criteria:"})," If Casing Pressure exceeds ",(0,M.jsx)("span",{className:"text-white",children:"1800 PSI"}),", you will fracture the formation, leading to an underground blowout."]})]})]})]})},B=[{id:"lot",category:"Formation Integrity & MAASP",title:"The Leak-Off Test (LOT)",problem:"Calculate the Maximum Allowable Mud Weight (MAMW) based on the test data.",data:{"Shoe Depth (TVD)":"4,000 ft","Test Mud Weight":"9.6 ppg","Surface Pressure @ Leak-Off":"1,200 psi"},correctAnswer:15.3,unit:"ppg",solution:(0,M.jsxs)("div",{className:"space-y-4 font-mono text-xs",children:[(0,M.jsxs)("div",{className:"p-4 bg-slate-950 rounded-xl border border-slate-800",children:[(0,M.jsx)("p",{className:"text-amber-500 font-black mb-2 uppercase tracking-widest",children:"Step 1: Convert pressure to ppg equivalent"}),(0,M.jsx)("code",{className:"text-slate-300",children:"Pressure / (TVD \xd7 0.052)"}),(0,M.jsx)("br",{}),(0,M.jsx)("code",{className:"text-white",children:"1,200 / (4,000 \xd7 0.052) = 5.769 ppg"})]}),(0,M.jsxs)("div",{className:"p-4 bg-slate-950 rounded-xl border border-slate-800",children:[(0,M.jsx)("p",{className:"text-amber-500 font-black mb-2 uppercase tracking-widest",children:"Step 2: Add Test Mud Weight"}),(0,M.jsx)("code",{className:"text-slate-300",children:"Test MW + Pressure Equivalent"}),(0,M.jsx)("br",{}),(0,M.jsx)("code",{className:"text-white",children:"9.6 + 5.769 = 15.369 ppg"})]}),(0,M.jsx)("p",{className:"text-emerald-500 font-bold italic",children:"*Result: 15.3 ppg (Always round down for safety)"})]})},{id:"maasp",category:"Formation Integrity & MAASP",title:"MAASP Calculation",problem:"Using the MAMW of 15.3 ppg, calculate the new MAASP when drilling with 11.5 ppg mud.",data:{MAMW:"15.3 ppg","Current Mud Weight":"11.5 ppg","Shoe Depth (TVD)":"4,000 ft"},correctAnswer:790,unit:"psi",solution:(0,M.jsxs)("div",{className:"space-y-4 font-mono text-xs",children:[(0,M.jsxs)("div",{className:"p-4 bg-slate-950 rounded-xl border border-slate-800",children:[(0,M.jsx)("p",{className:"text-amber-500 font-black mb-2 uppercase tracking-widest",children:"Step 1: Find the Mud Margin"}),(0,M.jsx)("code",{className:"text-slate-300",children:"MAMW - Current MW"}),(0,M.jsx)("br",{}),(0,M.jsx)("code",{className:"text-white",children:"15.3 - 11.5 = 3.8 ppg"})]}),(0,M.jsxs)("div",{className:"p-4 bg-slate-950 rounded-xl border border-slate-800",children:[(0,M.jsx)("p",{className:"text-amber-500 font-black mb-2 uppercase tracking-widest",children:"Step 2: Convert to PSI"}),(0,M.jsx)("code",{className:"text-slate-300",children:"Margin \xd7 0.052 \xd7 TVD"}),(0,M.jsx)("br",{}),(0,M.jsx)("code",{className:"text-white",children:"3.8 \xd7 0.052 \xd7 4,000 = 790.4 psi"})]}),(0,M.jsx)("p",{className:"text-emerald-500 font-bold italic",children:"Implication: Exceeding 790 psi risks breaking the shoe."})]})},{id:"icp",category:"Kill Sheet Parameters",title:"Initial Circulating Pressure (ICP)",problem:"A kick has been taken. Calculate the ICP for the kill operation.",data:{"SCR Pressure":"450 psi @ 30 SPM",SIDPP:"350 psi",SICP:"500 psi"},correctAnswer:800,unit:"psi",solution:(0,M.jsxs)("div",{className:"space-y-4 font-mono text-xs",children:[(0,M.jsxs)("div",{className:"p-4 bg-slate-950 rounded-xl border border-slate-800",children:[(0,M.jsx)("p",{className:"text-amber-500 font-black mb-2 uppercase tracking-widest",children:"Formula"}),(0,M.jsx)("code",{className:"text-slate-300",children:"ICP = SCR + SIDPP"}),(0,M.jsx)("br",{}),(0,M.jsx)("code",{className:"text-white",children:"450 + 350 = 800 psi"})]}),(0,M.jsx)("p",{className:"text-slate-400 italic font-medium",children:"Note: SICP is ignored. Drill pipe gauge is the BHP indicator."})]})},{id:"fcp",category:"Kill Sheet Parameters",title:"Final Circulating Pressure (FCP)",problem:"Calculate the pressure required once kill mud reaches the bit.",data:{"SCR Pressure":"450 psi","Original Mud Weight":"10.0 ppg","Kill Mud Weight":"12.0 ppg"},correctAnswer:540,unit:"psi",solution:(0,M.jsx)("div",{className:"space-y-4 font-mono text-xs",children:(0,M.jsxs)("div",{className:"p-4 bg-slate-950 rounded-xl border border-slate-800",children:[(0,M.jsx)("p",{className:"text-amber-500 font-black mb-2 uppercase tracking-widest",children:"Formula"}),(0,M.jsx)("code",{className:"text-slate-300",children:"FCP = SCR \xd7 (KMW / OMW)"}),(0,M.jsx)("br",{}),(0,M.jsx)("code",{className:"text-white",children:"450 \xd7 (12.0 / 10.0) = 540 psi"})]})})}],z=()=>{const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)(""),[a,o]=(0,t.useState)(!1),[s,l]=(0,t.useState)(null);return(0,M.jsxs)("div",{className:"max-w-6xl mx-auto space-y-12 animate-in fade-in duration-700",children:[(0,M.jsxs)("header",{className:"border-b border-slate-800 pb-12",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,M.jsx)("span",{className:"bg-amber-500/10 text-amber-500 border border-amber-500/20 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-[0.3em]",children:"Module: IADC/IWCF Exam Simulation"}),(0,M.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})]}),(0,M.jsxs)("h1",{className:"text-6xl font-black text-white tracking-tighter uppercase italic leading-none mb-6",children:["Technical ",(0,M.jsx)("span",{className:"text-slate-600",children:"Drills"})]}),(0,M.jsx)("p",{className:"text-slate-400 font-medium max-w-2xl text-lg",children:"Master high-stakes calculations from the Level 3/4 exam banks. Accuracy in pressure prediction is non-negotiable."})]}),(0,M.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[(0,M.jsxs)("div",{className:"lg:col-span-4 space-y-3",children:[(0,M.jsx)("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-4 mb-2",children:"Drill Categories"}),B.map(t=>(0,M.jsxs)("button",{onClick:()=>{n(t),o(!1),i(""),l(null)},className:"w-full p-6 rounded-2xl text-left transition-all border group relative ".concat((null===e||void 0===e?void 0:e.id)===t.id?"bg-amber-500 border-amber-500 shadow-xl shadow-amber-500/20":"bg-slate-900 border-slate-800 hover:border-slate-600"),children:[(0,M.jsx)("div",{className:"flex justify-between items-center mb-1",children:(0,M.jsx)("span",{className:"text-[8px] font-black uppercase tracking-widest ".concat((null===e||void 0===e?void 0:e.id)===t.id?"text-slate-950":"text-slate-500"),children:t.category})}),(0,M.jsx)("h4",{className:"text-sm font-black uppercase italic tracking-tighter leading-tight ".concat((null===e||void 0===e?void 0:e.id)===t.id?"text-slate-950":"text-white"),children:t.title})]},t.id)),(0,M.jsxs)("div",{className:"mt-8 p-6 bg-slate-900/40 rounded-3xl border border-slate-800",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,M.jsx)("span",{className:"text-xl",children:"\u26a0\ufe0f"}),(0,M.jsx)("span",{className:"text-[10px] font-black text-amber-500 uppercase tracking-widest",children:'The "Trap" Rule'})]}),(0,M.jsx)("p",{className:"text-[11px] text-slate-400 leading-relaxed italic",children:"Always check for unit consistency. 10 ppg mud at 1000 ft TVD is NOT 5200 psi. Remember the constant 0.052."})]})]}),(0,M.jsx)("div",{className:"lg:col-span-8",children:e?(0,M.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-8 duration-500",children:[(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-10 rounded-[3rem] shadow-2xl relative overflow-hidden",children:[(0,M.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-amber-500/5 -mr-32 -mt-32 rounded-full blur-[100px]"}),(0,M.jsx)("h3",{className:"text-3xl font-black text-white uppercase italic tracking-tighter mb-8",children:e.title}),(0,M.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-10",children:Object.entries(e.data).map(e=>{let[t,n]=e;return(0,M.jsxs)("div",{className:"p-4 bg-slate-950 border border-slate-800 rounded-2xl",children:[(0,M.jsx)("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest block mb-1",children:t}),(0,M.jsx)("span",{className:"text-xl font-black text-white italic",children:n})]},t)})}),(0,M.jsxs)("div",{className:"space-y-6",children:[(0,M.jsxs)("p",{className:"text-lg font-medium text-slate-300 leading-relaxed italic border-l-4 border-amber-500 pl-6",children:['"',e.problem,'"']}),(0,M.jsxs)("div",{className:"flex gap-4",children:[(0,M.jsxs)("div",{className:"flex-1 relative",children:[(0,M.jsx)("input",{type:"number",step:"0.1",value:r,onChange:e=>i(e.target.value),placeholder:"Enter value...",className:"w-full bg-slate-950 border-2 border-slate-800 p-6 rounded-2xl text-2xl font-black text-white italic placeholder:text-slate-800 focus:border-amber-500 focus:outline-none transition-all"}),(0,M.jsx)("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-[10px] font-black text-slate-600 uppercase tracking-widest",children:e.unit})]}),(0,M.jsx)("button",{onClick:()=>{if(!e)return;const t=parseFloat(r),n=Math.abs(t-e.correctAnswer)<.2;l(n),o(!0)},className:"bg-white text-slate-950 px-8 py-6 rounded-2xl font-black text-xs uppercase tracking-widest hover:bg-amber-500 transition-all active:scale-95 shadow-xl",children:"Verify"})]})]})]}),a&&(0,M.jsxs)("div",{className:"animate-in slide-in-from-bottom-8 duration-700 p-10 rounded-[3rem] border-2 shadow-2xl relative overflow-hidden ".concat(s?"bg-emerald-500/10 border-emerald-500/50":"bg-red-500/10 border-red-500/50"),children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsx)("span",{className:"text-4xl",children:s?"\u2705":"\u274c"}),(0,M.jsx)("h4",{className:"text-2xl font-black uppercase italic tracking-tighter ".concat(s?"text-emerald-400":"text-red-400"),children:s?"Calculation Accurate":"Structural Error in Logic"})]}),(0,M.jsxs)("div",{className:"bg-slate-950 px-4 py-2 rounded-xl border border-white/10",children:[(0,M.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mr-2",children:"Correct Answer:"}),(0,M.jsxs)("span",{className:"text-lg font-black text-white italic",children:[e.correctAnswer," ",e.unit]})]})]}),(0,M.jsxs)("div",{className:"bg-slate-900/60 p-8 rounded-[2rem] border border-white/5",children:[(0,M.jsx)("h5",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mb-6",children:"Engineering Solution Breakdown"}),e.solution]})]})]}):(0,M.jsxs)("div",{className:"h-full min-h-[500px] flex flex-col items-center justify-center p-12 bg-slate-900/20 border-2 border-dashed border-slate-800 rounded-[3.5rem] text-center opacity-40",children:[(0,M.jsx)("div",{className:"text-8xl mb-8",children:"\ud83d\udcdf"}),(0,M.jsx)("h4",{className:"text-3xl font-black text-white uppercase tracking-tighter italic mb-4",children:"Terminal Standby"}),(0,M.jsx)("p",{className:"text-slate-500 max-w-md text-lg font-medium",children:"Select a high-stakes calculation drill from the command menu to initiate simulation."})]})})]})]})},H=[{id:"m1",title:"Certification Architecture",objective:"Navigating the IADC/IWCF Regulatory Landscape.",lessons:[{id:"m1l1",title:"The Global Duopoly",duration:"15 min",content:"Comparative analysis of IADC (North American task-based) vs. IWCF (International engineering-based) accreditation paths. Understanding why the industry relies on these two pillars for competency assurance."},{id:"m1l2",title:"IOGP Report 476 Standards",duration:"20 min",content:"Deep dive into the five levels of competency: from Level 1 (Awareness) to Level 5 (Engineering & Well Design). Identifying your role and the specific legal liabilities associated with each tier."},{id:"m1l3",title:"The CR Number Ecosystem",duration:"10 min",content:"Your Candidate Registration (CR) number is a lifelong identifier. Learn how it tracks your assessment history, simulator scores, and recertification cycles across global drilling contractors."}]},{id:"m2",title:"Advanced Well Control Physics",objective:"Mastering transient wellbore phenomena and pressure regimes.",lessons:[{id:"m2l1",title:"Gas Solubility in OBM",duration:"30 min",content:'The physics of "Hidden Kicks". Understanding how gas dissolves into Oil-Based Mud at high pressure and remains undetectable by standard pit-level sensors until it reaches the bubble point near the surface.'},{id:"m2l2",title:"Transient Surge & Swab",duration:"25 min",content:"Managing piston effects during pipe movement. Calculating the impact of pipe velocity on bottom-hole pressure and the risk of induced formation fracture or influx."},{id:"m2l3",title:"Dynamic Kill Modeling",duration:"35 min",content:'Using OLGA and Drillbench logic to model non-steady state fluid dynamics. How to calculate pump rates required to "top-kill" a blowing well using friction as a pressure component.'}]},{id:"m3",title:"Digital Rig Operations",objective:"Interface mastery for modern offshore control rooms.",lessons:[{id:"m3l1",title:"Automated Kick Detection",duration:"20 min",content:'Exploring the SafeKick and Drillbench SafeInTime interfaces. Moving from manual "Flow Checks" to machine-learning assisted anomaly detection in return flow rates.'},{id:"m3l2",title:"Simulators & Human Factors",duration:"25 min",content:'Understanding IWCF "Role Reversal" in simulator testing. How modern assessments evaluate communication protocols (CRM) as strictly as they evaluate mechanical shut-in speed.'}]},{id:"m4",title:"Wellbore Integrity & Casing",objective:"Structural design of the wellbore conduit.",lessons:[{id:"m4l1",title:"The Hoop Stress Principle",duration:"25 min",content:"Understanding how internal and external pressures interact with steel casing. Calculating Burst, Collapse, and Tension safety factors for deepwater environments."},{id:"m4l2",title:"Casing Seat Selection",duration:"30 min",content:"Using the Pore Pressure / Fracture Gradient (PPFG) window to determine exactly where to set casing to prevent formation breakdown during drilling."}]},{id:"m5",title:"Zonal Isolation (Cementing)",objective:"Creating the permanent barrier behind the pipe.",lessons:[{id:"m5l1",title:"Primary Cementing Fluid Mechanics",duration:"20 min",content:"The science of mud displacement. How to ensure a 360-degree cement sheath to prevent annular gas migration after the well is completed."},{id:"m5l2",title:"BHP during Cementing",duration:"25 min",content:'Monitoring the hydrostatic transitions as slurry sets. Managing the risk of "loss of head" as the cement changes from liquid to solid state.'}]},{id:"m6",title:"Managed Pressure Drilling (MPD)",objective:"The closed-loop alternative to conventional drilling.",lessons:[{id:"m6l1",title:"The Micro-Flux Concept",duration:"30 min",content:"Detecting influxes measured in liters rather than barrels. How Coriolis flow meters and Automated Choke Manifolds maintain constant bottom-hole pressure within a narrow drilling window."},{id:"m6l2",title:"Back-pressure Hydraulics",duration:"25 min",content:"Using a Rotating Control Device (RCD) to apply surface back-pressure. Calculating the Equivalent Circulating Density (ECD) when the pumps are off."}]},{id:"m7",title:"Well Intervention & Workover",objective:"Managing the well lifecycle post-completion.",lessons:[{id:"m7l1",title:"Conveyance Methods",duration:"20 min",content:"A comparison of Slickline (mechanical), E-Line (data-driven), and Coiled Tubing (hydraulic circulation). Understanding when to use each for remedial well maintenance."},{id:"m7l2",title:"Live-Well Operations (Snubbing)",duration:"30 min",content:"The mechanics of Hydraulic Workover Units. Running pipe into a pressurized wellbore using heavy-duty slip systems and specialized BOP configurations."}]},{id:"m8",title:"Decommissioning & P&A",objective:"Ensuring permanent environmental integrity.",lessons:[{id:"m8l1",title:"Barrier Verification",duration:"20 min",content:'The requirements for a "Permanent Barrier". Technical standards for rock-to-rock cement plugs, tag testing (mechanical integrity), and pressure testing (leak-off verification).'},{id:"m8l2",title:"Environmental Stewardship",duration:"15 min",content:"Managing wellhead removal and seabed restoration. Understanding the legal lifecycle of an asset from spudding to final decommissioning."}]},{id:"m9",title:"Deepwater Engineering",objective:"Managing complexity in subsea environments.",lessons:[{id:"m9l1",title:"Subsea BOP Systems",duration:"35 min",content:"The mechanics of multiplex (MUX) control systems and subsea accumulators. Understanding the delay in signal transmission and the critical importance of the Deadman/Autoshear (AMF) system."},{id:"m9l2",title:"Riser Mechanics & Kick Tolerance",duration:"30 min",content:'Calculating the reduced kick tolerance when a large volume of gas enters the marine riser. Managing the "Riser Gas" scenario where expansion occurs rapidly below the rotary table.'}]},{id:"m10",title:"HPHT Operations",objective:"Drilling in Extreme Pressure and Temperature regimes.",lessons:[{id:"m10l1",title:"Thermal Expansion Effects",duration:"25 min",content:"Calculating the impact of extreme bottom-hole temperatures on mud density and trapped annular pressure (APB). Understanding how steel yields under high-temperature stress."},{id:"m10l2",title:"Narrow Window Drilling",duration:"30 min",content:"Engineering solutions for reservoirs where the margin between pore pressure and fracture gradient is less than 0.5 ppg. The necessity of MPD and precise hydraulics."}]}],V=e=>{let{onExit:n}=e;const[r,i]=(0,t.useState)("DASHBOARD"),[a,o]=(0,t.useState)(null),[s,l]=(0,t.useState)(null),[c,u]=(0,t.useState)(new Set),d=H.reduce((e,t)=>e+t.lessons.length,0),h=Math.round(c.size/d*100),p=()=>(0,M.jsxs)("div",{className:"space-y-12 animate-in fade-in duration-700",children:[(0,M.jsxs)("header",{className:"border-b border-slate-800/50 pb-12",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,M.jsx)("span",{className:"bg-blue-500/10 text-blue-400 border border-blue-500/20 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-[0.3em]",children:"Well Control Training Academy"}),(0,M.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})]}),(0,M.jsxs)("h1",{className:"text-7xl font-bold text-white tracking-tighter leading-none mb-4",children:["Hydrostatic ",(0,M.jsx)("span",{className:"text-blue-400",children:"Training"})]}),(0,M.jsx)("p",{className:"text-slate-400 font-medium max-w-2xl text-lg leading-relaxed",children:"Comprehensive well control training platform bridging IADC WellSharp and IWCF standards. Master the physics, regulations, and operational skills required for modern offshore operations."})]}),(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-10 rounded-3xl relative overflow-hidden group",children:[(0,M.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,M.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-8 relative z-10",children:[(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)("h3",{className:"text-3xl font-bold text-white",children:"Training Progress"}),(0,M.jsxs)("p",{className:"text-sm text-slate-500 font-medium",children:[c.size," of ",d," lessons completed"]})]}),(0,M.jsxs)("div",{className:"flex items-center gap-6",children:[(0,M.jsx)("div",{className:"w-48 h-4 bg-slate-950 rounded-full overflow-hidden border border-slate-800",children:(0,M.jsx)("div",{className:"h-full bg-blue-500 transition-all duration-1000",style:{width:"".concat(h,"%")}})}),(0,M.jsxs)("span",{className:"text-4xl font-bold text-blue-400 font-mono",children:[h,"%"]})]})]})]}),(0,M.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,M.jsxs)("div",{onClick:()=>i("CURRICULUM"),className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl cursor-pointer hover:border-blue-500/50 transition-all group",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-blue-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-blue-500/20 transition-colors",children:(0,M.jsx)(R,{className:"w-8 h-8 text-blue-400"})}),(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-3",children:"Course Curriculum"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed",children:"10 comprehensive modules covering certification architecture, advanced physics, and deepwater engineering."}),(0,M.jsxs)("div",{className:"mt-6 flex items-center text-blue-400 text-sm font-medium",children:[(0,M.jsx)("span",{children:"Explore modules"}),(0,M.jsx)("span",{className:"ml-2",children:"\u2192"})]})]}),(0,M.jsxs)("div",{onClick:()=>i("SIMULATOR"),className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl cursor-pointer hover:border-amber-500/50 transition-all group",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-amber-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-amber-500/20 transition-colors",children:(0,M.jsx)(m,{className:"w-8 h-8 text-amber-400"})}),(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-3",children:"Well Control Simulator"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Interactive driller's console with real-time physics simulation. Manage kicks and maintain constant BHP."}),(0,M.jsxs)("div",{className:"mt-6 flex items-center text-amber-400 text-sm font-medium",children:[(0,M.jsx)("span",{children:"Launch simulator"}),(0,M.jsx)("span",{className:"ml-2",children:"\u2192"})]})]}),(0,M.jsxs)("div",{onClick:()=>i("EXAM_PREP"),className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl cursor-pointer hover:border-emerald-500/50 transition-all group",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-emerald-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-emerald-500/20 transition-colors",children:(0,M.jsx)(D,{className:"w-8 h-8 text-emerald-400"})}),(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-3",children:"Exam Preparation"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed",children:"High-stakes IADC/IWCF exam calculations. Master LOT, MAASP, ICP, and FCP scenarios."}),(0,M.jsxs)("div",{className:"mt-6 flex items-center text-emerald-400 text-sm font-medium",children:[(0,M.jsx)("span",{children:"Practice exams"}),(0,M.jsx)("span",{className:"ml-2",children:"\u2192"})]})]})]}),(0,M.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,M.jsxs)("div",{className:"bg-slate-900/40 p-10 rounded-3xl border border-slate-800",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,M.jsx)(L,{className:"w-8 h-8 text-amber-500"}),(0,M.jsx)("h3",{className:"text-2xl font-bold text-white",children:"IADC WellSharp"})]}),(0,M.jsx)("p",{className:"text-slate-400 leading-relaxed",children:"North American task-based framework emphasizing driller competency and mechanical shut-in response. Covers Level 1-5 certification paths with focus on practical rig floor operations."})]}),(0,M.jsxs)("div",{className:"bg-slate-900/40 p-10 rounded-3xl border border-slate-800",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,M.jsx)(L,{className:"w-8 h-8 text-blue-500"}),(0,M.jsx)("h3",{className:"text-2xl font-bold text-white",children:"IWCF Engineering"})]}),(0,M.jsx)("p",{className:"text-slate-400 leading-relaxed",children:"International engineering-based standards focused on rigorous wellbore integrity and physics-informed decision making. Emphasizes global compliance and advanced hydraulics."})]})]})]}),f=()=>(0,M.jsxs)("div",{className:"space-y-12 animate-in fade-in duration-700",children:[(0,M.jsx)("header",{className:"flex items-center justify-between mb-12 border-b border-slate-800 pb-10",children:(0,M.jsxs)("div",{children:[(0,M.jsxs)("button",{onClick:()=>{i("DASHBOARD"),o(null),l(null)},className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 mb-6 transition-colors",children:[(0,M.jsx)(I,{className:"w-4 h-4"}),(0,M.jsx)("span",{className:"text-sm font-medium",children:"Back to Dashboard"})]}),(0,M.jsx)("h2",{className:"text-6xl font-bold text-white tracking-tighter mb-4",children:"Course Curriculum"}),(0,M.jsx)("p",{className:"text-slate-500 font-medium text-lg",children:"Master well control from awareness to engineering design expertise"})]})}),(0,M.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:H.map(e=>{const t=e.lessons.filter(e=>c.has(e.id)).length,n=t===e.lessons.length;return(0,M.jsxs)("div",{onClick:()=>o(e),className:"bg-slate-900 border p-10 rounded-3xl group cursor-pointer transition-all shadow-xl hover:shadow-2xl ".concat(n?"border-emerald-500/50":"border-slate-800 hover:border-blue-500/50"),children:[(0,M.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,M.jsx)("span",{className:"px-5 py-1.5 rounded-xl text-[10px] font-bold uppercase tracking-widest ".concat(n?"bg-emerald-500 text-slate-950":"bg-blue-500 text-white"),children:e.id}),n&&(0,M.jsx)("span",{className:"text-emerald-500 font-bold text-[10px]",children:"\u2713 Complete"})]}),(0,M.jsx)("h3",{className:"text-3xl font-bold text-white mb-6 group-hover:text-blue-400 transition-colors",children:e.title}),(0,M.jsx)("p",{className:"text-sm text-slate-400 leading-relaxed",children:e.objective}),(0,M.jsxs)("div",{className:"mt-6 text-xs text-slate-500",children:[t," / ",e.lessons.length," lessons completed"]})]},e.id)})}),a&&(0,M.jsx)("div",{className:"fixed inset-0 bg-slate-950/98 z-50 flex items-center justify-center p-8 backdrop-blur-2xl animate-in fade-in",children:(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 w-full max-w-6xl max-h-[85vh] overflow-hidden rounded-3xl flex flex-col",children:[(0,M.jsxs)("div",{className:"p-10 border-b border-slate-800 bg-slate-950/50 flex justify-between items-center",children:[(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsxs)("span",{className:"text-[10px] font-bold text-blue-500 uppercase tracking-widest",children:[a.id,": ",a.title]}),(0,M.jsx)("h3",{className:"text-4xl font-bold text-white",children:a.objective})]}),(0,M.jsx)("button",{onClick:()=>{o(null),l(null)},className:"w-14 h-14 flex items-center justify-center bg-slate-800 text-white rounded-2xl hover:bg-red-500 transition-all text-xl font-bold",children:"\u2715"})]}),(0,M.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,M.jsxs)("div",{className:"w-80 border-r border-slate-800 overflow-y-auto p-6 space-y-3 bg-slate-950/20",children:[(0,M.jsx)("p",{className:"text-[9px] font-bold text-slate-600 uppercase tracking-widest px-4 mb-4",children:"Lessons"}),a.lessons.map(e=>{const t=c.has(e.id);return(0,M.jsxs)("button",{onClick:()=>l(e),className:"w-full p-6 rounded-2xl text-left transition-all border ".concat((null===s||void 0===s?void 0:s.id)===e.id?"bg-blue-500 border-blue-500":"bg-slate-900 border-slate-800 hover:border-slate-600"),children:[(0,M.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,M.jsxs)("span",{className:"text-[8px] font-bold uppercase tracking-widest ".concat((null===s||void 0===s?void 0:s.id)===e.id?"text-slate-950/60":"text-slate-500"),children:["\u23f1\ufe0f ",e.duration]}),t&&(0,M.jsx)("span",{className:"text-[10px] ".concat((null===s||void 0===s?void 0:s.id)===e.id?"text-slate-950":"text-emerald-500"),children:"\u2713"})]}),(0,M.jsx)("h4",{className:"text-sm font-bold leading-tight ".concat((null===s||void 0===s?void 0:s.id)===e.id?"text-slate-950":"text-white"),children:e.title})]},e.id)})]}),(0,M.jsx)("div",{className:"flex-1 overflow-y-auto p-12 bg-slate-900/40",children:s?(0,M.jsxs)("div",{className:"max-w-3xl animate-in fade-in",children:[(0,M.jsx)("h4",{className:"text-5xl font-bold text-white mb-10",children:s.title}),(0,M.jsxs)("div",{className:"prose prose-invert max-w-none",children:[(0,M.jsx)("p",{className:"text-xl text-slate-300 leading-relaxed mb-12 border-l-4 border-blue-500 pl-8",children:s.content}),(0,M.jsx)("button",{onClick:()=>{return e=s.id,void u(t=>new Set(t).add(e));var e},disabled:c.has(s.id),className:"w-full py-6 rounded-2xl font-bold text-xs uppercase tracking-widest transition-all ".concat(c.has(s.id)?"bg-emerald-600 text-white cursor-default":"bg-blue-600 hover:bg-blue-700 text-white"),children:c.has(s.id)?"\u2713 Lesson Completed":"Mark as Complete"})]})]}):(0,M.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center opacity-40",children:[(0,M.jsx)("div",{className:"text-6xl mb-6",children:"\ud83d\udcda"}),(0,M.jsx)("h4",{className:"text-2xl font-bold text-white",children:"Select a Lesson"})]})})]})]})})]});return(0,M.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-100 p-6",children:[n&&(0,M.jsx)("div",{className:"max-w-7xl mx-auto mb-4",children:(0,M.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white rounded-lg transition-all",children:[(0,M.jsx)(U,{className:"w-4 h-4"}),(0,M.jsx)("span",{className:"text-sm font-medium",children:"Exit Academy"})]})}),(0,M.jsx)("div",{className:"max-w-7xl mx-auto",children:(()=>{switch(r){case"DASHBOARD":default:return p();case"CURRICULUM":return f();case"SIMULATOR":return(0,M.jsxs)("div",{children:[(0,M.jsxs)("button",{onClick:()=>i("DASHBOARD"),className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 mb-8 transition-colors",children:[(0,M.jsx)(I,{className:"w-4 h-4"}),(0,M.jsx)("span",{className:"text-sm font-medium",children:"Back to Dashboard"})]}),(0,M.jsx)(F,{})]});case"EXAM_PREP":return(0,M.jsxs)("div",{children:[(0,M.jsxs)("button",{onClick:()=>i("DASHBOARD"),className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 mb-8 transition-colors",children:[(0,M.jsx)(I,{className:"w-4 h-4"}),(0,M.jsx)("span",{className:"text-sm font-medium",children:"Back to Dashboard"})]}),(0,M.jsx)(z,{})]})}})()})]})};let W=function(e){return e.OVERVIEW="Well Integrity Overview",e.TREES="Christmas Trees",e.ISSUES="Integrity Issues",e.MAINTENANCE="Maintenance History",e.PROCEDURES="Test Procedures",e.SETTINGS="Hub Configuration",e}({}),G=function(e){return e.Components="components",e.Wellbore="wellbore",e.Survey="survey",e.AIAssistant="aiAssistant",e}({}),X=function(e){return e.CASING="Casing",e.TUBING="Tubing",e.PACKER="Packer",e.PERFORATION="Perforation",e}({}),q=function(e){return e.PLATFORM="Platform",e.SUBSEA="Subsea",e}({});const Y=e=>{let{className:t}=e;return(0,M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})})},K=e=>{let{className:t}=e;return(0,M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h3.75a.75.75 0 0 1 .75.75v1.125c0 .414.336.75.75.75h4.5a2.25 2.25 0 0 1 2.25 2.25v13.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V7.125a2.25 2.25 0 0 1 2.25-2.25h4.5c.414 0 .75-.336.75-.75V3a.75.75 0 0 1 .75-.75ZM9 8.25h6m-6 3h6m-6 3h6m-6 3h6"})})},Z=e=>{let{className:t}=e;return(0,M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 21v-4.875m0 0a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3V21m-8.25-4.875h8.25M12 2.25v2.25m0 0A4.5 4.5 0 0 1 16.5 9V15h-9V9A4.5 4.5 0 0 1 12 4.5Z"})})},J=e=>{let{className:t}=e;return(0,M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})})},$=e=>{let{className:t}=e;return(0,M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V19.875c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})})},Q=e=>{let{className:t}=e;return(0,M.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t||"w-6 h-6",children:[(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 0 1 0 .255c-.007.378.138.75.43.99l1.004.827c.422.348.53.954.26 1.43l-1.297 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.127c-.332.183-.582.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 0 1 0-.255c.007-.378-.138-.75-.43-.99l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281Z"}),(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})},ee=(e,t)=>{switch(e){case W.OVERVIEW:return(0,M.jsx)(Y,{className:t});case W.TREES:return(0,M.jsx)(Z,{className:t});case W.ISSUES:return(0,M.jsx)(J,{className:t});case W.MAINTENANCE:return(0,M.jsx)($,{className:t});case W.PROCEDURES:return(0,M.jsx)(K,{className:t});case W.SETTINGS:return(0,M.jsx)(Q,{className:t});default:return(0,M.jsx)(Y,{className:t})}},te=e=>{let{activeSection:t,onSelectSection:n}=e;const r=Object.values(W);return(0,M.jsxs)("aside",{className:"w-full md:w-64 lg:w-72 bg-slate-900 border-r border-slate-800 p-4 flex-shrink-0 flex flex-col h-full",children:[(0,M.jsxs)("div",{className:"flex flex-col gap-1 mb-10 px-2",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-10 h-10 bg-amber-500 rounded flex items-center justify-center font-bold text-slate-950 text-2xl shadow-lg shadow-amber-500/20",children:"B"}),(0,M.jsx)("h1",{className:"text-xl font-black tracking-tighter text-slate-100 uppercase",children:"Brahan Hub"})]}),(0,M.jsx)("p",{className:"text-[10px] text-amber-500/80 font-bold tracking-[0.2em] uppercase pl-13",children:"Visionary Integrity"})]}),(0,M.jsx)("nav",{className:"flex-grow",children:(0,M.jsx)("ul",{children:r.map(e=>(0,M.jsx)("li",{children:(0,M.jsxs)("button",{onClick:()=>n(e),className:"w-full text-left flex items-center gap-3 px-3 py-3 rounded-md transition-all duration-300 ease-in-out mb-2 group ".concat(t===e?"bg-amber-500/10 text-amber-500 ring-1 ring-amber-500/30":"text-slate-400 hover:bg-slate-800/80 hover:text-slate-200"),children:[ee(e,"w-5 h-5 flex-shrink-0 transition-colors ".concat(t===e?"text-amber-500":"text-slate-500 group-hover:text-slate-300")),(0,M.jsx)("span",{className:"flex-grow font-medium tracking-wide text-sm",children:e})]})},e))})}),(0,M.jsx)("div",{className:"mt-auto pt-6 border-t border-slate-800/50 px-2 pb-2",children:(0,M.jsx)("div",{className:"p-3 bg-slate-800/30 rounded italic text-xs text-slate-500 border-l-2 border-amber-500/50",children:'"Foresight is the first barrier against catastrophe."'})})]})},ne=()=>(0,M.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6",children:[(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsxs)("svg",{className:"animate-spin h-14 w-14 text-amber-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,M.jsx)("circle",{className:"opacity-10",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2"}),(0,M.jsx)("path",{className:"opacity-90",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,M.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,M.jsx)("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"})})]}),(0,M.jsxs)("div",{className:"text-center",children:[(0,M.jsx)("p",{className:"text-amber-500 font-bold tracking-widest uppercase text-xs animate-pulse",children:"Consulting The Hub"}),(0,M.jsx)("p",{className:"text-slate-500 text-[10px] mt-1 italic",children:"Synthesizing predictive integrity data..."})]})]});function re(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=re(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const ie=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=re(e))&&(r&&(r+=" "),r+=t);return r};var ae=n(9889),oe=n.n(ae),se=n(620),le=n.n(se),ce=n(5268),ue=n.n(ce),de=n(3097),he=n.n(de),pe=n(9160),fe=n.n(pe),me=n(9686),ge=n.n(me),ve=function(e){return 0===e?0:e>0?1:-1},xe=function(e){return le()(e)&&e.indexOf("%")===e.length-1},ye=function(e){return fe()(e)&&!ue()(e)},be=function(e){return ye(e)||le()(e)},we=0,_e=function(e){var t=++we;return"".concat(e||"").concat(t)},Se=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!ye(e)&&!le()(e))return r;if(xe(e)){var a=e.indexOf("%");n=t*parseFloat(e.slice(0,a))/100}else n=+e;return ue()(n)&&(n=r),i&&n>t&&(n=t),n},Ee=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Me=function(e,t){return ye(e)&&ye(t)?function(n){return e+n*(t-e)}:function(){return t}};function Te(e,t,n){return e&&e.length?e.find(function(e){return e&&("function"===typeof t?t(e):he()(e,t))===n}):null}var Ne=function(e,t){return ye(e)&&ye(t)?e-t:le()(e)&&le()(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))},Ce=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},Ae=n(1629),je=n.n(Ae),Pe=n(6686),Oe=n.n(Pe),ke=n(9062);function Re(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}var Le=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ie=["points","pathLength"],Ue={svg:["viewBox","children"],polygon:Ie,polyline:Ie},Fe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Be=function(e,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,t.isValidElement)(e)&&(r=e.props),!Oe()(r))return null;var i={};return Object.keys(r).forEach(function(e){Fe.includes(e)&&(i[e]=n||function(t){return r[e](r,t)})}),i},ze=function(e,t,n){if(!Oe()(e)||"object"!==De(e))return null;var r=null;return Object.keys(e).forEach(function(i){var a=e[i];Fe.includes(i)&&"function"===typeof a&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(a,t,n))}),r},He=["children"],Ve=["children"];function We(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}var Xe={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},qe=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},Ye=null,Ke=null,Ze=function e(n){if(n===Ye&&Array.isArray(Ke))return Ke;var r=[];return t.Children.forEach(n,function(t){ge()(t)||((0,ke.isFragment)(t)?r=r.concat(e(t.props.children)):r.push(t))}),Ke=r,Ye=n,r};function Je(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map(function(e){return qe(e)}):[qe(t)],Ze(e).forEach(function(e){var t=he()(e,"type.displayName")||he()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)}),n}function $e(e,t){var n=Je(e,t);return n&&n[0]}var Qe=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!ye(n)||n<=0||!ye(r)||r<=0)},et=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],tt=function(e){return e&&e.type&&le()(e.type)&&et.indexOf(e.type)>=0},nt=function(e,n,r){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var i=e;if((0,t.isValidElement)(e)&&(i=e.props),!Oe()(i))return null;var a={};return Object.keys(i).forEach(function(e){var t;(function(e,t,n,r){var i,a=null!==(i=null===Ue||void 0===Ue?void 0:Ue[r])&&void 0!==i?i:[];return t.startsWith("data-")||!je()(e)&&(r&&a.includes(t)||Le.includes(t))||n&&Fe.includes(t)})(null===(t=i)||void 0===t?void 0:t[e],e,n,r)&&(a[e]=i[e])}),a},rt=function e(n,r){if(n===r)return!0;var i=t.Children.count(n);if(i!==t.Children.count(r))return!1;if(0===i)return!0;if(1===i)return it(Array.isArray(n)?n[0]:n,Array.isArray(r)?r[0]:r);for(var a=0;a<i;a++){var o=n[a],s=r[a];if(Array.isArray(o)||Array.isArray(s)){if(!e(o,s))return!1}else if(!it(o,s))return!1}return!0},it=function(e,t){if(ge()(e)&&ge()(t))return!0;if(!ge()(e)&&!ge()(t)){var n=e.props||{},r=n.children,i=We(n,He),a=t.props||{},o=a.children,s=We(a,Ve);return r&&o?Re(i,s)&&rt(r,o):!r&&!o&&Re(i,s)}return!1},at=function(e,t){var n=[],r={};return Ze(e).forEach(function(e,i){if(tt(e))n.push(e);else if(e){var a=qe(e.type),o=t[a]||{},s=o.handler,l=o.once;if(s&&(!l||!r[a])){var c=s(e,a,i);n.push(c),r[a]=!0}}}),n},ot=function(e,t){return Ze(t).indexOf(e)};function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach(function(t){ut(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ut(e,t,n){return t=function(e){var t=function(e,t){if("object"!=st(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==st(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pt=(0,t.forwardRef)(function(e,n){var r=e.aspect,i=e.initialDimension,a=void 0===i?{width:-1,height:-1}:i,o=e.width,s=void 0===o?"100%":o,l=e.height,c=void 0===l?"100%":l,u=e.minWidth,d=void 0===u?0:u,h=e.minHeight,p=e.maxHeight,f=e.children,m=e.debounce,g=void 0===m?0:m,v=e.id,x=e.className,y=e.onResize,b=e.style,w=void 0===b?{}:b,_=(0,t.useRef)(null),S=(0,t.useRef)();S.current=y,(0,t.useImperativeHandle)(n,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var E=dt((0,t.useState)({containerWidth:a.width,containerHeight:a.height}),2),M=E[0],T=E[1],N=(0,t.useCallback)(function(e,t){T(function(n){var r=Math.round(e),i=Math.round(t);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}})},[]);(0,t.useEffect)(function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,i=n.height;N(r,i),null===(t=S.current)||void 0===t||t.call(S,r,i)};g>0&&(e=oe()(e,g,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=_.current.getBoundingClientRect(),r=n.width,i=n.height;return N(r,i),t.observe(_.current),function(){t.disconnect()}},[N,g]);var C=(0,t.useMemo)(function(){var e=M.containerWidth,n=M.containerHeight;if(e<0||n<0)return null;Ce(xe(s)||xe(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",s,c),Ce(!r||r>0,"The aspect(%s) must be greater than zero.",r);var i=xe(s)?e:s,a=xe(c)?n:c;r&&r>0&&(i?a=i/r:a&&(i=a*r),p&&a>p&&(a=p)),Ce(i>0||a>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,a,s,c,d,h,r);var o=!Array.isArray(f)&&qe(f.type).endsWith("Chart");return t.Children.map(f,function(e){return t.isValidElement(e)?(0,t.cloneElement)(e,ct({width:i,height:a},o?{style:ct({height:"100%",width:"100%",maxHeight:a,maxWidth:i},e.props.style)}:{})):e})},[r,f,c,p,h,d,M,s]);return t.createElement("div",{id:v?"".concat(v):void 0,className:ie("recharts-responsive-container",x),style:ct(ct({},w),{},{width:s,height:c,minWidth:d,minHeight:h,maxHeight:p}),ref:_},C)}),ft=n(6604),mt=n.n(ft),gt=n(7424),vt=n.n(gt),xt="Invariant failed";function yt(e,t){if(!e)throw new Error(xt)}var bt=["children","width","height","viewBox","className","style","title","desc"];function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wt.apply(this,arguments)}function _t(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function St(e){var n=e.children,r=e.width,i=e.height,a=e.viewBox,o=e.className,s=e.style,l=e.title,c=e.desc,u=_t(e,bt),d=a||{width:r,height:i,x:0,y:0},h=ie("recharts-surface",o);return t.createElement("svg",wt({},nt(u,!0,"svg"),{className:h,width:r,height:i,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),t.createElement("title",null,l),t.createElement("desc",null,c),n)}var Et=["children","className"];function Mt(){return Mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mt.apply(this,arguments)}function Tt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Nt=t.forwardRef(function(e,n){var r=e.children,i=e.className,a=Tt(e,Et),o=ie("recharts-layer",i);return t.createElement("g",Mt({className:o},nt(a,!0),{ref:n}),r)});function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function At(){return At=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},At.apply(this,arguments)}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach(function(t){Rt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Rt(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ct(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ct(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e){return Array.isArray(e)&&be(e[0])&&be(e[1])?e.join(" ~ "):e}var Lt=function(e){var n=e.separator,r=void 0===n?" : ":n,i=e.contentStyle,a=void 0===i?{}:i,o=e.itemStyle,s=void 0===o?{}:o,l=e.labelStyle,c=void 0===l?{}:l,u=e.payload,d=e.formatter,h=e.itemSorter,p=e.wrapperClassName,f=e.labelClassName,m=e.label,g=e.labelFormatter,v=e.accessibilityLayer,x=void 0!==v&&v,y=kt({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),b=kt({margin:0},c),w=!ge()(m),_=w?m:"",S=ie("recharts-default-tooltip",p),E=ie("recharts-tooltip-label",f);w&&g&&void 0!==u&&null!==u&&(_=g(m,u));var M=x?{role:"status","aria-live":"assertive"}:{};return t.createElement("div",At({className:S,style:y},M),t.createElement("p",{className:E,style:b},t.isValidElement(_)?_:"".concat(_)),function(){if(u&&u.length){var e=(h?vt()(u,h):u).map(function(e,n){if("none"===e.type)return null;var i=kt({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},s),a=e.formatter||d||Dt,o=e.value,l=e.name,c=o,h=l;if(a&&null!=c&&null!=h){var p=a(o,l,e,n,u);if(Array.isArray(p)){var f=jt(p,2);c=f[0],h=f[1]}else c=p}return t.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:i},be(h)?t.createElement("span",{className:"recharts-tooltip-item-name"},h):null,be(h)?t.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,t.createElement("span",{className:"recharts-tooltip-item-value"},c),t.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return t.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Ut(e,t,n){return t=function(e){var t=function(e,t){if("object"!=It(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==It(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ft="recharts-tooltip-wrapper",Bt={visibility:"hidden"};function zt(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return ie(Ft,Ut(Ut(Ut(Ut({},"".concat(Ft,"-right"),ye(n)&&t&&ye(t.x)&&n>=t.x),"".concat(Ft,"-left"),ye(n)&&t&&ye(t.x)&&n<t.x),"".concat(Ft,"-bottom"),ye(r)&&t&&ye(t.y)&&r>=t.y),"".concat(Ft,"-top"),ye(r)&&t&&ye(t.y)&&r<t.y))}function Ht(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,a=e.position,o=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(a&&ye(a[r]))return a[r];var u=n[r]-s-i,d=n[r]+i;return t[r]?o[r]?u:d:o[r]?u<l[r]?Math.max(d,l[r]):Math.max(u,l[r]):d+s>l[r]+c?Math.max(u,l[r]):Math.max(d,l[r])}function Vt(e){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(e)}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach(function(t){Jt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$t(r.key),r)}}function qt(e,t,n){return t=Kt(t),function(e,t){if(t&&("object"===Vt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Yt()?Reflect.construct(t,n||[],Kt(e).constructor):t.apply(e,n))}function Yt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Yt=function(){return!!e})()}function Kt(e){return Kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kt(e)}function Zt(e,t){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zt(e,t)}function Jt(e,t,n){return(t=$t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $t(e){var t=function(e,t){if("object"!=Vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vt(t)?t:t+""}var Qt=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Jt(e=qt(this,n,[].concat(r)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Jt(e,"handleKeyDown",function(t){var n,r,i,a;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=e.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(a=e.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==i?i:0}})}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zt(e,t)}(n,e),r=n,i=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,n=this.props,r=n.active,i=n.allowEscapeViewBox,a=n.animationDuration,o=n.animationEasing,s=n.children,l=n.coordinate,c=n.hasPayload,u=n.isAnimationActive,d=n.offset,h=n.position,p=n.reverseDirection,f=n.useTranslate3d,m=n.viewBox,g=n.wrapperStyle,v=function(e){var t,n,r=e.allowEscapeViewBox,i=e.coordinate,a=e.offsetTopLeft,o=e.position,s=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=Ht({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:a,position:o,reverseDirection:s,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=Ht({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:a,position:o,reverseDirection:s,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):Bt,cssClasses:zt({translateX:t,translateY:n,coordinate:i})}}({allowEscapeViewBox:i,coordinate:l,offsetTopLeft:d,position:h,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:f,viewBox:m}),x=v.cssClasses,y=v.cssProperties,b=Gt(Gt({transition:u&&r?"transform ".concat(a,"ms ").concat(o):void 0},y),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&c?"visible":"hidden",position:"absolute",top:0,left:0},g);return t.createElement("div",{tabIndex:-1,className:x,style:b,ref:function(t){e.wrapperNode=t}},s)}}],i&&Xt(r.prototype,i),a&&Xt(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.PureComponent),en={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return en[e]},set:function(e,t){if("string"===typeof e)en[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(t){en[t]=e[t]})}}},tn=n(977),nn=n.n(tn);function rn(e,t,n){return!0===t?nn()(e,n):je()(t)?nn()(e,t):e}function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach(function(t){pn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fn(r.key),r)}}function cn(e,t,n){return t=dn(t),function(e,t){if(t&&("object"===an(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,un()?Reflect.construct(t,n||[],dn(e).constructor):t.apply(e,n))}function un(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(un=function(){return!!e})()}function dn(e){return dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dn(e)}function hn(e,t){return hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hn(e,t)}function pn(e,t,n){return(t=fn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fn(e){var t=function(e,t){if("object"!=an(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=an(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==an(t)?t:t+""}function mn(e){return e.dataKey}var gn=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),cn(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hn(e,t)}(n,e),r=n,(i=[{key:"render",value:function(){var e=this,n=this.props,r=n.active,i=n.allowEscapeViewBox,a=n.animationDuration,o=n.animationEasing,s=n.content,l=n.coordinate,c=n.filterNull,u=n.isAnimationActive,d=n.offset,h=n.payload,p=n.payloadUniqBy,f=n.position,m=n.reverseDirection,g=n.useTranslate3d,v=n.viewBox,x=n.wrapperStyle,y=null!==h&&void 0!==h?h:[];c&&y.length&&(y=rn(h.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),p,mn));var b=y.length>0;return t.createElement(Qt,{allowEscapeViewBox:i,animationDuration:a,animationEasing:o,isAnimationActive:u,active:r,coordinate:l,hasPayload:b,offset:d,position:f,reverseDirection:m,useTranslate3d:g,viewBox:v,wrapperStyle:x},function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):"function"===typeof e?t.createElement(e,n):t.createElement(Lt,n)}(s,sn(sn({},this.props),{},{payload:y})))}}])&&ln(r.prototype,i),a&&ln(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.PureComponent);pn(gn,"displayName","Tooltip"),pn(gn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!en.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var vn=n(643),xn=n.n(vn);Math.abs,Math.atan2;const yn=Math.cos,bn=(Math.max,Math.min,Math.sin),wn=Math.sqrt,_n=Math.PI,Sn=2*_n;const En={draw(e,t){const n=wn(t/_n);e.moveTo(n,0),e.arc(0,0,n,0,Sn)}},Mn={draw(e,t){const n=wn(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Tn=wn(1/3),Nn=2*Tn,Cn={draw(e,t){const n=wn(t/Nn),r=n*Tn;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},An={draw(e,t){const n=wn(t),r=-n/2;e.rect(r,r,n,n)}},jn=bn(_n/10)/bn(7*_n/10),Pn=bn(Sn/10)*jn,On=-yn(Sn/10)*jn,kn={draw(e,t){const n=wn(.8908130915292852*t),r=Pn*n,i=On*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const t=Sn*a/5,o=yn(t),s=bn(t);e.lineTo(s*n,-o*n),e.lineTo(o*r-s*i,s*r+o*i)}e.closePath()}},Rn=wn(3),Dn={draw(e,t){const n=-wn(t/(3*Rn));e.moveTo(0,2*n),e.lineTo(-Rn*n,-n),e.lineTo(Rn*n,-n),e.closePath()}},Ln=-.5,In=wn(3)/2,Un=1/wn(12),Fn=3*(Un/2+1),Bn={draw(e,t){const n=wn(t/Fn),r=n/2,i=n*Un,a=r,o=n*Un+n,s=-a,l=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,l),e.lineTo(Ln*r-In*i,In*r+Ln*i),e.lineTo(Ln*a-In*o,In*a+Ln*o),e.lineTo(Ln*s-In*l,In*s+Ln*l),e.lineTo(Ln*r+In*i,Ln*i-In*r),e.lineTo(Ln*a+In*o,Ln*o-In*a),e.lineTo(Ln*s+In*l,Ln*l-In*s),e.closePath()}};function zn(e){return function(){return e}}function Hn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Vn,Wn,Gn,Xn,qn,Yn,Kn,Zn,Jn,$n,Qn,er,tr,nr;const rr=Math.PI,ir=2*rr,ar=1e-6,or=ir-ar;function sr(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class lr{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?sr:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return sr;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append(Vn||(Vn=Hn(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(Wn||(Wn=Hn(["Z"]))))}lineTo(e,t){this._append(Gn||(Gn=Hn(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,r){this._append(Xn||(Xn=Hn(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}bezierCurveTo(e,t,n,r,i,a){this._append(qn||(qn=Hn(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+i,this._y1=+a)}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));let a=this._x1,o=this._y1,s=n-e,l=r-t,c=a-e,u=o-t,d=c*c+u*u;if(null===this._x1)this._append(Yn||(Yn=Hn(["M",",",""])),this._x1=e,this._y1=t);else if(d>ar)if(Math.abs(u*s-l*c)>ar&&i){let h=n-a,p=r-o,f=s*s+l*l,m=h*h+p*p,g=Math.sqrt(f),v=Math.sqrt(d),x=i*Math.tan((rr-Math.acos((f+d-m)/(2*g*v)))/2),y=x/v,b=x/g;Math.abs(y-1)>ar&&this._append(Zn||(Zn=Hn(["L",",",""])),e+y*c,t+y*u),this._append(Jn||(Jn=Hn(["A",",",",0,0,",",",",",""])),i,i,+(u*h>c*p),this._x1=e+b*s,this._y1=t+b*l)}else this._append(Kn||(Kn=Hn(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,r,i,a){if(e=+e,t=+t,a=!!a,(n=+n)<0)throw new Error("negative radius: ".concat(n));let o=n*Math.cos(r),s=n*Math.sin(r),l=e+o,c=t+s,u=1^a,d=a?r-i:i-r;null===this._x1?this._append($n||($n=Hn(["M",",",""])),l,c):(Math.abs(this._x1-l)>ar||Math.abs(this._y1-c)>ar)&&this._append(Qn||(Qn=Hn(["L",",",""])),l,c),n&&(d<0&&(d=d%ir+ir),d>or?this._append(er||(er=Hn(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,u,e-o,t-s,n,n,u,this._x1=l,this._y1=c):d>ar&&this._append(tr||(tr=Hn(["A",",",",0,",",",",",",",""])),n,n,+(d>=rr),u,this._x1=e+n*Math.cos(i),this._y1=t+n*Math.sin(i)))}rect(e,t,n,r){this._append(nr||(nr=Hn(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}toString(){return this._}}function cr(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new lr(t)}wn(3),wn(3);function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}var dr=["type","size","sizeType"];function hr(){return hr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hr.apply(this,arguments)}function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach(function(t){mr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function mr(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ur(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ur(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var vr={symbolCircle:En,symbolCross:Mn,symbolDiamond:Cn,symbolSquare:An,symbolStar:kn,symbolTriangle:Dn,symbolWye:Bn},xr=Math.PI/180,yr=function(e){var n=e.type,r=void 0===n?"circle":n,i=e.size,a=void 0===i?64:i,o=e.sizeType,s=void 0===o?"area":o,l=fr(fr({},gr(e,dr)),{},{type:r,size:a,sizeType:s}),c=l.className,u=l.cx,d=l.cy,h=nt(l,!0);return u===+u&&d===+d&&a===+a?t.createElement("path",hr({},h,{className:ie("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:function(){var e=function(e){var t="symbol".concat(xn()(e));return vr[t]||En}(r),t=function(e,t){let n=null,r=cr(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"===typeof e?e:zn(e||En),t="function"===typeof t?t:zn(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"===typeof t?t:zn(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:zn(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(e).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*xr;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(a,s,r));return t()}()})):null};function br(e){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},br(e)}function wr(){return wr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wr.apply(this,arguments)}function _r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ar(r.key),r)}}function Er(e,t,n){return t=Tr(t),function(e,t){if(t&&("object"===br(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Mr()?Reflect.construct(t,n||[],Tr(e).constructor):t.apply(e,n))}function Mr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Mr=function(){return!!e})()}function Tr(e){return Tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Tr(e)}function Nr(e,t){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nr(e,t)}function Cr(e,t,n){return(t=Ar(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(e){var t=function(e,t){if("object"!=br(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=br(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==br(t)?t:t+""}yr.registerSymbol=function(e,t){vr["symbol".concat(xn()(e))]=t};var jr=32,Pr=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Er(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nr(e,t)}(n,e),r=n,i=[{key:"renderIcon",value:function(e){var n=this.props.inactiveColor,r=16,i=jr/6,a=jr/3,o=e.inactive?n:e.color;if("plainline"===e.type)return t.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:jr,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return t.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(r,"h").concat(a,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(2*a,",").concat(r,"\n            H").concat(jr,"M").concat(2*a,",").concat(r,"\n            A").concat(i,",").concat(i,",0,1,1,").concat(a,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return t.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(jr,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(t.isValidElement(e.legendIcon)){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(n),!0).forEach(function(t){Cr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return delete s.legendIcon,t.cloneElement(e.legendIcon,s)}return t.createElement(yr,{fill:o,cx:r,cy:r,size:jr,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,n=this.props,r=n.payload,i=n.iconSize,a=n.layout,o=n.formatter,s=n.inactiveColor,l={x:0,y:0,width:jr,height:jr},c={display:"horizontal"===a?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(n,r){var a=n.formatter||o,d=ie(Cr(Cr({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",n.inactive));if("none"===n.type)return null;var h=je()(n.value)?null:n.value;Ce(!je()(n.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var p=n.inactive?s:n.color;return t.createElement("li",wr({className:d,style:c,key:"legend-item-".concat(r)},ze(e.props,n,r)),t.createElement(St,{width:i,height:i,viewBox:l,style:u},e.renderIcon(n)),t.createElement("span",{className:"recharts-legend-item-text",style:{color:p}},a?a(h,n,r):h))})}},{key:"render",value:function(){var e=this.props,n=e.payload,r=e.layout,i=e.align;if(!n||!n.length)return null;var a={padding:0,margin:0,textAlign:"horizontal"===r?i:"left"};return t.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}],i&&Sr(r.prototype,i),a&&Sr(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.PureComponent);function Or(e){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(e)}Cr(Pr,"displayName","Legend"),Cr(Pr,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var kr=["ref"];function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(n),!0).forEach(function(t){zr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hr(r.key),r)}}function Ir(e,t,n){return t=Fr(t),function(e,t){if(t&&("object"===Or(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ur()?Reflect.construct(t,n||[],Fr(e).constructor):t.apply(e,n))}function Ur(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ur=function(){return!!e})()}function Fr(e){return Fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fr(e)}function Br(e,t){return Br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Br(e,t)}function zr(e,t,n){return(t=Hr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hr(e){var t=function(e,t){if("object"!=Or(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Or(t)?t:t+""}function Vr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Wr(e){return e.value}var Gr=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return zr(e=Ir(this,n,[].concat(r)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Br(e,t)}(n,e),r=n,i=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Dr({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,a=r.align,o=r.verticalAlign,s=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===a&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===a?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===o?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===o?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),Dr(Dr({},t),n)}},{key:"render",value:function(){var e=this,n=this.props,r=n.content,i=n.width,a=n.height,o=n.wrapperStyle,s=n.payloadUniqBy,l=n.payload,c=Dr(Dr({position:"absolute",width:i||"auto",height:a||"auto"},this.getDefaultPosition(o)),o);return t.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,n){if(t.isValidElement(e))return t.cloneElement(e,n);if("function"===typeof e)return t.createElement(e,n);n.ref;var r=Vr(n,kr);return t.createElement(Pr,r)}(r,Dr(Dr({},this.props),{},{payload:rn(l,s,Wr)})))}}],a=[{key:"getWithHeight",value:function(e,t){var n=Dr(Dr({},this.defaultProps),e.props).layout;return"vertical"===n&&ye(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],i&&Lr(r.prototype,i),a&&Lr(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.PureComponent);function Xr(){return Xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xr.apply(this,arguments)}zr(Gr,"displayName","Legend"),zr(Gr,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var qr=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,o=ie("recharts-dot",a);return n===+n&&r===+r&&i===+i?t.createElement("circle",Xr({},nt(e,!1),Be(e),{className:o,cx:n,cy:r,r:i})):null},Yr=n(5173),Kr=n.n(Yr);const{getOwnPropertyNames:Zr,getOwnPropertySymbols:Jr}=Object,{hasOwnProperty:$r}=Object.prototype;function Qr(e,t){return function(n,r,i){return e(n,r,i)&&t(n,r,i)}}function ei(e){return function(t,n,r){if(!t||!n||"object"!==typeof t||"object"!==typeof n)return e(t,n,r);const{cache:i}=r,a=i.get(t),o=i.get(n);if(a&&o)return a===n&&o===t;i.set(t,n),i.set(n,t);const s=e(t,n,r);return i.delete(t),i.delete(n),s}}function ti(e){return Zr(e).concat(Jr(e))}const ni=Object.hasOwn||((e,t)=>$r.call(e,t));function ri(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const{getOwnPropertyDescriptor:ii,keys:ai}=Object;function oi(e,t){return e.byteLength===t.byteLength&&yi(new Uint8Array(e),new Uint8Array(t))}function si(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function li(e,t){return e.byteLength===t.byteLength&&yi(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function ci(e,t){return ri(e.getTime(),t.getTime())}function ui(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function di(e,t){return e===t}function hi(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),a=e.entries();let o,s,l=0;for(;(o=a.next())&&!o.done;){const r=t.entries();let a=!1,c=0;for(;(s=r.next())&&!s.done;){if(i[c]){c++;continue}const r=o.value,u=s.value;if(n.equals(r[0],u[0],l,c,e,t,n)&&n.equals(r[1],u[1],r[0],u[0],e,t,n)){a=i[c]=!0;break}c++}if(!a)return!1;l++}return!0}const pi=ri;function fi(e,t,n){const r=ai(e);let i=r.length;if(ai(t).length!==i)return!1;for(;i-- >0;)if(!wi(e,t,n,r[i]))return!1;return!0}function mi(e,t,n){const r=ti(e);let i,a,o,s=r.length;if(ti(t).length!==s)return!1;for(;s-- >0;){if(i=r[s],!wi(e,t,n,i))return!1;if(a=ii(e,i),o=ii(t,i),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable))return!1}return!0}function gi(e,t){return ri(e.valueOf(),t.valueOf())}function vi(e,t){return e.source===t.source&&e.flags===t.flags}function xi(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const i=new Array(r),a=e.values();let o,s;for(;(o=a.next())&&!o.done;){const r=t.values();let a=!1,l=0;for(;(s=r.next())&&!s.done;){if(!i[l]&&n.equals(o.value,s.value,o.value,s.value,e,t,n)){a=i[l]=!0;break}l++}if(!a)return!1}return!0}function yi(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function bi(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function wi(e,t,n,r){return!("_owner"!==r&&"__o"!==r&&"__v"!==r||!e.$$typeof&&!t.$$typeof)||ni(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const _i={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Si=Object.prototype.toString;function Ei(e){let{areArrayBuffersEqual:t,areArraysEqual:n,areDataViewsEqual:r,areDatesEqual:i,areErrorsEqual:a,areFunctionsEqual:o,areMapsEqual:s,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:h,areTypedArraysEqual:p,areUrlsEqual:f,unknownTagComparators:m}=e;return function(e,g,v){if(e===g)return!0;if(null==e||null==g)return!1;const x=typeof e;if(x!==typeof g)return!1;if("object"!==x)return"number"===x?l(e,g,v):"function"===x&&o(e,g,v);const y=e.constructor;if(y!==g.constructor)return!1;if(y===Object)return c(e,g,v);if(Array.isArray(e))return n(e,g,v);if(y===Date)return i(e,g,v);if(y===RegExp)return d(e,g,v);if(y===Map)return s(e,g,v);if(y===Set)return h(e,g,v);const b=Si.call(e);if("[object Date]"===b)return i(e,g,v);if("[object RegExp]"===b)return d(e,g,v);if("[object Map]"===b)return s(e,g,v);if("[object Set]"===b)return h(e,g,v);if("[object Object]"===b)return"function"!==typeof e.then&&"function"!==typeof g.then&&c(e,g,v);if("[object URL]"===b)return f(e,g,v);if("[object Error]"===b)return a(e,g,v);if("[object Arguments]"===b)return c(e,g,v);if(_i[b])return p(e,g,v);if("[object ArrayBuffer]"===b)return t(e,g,v);if("[object DataView]"===b)return r(e,g,v);if("[object Boolean]"===b||"[object Number]"===b||"[object String]"===b)return u(e,g,v);if(m){let t=m[b];if(!t){const n=function(e){return null!=e?e[Symbol.toStringTag]:void 0}(e);n&&(t=m[n])}if(t)return t(e,g,v)}return!1}}const Mi=Ti();Ti({strict:!0}),Ti({circular:!0}),Ti({circular:!0,strict:!0}),Ti({createInternalComparator:()=>ri}),Ti({strict:!0,createInternalComparator:()=>ri}),Ti({circular:!0,createInternalComparator:()=>ri}),Ti({circular:!0,createInternalComparator:()=>ri,strict:!0});function Ti(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{circular:t=!1,createInternalComparator:n,createState:r,strict:i=!1}=e,a=function(e){let{circular:t,createCustomConfig:n,strict:r}=e,i={areArrayBuffersEqual:oi,areArraysEqual:r?mi:si,areDataViewsEqual:li,areDatesEqual:ci,areErrorsEqual:ui,areFunctionsEqual:di,areMapsEqual:r?Qr(hi,mi):hi,areNumbersEqual:pi,areObjectsEqual:r?mi:fi,arePrimitiveWrappersEqual:gi,areRegExpsEqual:vi,areSetsEqual:r?Qr(xi,mi):xi,areTypedArraysEqual:r?Qr(yi,mi):yi,areUrlsEqual:bi,unknownTagComparators:void 0};if(n&&(i=Object.assign({},i,n(i))),t){const e=ei(i.areArraysEqual),t=ei(i.areMapsEqual),n=ei(i.areObjectsEqual),r=ei(i.areSetsEqual);i=Object.assign({},i,{areArraysEqual:e,areMapsEqual:t,areObjectsEqual:n,areSetsEqual:r})}return i}(e),o=Ei(a),s=n?n(o):(l=o,function(e,t,n,r,i,a,o){return l(e,t,o)});var l;return function(e){let{circular:t,comparator:n,createState:r,equals:i,strict:a}=e;if(r)return function(e,o){const{cache:s=(t?new WeakMap:void 0),meta:l}=r();return n(e,o,{cache:s,equals:i,meta:l,strict:a})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};const o={cache:void 0,equals:i,meta:void 0,strict:a};return function(e,t){return n(e,t,o)}}({circular:t,comparator:o,createState:r,equals:s,strict:i})}function Ni(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame(function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)})}function Ci(e){return Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ci(e)}function Ai(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ji(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pi(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=Ai(r),a=i[0],o=i.slice(1);return"number"===typeof a?void Ni(n.bind(null,o),a):(n(a),void Ni(n.bind(null,o)))}"object"===Ci(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function Oi(e){return Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oi(e)}function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach(function(t){Di(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Di(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Oi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Oi(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Li=function(e){return e},Ii=function(e,t){return Object.keys(t).reduce(function(n,r){return Ri(Ri({},n),{},Di({},r,e(r,t[r])))},{})},Ui=function(e,t,n){return e.map(function(e){return"".concat((r=e,r.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}))," ").concat(t,"ms ").concat(n);var r}).join(",")};function Fi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||zi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(e){return function(e){if(Array.isArray(e))return Hi(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zi(e,t){if(e){if("string"===typeof e)return Hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(e,t):void 0}}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vi=1e-4,Wi=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},Gi=function(e,t){return e.map(function(e,n){return e*Math.pow(t,n)}).reduce(function(e,t){return e+t})},Xi=function(e,t){return function(n){var r=Wi(e,t);return Gi(r,n)}},qi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],a=t[2],o=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,a=1,o=1;break;case"ease":r=.25,i=.1,a=.25,o=1;break;case"ease-in":r=.42,i=0,a=1,o=1;break;case"ease-out":r=.42,i=0,a=.58,o=1;break;case"ease-in-out":r=0,i=0,a=.58,o=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var l=Fi(s[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);r=l[0],i=l[1],a=l[2],o=l[3]}}[r,a,i,o].every(function(e){return"number"===typeof e&&e>=0&&e<=1});var c,u,d=Xi(r,a),h=Xi(i,o),p=(c=r,u=a,function(e){var t=Wi(c,u),n=[].concat(Bi(t.map(function(e,t){return e*t}).slice(1)),[0]);return Gi(n,e)}),f=function(e){return e>1?1:e<0?0:e},m=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=d(n)-t,a=p(n);if(Math.abs(i-t)<Vi||a<Vi)return h(n);n=f(n-i/a)}return h(n)};return m.isStepper=!1,m},Yi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qi(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,a=e.dt,o=void 0===a?17:a,s=function(e,t,r){var a=r+(-(e-t)*n-r*i)*o/1e3,s=r*o/1e3+e;return Math.abs(s-t)<Vi&&Math.abs(a)<Vi?[t,0]:[s,a]};return s.isStepper=!0,s.dt=o,s}();default:if("cubic-bezier"===r.split("(")[0])return qi(r)}return"function"===typeof r?r:null};function Ki(e){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ki(e)}function Zi(e){return function(e){if(Array.isArray(e))return na(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ta(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach(function(t){Qi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Qi(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==Ki(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ki(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ki(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||ta(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ta(e,t){if(e){if("string"===typeof e)return na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?na(e,t):void 0}}function na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ra=function(e,t,n){return e+(t-e)*n},ia=function(e){return e.from!==e.to},aa=function e(t,n,r){var i=Ii(function(e,n){if(ia(n)){var r=ea(t(n.from,n.to,n.velocity),2),i=r[0],a=r[1];return $i($i({},n),{},{from:i,velocity:a})}return n},n);return r<1?Ii(function(e,t){return ia(t)?$i($i({},t),{},{velocity:ra(t.velocity,i[e].velocity,r),from:ra(t.from,i[e].from,r)}):t},n):e(t,i,r-1)};const oa=function(e,t,n,r,i){var a,o,s,l,c=(a=e,o=t,[Object.keys(a),Object.keys(o)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})),u=c.reduce(function(n,r){return $i($i({},n),{},Qi({},r,[e[r],t[r]]))},{}),d=c.reduce(function(n,r){return $i($i({},n),{},Qi({},r,{from:e[r],velocity:0,to:t[r]}))},{}),h=-1,p=function(){return null};return p=n.isStepper?function(r){s||(s=r);var a=(r-s)/n.dt;d=aa(n,d,a),i($i($i($i({},e),t),Ii(function(e,t){return t.from},d))),s=r,Object.values(d).filter(ia).length&&(h=requestAnimationFrame(p))}:function(a){l||(l=a);var o=(a-l)/r,s=Ii(function(e,t){return ra.apply(void 0,Zi(t).concat([n(o)]))},u);if(i($i($i($i({},e),t),s)),o<1)h=requestAnimationFrame(p);else{var c=Ii(function(e,t){return ra.apply(void 0,Zi(t).concat([n(1)]))},u);i($i($i($i({},e),t),c))}},function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(h)}}};function sa(e){return sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sa(e)}var la=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ca(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ua(e){return function(e){if(Array.isArray(e))return da(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return da(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(n),!0).forEach(function(t){fa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ha(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fa(e,t,n){return(t=ga(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ga(r.key),r)}}function ga(e){var t=function(e,t){if("object"!==sa(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==sa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===sa(t)?t:String(t)}function va(e,t){return va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},va(e,t)}function xa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=wa(e);if(t){var i=wa(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ya(this,n)}}function ya(e,t){if(t&&("object"===sa(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ba(e)}function ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wa(e){return wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wa(e)}var _a=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&va(e,t)}(o,e);var n,r,i,a=xa(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=(n=a.call(this,e,t)).props,i=r.isActive,s=r.attributeName,l=r.from,c=r.to,u=r.steps,d=r.children,h=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(ba(n)),n.changeStyle=n.changeStyle.bind(ba(n)),!i||h<=0)return n.state={style:{}},"function"===typeof d&&(n.state={style:c}),ya(n);if(u&&u.length)n.state={style:u[0].style};else if(l){if("function"===typeof d)return n.state={style:l},ya(n);n.state={style:s?fa({},s,l):l}}else n.state={style:{}};return n}return n=o,r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,a=t.shouldReAnimate,o=t.to,s=t.from,l=this.state.style;if(r)if(n){if(!(Mi(e.to,o)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||a?s:e.to;if(this.state&&l){var d={style:i?fa({},i,u):u};(i&&l[i]!==u||!i&&l!==u)&&this.setState(d)}this.runAnimation(pa(pa({},this.props),{},{from:u,begin:0}))}}else{var h={style:i?fa({},i,o):o};this.state&&l&&(i&&l[i]!==o||!i&&l!==o)&&this.setState(h)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,a=e.easing,o=e.begin,s=e.onAnimationEnd,l=e.onAnimationStart,c=oa(n,r,Yi(a),i,this.changeStyle);this.manager.start([l,o,function(){t.stopJSAnimation=c()},i,s])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,a=n[0],o=a.style,s=a.duration,l=void 0===s?0:s;return this.manager.start([i].concat(ua(n.reduce(function(e,r,i){if(0===i)return e;var a=r.duration,o=r.easing,s=void 0===o?"ease":o,l=r.style,c=r.properties,u=r.onAnimationEnd,d=i>0?n[i-1]:r,h=c||Object.keys(l);if("function"===typeof s||"spring"===s)return[].concat(ua(e),[t.runJSAnimation.bind(t,{from:d.style,to:l,duration:a,easing:s}),a]);var p=Ui(h,a,s),f=pa(pa(pa({},d.style),l),{},{transition:p});return[].concat(ua(e),[f,a,u]).filter(Li)},[o,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=Pi());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,a=e.easing,o=e.onAnimationStart,s=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!==typeof a&&"function"!==typeof c&&"spring"!==a)if(l.length>1)this.runStepAnimation(e);else{var d=r?fa({},r,i):i,h=Ui(Object.keys(d),n,a);u.start([o,t,pa(pa({},d),{},{transition:h}),n,s])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,n=e.children,r=(e.begin,e.duration),i=(e.attributeName,e.easing,e.isActive),a=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,ca(e,la)),o=t.Children.count(n),s=this.state.style;if("function"===typeof n)return n(s);if(!i||0===o||r<=0)return n;var l=function(e){var n=e.props,r=n.style,i=void 0===r?{}:r,o=n.className;return(0,t.cloneElement)(e,pa(pa({},a),{},{style:pa(pa({},i),s),className:o}))};return 1===o?l(t.Children.only(n)):t.createElement("div",null,t.Children.map(n,function(e){return l(e)}))}}],r&&ma(n.prototype,r),i&&ma(n,i),Object.defineProperty(n,"prototype",{writable:!1}),o}(t.PureComponent);_a.displayName="Animate",_a.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},_a.propTypes={from:Kr().oneOfType([Kr().object,Kr().string]),to:Kr().oneOfType([Kr().object,Kr().string]),attributeName:Kr().string,duration:Kr().number,begin:Kr().number,easing:Kr().oneOfType([Kr().string,Kr().func]),steps:Kr().arrayOf(Kr().shape({duration:Kr().number.isRequired,style:Kr().object.isRequired,easing:Kr().oneOfType([Kr().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Kr().func]),properties:Kr().arrayOf("string"),onAnimationEnd:Kr().func})),children:Kr().oneOfType([Kr().node,Kr().func]),isActive:Kr().bool,canBegin:Kr().bool,onAnimationEnd:Kr().func,shouldReAnimate:Kr().bool,onAnimationStart:Kr().func,onAnimationReStart:Kr().func};const Sa=_a;function Ea(e){return Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(e)}function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ma.apply(this,arguments)}function Ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Na(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach(function(t){ja(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ja(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ea(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ea(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ea(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pa=function(e,t,n,r,i){var a,o=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(o>0&&i instanceof Array){for(var u=[0,0,0,0],d=0;d<4;d++)u[d]=i[d]>o?o:i[d];a="M".concat(e,",").concat(t+s*u[0]),u[0]>0&&(a+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),a+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(a+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+s*u[1])),a+="L ".concat(e+n,",").concat(t+r-s*u[2]),u[2]>0&&(a+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),a+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(a+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-s*u[3])),a+="Z"}else if(o>0&&i===+i&&i>0){var h=Math.min(o,i);a="M ".concat(e,",").concat(t+s*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+s*h,"\n            L ").concat(e+n,",").concat(t+r-s*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-s*h," Z")}else a="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return a},Oa=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,a=t.y,o=t.width,s=t.height;if(Math.abs(o)>0&&Math.abs(s)>0){var l=Math.min(i,i+o),c=Math.max(i,i+o),u=Math.min(a,a+s),d=Math.max(a,a+s);return n>=l&&n<=c&&r>=u&&r<=d}return!1},ka={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ra=function(e){var n=Aa(Aa({},ka),e),r=(0,t.useRef)(),i=Ta((0,t.useState)(-1),2),a=i[0],o=i[1];(0,t.useEffect)(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&o(e)}catch(t){}},[]);var s=n.x,l=n.y,c=n.width,u=n.height,d=n.radius,h=n.className,p=n.animationEasing,f=n.animationDuration,m=n.animationBegin,g=n.isAnimationActive,v=n.isUpdateAnimationActive;if(s!==+s||l!==+l||c!==+c||u!==+u||0===c||0===u)return null;var x=ie("recharts-rectangle",h);return v?t.createElement(Sa,{canBegin:a>0,from:{width:c,height:u,x:s,y:l},to:{width:c,height:u,x:s,y:l},duration:f,animationEasing:p,isActive:v},function(e){var i=e.width,o=e.height,s=e.x,l=e.y;return t.createElement(Sa,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,isActive:g,easing:p},t.createElement("path",Ma({},nt(n,!0),{className:x,d:Pa(s,l,i,o,d),ref:r})))}):t.createElement("path",Ma({},nt(n,!0),{className:x,d:Pa(s,l,c,u,d)}))};function Da(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function La(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class Ia extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:za;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(Ua(this,e))}has(e){return super.has(Ua(this,e))}set(e,t){return super.set(Fa(this,e),t)}delete(e){return super.delete(Ba(this,e))}}Set;function Ua(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function Fa(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function Ba(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function za(e){return null!==e&&"object"===typeof e?e.valueOf():e}const Ha=Symbol("implicit");function Va(){var e=new Ia,t=[],n=[],r=Ha;function i(i){let a=e.get(i);if(void 0===a){if(r!==Ha)return r;e.set(i,a=t.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Ia;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Va(t,n).unknown(r)},Da.apply(i,arguments),i}function Wa(){var e,t,n=Va().unknown(void 0),r=n.domain,i=n.range,a=0,o=1,s=!1,l=0,c=0,u=.5;function d(){var n=r().length,d=o<a,h=d?o:a,p=d?a:o;e=(p-h)/Math.max(1,n-l+2*c),s&&(e=Math.floor(e)),h+=(p-h-e*(n-l))*u,t=e*(1-l),s&&(h=Math.round(h),t=Math.round(t));var f=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}(n).map(function(t){return h+e*t});return i(d?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),d()):r()},n.range=function(e){return arguments.length?([a,o]=e,a=+a,o=+o,d()):[a,o]},n.rangeRound=function(e){return[a,o]=e,a=+a,o=+o,s=!0,d()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,d()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),d()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},n.copy=function(){return Wa(r(),[a,o]).round(s).paddingInner(l).paddingOuter(c).align(u)},Da.apply(d(),arguments)}function Ga(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Ga(t())},e}function Xa(){return Ga(Wa.apply(null,arguments).paddingInner(1))}function qa(e){return qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qa(e)}function Ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ya(Object(n),!0).forEach(function(t){Za(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ya(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Za(e,t,n){return t=function(e){var t=function(e,t){if("object"!=qa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qa(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ja={widthCache:{},cacheCount:0},$a={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Qa="recharts_measurement_span";var eo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||en.isSsr)return{width:0,height:0};var n=function(e){var t=Ka({},e);return Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t}(t),r=JSON.stringify({text:e,copyStyle:n});if(Ja.widthCache[r])return Ja.widthCache[r];try{var i=document.getElementById(Qa);i||((i=document.createElement("span")).setAttribute("id",Qa),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var a=Ka(Ka({},$a),n);Object.assign(i.style,a),i.textContent="".concat(e);var o=i.getBoundingClientRect(),s={width:o.width,height:o.height};return Ja.widthCache[r]=s,++Ja.cacheCount>2e3&&(Ja.cacheCount=0,Ja.widthCache={}),s}catch(l){return{width:0,height:0}}};function to(e){return to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},to(e)}function no(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ro(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ro(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ao(r.key),r)}}function ao(e){var t=function(e,t){if("object"!=to(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=to(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==to(t)?t:t+""}var oo=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,so=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lo=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,co=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uo={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},ho=Object.keys(uo),po="NaN";var fo=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||lo.test(n)||(this.num=NaN,this.unit=""),ho.includes(n)&&(this.num=function(e,t){return e*uo[t]}(t,n),this.unit="px")}return t=e,r=[{key:"parse",value:function(t){var n,r=no(null!==(n=co.exec(t))&&void 0!==n?n:[],3),i=r[1],a=r[2];return new e(parseFloat(i),null!==a&&void 0!==a?a:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&io(t.prototype,n),r&&io(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function mo(e){if(e.includes(po))return po;for(var t=e;t.includes("*")||t.includes("/");){var n,r=no(null!==(n=oo.exec(t))&&void 0!==n?n:[],4),i=r[1],a=r[2],o=r[3],s=fo.parse(null!==i&&void 0!==i?i:""),l=fo.parse(null!==o&&void 0!==o?o:""),c="*"===a?s.multiply(l):s.divide(l);if(c.isNaN())return po;t=t.replace(oo,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,d=no(null!==(u=so.exec(t))&&void 0!==u?u:[],4),h=d[1],p=d[2],f=d[3],m=fo.parse(null!==h&&void 0!==h?h:""),g=fo.parse(null!==f&&void 0!==f?f:""),v="+"===p?m.add(g):m.subtract(g);if(v.isNaN())return po;t=t.replace(so,v.toString())}return t}var go=/\(([^()]*)\)/;function vo(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=no(go.exec(t),2)[1];t=t.replace(go,mo(n))}return t}(t),t=mo(t)}function xo(e){var t=function(e){try{return vo(e)}catch(t){return po}}(e.slice(5,-1));return t===po?"":t}var yo=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],bo=["dx","dy","angle","className","breakAll"];function wo(){return wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wo.apply(this,arguments)}function _o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function So(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Eo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mo=/[ \f\n\r\t\v\u2028\u2029]+/,To=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var i=[];return ge()(t)||(i=n?t.toString().split(""):t.toString().split(Mo)),{wordsWithComputedWidth:i.map(function(e){return{word:e,width:eo(e,r).width}}),spaceWidth:n?0:eo("\xa0",r).width}}catch(a){return null}},No=function(e){return[{words:ge()(e)?[]:e.toString().split(Mo)}]},Co=function(e){var t=e.width,n=e.scaleToFit,r=e.children,i=e.style,a=e.breakAll,o=e.maxLines;if((t||n)&&!en.isSsr){var s=To({breakAll:a,children:r,style:i});return s?function(e,t,n,r,i){var a=e.maxLines,o=e.children,s=e.style,l=e.breakAll,c=ye(a),u=o,d=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){var a=t.word,o=t.width,s=e[e.length-1];if(s&&(null==r||i||s.width+o+n<Number(r)))s.words.push(a),s.width+=o+n;else{var l={words:[a],width:o};e.push(l)}return e},[])},h=d(t);if(!c)return h;for(var p,f=function(e){var t=u.slice(0,e),n=To({breakAll:l,style:s,children:t+"\u2026"}).wordsWithComputedWidth,i=d(n),o=i.length>a||function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})}(i).width>Number(r);return[o,i]},m=0,g=u.length-1,v=0;m<=g&&v<=u.length-1;){var x=Math.floor((m+g)/2),y=So(f(x-1),2),b=y[0],w=y[1],_=So(f(x),1)[0];if(b||_||(m=x+1),b&&_&&(g=x-1),!b&&_){p=w;break}v++}return p||h}({breakAll:a,children:r,maxLines:o,style:i},s.wordsWithComputedWidth,s.spaceWidth,t,n):No(r)}return No(r)},Ao="#808080",jo=function(e){var n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i,o=e.lineHeight,s=void 0===o?"1em":o,l=e.capHeight,c=void 0===l?"0.71em":l,u=e.scaleToFit,d=void 0!==u&&u,h=e.textAnchor,p=void 0===h?"start":h,f=e.verticalAnchor,m=void 0===f?"end":f,g=e.fill,v=void 0===g?Ao:g,x=_o(e,yo),y=(0,t.useMemo)(function(){return Co({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:d,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,d,x.style,x.width]),b=x.dx,w=x.dy,_=x.angle,S=x.className,E=x.breakAll,M=_o(x,bo);if(!be(r)||!be(a))return null;var T,N=r+(ye(b)?b:0),C=a+(ye(w)?w:0);switch(m){case"start":T=xo("calc(".concat(c,")"));break;case"middle":T=xo("calc(".concat((y.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:T=xo("calc(".concat(y.length-1," * -").concat(s,")"))}var A=[];if(d){var j=y[0].width,P=x.width;A.push("scale(".concat((ye(P)?P/j:1)/j,")"))}return _&&A.push("rotate(".concat(_,", ").concat(N,", ").concat(C,")")),A.length&&(M.transform=A.join(" ")),t.createElement("text",wo({},nt(M,!0),{x:N,y:C,className:ie("recharts-text",S),textAnchor:p,fill:v.includes("url")?Ao:v}),y.map(function(e,n){var r=e.words.join(E?"":" ");return t.createElement("tspan",{x:N,dy:0===n?T:s,key:"".concat(r,"-").concat(n)},r)}))};const Po=Math.sqrt(50),Oo=Math.sqrt(10),ko=Math.sqrt(2);function Ro(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Po?10:a>=Oo?5:a>=ko?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?Ro(e,t,2*n):[s,l,c]}function Do(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,a,o]=r?Ro(t,e,n):Ro(e,t,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function Lo(e,t,n){return Ro(e=+e,t=+t,n=+n)[2]}function Io(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?Lo(t,e,n):Lo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Uo(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fo(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bo(e){let t,n,r;function i(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<0?i=t+1:a=t}while(i<a)}return i}return 2!==e.length?(t=Uo,n=(t,n)=>Uo(e(t),n),r=(t,n)=>e(t)-n):(t=e===Uo||e===Fo?e:zo,n=e,r=e),{left:i,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return a>n&&r(e[a-1],t)>-r(e[a],t)?a-1:a},right:function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(r,r))return a;do{const t=i+a>>>1;n(e[t],r)<=0?i=t+1:a=t}while(i<a)}return i}}}function zo(){return 0}function Ho(e){return null===e?NaN:+e}const Vo=Bo(Uo),Wo=Vo.right,Go=(Vo.left,Bo(Ho).center,Wo);function Xo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Yo(){}var Ko=.7,Zo=1/Ko,Jo="\\s*([+-]?\\d+)\\s*",$o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",es=/^#([0-9a-f]{3,8})$/,ts=new RegExp("^rgb\\(".concat(Jo,",").concat(Jo,",").concat(Jo,"\\)$")),ns=new RegExp("^rgb\\(".concat(Qo,",").concat(Qo,",").concat(Qo,"\\)$")),rs=new RegExp("^rgba\\(".concat(Jo,",").concat(Jo,",").concat(Jo,",").concat($o,"\\)$")),is=new RegExp("^rgba\\(".concat(Qo,",").concat(Qo,",").concat(Qo,",").concat($o,"\\)$")),as=new RegExp("^hsl\\(".concat($o,",").concat(Qo,",").concat(Qo,"\\)$")),os=new RegExp("^hsla\\(".concat($o,",").concat(Qo,",").concat(Qo,",").concat($o,"\\)$")),ss={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ls(){return this.rgb().formatHex()}function cs(){return this.rgb().formatRgb()}function us(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=es.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ds(t):3===n?new fs(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?hs(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?hs(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ts.exec(e))?new fs(t[1],t[2],t[3],1):(t=ns.exec(e))?new fs(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=rs.exec(e))?hs(t[1],t[2],t[3],t[4]):(t=is.exec(e))?hs(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=as.exec(e))?bs(t[1],t[2]/100,t[3]/100,1):(t=os.exec(e))?bs(t[1],t[2]/100,t[3]/100,t[4]):ss.hasOwnProperty(e)?ds(ss[e]):"transparent"===e?new fs(NaN,NaN,NaN,0):null}function ds(e){return new fs(e>>16&255,e>>8&255,255&e,1)}function hs(e,t,n,r){return r<=0&&(e=t=n=NaN),new fs(e,t,n,r)}function ps(e,t,n,r){return 1===arguments.length?((i=e)instanceof Yo||(i=us(i)),i?new fs((i=i.rgb()).r,i.g,i.b,i.opacity):new fs):new fs(e,t,n,null==r?1:r);var i}function fs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function ms(){return"#".concat(ys(this.r)).concat(ys(this.g)).concat(ys(this.b))}function gs(){const e=vs(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(xs(this.r),", ").concat(xs(this.g),", ").concat(xs(this.b)).concat(1===e?")":", ".concat(e,")"))}function vs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xs(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ys(e){return((e=xs(e))<16?"0":"")+e.toString(16)}function bs(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _s(e,t,n,r)}function ws(e){if(e instanceof _s)return new _s(e.h,e.s,e.l,e.opacity);if(e instanceof Yo||(e=us(e)),!e)return new _s;if(e instanceof _s)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new _s(o,s,l,e.opacity)}function _s(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ss(e){return(e=(e||0)%360)<0?e+360:e}function Es(e){return Math.max(0,Math.min(1,e||0))}function Ms(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Ts(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}Xo(Yo,us,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ls,formatHex:ls,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ws(this).formatHsl()},formatRgb:cs,toString:cs}),Xo(fs,ps,qo(Yo,{brighter(e){return e=null==e?Zo:Math.pow(Zo,e),new fs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Ko:Math.pow(Ko,e),new fs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fs(xs(this.r),xs(this.g),xs(this.b),vs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ms,formatHex:ms,formatHex8:function(){return"#".concat(ys(this.r)).concat(ys(this.g)).concat(ys(this.b)).concat(ys(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:gs,toString:gs})),Xo(_s,function(e,t,n,r){return 1===arguments.length?ws(e):new _s(e,t,n,null==r?1:r)},qo(Yo,{brighter(e){return e=null==e?Zo:Math.pow(Zo,e),new _s(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Ko:Math.pow(Ko,e),new _s(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new fs(Ms(e>=240?e-240:e+120,i,r),Ms(e,i,r),Ms(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new _s(Ss(this.h),Es(this.s),Es(this.l),vs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vs(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(Ss(this.h),", ").concat(100*Es(this.s),"%, ").concat(100*Es(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const Ns=e=>()=>e;function Cs(e,t){return function(n){return e+n*t}}function As(e){return 1===(e=+e)?js:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Ns(isNaN(t)?n:t)}}function js(e,t){var n=t-e;return n?Cs(e,n):Ns(isNaN(e)?t:e)}const Ps=function e(t){var n=As(t);function r(e,t){var r=n((e=ps(e)).r,(t=ps(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=js(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function Os(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=ps(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}Os(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return Ts((n-r/t)*t,o,i,a,s)}}),Os(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return Ts((n-r/t)*t,i,a,o,s)}});function ks(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=zs(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function Rs(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ds(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ls(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=zs(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var Is=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Us=new RegExp(Is.source,"g");function Fs(e,t){var n,r,i,a=Is.lastIndex=Us.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=Is.exec(e))&&(r=Us.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:Ds(n,r)})),a=Us.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function Bs(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function zs(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?Ns(t):("number"===i?Ds:"string"===i?(n=us(t))?(t=n,Ps):Fs:t instanceof us?Ps:t instanceof Date?Rs:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?ks:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Ls:Ds:Bs))(e,t)}function Hs(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Vs(e){return+e}var Ws=[0,1];function Gs(e){return e}function Xs(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function qs(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Xs(i,r),a=n(o,a)):(r=Xs(r,i),a=n(a,o)),function(e){return a(r(e))}}function Ys(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Xs(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=Go(e,t,1,r)-1;return a[n](i[n](t))}}function Ks(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zs(){var e,t,n,r,i,a,o=Ws,s=Ws,l=zs,c=Gs;function u(){var e=Math.min(o.length,s.length);return c!==Gs&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?Ys:qs,i=a=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),s,l)))(e(c(t)))}return d.invert=function(n){return c(t((a||(a=r(s,o.map(e),Ds)))(n)))},d.domain=function(e){return arguments.length?(o=Array.from(e,Vs),u()):o.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=Hs,u()},d.clamp=function(e){return arguments.length?(c=!!e||Gs,u()):c!==Gs},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}function Js(){return Zs()(Gs,Gs)}var $s,Qs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function el(e){if(!(t=Qs.exec(e)))throw new Error("invalid format: "+e);var t;return new tl({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function tl(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function nl(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function rl(e){return(e=nl(Math.abs(e)))?e[1]:NaN}function il(e,t){var n=nl(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}el.prototype=tl.prototype,tl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const al={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>il(100*e,t),r:il,s:function(e,t){var n=nl(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-($s=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+nl(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ol(e){return e}var sl,ll,cl,ul=Array.prototype.map,dl=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function hl(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?ol:(t=ul.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?ol:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(ul.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=el(e)).fill,n=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,v=e.trim,x=e.type;"n"===x?(m=!0,x="g"):al[x]||(void 0===g&&(g=12),v=!0,x="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var y="$"===h?i:"#"===h&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b="$"===h?a:/[%p]/.test(x)?l:"",w=al[x],_=/[defgprs%]/.test(x);function S(e){var i,a,l,h=y,S=b;if("c"===x)S=w(e)+S,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:w(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0===+e&&"+"!==d&&(E=!1),h=(E?"("===d?d:c:"-"===d||"("===d?"":d)+h,S=("s"===x?dl[8+$s/3]:"")+S+(E&&"("===d?")":""),_)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){S=(46===l?o+e.slice(i+1):e.slice(i))+S,e=e.slice(0,i);break}}m&&!p&&(e=r(e,1/0));var M=h.length+e.length+S.length,T=M<f?new Array(f-M+1).join(t):"";switch(m&&p&&(e=r(T+e,T.length?f-S.length:1/0),T=""),n){case"<":e=h+e+S+T;break;case"=":e=h+T+e+S;break;case"^":e=T.slice(0,M=T.length>>1)+h+e+S+T.slice(M);break;default:e=T+h+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var n=d(((e=el(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(rl(t)/3))),i=Math.pow(10,-r),a=dl[8+r/3];return function(e){return n(i*e)+a}}}}function pl(e,t,n,r){var i,a=Io(e,t,n);switch((r=el(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(rl(t)/3)))-rl(Math.abs(e)))}(a,o))||(r.precision=i),cl(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,rl(t)-rl(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-rl(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return ll(r)}function fl(e){var t=e.domain;return e.ticks=function(e){var n=t();return Do(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return pl(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=s,s=i);u-- >0;){if((i=Lo(l,c,n))===r)return a[o]=l,a[s]=c,t(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function ml(){var e=Js();return e.copy=function(){return Ks(e,ml())},Da.apply(e,arguments),fl(e)}function gl(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,Vs),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return gl(e).unknown(t)},e=arguments.length?Array.from(e,Vs):[0,1],fl(n)}function vl(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function xl(e){return Math.log(e)}function yl(e){return Math.exp(e)}function bl(e){return-Math.log(-e)}function wl(e){return-Math.exp(-e)}function _l(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Sl(e){return(t,n)=>-e(-t,n)}function El(e){const t=e(xl,yl),n=t.domain;let r,i,a=10;function o(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(a),i=function(e){return 10===e?_l:e===Math.E?Math.exp:t=>Math.pow(e,t)}(a),n()[0]<0?(r=Sl(r),i=Sl(i),e(bl,wl)):e(xl,yl),t}return t.base=function(e){return arguments.length?(a=+e,o()):a},t.domain=function(e){return arguments.length?(n(e),o()):n()},t.ticks=e=>{const t=n();let o=t[0],s=t[t.length-1];const l=s<o;l&&([o,s]=[s,o]);let c,u,d=r(o),h=r(s);const p=null==e?10:+e;let f=[];if(!(a%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),o>0){for(;d<=h;++d)for(c=1;c<a;++c)if(u=d<0?c/i(-d):c*i(d),!(u<o)){if(u>s)break;f.push(u)}}else for(;d<=h;++d)for(c=a-1;c>=1;--c)if(u=d>0?c/i(-d):c*i(d),!(u<o)){if(u>s)break;f.push(u)}2*f.length<p&&(f=Do(o,s,p))}else f=Do(d,h,Math.min(h-d,p)).map(i);return l?f.reverse():f},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===a?"s":","),"function"!==typeof n&&(a%1||null!=(n=el(n)).precision||(n.trim=!0),n=ll(n)),e===1/0)return n;const o=Math.max(1,a*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*a<a-.5&&(t*=a),t<=o?n(e):""}},t.nice=()=>n(vl(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function Ml(){const e=El(Zs()).domain([1,10]);return e.copy=()=>Ks(e,Ml()).base(e.base()),Da.apply(e,arguments),e}function Tl(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Nl(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Cl(e){var t=1,n=e(Tl(t),Nl(t));return n.constant=function(n){return arguments.length?e(Tl(t=+n),Nl(t)):t},fl(n)}function Al(){var e=Cl(Zs());return e.copy=function(){return Ks(e,Al()).constant(e.constant())},Da.apply(e,arguments)}function jl(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Pl(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ol(e){return e<0?-e*e:e*e}function kl(e){var t=e(Gs,Gs),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(Gs,Gs):.5===n?e(Pl,Ol):e(jl(n),jl(1/n)):n},fl(t)}function Rl(){var e=kl(Zs());return e.copy=function(){return Ks(e,Rl()).exponent(e.exponent())},Da.apply(e,arguments),e}function Dl(){return Rl.apply(null,arguments).exponent(.5)}function Ll(e){return Math.sign(e)*e*e}function Il(){var e,t=Js(),n=[0,1],r=!1;function i(n){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(Ll(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,Vs)).map(Ll)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Il(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},Da.apply(i,arguments),fl(i)}function Ul(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Fl(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Bl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uo;if(e===Uo)return zl;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function zl(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function Hl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?zl:Bl(i);r>n;){if(r-n>600){const a=r-n+1,o=t-n+1,s=Math.log(a),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);Hl(e,t,Math.max(n,Math.floor(t-o*l/a+c)),Math.min(r,Math.floor(t+(a-o)*l/a+c)),i)}const a=e[t];let o=n,s=r;for(Vl(e,n,t),i(e[r],a)>0&&Vl(e,n,r);o<s;){for(Vl(e,o,s),++o,--s;i(e[o],a)<0;)++o;for(;i(e[s],a)>0;)--s}0===i(e[n],a)?Vl(e,n,s):(++s,Vl(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Vl(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Wl(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return Fl(e);if(t>=1)return Ul(e);var r,i=(r-1)*t,a=Math.floor(i),o=Ul(Hl(e,a).subarray(0,a+1));return o+(Fl(e.subarray(a+1))-o)*(i-a)}}function Gl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ho;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}}function Xl(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=Gl(t,e/i);return a}function a(t){return null==t||isNaN(t=+t)?e:n[Go(r,t)]}return a.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(Uo),i()},a.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return r.slice()},a.copy=function(){return Xl().domain(t).range(n).unknown(e)},Da.apply(a,arguments)}function ql(){var e,t=0,n=1,r=1,i=[.5],a=[0,1];function o(t){return null!=t&&t<=t?a[Go(i,t,0,r)]:e}function s(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return o}return o.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,s()):[t,n]},o.range=function(e){return arguments.length?(r=(a=Array.from(e)).length-1,s()):a.slice()},o.invertExtent=function(e){var o=a.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return ql().domain([t,n]).range(a).unknown(e)},Da.apply(fl(o),arguments)}function Yl(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[Go(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Yl().domain(t).range(n).unknown(e)},Da.apply(i,arguments)}sl=hl({thousands:",",grouping:[3],currency:["$",""]}),ll=sl.format,cl=sl.formatPrefix;const Kl=1e3,Zl=6e4,Jl=36e5,$l=864e5,Ql=6048e5,ec=2592e6,tc=31536e6,nc=new Date,rc=new Date;function ic(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,a)=>{const o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r)||!(a>0))return o;let s;do{o.push(s=new Date(+n)),t(n,a),e(n)}while(s<n&&n<r);return o},i.filter=n=>ic(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(i.count=(t,r)=>(nc.setTime(+t),rc.setTime(+r),e(nc),e(rc),Math.floor(n(nc,rc))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const ac=ic(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ac.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?ic(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ac:null);ac.range;const oc=ic(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Kl)},(e,t)=>(t-e)/Kl,e=>e.getUTCSeconds()),sc=(oc.range,ic(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kl)},(e,t)=>{e.setTime(+e+t*Zl)},(e,t)=>(t-e)/Zl,e=>e.getMinutes())),lc=(sc.range,ic(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Zl)},(e,t)=>(t-e)/Zl,e=>e.getUTCMinutes())),cc=(lc.range,ic(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kl-e.getMinutes()*Zl)},(e,t)=>{e.setTime(+e+t*Jl)},(e,t)=>(t-e)/Jl,e=>e.getHours())),uc=(cc.range,ic(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Jl)},(e,t)=>(t-e)/Jl,e=>e.getUTCHours())),dc=(uc.range,ic(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zl)/$l,e=>e.getDate()-1)),hc=(dc.range,ic(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$l,e=>e.getUTCDate()-1)),pc=(hc.range,ic(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$l,e=>Math.floor(e/$l)));pc.range;function fc(e){return ic(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Zl)/Ql)}const mc=fc(0),gc=fc(1),vc=fc(2),xc=fc(3),yc=fc(4),bc=fc(5),wc=fc(6);mc.range,gc.range,vc.range,xc.range,yc.range,bc.range,wc.range;function _c(e){return ic(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/Ql)}const Sc=_c(0),Ec=_c(1),Mc=_c(2),Tc=_c(3),Nc=_c(4),Cc=_c(5),Ac=_c(6),jc=(Sc.range,Ec.range,Mc.range,Tc.range,Nc.range,Cc.range,Ac.range,ic(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),Pc=(jc.range,ic(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Oc=(Pc.range,ic(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Oc.every=e=>isFinite(e=Math.floor(e))&&e>0?ic(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;Oc.range;const kc=ic(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());kc.every=e=>isFinite(e=Math.floor(e))&&e>0?ic(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;kc.range;function Rc(e,t,n,r,i,a){const o=[[oc,1,Kl],[oc,5,5e3],[oc,15,15e3],[oc,30,3e4],[a,1,Zl],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,Jl],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,$l],[r,2,1728e5],[n,1,Ql],[t,1,ec],[t,3,7776e6],[e,1,tc]];function s(t,n,r){const i=Math.abs(n-t)/r,a=Bo(e=>{let[,,t]=e;return t}).right(o,i);if(a===o.length)return e.every(Io(t/tc,n/tc,r));if(0===a)return ac.every(Math.max(Io(t,n,r),1));const[s,l]=o[i/o[a-1][2]<o[a][2]/i?a-1:a];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"===typeof n.range?n:s(e,t,n),a=i?i.range(e,+t+1):[];return r?a.reverse():a},s]}const[Dc,Lc]=Rc(kc,Pc,Sc,pc,uc,lc),[Ic,Uc]=Rc(Oc,jc,mc,dc,cc,sc);function Fc(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Bc(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var Hc,Vc,Wc,Gc={"-":"",_:" ",0:"0"},Xc=/^\s*\d+/,qc=/^%/,Yc=/[\\^$*+?|[\]().{}]/g;function Kc(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Zc(e){return e.replace(Yc,"\\$&")}function Jc(e){return new RegExp("^(?:"+e.map(Zc).join("|")+")","i")}function $c(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function Qc(e,t,n){var r=Xc.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function eu(e,t,n){var r=Xc.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function tu(e,t,n){var r=Xc.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function nu(e,t,n){var r=Xc.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ru(e,t,n){var r=Xc.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function iu(e,t,n){var r=Xc.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function au(e,t,n){var r=Xc.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ou(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function su(e,t,n){var r=Xc.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function lu(e,t,n){var r=Xc.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function cu(e,t,n){var r=Xc.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function uu(e,t,n){var r=Xc.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function du(e,t,n){var r=Xc.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function hu(e,t,n){var r=Xc.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function pu(e,t,n){var r=Xc.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function fu(e,t,n){var r=Xc.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function mu(e,t,n){var r=Xc.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function gu(e,t,n){var r=qc.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function vu(e,t,n){var r=Xc.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function xu(e,t,n){var r=Xc.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function yu(e,t){return Kc(e.getDate(),t,2)}function bu(e,t){return Kc(e.getHours(),t,2)}function wu(e,t){return Kc(e.getHours()%12||12,t,2)}function _u(e,t){return Kc(1+dc.count(Oc(e),e),t,3)}function Su(e,t){return Kc(e.getMilliseconds(),t,3)}function Eu(e,t){return Su(e,t)+"000"}function Mu(e,t){return Kc(e.getMonth()+1,t,2)}function Tu(e,t){return Kc(e.getMinutes(),t,2)}function Nu(e,t){return Kc(e.getSeconds(),t,2)}function Cu(e){var t=e.getDay();return 0===t?7:t}function Au(e,t){return Kc(mc.count(Oc(e)-1,e),t,2)}function ju(e){var t=e.getDay();return t>=4||0===t?yc(e):yc.ceil(e)}function Pu(e,t){return e=ju(e),Kc(yc.count(Oc(e),e)+(4===Oc(e).getDay()),t,2)}function Ou(e){return e.getDay()}function ku(e,t){return Kc(gc.count(Oc(e)-1,e),t,2)}function Ru(e,t){return Kc(e.getFullYear()%100,t,2)}function Du(e,t){return Kc((e=ju(e)).getFullYear()%100,t,2)}function Lu(e,t){return Kc(e.getFullYear()%1e4,t,4)}function Iu(e,t){var n=e.getDay();return Kc((e=n>=4||0===n?yc(e):yc.ceil(e)).getFullYear()%1e4,t,4)}function Uu(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kc(t/60|0,"0",2)+Kc(t%60,"0",2)}function Fu(e,t){return Kc(e.getUTCDate(),t,2)}function Bu(e,t){return Kc(e.getUTCHours(),t,2)}function zu(e,t){return Kc(e.getUTCHours()%12||12,t,2)}function Hu(e,t){return Kc(1+hc.count(kc(e),e),t,3)}function Vu(e,t){return Kc(e.getUTCMilliseconds(),t,3)}function Wu(e,t){return Vu(e,t)+"000"}function Gu(e,t){return Kc(e.getUTCMonth()+1,t,2)}function Xu(e,t){return Kc(e.getUTCMinutes(),t,2)}function qu(e,t){return Kc(e.getUTCSeconds(),t,2)}function Yu(e){var t=e.getUTCDay();return 0===t?7:t}function Ku(e,t){return Kc(Sc.count(kc(e)-1,e),t,2)}function Zu(e){var t=e.getUTCDay();return t>=4||0===t?Nc(e):Nc.ceil(e)}function Ju(e,t){return e=Zu(e),Kc(Nc.count(kc(e),e)+(4===kc(e).getUTCDay()),t,2)}function $u(e){return e.getUTCDay()}function Qu(e,t){return Kc(Ec.count(kc(e)-1,e),t,2)}function ed(e,t){return Kc(e.getUTCFullYear()%100,t,2)}function td(e,t){return Kc((e=Zu(e)).getUTCFullYear()%100,t,2)}function nd(e,t){return Kc(e.getUTCFullYear()%1e4,t,4)}function rd(e,t){var n=e.getUTCDay();return Kc((e=n>=4||0===n?Nc(e):Nc.ceil(e)).getUTCFullYear()%1e4,t,4)}function id(){return"+0000"}function ad(){return"%"}function od(e){return+e}function sd(e){return Math.floor(+e/1e3)}function ld(e){return new Date(e)}function cd(e){return e instanceof Date?+e:+new Date(+e)}function ud(e,t,n,r,i,a,o,s,l,c){var u=Js(),d=u.invert,h=u.domain,p=c(".%L"),f=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),x=c("%b %d"),y=c("%B"),b=c("%Y");function w(e){return(l(e)<e?p:s(e)<e?f:o(e)<e?m:a(e)<e?g:r(e)<e?i(e)<e?v:x:n(e)<e?y:b)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(Array.from(e,cd)):h().map(ld)},u.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(vl(n,e)):u},u.copy=function(){return Ks(u,ud(e,t,n,r,i,a,o,s,l,c))},u}function dd(){return Da.apply(ud(Ic,Uc,Oc,jc,mc,dc,cc,sc,oc,Vc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hd(){return Da.apply(ud(Dc,Lc,kc,Pc,Sc,hc,uc,lc,oc,Wc).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pd(){var e,t,n,r,i,a=0,o=1,s=Gs,l=!1;function c(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([a,o]=i,e=r(a=+a),t=r(o=+o),n=e===t?0:1/(t-e),c):[a,o]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(zs),c.rangeRound=u(Hs),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(a),t=i(o),n=e===t?0:1/(t-e),c}}function fd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function md(){var e=fl(pd()(Gs));return e.copy=function(){return fd(e,md())},La.apply(e,arguments)}function gd(){var e=El(pd()).domain([1,10]);return e.copy=function(){return fd(e,gd()).base(e.base())},La.apply(e,arguments)}function vd(){var e=Cl(pd());return e.copy=function(){return fd(e,vd()).constant(e.constant())},La.apply(e,arguments)}function xd(){var e=kl(pd());return e.copy=function(){return fd(e,xd()).exponent(e.exponent())},La.apply(e,arguments)}function yd(){return xd.apply(null,arguments).exponent(.5)}function bd(){var e=[],t=Gs;function n(n){if(null!=n&&!isNaN(n=+n))return t((Go(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(Uo),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((n,r)=>t(r/(e.length-1)))},n.quantiles=function(t){return Array.from({length:t+1},(n,r)=>Wl(e,r/t))},n.copy=function(){return bd(t).domain(e)},La.apply(n,arguments)}function wd(){var e,t,n,r,i,a,o,s=0,l=.5,c=1,u=1,d=Gs,h=!1;function p(e){return isNaN(e=+e)?o:(e=.5+((e=+a(e))-t)*(u*e<u*t?r:i),d(h?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,d=function(e,t){void 0===t&&(t=e,e=zs);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}(e,[n,r,i]),p):[d(0),d(.5),d(1)]}}return p.domain=function(o){return arguments.length?([s,l,c]=o,e=a(s=+s),t=a(l=+l),n=a(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,p):[s,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=f(zs),p.rangeRound=f(Hs),p.unknown=function(e){return arguments.length?(o=e,p):o},function(o){return a=o,e=o(s),t=o(l),n=o(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,p}}function _d(){var e=fl(wd()(Gs));return e.copy=function(){return fd(e,_d())},La.apply(e,arguments)}function Sd(){var e=El(wd()).domain([.1,1,10]);return e.copy=function(){return fd(e,Sd()).base(e.base())},La.apply(e,arguments)}function Ed(){var e=Cl(wd());return e.copy=function(){return fd(e,Ed()).constant(e.constant())},La.apply(e,arguments)}function Md(){var e=kl(wd());return e.copy=function(){return fd(e,Md()).exponent(e.exponent())},La.apply(e,arguments)}function Td(){return Md.apply(null,arguments).exponent(.5)}function Nd(e,t){if((i=e.length)>1)for(var n,r,i,a=1,o=e[t[0]],s=o.length;a<i;++a)for(r=o,o=e[t[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}!function(e){Hc=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,c=Jc(i),u=$c(i),d=Jc(a),h=$c(a),p=Jc(o),f=$c(o),m=Jc(s),g=$c(s),v=Jc(l),x=$c(l),y={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:yu,e:yu,f:Eu,g:Du,G:Iu,H:bu,I:wu,j:_u,L:Su,m:Mu,M:Tu,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:od,s:sd,S:Nu,u:Cu,U:Au,V:Pu,w:Ou,W:ku,x:null,X:null,y:Ru,Y:Lu,Z:Uu,"%":ad},b={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Fu,e:Fu,f:Wu,g:td,G:rd,H:Bu,I:zu,j:Hu,L:Vu,m:Gu,M:Xu,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:od,s:sd,S:qu,u:Yu,U:Ku,V:Ju,w:$u,W:Qu,x:null,X:null,y:ed,Y:nd,Z:id,"%":ad},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:cu,e:cu,f:mu,g:au,G:iu,H:du,I:du,j:uu,L:fu,m:lu,M:hu,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:su,Q:vu,s:xu,S:pu,u:eu,U:tu,V:nu,w:Qc,W:ru,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:au,Y:iu,Z:ou,"%":gu};function _(e,t){return function(n){var r,i,a,o=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=Gc[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function S(e,t){return function(n){var r,i,a=zc(1900,void 0,1);if(E(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Bc(zc(a.y,0,1))).getUTCDay(),r=i>4||0===i?Ec.ceil(r):Ec(r),r=hc.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Fc(zc(a.y,0,1))).getDay(),r=i>4||0===i?gc.ceil(r):gc(r),r=dc.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Bc(zc(a.y,0,1)).getUTCDay():Fc(zc(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Bc(a)):Fc(a)}}function E(e,t,n,r){for(var i,a,o=0,s=t.length,l=n.length;o<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=w[i in Gc?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return y.x=_(n,y),y.X=_(r,y),y.c=_(t,y),b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),{format:function(e){var t=_(e+="",y);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}(e),Vc=Hc.format,Hc.parse,Wc=Hc.utcFormat,Hc.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function Cd(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Ad(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function jd(e,t){return e[t]}function Pd(e){const t=[];return t.key=e,t}var Od=n(539),kd=n.n(Od),Rd=n(6745),Dd=n.n(Rd),Ld=n(3538),Id=n.n(Ld),Ud=n(9853),Fd=n.n(Ud),Bd=n(8210),zd=n.n(Bd);function Hd(e){return function(e){if(Array.isArray(e))return Vd(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Vd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vd(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wd=function(e){return e},Gd={"@@functional/placeholder":!0},Xd=function(e){return e===Gd},qd=function(e){return function t(){return 0===arguments.length||1===arguments.length&&Xd(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},Yd=function e(t,n){return 1===t?n:qd(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(e){return e!==Gd}).length;return o>=t?n.apply(void 0,i):e(t-o,qd(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=i.map(function(e){return Xd(e)?t.shift():e});return n.apply(void 0,Hd(a).concat(t))}))})},Kd=function(e){return Yd(e.length,e)},Zd=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Jd=Kd(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),$d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return Wd;var r=t.reverse(),i=r[0],a=r.slice(1);return function(){return a.reduce(function(e,t){return t(e)},i.apply(void 0,arguments))}},Qd=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},eh=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t&&i.every(function(e,n){return e===t[n]})?n:(t=i,n=e.apply(void 0,i))}};var th=Kd(function(e,t,n){var r=+e;return r+n*(+t-r)}),nh=Kd(function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)}),rh=Kd(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const ih={rangeStep:function(e,t,n){for(var r=new(zd())(e),i=0,a=[];r.lt(t)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a},getDigitCount:function(e){return 0===e?1:Math.floor(new(zd())(e).abs().log(10).toNumber())+1},interpolateNumber:th,uninterpolateNumber:nh,uninterpolateTruncation:rh};function ah(e){return function(e){if(Array.isArray(e))return lh(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||sh(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(e,t)||sh(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sh(e,t){if(e){if("string"===typeof e)return lh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lh(e,t):void 0}}function lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ch(e){var t=oh(e,2),n=t[0],r=t[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function uh(e,t,n){if(e.lte(0))return new(zd())(0);var r=ih.getDigitCount(e.toNumber()),i=new(zd())(10).pow(r),a=e.div(i),o=1!==r?.05:.1,s=new(zd())(Math.ceil(a.div(o).toNumber())).add(n).mul(o).mul(i);return t?s:new(zd())(Math.ceil(s))}function dh(e,t,n){var r=1,i=new(zd())(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(r=new(zd())(10).pow(ih.getDigitCount(e)-1),i=new(zd())(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new(zd())(Math.floor(e)))}else 0===e?i=new(zd())(Math.floor((t-1)/2)):n||(i=new(zd())(Math.floor(e)));var o=Math.floor((t-1)/2);return $d(Jd(function(e){return i.add(new(zd())(e-o).mul(r)).toNumber()}),Zd)(0,t)}function hh(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(zd())(0),tickMin:new(zd())(0),tickMax:new(zd())(0)};var a,o=uh(new(zd())(t).sub(e).div(n-1),r,i);a=e<=0&&t>=0?new(zd())(0):(a=new(zd())(e).add(t).div(2)).sub(new(zd())(a).mod(o));var s=Math.ceil(a.sub(e).div(o).toNumber()),l=Math.ceil(new(zd())(t).sub(a).div(o).toNumber()),c=s+l+1;return c>n?hh(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,s=t>0?s:s+(n-c)),{step:o,tickMin:a.sub(new(zd())(s).mul(o)),tickMax:a.add(new(zd())(l).mul(o))})}var ph=eh(function(e){var t=oh(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(i,2),s=oh(ch([n,r]),2),l=s[0],c=s[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(ah(Zd(0,i-1).map(function(){return 1/0}))):[].concat(ah(Zd(0,i-1).map(function(){return-1/0})),[c]);return n>r?Qd(u):u}if(l===c)return dh(l,i,a);var d=hh(l,c,o,a),h=d.step,p=d.tickMin,f=d.tickMax,m=ih.rangeStep(p,f.add(new(zd())(.1).mul(h)),h);return n>r?Qd(m):m}),fh=(eh(function(e){var t=oh(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(i,2),s=oh(ch([n,r]),2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[n,r];if(l===c)return dh(l,i,a);var u=uh(new(zd())(c).sub(l).div(o-1),a,0),d=$d(Jd(function(e){return new(zd())(l).add(new(zd())(e).mul(u)).toNumber()}),Zd)(0,o).filter(function(e){return e>=l&&e<=c});return n>r?Qd(d):d}),eh(function(e,t){var n=oh(e,2),r=n[0],i=n[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=oh(ch([r,i]),2),s=o[0],l=o[1];if(s===-1/0||l===1/0)return[r,i];if(s===l)return[s];var c=Math.max(t,2),u=uh(new(zd())(l).sub(s).div(c-1),a,0),d=[].concat(ah(ih.rangeStep(new(zd())(s),new(zd())(l).sub(new(zd())(.99).mul(u)),u)),[l]);return r>i?Qd(d):d})),mh=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function gh(e){return gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(e)}function vh(){return vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vh.apply(this,arguments)}function xh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return yh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bh(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nh(r.key),r)}}function _h(e,t,n){return t=Eh(t),function(e,t){if(t&&("object"===gh(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Sh()?Reflect.construct(t,n||[],Eh(e).constructor):t.apply(e,n))}function Sh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Sh=function(){return!!e})()}function Eh(e){return Eh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Eh(e)}function Mh(e,t){return Mh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mh(e,t)}function Th(e,t,n){return(t=Nh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nh(e){var t=function(e,t){if("object"!=gh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gh(t)?t:t+""}var Ch=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),_h(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mh(e,t)}(n,e),r=n,i=[{key:"render",value:function(){var e=this.props,n=e.offset,r=e.layout,i=e.width,a=e.dataKey,o=e.data,s=e.dataPointFormatter,l=e.xAxis,c=e.yAxis,u=bh(e,mh),d=nt(u,!1);"x"===this.props.direction&&"number"!==l.type&&yt(!1);var h=o.map(function(e){var o=s(e,a),u=o.x,h=o.y,p=o.value,f=o.errorVal;if(!f)return null;var m,g,v=[];if(Array.isArray(f)){var x=xh(f,2);m=x[0],g=x[1]}else m=g=f;if("vertical"===r){var y=l.scale,b=h+n,w=b+i,_=b-i,S=y(p-m),E=y(p+g);v.push({x1:E,y1:w,x2:E,y2:_}),v.push({x1:S,y1:b,x2:E,y2:b}),v.push({x1:S,y1:w,x2:S,y2:_})}else if("horizontal"===r){var M=c.scale,T=u+n,N=T-i,C=T+i,A=M(p-m),j=M(p+g);v.push({x1:N,y1:j,x2:C,y2:j}),v.push({x1:T,y1:A,x2:T,y2:j}),v.push({x1:N,y1:A,x2:C,y2:A})}return t.createElement(Nt,vh({className:"recharts-errorBar",key:"bar-".concat(v.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},d),v.map(function(e){return t.createElement("line",vh({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return t.createElement(Nt,{className:"recharts-errorBars"},h)}}],i&&wh(r.prototype,i),a&&wh(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.Component);function Ah(e){return Ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(e)}function jh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ph(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jh(Object(n),!0).forEach(function(t){Oh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Oh(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ah(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ah(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ah(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Th(Ch,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),Th(Ch,"displayName","ErrorBar");var kh=function(e){var t=e.children,n=e.formattedGraphicalItems,r=e.legendWidth,i=e.legendContent,a=$e(t,Gr);if(!a)return null;var o,s=Gr.defaultProps,l=void 0!==s?Ph(Ph({},s),a.props):{};return o=a.props&&a.props.payload?a.props&&a.props.payload:"children"===i?(n||[]).reduce(function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map(function(e){return{type:a.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(n||[]).map(function(e){var t=e.item,n=t.type.defaultProps,r=void 0!==n?Ph(Ph({},n),t.props):{},i=r.dataKey,a=r.name,o=r.legendType;return{inactive:r.hide,dataKey:i,type:l.iconType||o||"square",color:Hh(t),value:a||i,payload:r}}),Ph(Ph(Ph({},l),Gr.getWithHeight(a,r)),{},{payload:o,item:a})};function Rh(e){return Rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(e)}function Dh(e){return function(e){if(Array.isArray(e))return Lh(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Lh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lh(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ih(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Uh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ih(Object(n),!0).forEach(function(t){Fh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ih(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fh(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Rh(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rh(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bh(e,t,n){return ge()(e)||ge()(t)?n:be(t)?he()(e,t,n):je()(t)?t(e):n}function zh(e,t,n,r){var i=Id()(e,function(e){return Bh(e,t)});if("number"===n){var a=i.filter(function(e){return ye(e)||parseFloat(e)});return a.length?[Dd()(a),kd()(a)]:[1/0,-1/0]}return(r?i.filter(function(e){return!ge()(e)}):i).map(function(e){return be(e)||e instanceof Date?e:""})}var Hh=function(e){var t,n,r=e.type.displayName,i=null!==(t=e.type)&&void 0!==t&&t.defaultProps?Uh(Uh({},e.type.defaultProps),e.props):e.props,a=i.stroke,o=i.fill;switch(r){case"Line":n=a;break;case"Area":case"Radar":n=a&&"none"!==a?a:o;break;default:n=o}return n},Vh=function(e,t,n,r,i){var a=Je(t.props.children,Ch).filter(function(e){return function(e,t,n){return!!ge()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,i,e.props.direction)});if(a&&a.length){var o=a.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var r=Bh(t,n);if(ge()(r))return e;var i=Array.isArray(r)?[Dd()(r),kd()(r)]:[r,r],a=o.reduce(function(e,n){var r=Bh(t,n,0),a=i[0]-Math.abs(Array.isArray(r)?r[0]:r),o=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(a,e[0]),Math.max(o,e[1])]},[1/0,-1/0]);return[Math.min(a[0],e[0]),Math.max(a[1],e[1])]},[1/0,-1/0])}return null},Wh=function(e,t,n,r,i){var a=t.map(function(t){var a=t.props.dataKey;return"number"===n&&a&&Vh(e,t,a,r)||zh(e,a,n,i)});if("number"===n)return a.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var o={};return a.reduce(function(e,t){for(var n=0,r=t.length;n<r;n++)o[t[n]]||(o[t[n]]=!0,e.push(t[n]));return e},[])},Gh=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},Xh=function(e,t,n,r){if(r)return e.map(function(e){return e.coordinate});var i,a,o=e.map(function(e){return e.coordinate===t&&(i=!0),e.coordinate===n&&(a=!0),e.coordinate});return i||o.push(t),a||o.push(n),o},qh=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,a=e.type,o=e.range,s="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===a&&r.bandwidth?r.bandwidth()/s:0;return l="angleAxis"===e.axisType&&(null===o||void 0===o?void 0:o.length)>=2?2*ve(o[0]-o[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map(function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}}).filter(function(e){return!ue()(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}}):r.ticks&&!n?r.ticks(e.tickCount).map(function(e){return{coordinate:r(e)+l,value:e,offset:l}}):r.domain().map(function(e,t){return{coordinate:r(e)+l,value:i?i[e]:e,index:t,offset:l}})},Yh=new WeakMap,Kh=function(e,t){if("function"!==typeof t)return e;Yh.has(e)||Yh.set(e,new WeakMap);var n=Yh.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},Zh=1e-4,Jh={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0,o=0;o<t;++o){var s=ue()(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=i,e[o][n][1]=i+s,i=e[o][n][1]):(e[o][n][0]=a,e[o][n][1]=a+s,a=e[o][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,a=0,o=e[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<r;++n)e[n][a][1]/=i}Nd(e,t)}},none:Nd,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=e[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}Nd(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,l=0,c=0;s<i;++s){for(var u=e[t[s]],d=u[o][1]||0,h=(d-(u[o-1][1]||0))/2,p=0;p<s;++p){var f=e[t[p]];h+=(f[o][1]||0)-(f[o-1][1]||0)}l+=d,c+=h*d}n[o-1][1]+=n[o-1][0]=a,l&&(a-=c/l)}n[o-1][1]+=n[o-1][0]=a,Nd(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,a=0;a<t;++a){var o=ue()(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=0,e[a][n][1]=0)}}},$h=function(e,t,n){var r=t.map(function(e){return e.props.dataKey}),i=Jh[n],a=function(){var e=zn([]),t=Ad,n=Nd,r=jd;function i(i){var a,o,s=Array.from(e.apply(this,arguments),Pd),l=s.length,c=-1;for(const e of i)for(a=0,++c;a<l;++a)(s[a][c]=[0,+r(e,s[a].key,c,i)]).data=e;for(a=0,o=Cd(t(s));a<l;++a)s[o[a]].index=a;return n(s,o),s}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:zn(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:zn(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?Ad:"function"===typeof e?e:zn(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?Nd:e,i):n},i}().keys(r).value(function(e,t){return+Bh(e,t,0)}).order(Ad).offset(i);return a(e)};function Qh(e){var t=e.axis,n=e.ticks,r=e.bandSize,i=e.entry,a=e.index,o=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!ge()(i[t.dataKey])){var s=Te(n,"value",i[t.dataKey]);if(s)return s.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=Bh(i,ge()(o)?t.dataKey:o);return ge()(l)?null:t.scale(l)}var ep=function(e){var t=e.axis,n=e.ticks,r=e.offset,i=e.bandSize,a=e.entry,o=e.index;if("category"===t.type)return n[o]?n[o].coordinate+r:null;var s=Bh(a,t.dataKey,t.domain[o]);return ge()(s)?null:t.scale(s)-i/2+r},tp=function(e,t,n){return Object.keys(e).reduce(function(r,i){var a=e[i].stackedData.reduce(function(e,r){var i=function(e){return e.reduce(function(e,t){return[Dd()(t.concat([e[0]]).filter(ye)),kd()(t.concat([e[1]]).filter(ye))]},[1/0,-1/0])}(r.slice(t,n+1));return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]},[1/0,-1/0]);return[Math.min(a[0],r[0]),Math.max(a[1],r[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},np=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rp=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ip=function(e,t,n){if(je()(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(ye(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(np.test(e[0])){var i=+np.exec(e[0])[1];r[0]=t[0]-i}else je()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(ye(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(rp.test(e[1])){var a=+rp.exec(e[1])[1];r[1]=t[1]+a}else je()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},ap=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=vt()(t,function(e){return e.coordinate}),a=1/0,o=1,s=i.length;o<s;o++){var l=i[o],c=i[o-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0},op=function(e,t,n){return e&&e.length?Fd()(e,he()(n,"type.defaultProps.domain"))?t:e:t},sp=function(e,t){var n=e.type.defaultProps?Uh(Uh({},e.type.defaultProps),e.props):e.props,r=n.dataKey,i=n.name,a=n.unit,o=n.formatter,s=n.tooltipType,l=n.chartType,c=n.hide;return Uh(Uh({},nt(e,!1)),{},{dataKey:r,unit:a,formatter:o,name:i||r,color:Hh(e),value:Bh(t,r),type:s,payload:t,chartType:l,hide:c})};function lp(e){return lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lp(e)}function cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function up(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cp(Object(n),!0).forEach(function(t){dp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dp(e,t,n){return t=function(e){var t=function(e,t){if("object"!=lp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lp(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hp=["Webkit","Moz","O","ms"];function pp(e){return pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(e)}function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fp.apply(this,arguments)}function mp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mp(Object(n),!0).forEach(function(t){_p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sp(r.key),r)}}function xp(e,t,n){return t=bp(t),function(e,t){if(t&&("object"===pp(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,yp()?Reflect.construct(t,n||[],bp(e).constructor):t.apply(e,n))}function yp(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(yp=function(){return!!e})()}function bp(e){return bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bp(e)}function wp(e,t){return wp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wp(e,t)}function _p(e,t,n){return(t=Sp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sp(e){var t=function(e,t){if("object"!=pp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pp(t)?t:t+""}var Ep=function(e){return e.changedTouches&&!!e.changedTouches.length},Mp=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),_p(t=xp(this,n,[e]),"handleDrag",function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)}),_p(t,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])}),_p(t,"handleDragEnd",function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=t.props,n=e.endIndex,r=e.onDragEnd,i=e.startIndex;null===r||void 0===r||r({endIndex:n,startIndex:i})}),t.detachDragEndListener()}),_p(t,"handleLeaveWrapper",function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))}),_p(t,"handleEnterSlideOrTraveller",function(){t.setState({isTextActive:!0})}),_p(t,"handleLeaveSlideOrTraveller",function(){t.setState({isTextActive:!1})}),_p(t,"handleSlideDragStart",function(e){var n=Ep(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:n.pageX}),t.attachDragEndListener()}),t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(t,"startX"),endX:t.handleTravellerDragStart.bind(t,"endX")},t.state={},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wp(e,t)}(n,e),r=n,i=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,r=e.endX,i=this.state.scaleValues,a=this.props,o=a.gap,s=a.data.length-1,l=Math.min(t,r),c=Math.max(t,r),u=n.getIndexInRange(i,l),d=n.getIndexInRange(i,c);return{startIndex:u-u%o,endIndex:d===s?s:d-d%o}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,a=Bh(n[e],i,e);return je()(r)?r(a,e):a}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,a=this.props,o=a.x,s=a.width,l=a.travellerWidth,c=a.startIndex,u=a.endIndex,d=a.onChange,h=e.pageX-n;h>0?h=Math.min(h,o+s-l-i,o+s-l-r):h<0&&(h=Math.max(h,o-r,o-i));var p=this.getIndex({startX:r+h,endX:i+h});p.startIndex===c&&p.endIndex===u||!d||d(p),this.setState({startX:r+h,endX:i+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=Ep(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,i=t.endX,a=t.startX,o=this.state[r],s=this.props,l=s.x,c=s.width,u=s.travellerWidth,d=s.onChange,h=s.gap,p=s.data,f={startX:this.state.startX,endX:this.state.endX},m=e.pageX-n;m>0?m=Math.min(m,l+c-u-o):m<0&&(m=Math.max(m,l-o)),f[r]=o+m;var g=this.getIndex(f),v=g.startIndex,x=g.endIndex;this.setState(_p(_p({},r,o+m),"brushMoveStartX",e.pageX),function(){d&&function(){var e=p.length-1;return"startX"===r&&(i>a?v%h===0:x%h===0)||i<a&&x===e||"endX"===r&&(i>a?x%h===0:v%h===0)||i>a&&x===e}()&&d(g)})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,i=r.scaleValues,a=r.startX,o=r.endX,s=this.state[t],l=i.indexOf(s);if(-1!==l){var c=l+e;if(!(-1===c||c>=i.length)){var u=i[c];"startX"===t&&u>=o||"endX"===t&&u<=a||this.setState(_p({},t,u),function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,a=e.height,o=e.fill,s=e.stroke;return t.createElement("rect",{stroke:s,fill:o,x:n,y:r,width:i,height:a})}},{key:"renderPanorama",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,a=e.height,o=e.data,s=e.children,l=e.padding,c=t.Children.only(s);return c?t.cloneElement(c,{x:n,y:r,width:i,height:a,margin:l,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(e,r){var i,a,o=this,s=this.props,l=s.y,c=s.travellerWidth,u=s.height,d=s.traveller,h=s.ariaLabel,p=s.data,f=s.startIndex,m=s.endIndex,g=Math.max(e,this.props.x),v=gp(gp({},nt(this.props,!1)),{},{x:g,y:l,width:c,height:u}),x=h||"Min value: ".concat(null===(i=p[f])||void 0===i?void 0:i.name,", Max value: ").concat(null===(a=p[m])||void 0===a?void 0:a.name);return t.createElement(Nt,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),o.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},n.renderTraveller(d,v))}},{key:"renderSlide",value:function(e,n){var r=this.props,i=r.y,a=r.height,o=r.stroke,s=r.travellerWidth,l=Math.min(e,n)+s,c=Math.max(Math.abs(n-e)-s,0);return t.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:l,y:i,width:c,height:a})}},{key:"renderText",value:function(){var e=this.props,n=e.startIndex,r=e.endIndex,i=e.y,a=e.height,o=e.travellerWidth,s=e.stroke,l=this.state,c=l.startX,u=l.endX,d={pointerEvents:"none",fill:s};return t.createElement(Nt,{className:"recharts-brush-texts"},t.createElement(jo,fp({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,u)-5,y:i+a/2},d),this.getTextOfTick(n)),t.createElement(jo,fp({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,u)+o+5,y:i+a/2},d),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,n=e.data,r=e.className,i=e.children,a=e.x,o=e.y,s=e.width,l=e.height,c=e.alwaysShowText,u=this.state,d=u.startX,h=u.endX,p=u.isTextActive,f=u.isSlideMoving,m=u.isTravellerMoving,g=u.isTravellerFocused;if(!n||!n.length||!ye(a)||!ye(o)||!ye(s)||!ye(l)||s<=0||l<=0)return null;var v=ie("recharts-brush",r),x=1===t.Children.count(i),y=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,function(e){return e.toUpperCase()}),r=hp.reduce(function(e,r){return up(up({},e),{},dp({},r+n,t))},{});return r[e]=t,r}("userSelect","none");return t.createElement(Nt,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:y},this.renderBackground(),x&&this.renderPanorama(),this.renderSlide(d,h),this.renderTravellerLayer(d,"startX"),this.renderTravellerLayer(h,"endX"),(p||f||m||g||c)&&this.renderText())}}],a=[{key:"renderDefaultTraveller",value:function(e){var n=e.x,r=e.y,i=e.width,a=e.height,o=e.stroke,s=Math.floor(r+a/2)-1;return t.createElement(t.Fragment,null,t.createElement("rect",{x:n,y:r,width:i,height:a,fill:o,stroke:"none"}),t.createElement("line",{x1:n+1,y1:s,x2:n+i-1,y2:s,fill:"none",stroke:"#fff"}),t.createElement("line",{x1:n+1,y1:s+2,x2:n+i-1,y2:s+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,r){return t.isValidElement(e)?t.cloneElement(e,r):je()(e)?e(r):n.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,a=e.travellerWidth,o=e.updateId,s=e.startIndex,l=e.endIndex;if(n!==t.prevData||o!==t.prevUpdateId)return gp({prevData:n,prevTravellerWidth:a,prevUpdateId:o,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,a=e.width,o=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,l=Xa().domain(mt()(0,s)).range([i,i+a-o]),c=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:i,travellerWidth:a,startIndex:s,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||a!==t.prevTravellerWidth)){t.scale.range([i,i+r-a]);var c=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:n,prevTravellerWidth:a,prevUpdateId:o,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],i&&vp(r.prototype,i),a&&vp(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.PureComponent);function Tp(e){return Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tp(e)}function Np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Np(Object(n),!0).forEach(function(t){Ap(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Np(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ap(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Tp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tp(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_p(Mp,"displayName","Brush"),_p(Mp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var jp=Math.PI/180,Pp=function(e){return 180*e/Math.PI},Op=function(e,t,n,r){return{x:e+Math.cos(-jp*r)*n,y:t+Math.sin(-jp*r)*n}},kp=function(e,t){var n=e.x,r=e.y,i=t.cx,a=t.cy,o=function(e,t){var n=e.x,r=e.y,i=t.x,a=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-a,2))}({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o};var s=(n-i)/o,l=Math.acos(s);return r>a&&(l=2*Math.PI-l),{radius:o,angle:Pp(l),angleInRadian:l}},Rp=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),a=Math.floor(r/360);return e+360*Math.min(i,a)},Dp=function(e,t){var n=e.x,r=e.y,i=kp({x:n,y:r},t),a=i.radius,o=i.angle,s=t.innerRadius,l=t.outerRadius;if(a<s||a>l)return!1;if(0===a)return!0;var c,u=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:t-360*a,endAngle:n-360*a}}(t),d=u.startAngle,h=u.endAngle,p=o;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;c=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;c=p>=h&&p<=d}return c?Cp(Cp({},t),{},{radius:a,angle:Rp(p,t)}):null};function Lp(e){return Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lp(e)}var Ip=["offset"];function Up(e){return function(e){if(Array.isArray(e))return Fp(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Fp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fp(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bp(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zp(Object(n),!0).forEach(function(t){Vp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zp(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vp(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Lp(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lp(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wp(){return Wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wp.apply(this,arguments)}var Gp=function(e,n,r){var i,a,o=e.position,s=e.viewBox,l=e.offset,c=e.className,u=s,d=u.cx,h=u.cy,p=u.innerRadius,f=u.outerRadius,m=u.startAngle,g=u.endAngle,v=u.clockWise,x=(p+f)/2,y=function(e,t){return ve(t-e)*Math.min(Math.abs(t-e),360)}(m,g),b=y>=0?1:-1;"insideStart"===o?(i=m+b*l,a=v):"insideEnd"===o?(i=g-b*l,a=!v):"end"===o&&(i=g+b*l,a=v),a=y<=0?a:!a;var w=Op(d,h,x,i),_=Op(d,h,x,i+359*(a?1:-1)),S="M".concat(w.x,",").concat(w.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(a?0:1,",\n    ").concat(_.x,",").concat(_.y),E=ge()(e.id)?_e("recharts-radial-line-"):e.id;return t.createElement("text",Wp({},r,{dominantBaseline:"central",className:ie("recharts-radial-bar-label",c)}),t.createElement("defs",null,t.createElement("path",{id:E,d:S})),t.createElement("textPath",{xlinkHref:"#".concat(E)},n))};function Xp(e){var n,r=e.offset,i=Hp({offset:void 0===r?5:r},Bp(e,Ip)),a=i.viewBox,o=i.position,s=i.value,l=i.children,c=i.content,u=i.className,d=void 0===u?"":u,h=i.textBreakAll;if(!a||ge()(s)&&ge()(l)&&!(0,t.isValidElement)(c)&&!je()(c))return null;if((0,t.isValidElement)(c))return(0,t.cloneElement)(c,i);if(je()(c)){if(n=(0,t.createElement)(c,i),(0,t.isValidElement)(n))return n}else n=function(e){var t=e.value,n=e.formatter,r=ge()(e.children)?t:e.children;return je()(n)?n(r):r}(i);var p=function(e){return"cx"in e&&ye(e.cx)}(a),f=nt(i,!0);if(p&&("insideStart"===o||"insideEnd"===o||"end"===o))return Gp(i,n,f);var m=p?function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,a=i.cx,o=i.cy,s=i.innerRadius,l=i.outerRadius,c=(i.startAngle+i.endAngle)/2;if("outside"===r){var u=Op(a,o,l+n,c),d=u.x;return{x:d,y:u.y,textAnchor:d>=a?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var h=Op(a,o,(s+l)/2,c);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}}(i):function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,a=t,o=a.x,s=a.y,l=a.width,c=a.height,u=c>=0?1:-1,d=u*r,h=u>0?"end":"start",p=u>0?"start":"end",f=l>=0?1:-1,m=f*r,g=f>0?"end":"start",v=f>0?"start":"end";if("top"===i)return Hp(Hp({},{x:o+l/2,y:s-u*r,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===i)return Hp(Hp({},{x:o+l/2,y:s+c+d,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(s+c),0),width:l}:{});if("left"===i){var x={x:o-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"};return Hp(Hp({},x),n?{width:Math.max(x.x-n.x,0),height:c}:{})}if("right"===i){var y={x:o+l+m,y:s+c/2,textAnchor:v,verticalAnchor:"middle"};return Hp(Hp({},y),n?{width:Math.max(n.x+n.width-y.x,0),height:c}:{})}var b=n?{width:l,height:c}:{};return"insideLeft"===i?Hp({x:o+m,y:s+c/2,textAnchor:v,verticalAnchor:"middle"},b):"insideRight"===i?Hp({x:o+l-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===i?Hp({x:o+l/2,y:s+d,textAnchor:"middle",verticalAnchor:p},b):"insideBottom"===i?Hp({x:o+l/2,y:s+c-d,textAnchor:"middle",verticalAnchor:h},b):"insideTopLeft"===i?Hp({x:o+m,y:s+d,textAnchor:v,verticalAnchor:p},b):"insideTopRight"===i?Hp({x:o+l-m,y:s+d,textAnchor:g,verticalAnchor:p},b):"insideBottomLeft"===i?Hp({x:o+m,y:s+c-d,textAnchor:v,verticalAnchor:h},b):"insideBottomRight"===i?Hp({x:o+l-m,y:s+c-d,textAnchor:g,verticalAnchor:h},b):Oe()(i)&&(ye(i.x)||xe(i.x))&&(ye(i.y)||xe(i.y))?Hp({x:o+Se(i.x,l),y:s+Se(i.y,c),textAnchor:"end",verticalAnchor:"end"},b):Hp({x:o+l/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)}(i);return t.createElement(jo,Wp({className:ie("recharts-label",d)},f,m,{breakAll:h}),n)}Xp.displayName="Label";var qp=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,a=e.endAngle,o=e.r,s=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,d=e.y,h=e.top,p=e.left,f=e.width,m=e.height,g=e.clockWise,v=e.labelViewBox;if(v)return v;if(ye(f)&&ye(m)){if(ye(u)&&ye(d))return{x:u,y:d,width:f,height:m};if(ye(h)&&ye(p))return{x:h,y:p,width:f,height:m}}return ye(u)&&ye(d)?{x:u,y:d,width:0,height:0}:ye(t)&&ye(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:a||r||0,innerRadius:l||0,outerRadius:c||s||o||0,clockWise:g}:e.viewBox?e.viewBox:{}};Xp.parseViewBox=qp,Xp.renderCallByParent=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=qp(e),o=Je(i,Xp).map(function(e,r){return(0,t.cloneElement)(e,{viewBox:n||a,key:"label-".concat(r)})});if(!r)return o;var s=function(e,n){return e?!0===e?t.createElement(Xp,{key:"label-implicit",viewBox:n}):be(e)?t.createElement(Xp,{key:"label-implicit",viewBox:n,value:e}):(0,t.isValidElement)(e)?e.type===Xp?(0,t.cloneElement)(e,{key:"label-implicit",viewBox:n}):t.createElement(Xp,{key:"label-implicit",content:e,viewBox:n}):je()(e)?t.createElement(Xp,{key:"label-implicit",content:e,viewBox:n}):Oe()(e)?t.createElement(Xp,Wp({viewBox:n},e,{key:"label-implicit"})):null:null}(e.label,n||a);return[s].concat(Up(o))};var Yp=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},Kp=n(1733),Zp=n.n(Kp),Jp=n(7002),$p=n.n(Jp),Qp=function(e){return null};Qp.displayName="Cell";var ef=n(4065),tf=n.n(ef);function nf(e){return nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(e)}var rf=["valueAccessor"],af=["data","dataKey","clockWise","id","textBreakAll"];function of(e){return function(e){if(Array.isArray(e))return sf(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return sf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sf(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lf(){return lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lf.apply(this,arguments)}function cf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function uf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cf(Object(n),!0).forEach(function(t){df(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function df(e,t,n){return t=function(e){var t=function(e,t){if("object"!=nf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nf(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hf(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var pf=function(e){return Array.isArray(e.value)?tf()(e.value):e.value};function ff(e){var n=e.valueAccessor,r=void 0===n?pf:n,i=hf(e,rf),a=i.data,o=i.dataKey,s=i.clockWise,l=i.id,c=i.textBreakAll,u=hf(i,af);return a&&a.length?t.createElement(Nt,{className:"recharts-label-list"},a.map(function(e,n){var i=ge()(o)?r(e,n):Bh(e&&e.payload,o),a=ge()(l)?{}:{id:"".concat(l,"-").concat(n)};return t.createElement(Xp,lf({},nt(e,!0),u,a,{parentViewBox:e.parentViewBox,value:i,textBreakAll:c,viewBox:Xp.parseViewBox(ge()(s)?e:uf(uf({},e),{},{clockWise:s})),key:"label-".concat(n),index:n}))})):null}ff.displayName="LabelList",ff.renderCallByParent=function(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var i=Je(e.children,ff).map(function(e,r){return(0,t.cloneElement)(e,{data:n,key:"labelList-".concat(r)})});if(!r)return i;var a=function(e,n){return e?!0===e?t.createElement(ff,{key:"labelList-implicit",data:n}):t.isValidElement(e)||je()(e)?t.createElement(ff,{key:"labelList-implicit",data:n,content:e}):Oe()(e)?t.createElement(ff,lf({data:n},e,{key:"labelList-implicit"})):null:null}(e.label,n);return[a].concat(of(i))};var mf=n(2322),gf=n.n(mf),vf=n(6361),xf=n.n(vf);function yf(e){return yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(e)}function bf(){return bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bf.apply(this,arguments)}function wf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sf(Object(n),!0).forEach(function(t){Mf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Mf(e,t,n){return t=function(e){var t=function(e,t){if("object"!=yf(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yf(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tf=function(e,t,n,r,i){var a,o=n-r;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+n,",").concat(t),a+="L ".concat(e+n-o/2,",").concat(t+i),a+="L ".concat(e+n-o/2-r,",").concat(t+i),a+="L ".concat(e,",").concat(t," Z")},Nf={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Cf=function(e){var n=Ef(Ef({},Nf),e),r=(0,t.useRef)(),i=wf((0,t.useState)(-1),2),a=i[0],o=i[1];(0,t.useEffect)(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&o(e)}catch(t){}},[]);var s=n.x,l=n.y,c=n.upperWidth,u=n.lowerWidth,d=n.height,h=n.className,p=n.animationEasing,f=n.animationDuration,m=n.animationBegin,g=n.isUpdateAnimationActive;if(s!==+s||l!==+l||c!==+c||u!==+u||d!==+d||0===c&&0===u||0===d)return null;var v=ie("recharts-trapezoid",h);return g?t.createElement(Sa,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:d,x:s,y:l},to:{upperWidth:c,lowerWidth:u,height:d,x:s,y:l},duration:f,animationEasing:p,isActive:g},function(e){var i=e.upperWidth,o=e.lowerWidth,s=e.height,l=e.x,c=e.y;return t.createElement(Sa,{canBegin:a>0,from:"0px ".concat(-1===a?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,easing:p},t.createElement("path",bf({},nt(n,!0),{className:v,d:Tf(l,c,i,o,s),ref:r})))}):t.createElement("g",null,t.createElement("path",bf({},nt(n,!0),{className:v,d:Tf(s,l,c,u,d)})))};function Af(e){return Af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(e)}function jf(){return jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jf.apply(this,arguments)}function Pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Of(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pf(Object(n),!0).forEach(function(t){kf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kf(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Af(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Af(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Af(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Rf=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,a=e.sign,o=e.isExternal,s=e.cornerRadius,l=e.cornerIsExternal,c=s*(o?1:-1)+r,u=Math.asin(s/c)/jp,d=l?i:i+a*u,h=l?i-a*u:i;return{center:Op(t,n,c,d),circleTangency:Op(t,n,r,d),lineTangency:Op(t,n,c*Math.cos(u*jp),h),theta:u}},Df=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,a=e.startAngle,o=function(e,t){return ve(t-e)*Math.min(Math.abs(t-e),359.999)}(a,e.endAngle),s=a+o,l=Op(t,n,i,a),c=Op(t,n,i,s),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(a>s),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var d=Op(t,n,r,a),h=Op(t,n,r,s);u+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(a<=s),",\n            ").concat(d.x,",").concat(d.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},Lf={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},If=function(e){var n=Of(Of({},Lf),e),r=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,c=n.cornerIsExternal,u=n.startAngle,d=n.endAngle,h=n.className;if(o<a||u===d)return null;var p,f=ie("recharts-sector",h),m=o-a,g=Se(s,m,0,!0);return p=g>0&&Math.abs(u-d)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,a=e.cornerRadius,o=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=ve(c-l),d=Rf({cx:t,cy:n,radius:i,angle:l,sign:u,cornerRadius:a,cornerIsExternal:s}),h=d.circleTangency,p=d.lineTangency,f=d.theta,m=Rf({cx:t,cy:n,radius:i,angle:c,sign:-u,cornerRadius:a,cornerIsExternal:s}),g=m.circleTangency,v=m.lineTangency,x=m.theta,y=s?Math.abs(l-c):Math.abs(l-c)-f-x;if(y<0)return o?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*a,",0\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*-a,",0\n      "):Df({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var b="M ".concat(p.x,",").concat(p.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,"\n  ");if(r>0){var w=Rf({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),_=w.circleTangency,S=w.lineTangency,E=w.theta,M=Rf({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),T=M.circleTangency,N=M.lineTangency,C=M.theta,A=s?Math.abs(l-c):Math.abs(l-c)-E-C;if(A<0&&0===a)return"".concat(b,"L").concat(t,",").concat(n,"Z");b+="L".concat(N.x,",").concat(N.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(T.x,",").concat(T.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(A>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else b+="L".concat(t,",").concat(n,"Z");return b}({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):Df({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:d}),t.createElement("path",jf({},nt(n,!0),{className:f,d:p,role:"img"}))},Uf=["option","shapeType","propTransformer","activeClassName","isActive"];function Ff(e){return Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(e)}function Bf(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zf(Object(n),!0).forEach(function(t){Vf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zf(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vf(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ff(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ff(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ff(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wf(e,t){return Hf(Hf({},t),e)}function Gf(e){var n=e.shapeType,r=e.elementProps;switch(n){case"rectangle":return t.createElement(Ra,r);case"trapezoid":return t.createElement(Cf,r);case"sector":return t.createElement(If,r);case"symbols":if(function(e){return"symbols"===e}(n))return t.createElement(yr,r);break;default:return null}}function Xf(e){var n,r=e.option,i=e.shapeType,a=e.propTransformer,o=void 0===a?Wf:a,s=e.activeClassName,l=void 0===s?"recharts-active-shape":s,c=e.isActive,u=Bf(e,Uf);if((0,t.isValidElement)(r))n=(0,t.cloneElement)(r,Hf(Hf({},u),function(e){return(0,t.isValidElement)(e)?e.props:e}(r)));else if(je()(r))n=r(u);else if(gf()(r)&&!xf()(r)){var d=o(r,u);n=t.createElement(Gf,{shapeType:i,elementProps:d})}else{var h=u;n=t.createElement(Gf,{shapeType:i,elementProps:h})}return c?t.createElement(Nt,{className:l},n):n}function qf(e,t){return null!=t&&"trapezoids"in e.props}function Yf(e,t){return null!=t&&"sectors"in e.props}function Kf(e,t){return null!=t&&"points"in e.props}function Zf(e,t){var n,r,i=e.x===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,a=e.y===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return i&&a}function Jf(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function $f(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function Qf(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=function(e,t){var n;return qf(e,t)?n="trapezoids":Yf(e,t)?n="sectors":Kf(e,t)&&(n="points"),n}(n,t),a=function(e,t){var n,r;return qf(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:Yf(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:Kf(e,t)?t.payload:{}}(n,t),o=r.filter(function(e,r){var o=Fd()(a,e),s=n.props[i].filter(function(e){var r=function(e,t){var n;return qf(e,t)?n=Zf:Yf(e,t)?n=Jf:Kf(e,t)&&(n=$f),n}(n,t);return r(e,t)}),l=n.props[i].indexOf(s[s.length-1]);return o&&r===l});return r.indexOf(o[o.length-1])}var em=["x","y"];function tm(e){return tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tm(e)}function nm(){return nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nm.apply(this,arguments)}function rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function im(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rm(Object(n),!0).forEach(function(t){am(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function am(e,t,n){return t=function(e){var t=function(e,t){if("object"!=tm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tm(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function om(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sm(e,t){var n=e.x,r=e.y,i=om(e,em),a="".concat(n),o=parseInt(a,10),s="".concat(r),l=parseInt(s,10),c="".concat(t.height||i.height),u=parseInt(c,10),d="".concat(t.width||i.width),h=parseInt(d,10);return im(im(im(im(im({},t),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function lm(e){return t.createElement(Xf,nm({shapeType:"rectangle",propTransformer:sm,activeClassName:"recharts-active-bar"},e))}var cm,um=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"===typeof e)return e;var i=ye(n)||function(e){return ge()(e)}(n);return i?e(n,r):(i||yt(!1),t)}},dm=["value","background"];function hm(e){return hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hm(e)}function pm(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fm.apply(this,arguments)}function mm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function gm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mm(Object(n),!0).forEach(function(t){_m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sm(r.key),r)}}function xm(e,t,n){return t=bm(t),function(e,t){if(t&&("object"===hm(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ym()?Reflect.construct(t,n||[],bm(e).constructor):t.apply(e,n))}function ym(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ym=function(){return!!e})()}function bm(e){return bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bm(e)}function wm(e,t){return wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wm(e,t)}function _m(e,t,n){return(t=Sm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sm(e){var t=function(e,t){if("object"!=hm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hm(t)?t:t+""}var Em=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return _m(e=xm(this,n,[].concat(r)),"state",{isAnimationFinished:!1}),_m(e,"id",_e("recharts-bar-")),_m(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()}),_m(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wm(e,t)}(n,e),r=n,i=[{key:"renderRectanglesStatically",value:function(e){var n=this,r=this.props,i=r.shape,a=r.dataKey,o=r.activeIndex,s=r.activeBar,l=nt(this.props,!1);return e&&e.map(function(e,r){var c=r===o,u=c?s:i,d=gm(gm(gm({},l),e),{},{isActive:c,option:u,index:r,dataKey:a,onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd});return t.createElement(Nt,fm({className:"recharts-bar-rectangle"},ze(n.props,e,r),{key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value,"-").concat(r)}),t.createElement(lm,d))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,n=this.props,r=n.data,i=n.layout,a=n.isAnimationActive,o=n.animationBegin,s=n.animationDuration,l=n.animationEasing,c=n.animationId,u=this.state.prevData;return t.createElement(Sa,{begin:o,duration:s,isActive:a,easing:l,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var a=n.t,o=r.map(function(e,t){var n=u&&u[t];if(n){var r=Me(n.x,e.x),o=Me(n.y,e.y),s=Me(n.width,e.width),l=Me(n.height,e.height);return gm(gm({},e),{},{x:r(a),y:o(a),width:s(a),height:l(a)})}if("horizontal"===i){var c=Me(0,e.height)(a);return gm(gm({},e),{},{y:e.y+e.height-c,height:c})}var d=Me(0,e.width)(a);return gm(gm({},e),{},{width:d})});return t.createElement(Nt,null,e.renderRectanglesStatically(o))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&Fd()(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,n=this.props,r=n.data,i=n.dataKey,a=n.activeIndex,o=nt(this.props.background,!1);return r.map(function(n,r){n.value;var s=n.background,l=pm(n,dm);if(!s)return null;var c=gm(gm(gm(gm(gm({},l),{},{fill:"#eee"},s),o),ze(e.props,n,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:i,index:r,className:"recharts-bar-background-rectangle"});return t.createElement(lm,fm({key:"background-bar-".concat(r),option:e.props.background,isActive:r===a},c))})}},{key:"renderErrorBar",value:function(e,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,i=r.data,a=r.xAxis,o=r.yAxis,s=r.layout,l=Je(r.children,Ch);if(!l)return null;var c="vertical"===s?i[0].height/2:i[0].width/2,u=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Bh(e,t)}},d={clipPath:e?"url(#clipPath-".concat(n,")"):null};return t.createElement(Nt,d,l.map(function(e){return t.cloneElement(e,{key:"error-bar-".concat(n,"-").concat(e.props.dataKey),data:i,xAxis:a,yAxis:o,layout:s,offset:c,dataPointFormatter:u})}))}},{key:"render",value:function(){var e=this.props,n=e.hide,r=e.data,i=e.className,a=e.xAxis,o=e.yAxis,s=e.left,l=e.top,c=e.width,u=e.height,d=e.isAnimationActive,h=e.background,p=e.id;if(n||!r||!r.length)return null;var f=this.state.isAnimationFinished,m=ie("recharts-bar",i),g=a&&a.allowDataOverflow,v=o&&o.allowDataOverflow,x=g||v,y=ge()(p)?this.id:p;return t.createElement(Nt,{className:m},g||v?t.createElement("defs",null,t.createElement("clipPath",{id:"clipPath-".concat(y)},t.createElement("rect",{x:g?s:s-c/2,y:v?l:l-u/2,width:g?c:2*c,height:v?u:2*u}))):null,t.createElement(Nt,{className:"recharts-bar-rectangles",clipPath:x?"url(#clipPath-".concat(y,")"):null},h?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(x,y),(!d||f)&&ff.renderCallByParent(this.props,r))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],i&&vm(r.prototype,i),a&&vm(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.PureComponent);function Mm(e){return Mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mm(e)}function Tm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jm(r.key),r)}}function Nm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nm(Object(n),!0).forEach(function(t){Am(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nm(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Am(e,t,n){return(t=jm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jm(e){var t=function(e,t){if("object"!=Mm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Mm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mm(t)?t:t+""}cm=Em,_m(Em,"displayName","Bar"),_m(Em,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!en.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),_m(Em,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,a=e.xAxis,o=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,u=e.dataStartIndex,d=e.displayedData,h=e.offset,p=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!p)return null;var f=t.layout,m=n.type.defaultProps,g=void 0!==m?gm(gm({},m),n.props):n.props,v=g.dataKey,x=g.children,y=g.minPointSize,b="horizontal"===f?o:a,w=c?b.scale.domain():null,_=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]}({numericAxis:b}),S=Je(x,Qp),E=d.map(function(e,t){var r,d,h,m,g,x;c?r=function(e,t){if(!t||2!==t.length||!ye(t[0])||!ye(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ye(e[0])||e[0]<n)&&(i[0]=n),(!ye(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i}(c[u+t],w):(r=Bh(e,v),Array.isArray(r)||(r=[_,r]));var b=um(y,cm.defaultProps.minPointSize)(r[1],t);if("horizontal"===f){var E,M=[o.scale(r[0]),o.scale(r[1])],T=M[0],N=M[1];d=ep({axis:a,ticks:s,bandSize:i,offset:p.offset,entry:e,index:t}),h=null!==(E=null!==N&&void 0!==N?N:T)&&void 0!==E?E:void 0,m=p.size;var C=T-N;if(g=Number.isNaN(C)?0:C,x={x:d,y:o.y,width:m,height:o.height},Math.abs(b)>0&&Math.abs(g)<Math.abs(b)){var A=ve(g||b)*(Math.abs(b)-Math.abs(g));h-=A,g+=A}}else{var j=[a.scale(r[0]),a.scale(r[1])],P=j[0],O=j[1];if(d=P,h=ep({axis:o,ticks:l,bandSize:i,offset:p.offset,entry:e,index:t}),m=O-P,g=p.size,x={x:a.x,y:h,width:a.width,height:g},Math.abs(b)>0&&Math.abs(m)<Math.abs(b))m+=ve(m||b)*(Math.abs(b)-Math.abs(m))}return gm(gm(gm({},e),{},{x:d,y:h,width:m,height:g,value:c?r:r[1],payload:e,background:x},S&&S[t]&&S[t].props),{},{tooltipPayload:[sp(n,e)],tooltipPosition:{x:d+m/2,y:h+g/2}})});return gm({data:E,layout:f},h)});var Pm=function(t,n,r,i,a){var o=t.width,s=t.height,l=t.layout,c=t.children,u=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!$e(c,Em);return u.reduce(function(o,s){var c,u,p,f,m,g=n[s],v=g.orientation,x=g.domain,y=g.padding,b=void 0===y?{}:y,w=g.mirror,_=g.reversed,S="".concat(v).concat(w?"Mirror":"");if("number"===g.type&&("gap"===g.padding||"no-gap"===g.padding)){var E=x[1]-x[0],M=1/0,T=g.categoricalDomain.sort(Ne);if(T.forEach(function(e,t){t>0&&(M=Math.min((e||0)-(T[t-1]||0),M))}),Number.isFinite(M)){var N=M/E,C="vertical"===g.layout?r.height:r.width;if("gap"===g.padding&&(c=N*C/2),"no-gap"===g.padding){var A=Se(t.barCategoryGap,N*C),j=N*C/2;c=j-A-(j-A)/C*A}}}u="xAxis"===i?[r.left+(b.left||0)+(c||0),r.left+r.width-(b.right||0)-(c||0)]:"yAxis"===i?"horizontal"===l?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(c||0),r.top+r.height-(b.bottom||0)-(c||0)]:g.range,_&&(u=[u[1],u[0]]);var P=function(t,n,r){var i=t.scale,a=t.type,o=t.layout,s=t.axisType;if("auto"===i)return"radial"===o&&"radiusAxis"===s?{scale:Wa(),realScaleType:"band"}:"radial"===o&&"angleAxis"===s?{scale:ml(),realScaleType:"linear"}:"category"===a&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Xa(),realScaleType:"point"}:"category"===a?{scale:Wa(),realScaleType:"band"}:{scale:ml(),realScaleType:"linear"};if(le()(i)){var l="scale".concat(xn()(i));return{scale:(e[l]||Xa)(),realScaleType:e[l]?l:"point"}}return je()(i)?{scale:i}:{scale:Xa(),realScaleType:"point"}}(g,a,h),O=P.scale,k=P.realScaleType;O.domain(x).range(u),function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-Zh,a=Math.max(r[0],r[1])+Zh,o=e(t[0]),s=e(t[n-1]);(o<i||o>a||s<i||s>a)&&e.domain([t[0],t[n-1]])}}(O);var R=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,a=t.originalDomain,o=t.allowDecimals,s=n||t.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&a&&("auto"===a[0]||"auto"===a[1])){var l=e.domain();if(!l.length)return null;var c=ph(l,i,o);return e.domain([Dd()(c),kd()(c)]),{niceTicks:c}}if(i&&"number"===r){var u=e.domain();return{niceTicks:fh(u,i,o)}}return null}(O,Cm(Cm({},g),{},{realScaleType:k}));"xAxis"===i?(m="top"===v&&!w||"bottom"===v&&w,p=r.left,f=d[S]-m*g.height):"yAxis"===i&&(m="left"===v&&!w||"right"===v&&w,p=d[S]-m*g.width,f=r.top);var D=Cm(Cm(Cm({},g),R),{},{realScaleType:k,x:p,y:f,scale:O,width:"xAxis"===i?r.width:g.width,height:"yAxis"===i?r.height:g.height});return D.bandSize=ap(D,R),g.hide||"xAxis"!==i?g.hide||(d[S]+=(m?-1:1)*D.width):d[S]+=(m?-1:1)*D.height,Cm(Cm({},o),{},Am({},s,D))},{})},Om=function(e,t){var n=e.x,r=e.y,i=t.x,a=t.y;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},km=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&Tm(t.prototype,n),r&&Tm(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();Am(km,"EPS",1e-4);var Rm=function(e){var t=Object.keys(e).reduce(function(t,n){return Cm(Cm({},t),{},Am({},n,km.create(e[n])))},{});return Cm(Cm({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return Zp()(e,function(e,n){return t[n].apply(e,{bandAware:r,position:i})})},isInRange:function(e){return $p()(e,function(e,n){return t[n].isInRange(e)})}})};function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dm.apply(this,arguments)}function Lm(e){return Lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lm(e)}function Im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Um(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Im(Object(n),!0).forEach(function(t){Wm(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Im(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gm(r.key),r)}}function Bm(e,t,n){return t=Hm(t),function(e,t){if(t&&("object"===Lm(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zm()?Reflect.construct(t,n||[],Hm(e).constructor):t.apply(e,n))}function zm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(zm=function(){return!!e})()}function Hm(e){return Hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hm(e)}function Vm(e,t){return Vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vm(e,t)}function Wm(e,t,n){return(t=Gm(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gm(e){var t=function(e,t){if("object"!=Lm(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lm(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lm(t)?t:t+""}var Xm=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Bm(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vm(e,t)}(n,e),r=n,i=[{key:"render",value:function(){var e=this.props,r=e.x,i=e.y,a=e.r,o=e.alwaysShow,s=e.clipPathId,l=be(r),c=be(i);if(Ce(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!l||!c)return null;var u=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,a=Rm({x:r.scale,y:i.scale}),o=a.apply({x:t,y:n},{bandAware:!0});return Yp(e,"discard")&&!a.isInRange(o)?null:o}(this.props);if(!u)return null;var d=u.x,h=u.y,p=this.props,f=p.shape,m=p.className,g=Um(Um({clipPath:Yp(this.props,"hidden")?"url(#".concat(s,")"):void 0},nt(this.props,!0)),{},{cx:d,cy:h});return t.createElement(Nt,{className:ie("recharts-reference-dot",m)},n.renderDot(f,g),Xp.renderCallByParent(this.props,{x:d-a,y:h-a,width:2*a,height:2*a}))}}],i&&Fm(r.prototype,i),a&&Fm(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.Component);Wm(Xm,"displayName","ReferenceDot"),Wm(Xm,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),Wm(Xm,"renderDot",function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):je()(e)?e(n):t.createElement(qr,Dm({},n,{cx:n.cx,cy:n.cy,className:"recharts-reference-dot-dot"}))});var qm=n(4597),Ym=n.n(qm),Km=n(8990),Zm=n.n(Km),Jm=n(5797),$m=n.n(Jm)()(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")});var Qm=(0,t.createContext)(void 0),eg=(0,t.createContext)(void 0),tg=(0,t.createContext)(void 0),ng=(0,t.createContext)({}),rg=(0,t.createContext)(void 0),ig=(0,t.createContext)(0),ag=(0,t.createContext)(0),og=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=e.clipPathId,s=e.children,l=e.width,c=e.height,u=$m(a);return t.createElement(Qm.Provider,{value:r},t.createElement(eg.Provider,{value:i},t.createElement(ng.Provider,{value:a},t.createElement(tg.Provider,{value:u},t.createElement(rg.Provider,{value:o},t.createElement(ig.Provider,{value:c},t.createElement(ag.Provider,{value:l},s)))))))};var sg=function(e){var n=(0,t.useContext)(Qm);null==n&&yt(!1);var r=n[e];return null==r&&yt(!1),r},lg=function(e){var n=(0,t.useContext)(eg);null==n&&yt(!1);var r=n[e];return null==r&&yt(!1),r},cg=function(){return(0,t.useContext)(ag)},ug=function(){return(0,t.useContext)(ig)};function dg(e){return dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(e)}function hg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bg(r.key),r)}}function pg(e,t,n){return t=mg(t),function(e,t){if(t&&("object"===dg(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,fg()?Reflect.construct(t,n||[],mg(e).constructor):t.apply(e,n))}function fg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fg=function(){return!!e})()}function mg(e){return mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mg(e)}function gg(e,t){return gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gg(e,t)}function vg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vg(Object(n),!0).forEach(function(t){yg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yg(e,t,n){return(t=bg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bg(e){var t=function(e,t){if("object"!=dg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dg(t)?t:t+""}function wg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sg.apply(this,arguments)}function Eg(e){var n=e.x,r=e.y,i=e.segment,a=e.xAxisId,o=e.yAxisId,s=e.shape,l=e.className,c=e.alwaysShow,u=(0,t.useContext)(rg),d=sg(a),h=lg(o),p=(0,t.useContext)(tg);if(!u||!p)return null;Ce(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=function(e,t,n,r,i,a,o,s,l){var c=i.x,u=i.y,d=i.width,h=i.height;if(n){var p=l.y,f=e.y.apply(p,{position:a});if(Yp(l,"discard")&&!e.y.isInRange(f))return null;var m=[{x:c+d,y:f},{x:c,y:f}];return"left"===s?m.reverse():m}if(t){var g=l.x,v=e.x.apply(g,{position:a});if(Yp(l,"discard")&&!e.x.isInRange(v))return null;var x=[{x:v,y:u+h},{x:v,y:u}];return"top"===o?x.reverse():x}if(r){var y=l.segment.map(function(t){return e.apply(t,{position:a})});return Yp(l,"discard")&&Ym()(y,function(t){return!e.isInRange(t)})?null:y}return null}(Rm({x:d.scale,y:h.scale}),be(n),be(r),i&&2===i.length,p,e.position,d.orientation,h.orientation,e);if(!f)return null;var m=wg(f,2),g=m[0],v=g.x,x=g.y,y=m[1],b=y.x,w=y.y,_=xg(xg({clipPath:Yp(e,"hidden")?"url(#".concat(u,")"):void 0},nt(e,!0)),{},{x1:v,y1:x,x2:b,y2:w});return t.createElement(Nt,{className:ie("recharts-reference-line",l)},function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):je()(e)?e(n):t.createElement("line",Sg({},n,{className:"recharts-reference-line-line"}))}(s,_),Xp.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return Om({x:t,y:n},{x:r,y:i})}({x1:v,y1:x,x2:b,y2:w})))}var Mg=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),pg(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gg(e,t)}(n,e),r=n,(i=[{key:"render",value:function(){return t.createElement(Eg,this.props)}}])&&hg(r.prototype,i),a&&hg(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.Component);function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tg.apply(this,arguments)}function Ng(e){return Ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(e)}function Cg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ag(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cg(Object(n),!0).forEach(function(t){Dg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cg(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Lg(r.key),r)}}function Pg(e,t,n){return t=kg(t),function(e,t){if(t&&("object"===Ng(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Og()?Reflect.construct(t,n||[],kg(e).constructor):t.apply(e,n))}function Og(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Og=function(){return!!e})()}function kg(e){return kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kg(e)}function Rg(e,t){return Rg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rg(e,t)}function Dg(e,t,n){return(t=Lg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lg(e){var t=function(e,t){if("object"!=Ng(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ng(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ng(t)?t:t+""}yg(Mg,"displayName","ReferenceLine"),yg(Mg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var Ig=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Pg(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rg(e,t)}(n,e),r=n,(i=[{key:"render",value:function(){var e=this.props,r=e.x1,i=e.x2,a=e.y1,o=e.y2,s=e.className,l=e.alwaysShow,c=e.clipPathId;Ce(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=be(r),d=be(i),h=be(a),p=be(o),f=this.props.shape;if(!u&&!d&&!h&&!p&&!f)return null;var m=function(e,t,n,r,i){var a=i.x1,o=i.x2,s=i.y1,l=i.y2,c=i.xAxis,u=i.yAxis;if(!c||!u)return null;var d=Rm({x:c.scale,y:u.scale}),h={x:e?d.x.apply(a,{position:"start"}):d.x.rangeMin,y:n?d.y.apply(s,{position:"start"}):d.y.rangeMin},p={x:t?d.x.apply(o,{position:"end"}):d.x.rangeMax,y:r?d.y.apply(l,{position:"end"}):d.y.rangeMax};return!Yp(i,"discard")||d.isInRange(h)&&d.isInRange(p)?Om(h,p):null}(u,d,h,p,this.props);if(!m&&!f)return null;var g=Yp(this.props,"hidden")?"url(#".concat(c,")"):void 0;return t.createElement(Nt,{className:ie("recharts-reference-area",s)},n.renderRect(f,Ag(Ag({clipPath:g},nt(this.props,!0)),m)),Xp.renderCallByParent(this.props,m))}}])&&jg(r.prototype,i),a&&jg(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.Component);function Ug(e){return function(e){if(Array.isArray(e))return Fg(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Fg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fg(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Dg(Ig,"displayName","ReferenceArea"),Dg(Ig,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),Dg(Ig,"renderRect",function(e,n){return t.isValidElement(e)?t.cloneElement(e,n):je()(e)?e(n):t.createElement(Ra,Tg({},n,{className:"recharts-reference-area-rect"}))});var Bg=function(e,t,n,r,i){var a=Je(e,Mg),o=Je(e,Xm),s=[].concat(Ug(a),Ug(o)),l=Je(e,Ig),c="".concat(r,"Id"),u=r[0],d=t;if(s.length&&(d=s.reduce(function(e,t){if(t.props[c]===n&&Yp(t.props,"extendDomain")&&ye(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e},d)),l.length){var h="".concat(u,"1"),p="".concat(u,"2");d=l.reduce(function(e,t){if(t.props[c]===n&&Yp(t.props,"extendDomain")&&ye(t.props[h])&&ye(t.props[p])){var r=t.props[h],i=t.props[p];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e},d)}return i&&i.length&&(d=i.reduce(function(e,t){return ye(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},d)),d},zg=n(7283),Hg=new(n.n(zg)()),Vg="recharts.syncMouseEvents";function Wg(e){return Wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(e)}function Gg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qg(r.key),r)}}function Xg(e,t,n){return(t=qg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qg(e){var t=function(e,t){if("object"!=Wg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wg(t)?t:t+""}var Yg=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Xg(this,"activeIndex",0),Xg(this,"coordinateList",[]),Xg(this,"layout","horizontal")},(t=[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,i=e.container,a=void 0===i?null:i,o=e.layout,s=void 0===o?null:o,l=e.offset,c=void 0===l?null:l,u=e.mouseHandlerCallback,d=void 0===u?null:u;this.coordinateList=null!==(t=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!==a&&void 0!==a?a:this.container,this.layout=null!==s&&void 0!==s?s:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==d&&void 0!==d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,a=n.height,o=this.coordinateList[this.activeIndex].coordinate,s=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+o+s,u=i+this.offset.top+a/2+l;this.mouseHandlerCallback({pageX:c,pageY:u})}}}])&&Gg(e.prototype,t),n&&Gg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Kg(){}function Zg(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Jg(e){this._context=e}function $g(e){this._context=e}function Qg(e){this._context=e}Jg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zg(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},$g.prototype={areaStart:Kg,areaEnd:Kg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Zg(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Qg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Zg(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class ev{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function tv(e){this._context=e}function nv(e){this._context=e}function rv(e){return new nv(e)}function iv(e){return e<0?-1:1}function av(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(iv(a)+iv(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function ov(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function sv(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function lv(e){this._context=e}function cv(e){this._context=new uv(e)}function uv(e){this._context=e}function dv(e){this._context=e}function hv(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function pv(e,t){this._context=e,this._t=t}function fv(e){return e[0]}function mv(e){return e[1]}function gv(e,t){var n=zn(!0),r=null,i=rv,a=null,o=cr(s);function s(s){var l,c,u,d=(s=Cd(s)).length,h=!1;for(null==r&&(a=i(u=o())),l=0;l<=d;++l)!(l<d&&n(c=s[l],l,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(c,l,s),+t(c,l,s));if(u)return a=null,u+""||null}return e="function"===typeof e?e:void 0===e?fv:zn(e),t="function"===typeof t?t:void 0===t?mv:zn(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:zn(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:zn(+e),s):t},s.defined=function(e){return arguments.length?(n="function"===typeof e?e:zn(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,null!=r&&(a=i(r)),s):i},s.context=function(e){return arguments.length?(null==e?r=a=null:a=i(r=e),s):r},s}function vv(e,t,n){var r=null,i=zn(!0),a=null,o=rv,s=null,l=cr(c);function c(c){var u,d,h,p,f,m=(c=Cd(c)).length,g=!1,v=new Array(m),x=new Array(m);for(null==a&&(s=o(f=l())),u=0;u<=m;++u){if(!(u<m&&i(p=c[u],u,c))===g)if(g=!g)d=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),h=u-1;h>=d;--h)s.point(v[h],x[h]);s.lineEnd(),s.areaEnd()}g&&(v[u]=+e(p,u,c),x[u]=+t(p,u,c),s.point(r?+r(p,u,c):v[u],n?+n(p,u,c):x[u]))}if(f)return s=null,f+""||null}function u(){return gv().defined(i).curve(o).context(a)}return e="function"===typeof e?e:void 0===e?fv:zn(+e),t="function"===typeof t?t:zn(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?mv:zn(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:zn(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:zn(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:zn(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:zn(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:zn(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:zn(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(i="function"===typeof e?e:zn(!!e),c):i},c.curve=function(e){return arguments.length?(o=e,null!=a&&(s=o(a)),c):o},c.context=function(e){return arguments.length?(null==e?a=s=null:s=o(a=e),c):a},c}function xv(e){return xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xv(e)}function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yv.apply(this,arguments)}function bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bv(Object(n),!0).forEach(function(t){_v(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _v(e,t,n){return t=function(e){var t=function(e,t){if("object"!=xv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xv(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}tv.prototype={areaStart:Kg,areaEnd:Kg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},lv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sv(this,this._t0,ov(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,sv(this,ov(this,n=av(this,e,t)),n);break;default:sv(this,this._t0,n=av(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(cv.prototype=Object.create(lv.prototype)).point=function(e,t){lv.prototype.point.call(this,t,e)},uv.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},dv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=hv(e),i=hv(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},pv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Sv={curveBasisClosed:function(e){return new $g(e)},curveBasisOpen:function(e){return new Qg(e)},curveBasis:function(e){return new Jg(e)},curveBumpX:function(e){return new ev(e,!0)},curveBumpY:function(e){return new ev(e,!1)},curveLinearClosed:function(e){return new tv(e)},curveLinear:rv,curveMonotoneX:function(e){return new lv(e)},curveMonotoneY:function(e){return new cv(e)},curveNatural:function(e){return new dv(e)},curveStep:function(e){return new pv(e,.5)},curveStepAfter:function(e){return new pv(e,1)},curveStepBefore:function(e){return new pv(e,0)}},Ev=function(e){return e.x===+e.x&&e.y===+e.y},Mv=function(e){return e.x},Tv=function(e){return e.y},Nv=function(e){var t,n=e.type,r=void 0===n?"linear":n,i=e.points,a=void 0===i?[]:i,o=e.baseLine,s=e.layout,l=e.connectNulls,c=void 0!==l&&l,u=function(e,t){if(je()(e))return e;var n="curve".concat(xn()(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?Sv[n]||rv:Sv["".concat(n).concat("vertical"===t?"Y":"X")]}(r,s),d=c?a.filter(function(e){return Ev(e)}):a;if(Array.isArray(o)){var h=c?o.filter(function(e){return Ev(e)}):o,p=d.map(function(e,t){return wv(wv({},e),{},{base:h[t]})});return(t="vertical"===s?vv().y(Tv).x1(Mv).x0(function(e){return e.base.x}):vv().x(Mv).y1(Tv).y0(function(e){return e.base.y})).defined(Ev).curve(u),t(p)}return(t="vertical"===s&&ye(o)?vv().y(Tv).x1(Mv).x0(o):ye(o)?vv().x(Mv).y1(Tv).y0(o):gv().x(Mv).y(Tv)).defined(Ev).curve(u),t(d)},Cv=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?Nv(e):i;return t.createElement("path",yv({},nt(e,!1),Be(e),{className:ie("recharts-curve",n),d:o,ref:a}))};function Av(e){return Av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(e)}var jv=["x","y","top","left","width","height","className"];function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pv.apply(this,arguments)}function Ov(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kv(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Av(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Av(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Av(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rv(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Dv=function(e,t,n,r,i,a){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(a,",").concat(t,"h").concat(n)},Lv=function(e){var n=e.x,r=void 0===n?0:n,i=e.y,a=void 0===i?0:i,o=e.top,s=void 0===o?0:o,l=e.left,c=void 0===l?0:l,u=e.width,d=void 0===u?0:u,h=e.height,p=void 0===h?0:h,f=e.className,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ov(Object(n),!0).forEach(function(t){kv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ov(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:r,y:a,top:s,left:c,width:d,height:p},Rv(e,jv));return ye(r)&&ye(a)&&ye(d)&&ye(p)&&ye(s)&&ye(c)?t.createElement("path",Pv({},nt(m,!0),{className:ie("recharts-cross",f),d:Dv(r,a,d,p,s,c)})):null};function Iv(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,a=e.endAngle;return{points:[Op(t,n,r,i),Op(t,n,r,a)],cx:t,cy:n,radius:r,startAngle:i,endAngle:a}}function Uv(e,t,n){var r,i,a,o;if("horizontal"===e)a=r=t.x,i=n.top,o=n.top+n.height;else if("vertical"===e)o=i=t.y,r=n.left,a=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return Iv(t);var s=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,d=t.angle,h=Op(s,l,c,d),p=Op(s,l,u,d);r=h.x,i=h.y,a=p.x,o=p.y}return[{x:r,y:i},{x:a,y:o}]}function Fv(e){return Fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fv(e)}function Bv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bv(Object(n),!0).forEach(function(t){Hv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bv(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hv(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Fv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fv(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vv(e){var n,r,i,a=e.element,o=e.tooltipEventType,s=e.isActive,l=e.activeCoordinate,c=e.activePayload,u=e.offset,d=e.activeTooltipIndex,h=e.tooltipAxisBandSize,p=e.layout,f=e.chartName,m=null!==(n=a.props.cursor)&&void 0!==n?n:null===(r=a.type.defaultProps)||void 0===r?void 0:r.cursor;if(!a||!m||!s||!l||"ScatterChart"!==f&&"axis"!==o)return null;var g=Cv;if("ScatterChart"===f)i=l,g=Lv;else if("BarChart"===f)i=function(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-i,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(p,l,u,h),g=Ra;else if("radial"===p){var v=Iv(l),x=v.cx,y=v.cy,b=v.radius;i={cx:x,cy:y,startAngle:v.startAngle,endAngle:v.endAngle,innerRadius:b,outerRadius:b},g=If}else i={points:Uv(p,l,u)},g=Cv;var w=zv(zv(zv(zv({stroke:"#ccc",pointerEvents:"none"},u),i),nt(m,!1)),{},{payload:c,payloadIndex:d,className:ie("recharts-tooltip-cursor",m.className)});return(0,t.isValidElement)(m)?(0,t.cloneElement)(m,w):(0,t.createElement)(g,w)}var Wv=["item"],Gv=["children","className","width","height","style","compact","title","desc"];function Xv(e){return Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(e)}function qv(){return qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qv.apply(this,arguments)}function Yv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||nx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kv(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Zv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sx(r.key),r)}}function Jv(e,t,n){return t=Qv(t),function(e,t){if(t&&("object"===Xv(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$v()?Reflect.construct(t,n||[],Qv(e).constructor):t.apply(e,n))}function $v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return($v=function(){return!!e})()}function Qv(e){return Qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qv(e)}function ex(e,t){return ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ex(e,t)}function tx(e){return function(e){if(Array.isArray(e))return rx(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nx(e,t){if(e){if("string"===typeof e)return rx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rx(e,t):void 0}}function rx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ix(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ax(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ix(Object(n),!0).forEach(function(t){ox(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ix(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ox(e,t,n){return(t=sx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sx(e){var t=function(e,t){if("object"!=Xv(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xv(t)?t:t+""}var lx={xAxis:["bottom","top"],yAxis:["left","right"]},cx={width:"100%",height:"100%"},ux={x:0,y:0};function dx(e){return e}var hx=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,i=t.dataEndIndex,a=(null!==n&&void 0!==n?n:[]).reduce(function(e,t){var n=t.props.data;return n&&n.length?[].concat(tx(e),tx(n)):e},[]);return a.length>0?a:e&&e.length&&ye(r)&&ye(i)?e.slice(r,i+1):[]};function px(e){return"number"===e?[0,"auto"]:void 0}var fx=function(e,t,n,r){var i=e.graphicalItems,a=e.tooltipAxis,o=hx(t,e);return n<0||!i||!i.length||n>=o.length?null:i.reduce(function(i,s){var l,c,u=null!==(l=s.props.data)&&void 0!==l?l:t;(u&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1)),a.dataKey&&!a.allowDuplicatedCategory)?c=Te(void 0===u?o:u,a.dataKey,r):c=u&&u[n]||o[n];return c?[].concat(tx(i),[sp(s,c)]):i},[])},mx=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},a=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),o=e.orderedTooltipTicks,s=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=-1,o=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(o<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var s=i.range,l=0;l<o;l++){var c=l>0?r[l-1].coordinate:r[o-1].coordinate,u=r[l].coordinate,d=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(ve(u-c)!==ve(d-u)){var p=[];if(ve(d-u)===ve(s[1]-s[0])){h=d;var f=u+s[1]-s[0];p[0]=Math.min(f,(f+c)/2),p[1]=Math.max(f,(f+c)/2)}else{h=c;var m=d+s[1]-s[0];p[0]=Math.min(u,(m+u)/2),p[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){a=r[l].index;break}}else{var v=Math.min(c,d),x=Math.max(c,d);if(e>(v+u)/2&&e<=(x+u)/2){a=r[l].index;break}}}else for(var y=0;y<o;y++)if(0===y&&e<=(n[y].coordinate+n[y+1].coordinate)/2||y>0&&y<o-1&&e>(n[y].coordinate+n[y-1].coordinate)/2&&e<=(n[y].coordinate+n[y+1].coordinate)/2||y===o-1&&e>(n[y].coordinate+n[y-1].coordinate)/2){a=n[y].index;break}return a}(a,o,l,s);if(c>=0&&l){var u=l[c]&&l[c].value,d=fx(e,t,c,u),h=function(e,t,n,r){var i=t.find(function(e){return e&&e.index===n});if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var a=i.coordinate,o=r.radius;return ax(ax(ax({},r),Op(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var s=i.coordinate,l=r.angle;return ax(ax(ax({},r),Op(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return ux}(n,o,c,i);return{activeTooltipIndex:c,activeLabel:u,activePayload:d,activeCoordinate:h}}return null},gx=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,a=t.axisIdKey,o=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=e.stackOffset,h=Gh(c,i);return n.reduce(function(t,n){var p,f=void 0!==n.type.defaultProps?ax(ax({},n.type.defaultProps),n.props):n.props,m=f.type,g=f.dataKey,v=f.allowDataOverflow,x=f.allowDuplicatedCategory,y=f.scale,b=f.ticks,w=f.includeHidden,_=f[a];if(t[_])return t;var S,E,M,T=hx(e.data,{graphicalItems:r.filter(function(e){var t;return(a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a])===_}),dataStartIndex:s,dataEndIndex:l}),N=T.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null===e||void 0===e?void 0:e[0],i=null===e||void 0===e?void 0:e[1];if(r&&i&&ye(r)&&ye(i))return!0}return!1})(f.domain,v,m)&&(S=ip(f.domain,null,v),!h||"number"!==m&&"auto"===y||(M=zh(T,g,"category")));var C=px(m);if(!S||0===S.length){var A,j=null!==(A=f.domain)&&void 0!==A?A:C;if(g){if(S=zh(T,g,m),"category"===m&&h){var P=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(S);x&&P?(E=S,S=mt()(0,N)):x||(S=op(j,S,n).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(tx(e),[t])},[]))}else if("category"===m)S=x?S.filter(function(e){return""!==e&&!ge()(e)}):op(j,S,n).reduce(function(e,t){return e.indexOf(t)>=0||""===t||ge()(t)?e:[].concat(tx(e),[t])},[]);else if("number"===m){var O=function(e,t,n,r,i){var a=t.map(function(t){return Vh(e,t,n,i,r)}).filter(function(e){return!ge()(e)});return a&&a.length?a.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null}(T,r.filter(function(e){var t,n,r=a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===_&&(w||!i)}),g,i,c);O&&(S=O)}!h||"number"!==m&&"auto"===y||(M=zh(T,g,"category"))}else S=h?mt()(0,N):o&&o[_]&&o[_].hasStack&&"number"===m?"expand"===d?[0,1]:tp(o[_].stackGroups,s,l):Wh(T,r.filter(function(e){var t=a in e.props?e.props[a]:e.type.defaultProps[a],n="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===_&&(w||!n)}),m,c,!0);if("number"===m)S=Bg(u,S,_,i,b),j&&(S=ip(j,S,v));else if("category"===m&&j){var k=j;S.every(function(e){return k.indexOf(e)>=0})&&(S=k)}}return ax(ax({},t),{},ox({},_,ax(ax({},f),{},{axisType:i,domain:S,categoricalDomain:M,duplicateDomain:E,originalDomain:null!==(p=f.domain)&&void 0!==p?p:C,isCategorical:h,layout:c})))},{})},vx=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,a=t.graphicalItems,o=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),d=Je(c,i),h={};return d&&d.length?h=gx(e,{axes:d,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:o,dataStartIndex:s,dataEndIndex:l}):a&&a.length&&(h=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,a=t.axisIdKey,o=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,d=hx(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:l}),h=d.length,p=Gh(c,i),f=-1;return n.reduce(function(e,t){var m,g=(void 0!==t.type.defaultProps?ax(ax({},t.type.defaultProps),t.props):t.props)[a],v=px("number");return e[g]?e:(f++,p?m=mt()(0,h):o&&o[g]&&o[g].hasStack?(m=tp(o[g].stackGroups,s,l),m=Bg(u,m,g,i)):(m=ip(v,Wh(d,n.filter(function(e){var t,n,r=a in e.props?e.props[a]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[a],i="hide"in e.props?e.props.hide:null===(n=e.type.defaultProps)||void 0===n?void 0:n.hide;return r===g&&!i}),"number",c),r.defaultProps.allowDataOverflow),m=Bg(u,m,g,i)),ax(ax({},e),{},ox({},g,ax(ax({axisType:i},r.defaultProps),{},{hide:!0,orientation:he()(lx,"".concat(i,".").concat(f%2),null),domain:m,originalDomain:v,isCategorical:p,layout:c}))))},{})}(e,{Axis:i,graphicalItems:a,axisType:r,axisIdKey:u,stackGroups:o,dataStartIndex:s,dataEndIndex:l})),h},xx=function(e){var t=e.children,n=e.defaultShowTooltip,r=$e(t,Mp),i=0,a=0;return e.data&&0!==e.data.length&&(a=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(a=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},yx=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},bx=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,a=e.yAxisMap,o=void 0===a?{}:a,s=n.width,l=n.height,c=n.children,u=n.margin||{},d=$e(c,Mp),h=$e(c,Gr),p=Object.keys(o).reduce(function(e,t){var n=o[t],r=n.orientation;return n.mirror||n.hide?e:ax(ax({},e),{},ox({},r,e[r]+n.width))},{left:u.left||0,right:u.right||0}),f=Object.keys(i).reduce(function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:ax(ax({},e),{},ox({},r,he()(e,"".concat(r))+n.height))},{top:u.top||0,bottom:u.bottom||0}),m=ax(ax({},f),p),g=m.bottom;d&&(m.bottom+=d.props.height||Mp.defaultProps.height),h&&t&&(m=function(e,t,n,r){var i=n.children,a=n.width,o=n.margin,s=a-(o.left||0)-(o.right||0),l=kh({children:i,legendWidth:s});if(l){var c=r||{},u=c.width,d=c.height,h=l.align,p=l.verticalAlign,f=l.layout;if(("vertical"===f||"horizontal"===f&&"middle"===p)&&"center"!==h&&ye(e[h]))return Uh(Uh({},e),{},Fh({},h,e[h]+(u||0)));if(("horizontal"===f||"vertical"===f&&"center"===h)&&"middle"!==p&&ye(e[p]))return Uh(Uh({},e),{},Fh({},p,e[p]+(d||0)))}return e}(m,0,n,t));var v=s-m.left-m.right,x=l-m.top-m.bottom;return ax(ax({brushBottom:g},m),{},{width:Math.max(v,0),height:Math.max(x,0)})},wx=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},_x=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=void 0===i?"axis":i,o=e.validateTooltipEventTypes,s=void 0===o?["axis"]:o,l=e.axisComponents,c=e.legendContent,u=e.formatAxisMap,d=e.defaultProps,h=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,a=t.updateId,o=t.dataStartIndex,s=t.dataEndIndex,c=e.barSize,u=e.layout,d=e.barGap,h=e.barCategoryGap,p=e.maxBarSize,f=yx(u),m=f.numericAxisName,g=f.cateAxisName,v=function(e){return!(!e||!e.length)&&e.some(function(e){var t=qe(e&&e.type);return t&&t.indexOf("Bar")>=0})}(n),x=[];return n.forEach(function(n,f){var y=hx(e.data,{graphicalItems:[n],dataStartIndex:o,dataEndIndex:s}),b=void 0!==n.type.defaultProps?ax(ax({},n.type.defaultProps),n.props):n.props,w=b.dataKey,_=b.maxBarSize,S=b["".concat(m,"Id")],E=b["".concat(g,"Id")],M=l.reduce(function(e,n){var r=t["".concat(n.axisType,"Map")],i=b["".concat(n.axisType,"Id")];r&&r[i]||"zAxis"===n.axisType||yt(!1);var a=r[i];return ax(ax({},e),{},ox(ox({},n.axisType,a),"".concat(n.axisType,"Ticks"),qh(a)))},{}),T=M[g],N=M["".concat(g,"Ticks")],C=r&&r[S]&&r[S].hasStack&&function(e,t){var n,r=(null!==(n=e.type)&&void 0!==n&&n.defaultProps?Uh(Uh({},e.type.defaultProps),e.props):e.props).stackId;if(be(r)){var i=t[r];if(i){var a=i.items.indexOf(e);return a>=0?i.stackedData[a]:null}}return null}(n,r[S].stackGroups),A=qe(n.type).indexOf("Bar")>=0,j=ap(T,N),P=[],O=v&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var a={},o=Object.keys(i),s=0,l=o.length;s<l;s++)for(var c=i[o[s]].stackGroups,u=Object.keys(c),d=0,h=u.length;d<h;d++){var p=c[u[d]],f=p.items,m=p.cateAxisId,g=f.filter(function(e){return qe(e.type).indexOf("Bar")>=0});if(g&&g.length){var v=g[0].type.defaultProps,x=void 0!==v?Uh(Uh({},v),g[0].props):g[0].props,y=x.barSize,b=x[m];a[b]||(a[b]=[]);var w=ge()(y)?t:y;a[b].push({item:g[0],stackList:g.slice(1),barSize:ge()(w)?void 0:Se(w,n,0)})}}return a}({barSize:c,stackGroups:r,totalSize:wx(M,g)});if(A){var k,R,D=ge()(_)?p:_,L=null!==(k=null!==(R=ap(T,N,!0))&&void 0!==R?R:D)&&void 0!==k?k:0;P=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,a=void 0===i?[]:i,o=e.maxBarSize,s=a.length;if(s<1)return null;var l,c=Se(t,r,0,!0),u=[];if(a[0].barSize===+a[0].barSize){var d=!1,h=r/s,p=a.reduce(function(e,t){return e+t.barSize||0},0);(p+=(s-1)*c)>=r&&(p-=(s-1)*c,c=0),p>=r&&h>0&&(d=!0,p=s*(h*=.9));var f={offset:((r-p)/2|0)-c,size:0};l=a.reduce(function(e,t){var n={item:t.item,position:{offset:f.offset+f.size+c,size:d?h:t.barSize}},r=[].concat(Dh(e),[n]);return f=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:f})}),r},u)}else{var m=Se(n,r,0,!0);r-2*m-(s-1)*c<=0&&(c=0);var g=(r-2*m-(s-1)*c)/s;g>1&&(g>>=0);var v=o===+o?Math.min(g,o):g;l=a.reduce(function(e,t,n){var r=[].concat(Dh(e),[{item:t.item,position:{offset:m+(g+c)*n+(g-v)/2,size:v}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){r.push({item:e,position:r[r.length-1].position})}),r},u)}return l}({barGap:d,barCategoryGap:h,bandSize:L!==j?L:j,sizeList:O[E],maxBarSize:D}),L!==j&&(P=P.map(function(e){return ax(ax({},e),{},{position:ax(ax({},e.position),{},{offset:e.position.offset-L/2})})}))}var I=n&&n.type&&n.type.getComposedData;I&&x.push({props:ax(ax({},I(ax(ax({},M),{},{displayedData:y,props:e,dataKey:w,item:n,bandSize:j,barPosition:P,offset:i,stackedData:C,layout:u,dataStartIndex:o,dataEndIndex:s}))),{},ox(ox(ox({key:n.key||"item-".concat(f)},m,M[m]),g,M[g]),"animationId",a)),childIndex:ot(n,e.children),item:n})}),x},p=function(e,t){var i=e.props,a=e.dataStartIndex,o=e.dataEndIndex,s=e.updateId;if(!Qe({props:i}))return null;var c=i.children,d=i.layout,p=i.stackOffset,f=i.data,m=i.reverseStackOrder,g=yx(d),v=g.numericAxisName,x=g.cateAxisName,y=Je(c,r),b=function(e,t,n,r,i,a){if(!e)return null;var o=(a?t.reverse():t).reduce(function(e,t){var i,a=null!==(i=t.type)&&void 0!==i&&i.defaultProps?Uh(Uh({},t.type.defaultProps),t.props):t.props,o=a.stackId;if(a.hide)return e;var s=a[n],l=e[s]||{hasStack:!1,stackGroups:{}};if(be(o)){var c=l.stackGroups[o]||{numericAxisId:n,cateAxisId:r,items:[]};c.items.push(t),l.hasStack=!0,l.stackGroups[o]=c}else l.stackGroups[_e("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return Uh(Uh({},e),{},Fh({},s,l))},{});return Object.keys(o).reduce(function(t,a){var s=o[a];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce(function(t,a){var o=s.stackGroups[a];return Uh(Uh({},t),{},Fh({},a,{numericAxisId:n,cateAxisId:r,items:o.items,stackedData:$h(e,o.items,i)}))},{})),Uh(Uh({},t),{},Fh({},a,s))},{})}(f,y,"".concat(v,"Id"),"".concat(x,"Id"),p,m),w=l.reduce(function(e,t){var n="".concat(t.axisType,"Map");return ax(ax({},e),{},ox({},n,vx(i,ax(ax({},t),{},{graphicalItems:y,stackGroups:t.axisType===v&&b,dataStartIndex:a,dataEndIndex:o}))))},{}),_=bx(ax(ax({},w),{},{props:i,graphicalItems:y}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(w).forEach(function(e){w[e]=u(i,w[e],_,e.replace("Map",""),n)});var S=function(e){var t=Ee(e),n=qh(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:vt()(n,function(e){return e.coordinate}),tooltipAxis:t,tooltipAxisBandSize:ap(t,n)}}(w["".concat(x,"Map")]),E=h(i,ax(ax({},w),{},{dataStartIndex:a,dataEndIndex:o,updateId:s,graphicalItems:y,stackGroups:b,offset:_}));return ax(ax({formattedGraphicalItems:E,graphicalItems:y,offset:_,stackGroups:b},S),w)},f=function(e){function r(e){var i,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),ox(o=Jv(this,r,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ox(o,"accessibilityManager",new Yg),ox(o,"handleLegendBBoxUpdate",function(e){if(e){var t=o.state,n=t.dataStartIndex,r=t.dataEndIndex,i=t.updateId;o.setState(ax({legendBBox:e},p({props:o.props,dataStartIndex:n,dataEndIndex:r,updateId:i},ax(ax({},o.state),{},{legendBBox:e}))))}}),ox(o,"handleReceiveSyncEvent",function(e,t,n){if(o.props.syncId===e){if(n===o.eventEmitterSymbol&&"function"!==typeof o.props.syncMethod)return;o.applySyncEvent(t)}}),ox(o,"handleBrushChange",function(e){var t=e.startIndex,n=e.endIndex;if(t!==o.state.dataStartIndex||n!==o.state.dataEndIndex){var r=o.state.updateId;o.setState(function(){return ax({dataStartIndex:t,dataEndIndex:n},p({props:o.props,dataStartIndex:t,dataEndIndex:n,updateId:r},o.state))}),o.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}}),ox(o,"handleMouseEnter",function(e){var t=o.getMouseInfo(e);if(t){var n=ax(ax({},t),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseEnter;je()(r)&&r(n,e)}}),ox(o,"triggeredAfterMouseMove",function(e){var t=o.getMouseInfo(e),n=t?ax(ax({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseMove;je()(r)&&r(n,e)}),ox(o,"handleItemMouseEnter",function(e){o.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),ox(o,"handleItemMouseLeave",function(){o.setState(function(){return{isTooltipActive:!1}})}),ox(o,"handleMouseMove",function(e){e.persist(),o.throttleTriggeredAfterMouseMove(e)}),ox(o,"handleMouseLeave",function(e){o.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};o.setState(t),o.triggerSyncEvent(t);var n=o.props.onMouseLeave;je()(n)&&n(t,e)}),ox(o,"handleOuterEvent",function(e){var t,n=function(e){var t=e&&e.type;return t&&Xe[t]?Xe[t]:null}(e),r=he()(o.props,"".concat(n));n&&je()(r)&&r(null!==(t=/.*touch.*/i.test(n)?o.getMouseInfo(e.changedTouches[0]):o.getMouseInfo(e))&&void 0!==t?t:{},e)}),ox(o,"handleClick",function(e){var t=o.getMouseInfo(e);if(t){var n=ax(ax({},t),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onClick;je()(r)&&r(n,e)}}),ox(o,"handleMouseDown",function(e){var t=o.props.onMouseDown;je()(t)&&t(o.getMouseInfo(e),e)}),ox(o,"handleMouseUp",function(e){var t=o.props.onMouseUp;je()(t)&&t(o.getMouseInfo(e),e)}),ox(o,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),ox(o,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseDown(e.changedTouches[0])}),ox(o,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseUp(e.changedTouches[0])}),ox(o,"handleDoubleClick",function(e){var t=o.props.onDoubleClick;je()(t)&&t(o.getMouseInfo(e),e)}),ox(o,"handleContextMenu",function(e){var t=o.props.onContextMenu;je()(t)&&t(o.getMouseInfo(e),e)}),ox(o,"triggerSyncEvent",function(e){void 0!==o.props.syncId&&Hg.emit(Vg,o.props.syncId,e,o.eventEmitterSymbol)}),ox(o,"applySyncEvent",function(e){var t=o.props,n=t.layout,r=t.syncMethod,i=o.state.updateId,a=e.dataStartIndex,s=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)o.setState(ax({dataStartIndex:a,dataEndIndex:s},p({props:o.props,dataStartIndex:a,dataEndIndex:s,updateId:i},o.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,u=e.activeTooltipIndex,d=o.state,h=d.offset,f=d.tooltipTicks;if(!h)return;if("function"===typeof r)u=r(f,e);else if("value"===r){u=-1;for(var m=0;m<f.length;m++)if(f[m].value===e.activeLabel){u=m;break}}var g=ax(ax({},h),{},{x:h.left,y:h.top}),v=Math.min(l,g.x+g.width),x=Math.min(c,g.y+g.height),y=f[u]&&f[u].value,b=fx(o.state,o.props.data,u),w=f[u]?{x:"horizontal"===n?f[u].coordinate:v,y:"horizontal"===n?x:f[u].coordinate}:ux;o.setState(ax(ax({},e),{},{activeLabel:y,activeCoordinate:w,activePayload:b,activeTooltipIndex:u}))}else o.setState(e)}),ox(o,"renderCursor",function(e){var r,i=o.state,a=i.isTooltipActive,s=i.activeCoordinate,l=i.activePayload,c=i.offset,u=i.activeTooltipIndex,d=i.tooltipAxisBandSize,h=o.getTooltipEventType(),p=null!==(r=e.props.active)&&void 0!==r?r:a,f=o.props.layout,m=e.key||"_recharts-cursor";return t.createElement(Vv,{key:m,activeCoordinate:s,activePayload:l,activeTooltipIndex:u,chartName:n,element:e,isActive:p,layout:f,offset:c,tooltipAxisBandSize:d,tooltipEventType:h})}),ox(o,"renderPolarAxis",function(e,n,r){var i=he()(e,"type.axisType"),a=he()(o.state,"".concat(i,"Map")),s=e.type.defaultProps,l=void 0!==s?ax(ax({},s),e.props):e.props,c=a&&a[l["".concat(i,"Id")]];return(0,t.cloneElement)(e,ax(ax({},c),{},{className:ie(i,c.className),key:e.key||"".concat(n,"-").concat(r),ticks:qh(c,!0)}))}),ox(o,"renderPolarGrid",function(e){var n=e.props,r=n.radialLines,i=n.polarAngles,a=n.polarRadius,s=o.state,l=s.radiusAxisMap,c=s.angleAxisMap,u=Ee(l),d=Ee(c),h=d.cx,p=d.cy,f=d.innerRadius,m=d.outerRadius;return(0,t.cloneElement)(e,{polarAngles:Array.isArray(i)?i:qh(d,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(a)?a:qh(u,!0).map(function(e){return e.coordinate}),cx:h,cy:p,innerRadius:f,outerRadius:m,key:e.key||"polar-grid",radialLines:r})}),ox(o,"renderLegend",function(){var e=o.state.formattedGraphicalItems,n=o.props,r=n.children,i=n.width,a=n.height,s=o.props.margin||{},l=i-(s.left||0)-(s.right||0),u=kh({children:r,formattedGraphicalItems:e,legendWidth:l,legendContent:c});if(!u)return null;var d=u.item,h=Kv(u,Wv);return(0,t.cloneElement)(d,ax(ax({},h),{},{chartWidth:i,chartHeight:a,margin:s,onBBoxUpdate:o.handleLegendBBoxUpdate}))}),ox(o,"renderTooltip",function(){var e,n=o.props,r=n.children,i=n.accessibilityLayer,a=$e(r,gn);if(!a)return null;var s=o.state,l=s.isTooltipActive,c=s.activeCoordinate,u=s.activePayload,d=s.activeLabel,h=s.offset,p=null!==(e=a.props.active)&&void 0!==e?e:l;return(0,t.cloneElement)(a,{viewBox:ax(ax({},h),{},{x:h.left,y:h.top}),active:p,label:d,payload:p?u:[],coordinate:c,accessibilityLayer:i})}),ox(o,"renderBrush",function(e){var n=o.props,r=n.margin,i=n.data,a=o.state,s=a.offset,l=a.dataStartIndex,c=a.dataEndIndex,u=a.updateId;return(0,t.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:Kh(o.handleBrushChange,e.props.onChange),data:i,x:ye(e.props.x)?e.props.x:s.left,y:ye(e.props.y)?e.props.y:s.top+s.height+s.brushBottom-(r.bottom||0),width:ye(e.props.width)?e.props.width:s.width,startIndex:l,endIndex:c,updateId:"brush-".concat(u)})}),ox(o,"renderReferenceElement",function(e,n,r){if(!e)return null;var i=o.clipPathId,a=o.state,s=a.xAxisMap,l=a.yAxisMap,c=a.offset,u=e.type.defaultProps||{},d=e.props,h=d.xAxisId,p=void 0===h?u.xAxisId:h,f=d.yAxisId,m=void 0===f?u.yAxisId:f;return(0,t.cloneElement)(e,{key:e.key||"".concat(n,"-").concat(r),xAxis:s[p],yAxis:l[m],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:i})}),ox(o,"renderActivePoints",function(e){var t=e.item,n=e.activePoint,i=e.basePoint,a=e.childIndex,o=e.isRange,s=[],l=t.props.key,c=void 0!==t.item.type.defaultProps?ax(ax({},t.item.type.defaultProps),t.item.props):t.item.props,u=c.activeDot,d=ax(ax({index:a,dataKey:c.dataKey,cx:n.x,cy:n.y,r:4,fill:Hh(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},nt(u,!1)),Be(u));return s.push(r.renderActiveDot(u,d,"".concat(l,"-activePoint-").concat(a))),i?s.push(r.renderActiveDot(u,ax(ax({},d),{},{cx:i.x,cy:i.y}),"".concat(l,"-basePoint-").concat(a))):o&&s.push(null),s}),ox(o,"renderGraphicChild",function(e,n,r){var i=o.filterFormatItem(e,n,r);if(!i)return null;var a=o.getTooltipEventType(),s=o.state,l=s.isTooltipActive,c=s.tooltipAxis,u=s.activeTooltipIndex,d=s.activeLabel,h=$e(o.props.children,gn),p=i.props,f=p.points,m=p.isRange,g=p.baseLine,v=void 0!==i.item.type.defaultProps?ax(ax({},i.item.type.defaultProps),i.item.props):i.item.props,x=v.activeDot,y=v.hide,b=v.activeBar,w=v.activeShape,_=Boolean(!y&&l&&h&&(x||b||w)),S={};"axis"!==a&&h&&"click"===h.props.trigger?S={onClick:Kh(o.handleItemMouseEnter,e.props.onClick)}:"axis"!==a&&(S={onMouseLeave:Kh(o.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:Kh(o.handleItemMouseEnter,e.props.onMouseEnter)});var E=(0,t.cloneElement)(e,ax(ax({},i.props),S));if(_){if(!(u>=0)){var M,T=(null!==(M=o.getItemByXY(o.state.activeCoordinate))&&void 0!==M?M:{graphicalItem:E}).graphicalItem,N=T.item,C=void 0===N?e:N,A=T.childIndex,j=ax(ax(ax({},i.props),S),{},{activeIndex:A});return[(0,t.cloneElement)(C,j),null,null]}var P,O;if(c.dataKey&&!c.allowDuplicatedCategory){var k="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());P=Te(f,k,d),O=m&&g&&Te(g,k,d)}else P=null===f||void 0===f?void 0:f[u],O=m&&g&&g[u];if(w||b){var R=void 0!==e.props.activeIndex?e.props.activeIndex:u;return[(0,t.cloneElement)(e,ax(ax(ax({},i.props),S),{},{activeIndex:R})),null,null]}if(!ge()(P))return[E].concat(tx(o.renderActivePoints({item:i,activePoint:P,basePoint:O,childIndex:u,isRange:m})))}return m?[E,null,null]:[E,null]}),ox(o,"renderCustomized",function(e,n,r){return(0,t.cloneElement)(e,ax(ax({key:"recharts-customized-".concat(r)},o.props),o.state))}),ox(o,"renderMap",{CartesianGrid:{handler:dx,once:!0},ReferenceArea:{handler:o.renderReferenceElement},ReferenceLine:{handler:dx},ReferenceDot:{handler:o.renderReferenceElement},XAxis:{handler:dx},YAxis:{handler:dx},Brush:{handler:o.renderBrush,once:!0},Bar:{handler:o.renderGraphicChild},Line:{handler:o.renderGraphicChild},Area:{handler:o.renderGraphicChild},Radar:{handler:o.renderGraphicChild},RadialBar:{handler:o.renderGraphicChild},Scatter:{handler:o.renderGraphicChild},Pie:{handler:o.renderGraphicChild},Funnel:{handler:o.renderGraphicChild},Tooltip:{handler:o.renderCursor,once:!0},PolarGrid:{handler:o.renderPolarGrid,once:!0},PolarAngleAxis:{handler:o.renderPolarAxis},PolarRadiusAxis:{handler:o.renderPolarAxis},Customized:{handler:o.renderCustomized}}),o.clipPathId="".concat(null!==(i=e.id)&&void 0!==i?i:_e("recharts"),"-clip"),o.throttleTriggeredAfterMouseMove=oe()(o.triggeredAfterMouseMove,null!==(a=e.throttleDelay)&&void 0!==a?a:1e3/60),o.state={},o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ex(e,t)}(r,e),i=r,o=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,i=e.layout,a=$e(t,gn);if(a){var o=a.props.defaultIndex;if(!("number"!==typeof o||o<0||o>this.state.tooltipTicks.length-1)){var s=this.state.tooltipTicks[o]&&this.state.tooltipTicks[o].value,l=fx(this.state,n,o,s),c=this.state.tooltipTicks[o].coordinate,u=(this.state.offset.top+r)/2,d="horizontal"===i?{x:c,y:u}:{y:c,x:u},h=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});h&&(d=ax(ax({},d),h.props.points[o].tooltipPosition),l=h.props.points[o].tooltipPayload);var p={activeTooltipIndex:o,isTooltipActive:!0,activeLabel:s,activePayload:l,activeCoordinate:d};this.setState(p),this.renderCursor(a),this.accessibilityManager.setIndex(o)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(e){rt([$e(e.children,gn)],[$e(this.props.children,gn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=$e(this.props.children,gn);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return s.indexOf(t)>=0?t:a}return a}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),i={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},a={chartX:Math.round(e.pageX-i.left),chartY:Math.round(e.pageY-i.top)},o=r.width/n.offsetWidth||1,s=this.inRange(a.chartX,a.chartY,o);if(!s)return null;var l=this.state,c=l.xAxisMap,u=l.yAxisMap,d=this.getTooltipEventType(),h=mx(this.state,this.props.data,this.props.layout,s);if("axis"!==d&&c&&u){var p=Ee(c).scale,f=Ee(u).scale,m=p&&p.invert?p.invert(a.chartX):null,g=f&&f.invert?f.invert(a.chartY):null;return ax(ax({},a),{},{xValue:m,yValue:g},h)}return h?ax(ax({},a),h):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=e/n,a=t/n;if("horizontal"===r||"vertical"===r){var o=this.state.offset;return i>=o.left&&i<=o.left+o.width&&a>=o.top&&a<=o.top+o.height?{x:i,y:a}:null}var s=this.state,l=s.angleAxisMap,c=s.radiusAxisMap;if(l&&c){var u=Ee(l);return Dp({x:i,y:a},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=$e(e,gn),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),ax(ax({},Be(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){Hg.on(Vg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Hg.removeListener(Vg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,a=r.length;i<a;i++){var o=r[i];if(o.item===e||o.props.key===e.key||t===qe(o.item.type)&&n===o.childIndex)return o}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,n=this.state.offset,r=n.left,i=n.top,a=n.height,o=n.width;return t.createElement("defs",null,t.createElement("clipPath",{id:e},t.createElement("rect",{x:r,y:i,height:a,width:o})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=Yv(t,2),r=n[0],i=n[1];return ax(ax({},e),{},ox({},r,i.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var n=Yv(t,2),r=n[0],i=n[1];return ax(ax({},e),{},ox({},r,i.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var i=0,a=n.length;i<a;i++){var o=n[i],s=o.props,l=o.item,c=void 0!==l.type.defaultProps?ax(ax({},l.type.defaultProps),l.props):l.props,u=qe(l.type);if("Bar"===u){var d=(s.data||[]).find(function(t){return Oa(e,t)});if(d)return{graphicalItem:o,payload:d}}else if("RadialBar"===u){var h=(s.data||[]).find(function(t){return Dp(e,t)});if(h)return{graphicalItem:o,payload:h}}else if(qf(o,r)||Yf(o,r)||Kf(o,r)){var p=Qf({graphicalItem:o,activeTooltipItem:r,itemData:c.data}),f=void 0===c.activeIndex?p:c.activeIndex;return{graphicalItem:ax(ax({},o),{},{childIndex:f}),payload:Kf(o,r)?c.data[p]:o.props.data[p]}}}return null}},{key:"render",value:function(){var e=this;if(!Qe(this))return null;var n,r,i=this.props,a=i.children,o=i.className,s=i.width,l=i.height,c=i.style,u=i.compact,d=i.title,h=i.desc,p=Kv(i,Gv),f=nt(p,!1);if(u)return t.createElement(og,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},t.createElement(St,qv({},f,{width:s,height:l,title:d,desc:h}),this.renderClipPath(),at(a,this.renderMap)));this.props.accessibilityLayer&&(f.tabIndex=null!==(n=this.props.tabIndex)&&void 0!==n?n:0,f.role=null!==(r=this.props.role)&&void 0!==r?r:"application",f.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},f.onFocus=function(){e.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return t.createElement(og,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},t.createElement("div",qv({className:ie("recharts-wrapper",o),style:ax({position:"relative",cursor:"default",width:s,height:l},c)},m,{ref:function(t){e.container=t}}),t.createElement(St,qv({},f,{width:s,height:l,title:d,desc:h,style:cx}),this.renderClipPath(),at(a,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],o&&Zv(i.prototype,o),l&&Zv(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,o,l}(t.Component);ox(f,"displayName",n),ox(f,"defaultProps",ax({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),ox(f,"getDerivedStateFromProps",function(e,t){var n=e.dataKey,r=e.data,i=e.children,a=e.width,o=e.height,s=e.layout,l=e.stackOffset,c=e.margin,u=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var h=xx(e);return ax(ax(ax({},h),{},{updateId:0},p(ax(ax({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:a,prevHeight:o,prevLayout:s,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(n!==t.prevDataKey||r!==t.prevData||a!==t.prevWidth||o!==t.prevHeight||s!==t.prevLayout||l!==t.prevStackOffset||!Re(c,t.prevMargin)){var f=xx(e),m={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=ax(ax({},mx(t,r,s)),{},{updateId:t.updateId+1}),v=ax(ax(ax({},f),m),g);return ax(ax(ax({},v),p(ax({props:e},v),t)),{},{prevDataKey:n,prevData:r,prevWidth:a,prevHeight:o,prevLayout:s,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(!rt(i,t.prevChildren)){var x,y,b,w,_=$e(i,Mp),S=_&&null!==(x=null===(y=_.props)||void 0===y?void 0:y.startIndex)&&void 0!==x?x:u,E=_&&null!==(b=null===(w=_.props)||void 0===w?void 0:w.endIndex)&&void 0!==b?b:d,M=S!==u||E!==d,T=!ge()(r)&&!M?t.updateId:t.updateId+1;return ax(ax({updateId:T},p(ax(ax({props:e},t),{},{updateId:T,dataStartIndex:S,dataEndIndex:E}),t)),{},{prevChildren:i,dataStartIndex:S,dataEndIndex:E})}return null}),ox(f,"renderActiveDot",function(e,n,r){var i;return i=(0,t.isValidElement)(e)?(0,t.cloneElement)(e,n):je()(e)?e(n):t.createElement(qr,n),t.createElement(Nt,{className:"recharts-active-dot",key:r},i)});var m=(0,t.forwardRef)(function(e,n){return t.createElement(f,qv({},e,{ref:n}))});return m.displayName=f.displayName,m};function Sx(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],i=0;i<e.length;i+=t){if(void 0!==n&&!0!==n(e[i]))return;r.push(e[i])}return r}function Ex(e,t,n){return function(e){var t=e.width,n=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=r*Math.PI/180,a=Math.atan(n/t),o=i>a&&i<Math.PI-a?n/Math.sin(i):t/Math.cos(i);return Math.abs(o)}({width:e.width+t.width,height:e.height+t.height},n)}function Mx(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-r)>=0&&e*(t+e*a/2-i)<=0}function Tx(e){return Tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tx(e)}function Nx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nx(Object(n),!0).forEach(function(t){Ax(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ax(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Tx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tx(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jx(e,t,n){var r=e.tick,i=e.ticks,a=e.viewBox,o=e.minTickGap,s=e.orientation,l=e.interval,c=e.tickFormatter,u=e.unit,d=e.angle;if(!i||!i.length||!r)return[];if(ye(l)||en.isSsr)return function(e,t){return Sx(e,t+1)}(i,"number"===typeof l&&ye(l)?l:0);var h=[],p="top"===s||"bottom"===s?"width":"height",f=u&&"width"===p?eo(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(e,r){var i=je()(c)?c(e.value,r):e.value;return"width"===p?Ex(eo(i,{fontSize:t,letterSpacing:n}),f,d):eo(i,{fontSize:t,letterSpacing:n})[p]},g=i.length>=2?ve(i[1].coordinate-i[0].coordinate):1,v=function(e,t,n){var r="width"===n,i=e.x,a=e.y,o=e.width,s=e.height;return 1===t?{start:r?i:a,end:r?i+o:a+s}:{start:r?i+o:a+s,end:r?i:a}}(a,g,p);return"equidistantPreserveStart"===l?function(e,t,n,r,i){for(var a,o=(r||[]).slice(),s=t.start,l=t.end,c=0,u=1,d=s,h=function(){var t=null===r||void 0===r?void 0:r[c];if(void 0===t)return{v:Sx(r,u)};var a,o=c,h=function(){return void 0===a&&(a=n(t,o)),a},p=t.coordinate,f=0===c||Mx(e,p,h,d,l);f||(c=0,d=s,u+=1),f&&(d=p+e*(h()/2+i),c+=u)};u<=o.length;)if(a=h())return a.v;return[]}(g,v,m,i,o):(h="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,i,a){var o=(r||[]).slice(),s=o.length,l=t.start,c=t.end;if(a){var u=r[s-1],d=n(u,s-1),h=e*(u.coordinate+e*d/2-c);o[s-1]=u=Cx(Cx({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate}),Mx(e,u.tickCoord,function(){return d},l,c)&&(c=u.tickCoord-e*(d/2+i),o[s-1]=Cx(Cx({},u),{},{isShow:!0}))}for(var p=a?s-1:s,f=function(t){var r,a=o[t],s=function(){return void 0===r&&(r=n(a,t)),r};if(0===t){var u=e*(a.coordinate-e*s()/2-l);o[t]=a=Cx(Cx({},a),{},{tickCoord:u<0?a.coordinate-u*e:a.coordinate})}else o[t]=a=Cx(Cx({},a),{},{tickCoord:a.coordinate});Mx(e,a.tickCoord,s,l,c)&&(l=a.tickCoord+e*(s()/2+i),o[t]=Cx(Cx({},a),{},{isShow:!0}))},m=0;m<p;m++)f(m);return o}(g,v,m,i,o,"preserveStartEnd"===l):function(e,t,n,r,i){for(var a=(r||[]).slice(),o=a.length,s=t.start,l=t.end,c=function(t){var r,c=a[t],u=function(){return void 0===r&&(r=n(c,t)),r};if(t===o-1){var d=e*(c.coordinate+e*u()/2-l);a[t]=c=Cx(Cx({},c),{},{tickCoord:d>0?c.coordinate-d*e:c.coordinate})}else a[t]=c=Cx(Cx({},c),{},{tickCoord:c.coordinate});Mx(e,c.tickCoord,u,s,l)&&(l=c.tickCoord-e*(u()/2+i),a[t]=Cx(Cx({},c),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return a}(g,v,m,i,o),h.filter(function(e){return e.isShow}))}var Px=["viewBox"],Ox=["viewBox"],kx=["ticks"];function Rx(e){return Rx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rx(e)}function Dx(){return Dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dx.apply(this,arguments)}function Lx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ix(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lx(Object(n),!0).forEach(function(t){Wx(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ux(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Fx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gx(r.key),r)}}function Bx(e,t,n){return t=Hx(t),function(e,t){if(t&&("object"===Rx(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zx()?Reflect.construct(t,n||[],Hx(e).constructor):t.apply(e,n))}function zx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(zx=function(){return!!e})()}function Hx(e){return Hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Hx(e)}function Vx(e,t){return Vx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vx(e,t)}function Wx(e,t,n){return(t=Gx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gx(e){var t=function(e,t){if("object"!=Rx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rx(t)?t:t+""}var Xx=function(e){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=Bx(this,n,[e])).state={fontSize:"",letterSpacing:""},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vx(e,t)}(n,e),r=n,i=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=Ux(e,Px),i=this.props,a=i.viewBox,o=Ux(i,Ox);return!Re(n,a)||!Re(r,o)||!Re(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,r,i,a,o,s=this.props,l=s.x,c=s.y,u=s.width,d=s.height,h=s.orientation,p=s.tickSize,f=s.mirror,m=s.tickMargin,g=f?-1:1,v=e.tickSize||p,x=ye(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=n=e.coordinate,o=(r=(i=c+ +!f*d)-g*v)-g*m,a=x;break;case"left":r=i=e.coordinate,a=(t=(n=l+ +!f*u)-g*v)-g*m,o=x;break;case"right":r=i=e.coordinate,a=(t=(n=l+ +f*u)+g*v)+g*m,o=x;break;default:t=n=e.coordinate,o=(r=(i=c+ +f*d)+g*v)+g*m,a=x}return{line:{x1:t,y1:r,x2:n,y2:i},tick:{x:a,y:o}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,n=e.x,r=e.y,i=e.width,a=e.height,o=e.orientation,s=e.mirror,l=e.axisLine,c=Ix(Ix(Ix({},nt(this.props,!1)),nt(l,!1)),{},{fill:"none"});if("top"===o||"bottom"===o){var u=+("top"===o&&!s||"bottom"===o&&s);c=Ix(Ix({},c),{},{x1:n,y1:r+u*a,x2:n+i,y2:r+u*a})}else{var d=+("left"===o&&!s||"right"===o&&s);c=Ix(Ix({},c),{},{x1:n+d*i,y1:r,x2:n+d*i,y2:r+a})}return t.createElement("line",Dx({},c,{className:ie("recharts-cartesian-axis-line",he()(l,"className"))}))}},{key:"renderTicks",value:function(e,r,i){var a=this,o=this.props,s=o.tickLine,l=o.stroke,c=o.tick,u=o.tickFormatter,d=o.unit,h=jx(Ix(Ix({},this.props),{},{ticks:e}),r,i),p=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),m=nt(this.props,!1),g=nt(c,!1),v=Ix(Ix({},m),{},{fill:"none"},nt(s,!1)),x=h.map(function(e,r){var i=a.getTickLineCoord(e),o=i.line,x=i.tick,y=Ix(Ix(Ix(Ix({textAnchor:p,verticalAnchor:f},m),{},{stroke:"none",fill:l},g),x),{},{index:r,payload:e,visibleTicksCount:h.length,tickFormatter:u});return t.createElement(Nt,Dx({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},ze(a.props,e,r)),s&&t.createElement("line",Dx({},v,o,{className:ie("recharts-cartesian-axis-tick-line",he()(s,"className"))})),c&&n.renderTickItem(c,y,"".concat(je()(u)?u(e.value,r):e.value).concat(d||"")))});return t.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var e=this,n=this.props,r=n.axisLine,i=n.width,a=n.height,o=n.ticksGenerator,s=n.className;if(n.hide)return null;var l=this.props,c=l.ticks,u=Ux(l,kx),d=c;return je()(o)&&(d=c&&c.length>0?o(this.props):o(u)),i<=0||a<=0||!d||!d.length?null:t.createElement(Nt,{className:ie("recharts-cartesian-axis",s),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(d,this.state.fontSize,this.state.letterSpacing),Xp.renderCallByParent(this.props))}}],a=[{key:"renderTickItem",value:function(e,n,r){var i=ie(n.className,"recharts-cartesian-axis-tick-value");return t.isValidElement(e)?t.cloneElement(e,Ix(Ix({},n),{},{className:i})):je()(e)?e(Ix(Ix({},n),{},{className:i})):t.createElement(jo,Dx({},n,{className:"recharts-cartesian-axis-tick-value"}),r)}}],i&&Fx(r.prototype,i),a&&Fx(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.Component);function qx(e){return qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qx(e)}function Yx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ey(r.key),r)}}function Kx(e,t,n){return t=Jx(t),function(e,t){if(t&&("object"===qx(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Zx()?Reflect.construct(t,n||[],Jx(e).constructor):t.apply(e,n))}function Zx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Zx=function(){return!!e})()}function Jx(e){return Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jx(e)}function $x(e,t){return $x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$x(e,t)}function Qx(e,t,n){return(t=ey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ey(e){var t=function(e,t){if("object"!=qx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qx(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qx(t)?t:t+""}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ty.apply(this,arguments)}function ny(e){var n=e.xAxisId,r=cg(),i=ug(),a=sg(n);return null==a?null:t.createElement(Xx,ty({},a,{className:ie("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(e){return qh(e,!0)}}))}Wx(Xx,"displayName","CartesianAxis"),Wx(Xx,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ry=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Kx(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$x(e,t)}(n,e),r=n,(i=[{key:"render",value:function(){return t.createElement(ny,this.props)}}])&&Yx(r.prototype,i),a&&Yx(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.Component);function iy(e){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(e)}function ay(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dy(r.key),r)}}function oy(e,t,n){return t=ly(t),function(e,t){if(t&&("object"===iy(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,sy()?Reflect.construct(t,n||[],ly(e).constructor):t.apply(e,n))}function sy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(sy=function(){return!!e})()}function ly(e){return ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ly(e)}function cy(e,t){return cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cy(e,t)}function uy(e,t,n){return(t=dy(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dy(e){var t=function(e,t){if("object"!=iy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=iy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iy(t)?t:t+""}function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hy.apply(this,arguments)}Qx(ry,"displayName","XAxis"),Qx(ry,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var py=function(e){var n=e.yAxisId,r=cg(),i=ug(),a=lg(n);return null==a?null:t.createElement(Xx,hy({},a,{className:ie("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(e){return qh(e,!0)}}))},fy=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),oy(this,n,arguments)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cy(e,t)}(n,e),r=n,(i=[{key:"render",value:function(){return t.createElement(py,this.props)}}])&&ay(r.prototype,i),a&&ay(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.Component);uy(fy,"displayName","YAxis"),uy(fy,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var my=_x({chartName:"BarChart",GraphicalChild:Em,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ry},{axisType:"yAxis",AxisComp:fy}],formatAxisMap:Pm}),gy=["x1","y1","x2","y2","key"],vy=["offset"];function xy(e){return xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(e)}function yy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function by(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yy(Object(n),!0).forEach(function(t){wy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wy(e,t,n){return t=function(e){var t=function(e,t){if("object"!=xy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xy(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_y.apply(this,arguments)}function Sy(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Ey=function(e){var n=e.fill;if(!n||"none"===n)return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.ry;return t.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function My(e,n){var r;if(t.isValidElement(e))r=t.cloneElement(e,n);else if(je()(e))r=e(n);else{var i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.key,c=Sy(n,gy),u=nt(c,!1),d=(u.offset,Sy(u,vy));r=t.createElement("line",_y({},d,{x1:i,y1:a,x2:o,y2:s,fill:"none",key:l}))}return r}function Ty(e){var n=e.x,r=e.width,i=e.horizontal,a=void 0===i||i,o=e.horizontalPoints;if(!a||!o||!o.length)return null;var s=o.map(function(t,i){var o=by(by({},e),{},{x1:n,y1:t,x2:n+r,y2:t,key:"line-".concat(i),index:i});return My(a,o)});return t.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Ny(e){var n=e.y,r=e.height,i=e.vertical,a=void 0===i||i,o=e.verticalPoints;if(!a||!o||!o.length)return null;var s=o.map(function(t,i){var o=by(by({},e),{},{x1:t,y1:n,x2:t,y2:n+r,key:"line-".concat(i),index:i});return My(a,o)});return t.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Cy(e){var n=e.horizontalFill,r=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.horizontalPoints,c=e.horizontal;if(!(void 0===c||c)||!n||!n.length)return null;var u=l.map(function(e){return Math.round(e+a-a)}).sort(function(e,t){return e-t});a!==u[0]&&u.unshift(0);var d=u.map(function(e,l){var c=!u[l+1]?a+s-e:u[l+1]-e;if(c<=0)return null;var d=l%n.length;return t.createElement("rect",{key:"react-".concat(l),y:e,x:i,height:c,width:o,stroke:"none",fill:n[d],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return t.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Ay(e){var n=e.vertical,r=void 0===n||n,i=e.verticalFill,a=e.fillOpacity,o=e.x,s=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!i||!i.length)return null;var d=u.map(function(e){return Math.round(e+o-o)}).sort(function(e,t){return e-t});o!==d[0]&&d.unshift(0);var h=d.map(function(e,n){var r=!d[n+1]?o+l-e:d[n+1]-e;if(r<=0)return null;var u=n%i.length;return t.createElement("rect",{key:"react-".concat(n),x:e,y:s,width:r,height:c,stroke:"none",fill:i[u],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return t.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var jy=function(e,t){var n=e.xAxis,r=e.width,i=e.height,a=e.offset;return Xh(jx(by(by(by({},Xx.defaultProps),n),{},{ticks:qh(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,t)},Py=function(e,t){var n=e.yAxis,r=e.width,i=e.height,a=e.offset;return Xh(jx(by(by(by({},Xx.defaultProps),n),{},{ticks:qh(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,t)},Oy={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function ky(e){var n,r,i,a,o,s,l=cg(),c=ug(),u=(0,t.useContext)(ng),d=by(by({},e),{},{stroke:null!==(n=e.stroke)&&void 0!==n?n:Oy.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:Oy.fill,horizontal:null!==(i=e.horizontal)&&void 0!==i?i:Oy.horizontal,horizontalFill:null!==(a=e.horizontalFill)&&void 0!==a?a:Oy.horizontalFill,vertical:null!==(o=e.vertical)&&void 0!==o?o:Oy.vertical,verticalFill:null!==(s=e.verticalFill)&&void 0!==s?s:Oy.verticalFill,x:ye(e.x)?e.x:u.left,y:ye(e.y)?e.y:u.top,width:ye(e.width)?e.width:u.width,height:ye(e.height)?e.height:u.height}),h=d.x,p=d.y,f=d.width,m=d.height,g=d.syncWithTicks,v=d.horizontalValues,x=d.verticalValues,y=function(){var e=(0,t.useContext)(Qm);return Ee(e)}(),b=function(){var e=(0,t.useContext)(eg);return Zm()(e,function(e){return $p()(e.domain,Number.isFinite)})||Ee(e)}();if(!ye(f)||f<=0||!ye(m)||m<=0||!ye(h)||h!==+h||!ye(p)||p!==+p)return null;var w=d.verticalCoordinatesGenerator||jy,_=d.horizontalCoordinatesGenerator||Py,S=d.horizontalPoints,E=d.verticalPoints;if((!S||!S.length)&&je()(_)){var M=v&&v.length,T=_({yAxis:b?by(by({},b),{},{ticks:M?v:b.ticks}):void 0,width:l,height:c,offset:u},!!M||g);Ce(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(xy(T),"]")),Array.isArray(T)&&(S=T)}if((!E||!E.length)&&je()(w)){var N=x&&x.length,C=w({xAxis:y?by(by({},y),{},{ticks:N?x:y.ticks}):void 0,width:l,height:c,offset:u},!!N||g);Ce(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(xy(C),"]")),Array.isArray(C)&&(E=C)}return t.createElement("g",{className:"recharts-cartesian-grid"},t.createElement(Ey,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),t.createElement(Ty,_y({},d,{offset:u,horizontalPoints:S,xAxis:y,yAxis:b})),t.createElement(Ny,_y({},d,{offset:u,verticalPoints:E,xAxis:y,yAxis:b})),t.createElement(Cy,_y({},d,{horizontalPoints:S})),t.createElement(Ay,_y({},d,{verticalPoints:E})))}ky.displayName="CartesianGrid";const Ry=e=>{let{active:t,payload:n,label:r}=e;if(t&&n&&n.length){const e=n[0].payload;return(0,M.jsxs)("div",{className:"bg-slate-900/95 border border-amber-500/30 p-4 rounded shadow-[0_0_30px_rgba(0,0,0,0.6)] backdrop-blur-md z-50",children:[(0,M.jsx)("p",{className:"text-amber-500 font-black mb-1 text-[10px] uppercase tracking-[0.2em]",children:r}),(0,M.jsx)("p",{className:"text-slate-100 text-xs mb-3 font-bold leading-tight max-w-[200px]",children:e.action}),(0,M.jsx)("div",{className:"space-y-1.5 border-t border-slate-800 pt-2",children:(0,M.jsxs)("div",{className:"flex justify-between items-center gap-6",children:[(0,M.jsx)("span",{className:"text-slate-500 text-[8px] uppercase font-black",children:"Capital Outlay"}),(0,M.jsx)("span",{className:"text-amber-500 font-mono font-bold text-xs",children:"$".concat(e.cost.toLocaleString())})]})})]})}return null},Dy=e=>{let{record:n}=e;const[r,i]=(0,t.useState)(!1);return(0,M.jsxs)("div",{className:"border-b border-slate-800/50 transition-all duration-300 overflow-hidden ".concat(r?"bg-slate-900/40":"hover:bg-slate-900/20"),children:[(0,M.jsxs)("button",{onClick:()=>i(!r),className:"w-full flex items-center gap-4 p-4 text-left group",children:[(0,M.jsx)("span",{className:"text-xs font-mono text-slate-500 w-24 flex-shrink-0",children:n.date}),(0,M.jsx)("span",{className:"flex-grow text-sm text-slate-300 font-medium truncate group-hover:text-slate-100 transition-colors",children:n.action}),(0,M.jsx)("div",{className:"text-[9px] px-2 py-0.5 rounded border font-black uppercase tracking-widest ".concat((e=>{switch(e){case"Completed":return"bg-emerald-500/10 text-emerald-400 border-emerald-500/20";case"Failed":return"bg-rose-500/10 text-rose-400 border-rose-500/20";default:return"bg-amber-500/10 text-amber-300 border-amber-500/20"}})(n.status)),children:n.status}),(0,M.jsx)("svg",{className:"w-4 h-4 text-slate-600 group-hover:text-slate-400 transition-transform duration-300 ".concat(r?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),(0,M.jsx)("div",{className:"transition-all duration-500 ease-in-out ".concat(r?"max-h-[300px] opacity-100":"max-h-0 opacity-0"," overflow-hidden"),children:(0,M.jsx)("div",{className:"px-4 pb-6 pt-2 ml-28 border-l border-amber-500/20",children:(0,M.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[(0,M.jsxs)("div",{className:"space-y-4",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h5",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2",children:"Technical Summary"}),(0,M.jsxs)("p",{className:"text-xs text-slate-400 leading-relaxed italic",children:["Component integrity verified via ",n.action,". Brahan sensors recorded a post-intervention stability index of 0.94. Financial impact totaled ",(0,M.jsxs)("span",{className:"text-amber-500 font-bold",children:["$",n.cost.toLocaleString()]}),"."]})]}),(0,M.jsxs)("div",{className:"flex gap-4",children:[(0,M.jsxs)("button",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-amber-500/60 hover:text-amber-500 transition-colors flex items-center gap-1",children:[(0,M.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Log"]}),(0,M.jsxs)("button",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-slate-500 hover:text-slate-300 transition-colors flex items-center gap-1",children:[(0,M.jsxs)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,M.jsx)("path",{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,M.jsx)("path",{d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Telemetry Snapshot"]})]})]}),(0,M.jsxs)("div",{className:"bg-slate-950/50 border border-slate-800 p-4 rounded text-[9px] font-mono text-slate-500 leading-tight",children:[(0,M.jsx)("div",{className:"mb-2 text-amber-500/50 uppercase font-black tracking-widest border-b border-slate-800 pb-1",children:"Raw Sensor Hex"}),(0,M.jsx)("p",{children:"0x4A 0x21 0xBC 0x90 // FLOW_STABLE"}),(0,M.jsx)("p",{children:"0x12 0xFF 0xEA 0x01 // VALVE_ACTUATED"}),(0,M.jsx)("p",{children:"0x77 0x33 0x09 0x44 // TEMP_NOMINAL"}),(0,M.jsx)("div",{className:"mt-2 pt-1 border-t border-slate-800 text-emerald-500/50 italic",children:"// No barrier anomalies detected"})]})]})})})]})},Ly=e=>{let{data:n,onReanalyze:r,isAnalyzing:i}=e;const a=(0,t.useMemo)(()=>[...n].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),[n]),o=(0,t.useMemo)(()=>({total:n.reduce((e,t)=>e+t.cost,0),count:n.length,failures:n.filter(e=>"Failed"===e.status).length}),[n]);return(0,M.jsxs)("div",{className:"w-full space-y-10 pb-20",children:[(0,M.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-2",children:[(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded shadow-inner relative group overflow-hidden",children:[(0,M.jsx)("div",{className:"absolute inset-0 bg-amber-500/0 group-hover:bg-amber-500/5 transition-colors duration-500"}),(0,M.jsx)("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest mb-1 relative z-10",children:"Total Asset Investment"}),(0,M.jsxs)("p",{className:"text-2xl font-black text-amber-500 font-mono tracking-tighter relative z-10",children:["$",(o.total/1e6).toFixed(2),"M"]})]}),(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded shadow-inner relative group overflow-hidden",children:[(0,M.jsx)("div",{className:"absolute inset-0 bg-slate-100/0 group-hover:bg-slate-100/5 transition-colors duration-500"}),(0,M.jsx)("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest mb-1 relative z-10",children:"Integrity Cycles"}),(0,M.jsx)("p",{className:"text-2xl font-black text-slate-100 font-mono tracking-tighter relative z-10",children:o.count})]}),(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded shadow-inner relative group overflow-hidden",children:[(0,M.jsx)("div",{className:"absolute inset-0 transition-colors duration-500 ".concat(o.failures>0?"group-hover:bg-rose-500/5":"group-hover:bg-emerald-500/5")}),(0,M.jsx)("p",{className:"text-slate-500 text-[10px] font-black uppercase tracking-widest mb-1 relative z-10",children:"Critical Alerts"}),(0,M.jsxs)("p",{className:"text-2xl font-black font-mono tracking-tighter relative z-10 ".concat(o.failures>0?"text-rose-500":"text-emerald-500"),children:[o.failures," ",(0,M.jsx)("span",{className:"text-xs text-slate-600",children:"Events"})]})]})]}),(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsx)("div",{className:"absolute top-4 left-6 z-10",children:(0,M.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-slate-600",children:"Expenditure Distribution Map"})}),(0,M.jsxs)("div",{className:"w-full h-[320px] bg-slate-900/40 p-6 pt-12 rounded-lg border border-slate-800/50 relative overflow-hidden group",children:[(0,M.jsx)("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none opacity-[0.02] bg-[radial-gradient(#f59e0b_1px,transparent_1px)] [background-size:20px_20px]"}),(0,M.jsx)(pt,{width:"100%",height:"100%",children:(0,M.jsxs)(my,{data:a,margin:{top:10,right:10,left:0,bottom:0},children:[(0,M.jsx)(ky,{strokeDasharray:"3 3",stroke:"#1e293b",vertical:!1}),(0,M.jsx)(ry,{dataKey:"date",stroke:"#475569",tick:{fontSize:9,fill:"#64748b",fontWeight:"bold"},axisLine:{stroke:"#1e293b"},tickLine:{stroke:"#1e293b"}}),(0,M.jsx)(fy,{stroke:"#475569",tick:{fontSize:9,fill:"#64748b",fontWeight:"bold"},tickFormatter:e=>"$".concat(e/1e3,"k"),axisLine:{stroke:"#1e293b"},tickLine:{stroke:"#1e293b"},width:40}),(0,M.jsx)(gn,{content:(0,M.jsx)(Ry,{}),cursor:{fill:"rgba(245, 158, 11, 0.05)"}}),(0,M.jsx)(Em,{dataKey:"cost",name:"Expenditure",radius:[1,1,0,0],children:a.map((e,t)=>(0,M.jsx)(Qp,{fill:"Failed"===e.status?"#f43f5e":"#f59e0b",fillOpacity:"Completed"===e.status?.6:.9,className:"transition-all duration-300 hover:fillOpacity-100"},"cell-".concat(t)))})]})})]})]}),(0,M.jsxs)("div",{className:"space-y-6",children:[(0,M.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 border-b border-slate-800 pb-4",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h3",{className:"text-lg font-black text-slate-200 uppercase tracking-tighter mb-1",children:"Detailed Log Archive"}),(0,M.jsx)("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest italic",children:"Historical barrier performance & maintenance records"})]}),(0,M.jsx)("button",{onClick:r,disabled:i,className:"flex items-center gap-3 px-6 py-2 rounded-full border border-amber-500/30 bg-amber-500/5 hover:bg-amber-500/10 text-amber-500 text-[10px] font-black uppercase tracking-widest transition-all ".concat(i?"opacity-50 cursor-not-allowed grayscale":"hover:scale-105 active:scale-95 shadow-lg shadow-amber-500/5"),children:i?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("svg",{className:"animate-spin h-3.5 w-3.5",viewBox:"0 0 24 24",children:[(0,M.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,M.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Syncing Engine..."]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Resync Intelligence"]})})]}),(0,M.jsx)("div",{className:"bg-slate-900/20 border border-slate-800/60 rounded-lg divide-y divide-slate-800/40",children:[...a].reverse().map((e,t)=>(0,M.jsx)(Dy,{record:e},t))})]}),(0,M.jsx)("div",{className:"flex justify-center",children:(0,M.jsx)("p",{className:"text-[9px] text-slate-600 font-mono uppercase tracking-[0.3em]",children:"End of Archive // Brahan Hub Predictive Node 0x992"})})]})};var Iy=["type","layout","connectNulls","ref"],Uy=["key"];function Fy(e){return Fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fy(e)}function By(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zy.apply(this,arguments)}function Hy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hy(Object(n),!0).forEach(function(t){Jy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wy(e){return function(e){if(Array.isArray(e))return Gy(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Gy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gy(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$y(r.key),r)}}function qy(e,t,n){return t=Ky(t),function(e,t){if(t&&("object"===Fy(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Yy()?Reflect.construct(t,n||[],Ky(e).constructor):t.apply(e,n))}function Yy(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Yy=function(){return!!e})()}function Ky(e){return Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ky(e)}function Zy(e,t){return Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zy(e,t)}function Jy(e,t,n){return(t=$y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $y(e){var t=function(e,t){if("object"!=Fy(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fy(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fy(t)?t:t+""}var Qy=function(e){function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Jy(e=qy(this,n,[].concat(r)),"state",{isAnimationFinished:!0,totalLength:0}),Jy(e,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),Jy(e,"getStrokeDasharray",function(t,r,i){var a=i.reduce(function(e,t){return e+t});if(!a)return e.generateSimpleStrokeDasharray(r,t);for(var o=Math.floor(t/a),s=t%a,l=r-t,c=[],u=0,d=0;u<i.length;d+=i[u],++u)if(d+i[u]>s){c=[].concat(Wy(i.slice(0,u)),[s-d]);break}var h=c.length%2===0?[0,l]:[l];return[].concat(Wy(n.repeat(i,o)),Wy(c),h).map(function(e){return"".concat(e,"px")}).join(", ")}),Jy(e,"id",_e("recharts-line-")),Jy(e,"pathRef",function(t){e.mainCurve=t}),Jy(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),Jy(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zy(e,t)}(n,e),r=n,i=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}},{key:"renderErrorBar",value:function(e,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,i=r.points,a=r.xAxis,o=r.yAxis,s=r.layout,l=Je(r.children,Ch);if(!l)return null;var c=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:Bh(e.payload,t)}},u={clipPath:e?"url(#clipPath-".concat(n,")"):null};return t.createElement(Nt,u,l.map(function(e){return t.cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:i,xAxis:a,yAxis:o,layout:s,dataPointFormatter:c})}))}},{key:"renderDots",value:function(e,r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.dot,s=a.points,l=a.dataKey,c=nt(this.props,!1),u=nt(o,!0),d=s.map(function(e,t){var r=Vy(Vy(Vy({key:"dot-".concat(t),r:3},c),u),{},{index:t,cx:e.x,cy:e.y,value:e.value,dataKey:l,payload:e.payload,points:s});return n.renderDotItem(o,r)}),h={clipPath:e?"url(#clipPath-".concat(r?"":"dots-").concat(i,")"):null};return t.createElement(Nt,zy({className:"recharts-line-dots",key:"dots"},h),d)}},{key:"renderCurveStatically",value:function(e,n,r,i){var a=this.props,o=a.type,s=a.layout,l=a.connectNulls,c=(a.ref,By(a,Iy)),u=Vy(Vy(Vy({},nt(c,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:n?"url(#clipPath-".concat(r,")"):null,points:e},i),{},{type:o,layout:s,connectNulls:l});return t.createElement(Cv,zy({},u,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,n){var r=this,i=this.props,a=i.points,o=i.strokeDasharray,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,h=i.animateNewValues,p=i.width,f=i.height,m=this.state,g=m.prevPoints,v=m.totalLength;return t.createElement(Sa,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var i=t.t;if(g){var s=g.length/a.length,l=a.map(function(e,t){var n=Math.floor(t*s);if(g[n]){var r=g[n],a=Me(r.x,e.x),o=Me(r.y,e.y);return Vy(Vy({},e),{},{x:a(i),y:o(i)})}if(h){var l=Me(2*p,e.x),c=Me(f/2,e.y);return Vy(Vy({},e),{},{x:l(i),y:c(i)})}return Vy(Vy({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(l,e,n)}var c,u=Me(0,v)(i);if(o){var d="".concat(o).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});c=r.getStrokeDasharray(u,v,d)}else c=r.generateSimpleStrokeDasharray(v,u);return r.renderCurveStatically(a,e,n,{strokeDasharray:c})})}},{key:"renderCurve",value:function(e,t){var n=this.props,r=n.points,i=n.isAnimationActive,a=this.state,o=a.prevPoints,s=a.totalLength;return i&&r&&r.length&&(!o&&s>0||!Fd()(o,r))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(r,e,t)}},{key:"render",value:function(){var e,n=this.props,r=n.hide,i=n.dot,a=n.points,o=n.className,s=n.xAxis,l=n.yAxis,c=n.top,u=n.left,d=n.width,h=n.height,p=n.isAnimationActive,f=n.id;if(r||!a||!a.length)return null;var m=this.state.isAnimationFinished,g=1===a.length,v=ie("recharts-line",o),x=s&&s.allowDataOverflow,y=l&&l.allowDataOverflow,b=x||y,w=ge()(f)?this.id:f,_=null!==(e=nt(i,!1))&&void 0!==e?e:{r:3,strokeWidth:2},S=_.r,E=void 0===S?3:S,M=_.strokeWidth,T=void 0===M?2:M,N=(function(e){return e&&"object"===Ge(e)&&"clipDot"in e}(i)?i:{}).clipDot,C=void 0===N||N,A=2*E+T;return t.createElement(Nt,{className:v},x||y?t.createElement("defs",null,t.createElement("clipPath",{id:"clipPath-".concat(w)},t.createElement("rect",{x:x?u:u-d/2,y:y?c:c-h/2,width:x?d:2*d,height:y?h:2*h})),!C&&t.createElement("clipPath",{id:"clipPath-dots-".concat(w)},t.createElement("rect",{x:u-A/2,y:c-A/2,width:d+A,height:h+A}))):null,!g&&this.renderCurve(b,w),this.renderErrorBar(b,w),(g||i)&&this.renderDots(b,C,w),(!p||m)&&ff.renderCallByParent(this.props,a))}}],a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var n=e.length%2!==0?[].concat(Wy(e),[0]):e,r=[],i=0;i<t;++i)r=[].concat(Wy(r),Wy(n));return r}},{key:"renderDotItem",value:function(e,n){var r;if(t.isValidElement(e))r=t.cloneElement(e,n);else if(je()(e))r=e(n);else{var i=n.key,a=By(n,Uy),o=ie("recharts-line-dot","boolean"!==typeof e?e.className:"");r=t.createElement(qr,zy({key:i},a,{className:o}))}return r}}],i&&Xy(r.prototype,i),a&&Xy(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,a}(t.PureComponent);Jy(Qy,"displayName","Line"),Jy(Qy,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!en.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),Jy(Qy,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,o=e.dataKey,s=e.bandSize,l=e.displayedData,c=e.offset,u=t.layout,d=l.map(function(e,t){var l=Bh(e,o);return"horizontal"===u?{x:Qh({axis:n,ticks:i,bandSize:s,entry:e,index:t}),y:ge()(l)?null:r.scale(l),value:l,payload:e}:{x:ge()(l)?null:n.scale(l),y:Qh({axis:r,ticks:a,bandSize:s,entry:e,index:t}),value:l,payload:e}});return Vy({points:d,layout:u},c)});var eb=_x({chartName:"LineChart",GraphicalChild:Qy,axisComponents:[{axisType:"xAxis",AxisComp:ry},{axisType:"yAxis",AxisComp:fy}],formatAxisMap:Pm});const tb=e=>{let{current:t,previous:n}=e;const r=t-n;return Math.abs(r)<.05?(0,M.jsx)("span",{className:"text-slate-600 ml-1",title:"Stable",children:(0,M.jsx)("svg",{className:"w-2.5 h-2.5 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M20 12H4"})})}):r>0?(0,M.jsx)("span",{className:"text-emerald-500 ml-1",title:"Increasing",children:(0,M.jsx)("svg",{className:"w-2.5 h-2.5 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M5 15l7-7 7 7"})})}):(0,M.jsx)("span",{className:"text-rose-500 ml-1",title:"Decreasing",children:(0,M.jsx)("svg",{className:"w-2.5 h-2.5 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4",d:"M19 9l-7 7-7-7"})})})},nb=e=>{let{status:t,isTrendBased:n}=e;const r={optimal:{color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",label:"Optimal",dot:"bg-emerald-500"},warning:{color:"text-amber-400",bg:"bg-amber-500/10",border:"border-amber-500/30",label:"Warning",dot:"bg-amber-500"},critical:{color:"text-rose-400",bg:"bg-rose-500/10",border:"border-rose-500/30",label:"Critical",dot:"bg-rose-500"}}[t];return(0,M.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full border ".concat(r.bg," ").concat(r.border," transition-all duration-500 shadow-lg shadow-black/20"),children:[(0,M.jsxs)("div",{className:"relative flex h-2 w-2",children:[(0,M.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full ".concat(r.dot," opacity-75")}),(0,M.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 ".concat(r.dot)})]}),(0,M.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest ".concat(r.color),children:r.label})]}),n&&"optimal"!==t&&(0,M.jsx)("span",{className:"text-[7px] font-black text-amber-500/80 uppercase tracking-tighter mr-1",children:"Trend Drift Detected"})]})},rb=(0,t.forwardRef)((e,n)=>{let{name:r,params:i,hubConfig:a,onStatusChange:o}=e;const[s,c]=(0,t.useState)([]),[u,d]=(0,t.useState)("optimal"),[h,p]=(0,t.useState)(!1),f=(0,t.useRef)({}),m=(0,t.useRef)({});(0,t.useImperativeHandle)(n,()=>({getCurrentData:()=>m.current,getBaselines:()=>f.current})),(0,t.useEffect)(()=>{const e=Array.from({length:30}).map((e,t)=>{const n={time:"T-".concat(30-t)};return i.forEach(e=>{const r=e.baseValue+(Math.random()-.5)*(.05*e.baseValue);n[e.label]=r,0!==t||f.current[e.label]||(f.current[e.label]=r)}),n});c(e)},[i]),(0,t.useEffect)(()=>{const e=setInterval(()=>{c(e=>{if(0===e.length)return e;const t=e[e.length-1],n={time:"Now"};let r=0,s=0;i.forEach(e=>{const i=Math.random()>.98?.25:.02,a=Math.random()>.95?Math.random()>.5?1.005:.995:1,o=(Math.random()-.5)*(e.baseValue*i),l=t[e.label]*a+o,c=Math.max(.5*e.baseValue,Math.min(1.5*e.baseValue,l));n[e.label]=c,m.current[e.label]=c;const u=Math.abs(c-e.baseValue)/e.baseValue;u>r&&(r=u);const d=f.current[e.label]||e.baseValue,h=Math.abs(c-d)/d;h>s&&(s=h)});let c="optimal",g=!1;const v=a.driftThreshold/100,x=1.6*a.driftThreshold/100;r>.35||s>x?(c="critical",s>x&&r<=.35&&(g=!0)):(r>.12||s>v)&&(c="warning",s>v&&r<=.12&&(g=!0)),c===u&&g===h||(d(c),p(g),null===o||void 0===o||o(c));const y=[...e.slice(1),n];return y.map((e,t)=>l(l({},e),{},{time:t===y.length-1?"Now":"T-".concat(y.length-1-t)}))})},2e3);return()=>clearInterval(e)},[i,u,h,o,a]);const g=["#f59e0b","#06b6d4","#8b5cf6"];return(0,M.jsxs)("div",{className:"my-10 space-y-4",children:[(0,M.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 px-2",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("h4",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-slate-500 mb-1",children:["Telemetry Stream // ",r]}),(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("span",{className:"flex h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse"}),(0,M.jsx)("span",{className:"text-[9px] text-emerald-500 font-bold uppercase tracking-widest",children:"Live Sync: Active"})]})]}),(0,M.jsx)(nb,{status:u,isTrendBased:h})]}),(0,M.jsx)("div",{className:"flex gap-4 self-end sm:self-auto",children:i.map((e,t)=>{const n=s.length>0?s[s.length-1][e.label]:null,r=s.length>1?s[s.length-2][e.label]:null;return(0,M.jsxs)("div",{className:"text-right min-w-[80px]",children:[(0,M.jsx)("p",{className:"text-[8px] text-slate-500 uppercase font-black",children:e.label}),(0,M.jsxs)("div",{className:"flex items-center justify-end",children:[(0,M.jsxs)("p",{className:"text-xs font-mono font-bold text-slate-300",children:[null!==n?n.toFixed(1):"---",(0,M.jsx)("span",{className:"text-[8px] opacity-50 ml-0.5",children:e.unit})]}),null!==n&&null!==r&&(0,M.jsx)(tb,{current:n,previous:r})]})]},t)})})]}),(0,M.jsxs)("div",{className:"h-[240px] w-full bg-slate-900/30 border border-slate-800/60 rounded-lg p-4 relative overflow-hidden group/chart",children:[(0,M.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] bg-[linear-gradient(to_right,#808080_1px,transparent_1px),linear-gradient(to_bottom,#808080_1px,transparent_1px)] bg-[size:20px_20px]"}),(0,M.jsx)("div",{className:"absolute top-0 bottom-0 w-px bg-amber-500/10 animate-scan pointer-events-none"}),(0,M.jsx)(pt,{width:"100%",height:"100%",children:(0,M.jsxs)(eb,{data:s,children:[(0,M.jsx)(ky,{strokeDasharray:"3 3",stroke:"#1e293b",vertical:!1}),(0,M.jsx)(ry,{dataKey:"time",hide:!0}),(0,M.jsx)(fy,{stroke:"#475569",tick:{fontSize:9,fill:"#64748b",fontWeight:"bold"},axisLine:{stroke:"#1e293b"},tickLine:{stroke:"#1e293b"},width:35}),(0,M.jsx)(gn,{contentStyle:{backgroundColor:"#0f172a",borderColor:"#334155",borderRadius:"4px",fontSize:"10px"},itemStyle:{padding:"2px 0"}}),i.map((e,t)=>(0,M.jsx)(Qy,{type:"monotone",dataKey:e.label,stroke:g[t%g.length],strokeWidth:2,dot:!1,isAnimationActive:!1},e.label))]})})]}),(0,M.jsxs)("div",{className:"flex justify-between items-center px-2",children:[(0,M.jsxs)("p",{className:"text-[7px] text-slate-500 italic uppercase tracking-[0.2em]",children:["Drift Threshold: ",a.driftThreshold,"% / ",a.driftWindow,"h Window"]}),(0,M.jsx)("p",{className:"text-[8px] text-slate-600 italic uppercase tracking-widest",children:"High-frequency subsea transducer sync active // Brahan OS v4.2"})]}),(0,M.jsx)("style",{children:"\n        @keyframes scan {\n          0% { left: 0%; opacity: 0; }\n          5% { opacity: 0.5; }\n          95% { opacity: 0.5; }\n          100% { left: 100%; opacity: 0; }\n        }\n        .animate-scan {\n          animation: scan 8s linear infinite;\n        }\n      "})]})}),ib=rb,ab=e=>{var n,r,i,a,o;let{data:s,hubConfig:c}=e;const[u,d]=(0,t.useState)("optimal"),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(null),[x,y]=(0,t.useState)(null),[b,w]=(0,t.useState)(null),[_,S]=(0,t.useState)({}),[E,T]=(0,t.useState)(new Set),N=(0,t.useRef)(null),C=(0,t.useRef)(null),A={optimal:{title:"Nominal Integrity",explanation:"Primary and secondary barriers are performing within design specification. No significant baseline drift detected."},warning:{title:"Deviation Detected",explanation:"Sensors report >12% deviation from design base OR >".concat((j=c).driftThreshold,"% baseline drift over a rolling ").concat(j.driftWindow,"h window.")},critical:{title:"Barrier Alert",explanation:"Critical integrity breach detected (>35% deviation OR >".concat(Math.floor(1.6*j.driftThreshold),"% sustained drift).")}};var j;const P={optimal:"text-emerald-500",warning:"text-amber-500",critical:"text-rose-500"};(0,t.useEffect)(()=>{const e=setInterval(()=>{var e;const t=C.current;if(!t)return;const n=(null===(e=N.current)||void 0===e?void 0:e.getCurrentData())||{};t.querySelectorAll(".interactive-part").forEach(e=>{const t=e.getAttribute("data-label")||e.getAttribute("id");if(!t)return;const r=t.toLowerCase();if(e.classList.remove("comp-optimal","comp-warning","comp-critical","diag-scanning","active-overlay","pst-running-path","comp-failed-glitch"),f&&f.label===t&&e.classList.add("active-overlay"),E.has(r))return void e.classList.add("comp-failed-glitch");if(x&&x.toLowerCase()===r)return void e.classList.add("diag-scanning");b===t&&e.classList.add("pst-running-path");const i=s.telemetryParams.find(e=>e.label.toLowerCase()===r),a=n[(null===i||void 0===i?void 0:i.label)||""];if(i&&void 0!==a){const t=Math.abs(a-i.baseValue)/i.baseValue;t>.3?e.classList.add("comp-critical"):t>.15?e.classList.add("comp-warning"):e.classList.add("comp-optimal")}})},400);return()=>clearInterval(e)},[s.telemetryParams,x,E,f,b]),(0,t.useEffect)(()=>{const e=s.telemetryParams.find(e=>e.label.toLowerCase().includes("pressure")&&!e.label.toLowerCase().includes("valve"));if(!e)return;const t=setInterval(()=>{var t;const n=((null===(t=N.current)||void 0===t?void 0:t.getCurrentData())||{})[e.label];if(void 0===n)return;const r=E.has(e.label.toLowerCase())||E.has("pressure"),i=Math.abs(n-e.baseValue)/e.baseValue;let a="#10b981",o="";i>.3||r?(a="#f43f5e",o="gauge-face-critical"):i>.15&&(a="#f59e0b",o="gauge-face-warning");const s=C.current;if(s){const t=s.querySelectorAll(".gauge-face"),r=s.querySelectorAll(".gauge-needle"),i=s.querySelectorAll(".gauge-digital-readout"),l=.5*e.baseValue,c=(n-e.baseValue)/l*90;t.forEach(e=>{e.style.stroke=a,e.classList.remove("gauge-face-warning","gauge-face-critical"),o&&e.classList.add(o)}),r.forEach(e=>{e.style.stroke=a,e.style.transform="rotate(".concat(c,"deg)")}),i.forEach(t=>{t.innerHTML="".concat(Math.round(n),' <tspan style="font-size: 8px; opacity: 0.6;">').concat(e.unit,"</tspan>"),t.style.fill=a})}},500);return()=>clearInterval(t)},[s.telemetryParams,E]),(0,t.useEffect)(()=>{const e=C.current;if(!e)return;const t=t=>{const n=t.target.closest(".interactive-part");if(n){const r=n.getAttribute("data-label")||n.getAttribute("id")||"Unidentified Component",i=e.getBoundingClientRect();m({label:r,x:t.clientX-i.left,y:t.clientY-i.top})}else t.target.closest(".intelligence-overlay")||m(null)},n=t=>{const n=t.target.closest(".interactive-part");if(n){const r=n.getAttribute("data-label")||n.getAttribute("id")||"Unidentified Component";if(f&&f.label===r)return void v(null);const i=e.getBoundingClientRect();v({label:r,x:t.clientX-i.left,y:t.clientY-i.top})}else v(null)};return e.addEventListener("click",t),e.addEventListener("mousemove",n),()=>{e.removeEventListener("click",t),e.removeEventListener("mousemove",n)}},[f]);const O=(0,t.useCallback)(e=>{var t,n;const r=(null===(t=N.current)||void 0===t?void 0:t.getCurrentData())||{},i=(null===(n=N.current)||void 0===n?void 0:n.getBaselines())||{},a=Object.entries(r).find(t=>{let[n]=t;return n.toLowerCase()===e.toLowerCase()}),o=Object.entries(i).find(t=>{let[n]=t;return n.toLowerCase()===e.toLowerCase()}),l=a?a[1]:void 0,c=o?o[1]:void 0,u=s.telemetryParams.find(t=>t.label.toLowerCase()===e.toLowerCase());if(!u)return null;const d=void 0!==c&&void 0!==l?(l-c)/c*100:0,h=void 0!==l?Math.abs(l-u.baseValue)/u.baseValue:0;let p="optimal";return E.has(e.toLowerCase())||h>.3?p="critical":h>.15&&(p="warning"),{value:l,unit:u.unit,status:p,drift:d,baseValue:u.baseValue}},[s.telemetryParams,E]),k=(0,t.useMemo)(()=>f?(e=>{const t=e.toLowerCase();return t.includes("valve")?{specs:"High-performance tungsten-carbide gate valve. API 6A rated for 15k psi service. Hydraulic actuator with fail-safe close (FSC) functionality. Hardened cobalt-alloy seating with bi-directional sealing capability.",recs:"Perform immediate partial stroke test (PST) to verify actuator response. Inspect hydraulic supply lines for pressure fluctuations. Schedule ultrasonic seal leak verification within 72 hours.",model:"Brahan-V-".concat(t.split(" ").map(e=>e[0].toUpperCase()).join(""),"-Elite"),failureModes:["Stem packing leak","Gate scoring","Actuator diaphragm rupture"],reliabilityScore:94.2}:t.includes("pressure")?{specs:"High-precision piezo-resistive transducer, API 6A compliant. Range: 0-15,000 psi. Dual-redundant sensing elements with 2oo3 voting logic.",recs:"Execute manual bleed-off test to verify zero-point stability. Inspect housing for signs of seawater ingress.",model:"Brahan-PTX-9000-S",failureModes:["Electronic drift","Seawater ingress","Diaphragm fatigue"],reliabilityScore:98.5}:t.includes("flow")?{specs:"Ultrasonic multiphase meter with integrated Gamma-ray densitometer. Brahan-proprietary signal processing for high-viscosity fluid correction.",recs:"Analyze acoustic signal attenuation to detect paraffin wax accumulation. Verify flowmeter calibration against Hub ledger.",model:"Brahan-FM-Coresync",failureModes:["Transducer fouling","Signal attenuation","Multiphase interference"],reliabilityScore:89.7}:t.includes("temp")?{specs:"Quad-junction RTD assembly (Platinum PT100). Titanium Grade 2 thermowell for maximum thermal sensitivity.",recs:"Perform loop check for electromagnetic interference. Compare T-readout against redundant B-barrier sensors.",model:"Brahan-TT-DeltaV",failureModes:["RTD element failure","Thermowell erosion","Terminal corrosion"],reliabilityScore:99.1}:{specs:"Standard industrial integrity barrier component. Reinforced structural housing with Brahan Integrity Shield\u2122 coating.",recs:"Conduct visual ROV inspection for structural scoring. Verify bolt tension on primary flange interface.",model:"Brahan-GEN-Barrier",failureModes:["Structural fatigue","Corrosion pitting","Mechanical wear"],reliabilityScore:96}})(f.label):null,[f]),R=(0,t.useMemo)(()=>f?O(f.label):null,[f,O]),D=(0,t.useMemo)(()=>{var e;const t=null!==f&&void 0!==f&&f.label.toLowerCase().includes("valve")?f.label:"Pressure Valve",n=O(t),r=E.has(t.toLowerCase());return{label:t,percentage:null!==(e=null===n||void 0===n?void 0:n.value)&&void 0!==e?e:100,isFailed:r,isActive:(null===f||void 0===f?void 0:f.label)===t}},[f,E,O]),L=(0,t.useMemo)(()=>(100-D.percentage)/100*90,[D.percentage]);return(0,M.jsxs)("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700 mb-20 relative",children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[(0,M.jsx)("h3",{className:"text-xl font-black text-slate-100 uppercase tracking-tight border-l-4 border-amber-500/40 pl-4",children:s.name}),(0,M.jsxs)("div",{className:"relative",children:[(0,M.jsx)("button",{onClick:()=>p(!h),children:(0,M.jsx)("div",{className:"flex flex-col items-end gap-1",children:(0,M.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full border ".concat("optimal"===u?"bg-emerald-500/10 border-emerald-500/30 text-emerald-400":"warning"===u?"bg-amber-500/10 border-amber-500/30 text-amber-400":"bg-rose-500/10 border-rose-500/30 text-rose-400"," shadow-lg"),children:[(0,M.jsxs)("div",{className:"relative flex h-2 w-2",children:[(0,M.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full ".concat("optimal"===u?"bg-emerald-500":"warning"===u?"bg-amber-500":"bg-rose-500"," opacity-75")}),(0,M.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 ".concat("optimal"===u?"bg-emerald-500":"warning"===u?"bg-amber-500":"bg-rose-500")})]}),(0,M.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:u})]})})}),h&&(0,M.jsxs)("div",{className:"absolute left-0 top-full mt-3 z-30 w-72 p-4 bg-slate-900 border border-slate-700 rounded-lg shadow-2xl animate-in zoom-in-95 duration-200",children:[(0,M.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-widest ".concat(P[u]," mb-2"),children:A[u].title}),(0,M.jsx)("p",{className:"text-[11px] text-slate-400 leading-relaxed italic",children:A[u].explanation})]})]})]}),(0,M.jsx)("div",{className:"text-slate-400 leading-loose text-base",dangerouslySetInnerHTML:{__html:s.description}})]}),(0,M.jsxs)("div",{ref:C,className:"my-12 p-16 bg-slate-900/50 border border-slate-800 rounded-lg flex flex-col justify-center items-center shadow-2xl relative group transition-colors duration-500 cursor-crosshair overflow-hidden min-h-[460px]",children:[(0,M.jsx)("div",{className:"absolute top-4 left-4 text-[9px] text-slate-600 font-mono uppercase tracking-widest z-10",children:"Brahan HUD // Interactive Infrastructure Projection"}),(0,M.jsxs)("div",{className:"relative w-full max-w-md flex justify-center items-center",children:[(0,M.jsx)("div",{className:"w-full transition-colors duration-700 ".concat(P[u]," drop-shadow-[0_0_20px_rgba(0,0,0,0.5)] tree-svg-container"),dangerouslySetInnerHTML:{__html:s.svg}}),(0,M.jsx)("div",{className:"absolute bottom-4 left-4 z-20",children:(0,M.jsx)("div",{className:"w-28 h-28 interactive-part cursor-pointer group/valve transition-all duration-300 ".concat(D.isActive?"scale-110":""," ").concat(D.isFailed?"comp-failed-glitch":""),"data-label":D.label,children:(0,M.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-full h-full drop-shadow-xl overflow-visible",children:[(0,M.jsx)("circle",{cx:"50",cy:"50",r:"45",fill:"currentColor",fillOpacity:"0.05",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"2 4"}),(0,M.jsx)("path",{d:"M25 35 L75 65 L75 35 L25 65 Z",fill:"currentColor",fillOpacity:D.percentage<10||D.isFailed?.4:.15,stroke:"currentColor",strokeWidth:"2.5",className:"transition-all duration-700 ".concat(b===D.label?"pst-running-path":""),style:{transformOrigin:"50px 50px",transform:b===D.label?void 0:"rotate(".concat(L,"deg)")}}),(0,M.jsx)("circle",{cx:"50",cy:"50",r:"5",fill:"currentColor"}),(0,M.jsx)("text",{x:"50",y:"82",textAnchor:"middle",className:"text-[6px] font-black uppercase fill-slate-500 tracking-[0.2em] pointer-events-none",children:D.label}),(0,M.jsxs)("text",{x:"50",y:"93",textAnchor:"middle",className:"text-[9px] font-mono font-black fill-emerald-400 tracking-tight pointer-events-none",children:[D.isFailed?"FAIL":"".concat(Math.round(D.percentage),"%")," ",(0,M.jsx)("tspan",{style:{fontSize:"6px",opacity:.6},children:D.isFailed?"ALERT":"OPEN"})]}),b===D.label&&(0,M.jsx)("text",{x:"50",y:"25",textAnchor:"middle",className:"text-[6px] font-black uppercase fill-amber-500 animate-pulse tracking-[0.2em] pointer-events-none",children:"Executing PST"}),(D.percentage<5||D.isFailed)&&b!==D.label&&(0,M.jsx)("circle",{cx:"50",cy:"50",r:"10",fill:"none",stroke:"#f43f5e",strokeWidth:"1.5",className:"animate-pulse"}),D.isFailed&&(0,M.jsxs)("g",{transform:"translate(75, 20)",children:[(0,M.jsx)("circle",{r:"8",fill:"#f43f5e"}),(0,M.jsx)("text",{y:"3",textAnchor:"middle",className:"text-[10px] fill-white font-black",children:"!"})]})]})})})]}),Object.entries(_).map(e=>{var t,n,r;let[i,a]=e;return(0,M.jsx)("div",{className:"absolute z-50 animate-in fade-in slide-in-from-bottom-4 duration-500 pointer-events-none",style:{left:((null===f||void 0===f?void 0:f.label)===i?f.x:50)+((null===(t=C.current)||void 0===t?void 0:t.getBoundingClientRect().left)||0)+10,top:((null===f||void 0===f?void 0:f.label)===i?f.y:50)+((null===(n=C.current)||void 0===n?void 0:n.getBoundingClientRect().top)||0)-100},children:(0,M.jsxs)("div",{className:"bg-slate-950/95 border border-emerald-500/40 p-3 rounded shadow-2xl backdrop-blur-md min-w-[200px] border-l-4 border-l-emerald-500 pointer-events-auto",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center mb-2 border-b border-slate-800 pb-1",children:[(0,M.jsxs)("p",{className:"text-[10px] font-black text-emerald-400 uppercase tracking-widest",children:[i," Report"]}),(0,M.jsx)("span",{className:"text-[8px] font-mono text-slate-500",children:a.time})]}),(0,M.jsxs)("div",{className:"space-y-2",children:[null===(r=a.phases)||void 0===r?void 0:r.map((e,t)=>(0,M.jsxs)("div",{className:"flex justify-between items-center text-[9px] font-bold",children:[(0,M.jsxs)("span",{className:"text-slate-400",children:[e.label,":"]}),(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:0===t?"text-rose-400":"text-emerald-400",children:e.delta}),(0,M.jsx)("span",{className:"text-slate-600 font-mono text-[8px]",children:e.time})]})]},t)),(0,M.jsxs)("div",{className:"pt-2 mt-2 border-t border-slate-800 flex items-center justify-between",children:[(0,M.jsx)("span",{className:"text-[8px] text-emerald-500 font-black uppercase tracking-widest",children:"Status"}),(0,M.jsx)("span",{className:"text-[8px] text-slate-300 font-black uppercase",children:"Barrier OK"})]})]})]})},i)}),g&&!f&&(0,M.jsx)("div",{className:"fixed pointer-events-none z-[200] animate-in fade-in zoom-in-95 duration-150",style:{left:g.x+((null===(n=C.current)||void 0===n?void 0:n.getBoundingClientRect().left)||0)+15,top:g.y+((null===(r=C.current)||void 0===r?void 0:r.getBoundingClientRect().top)||0)-10},children:(0,M.jsxs)("div",{className:"bg-slate-950/95 border border-slate-700/50 p-3 rounded shadow-2xl backdrop-blur-md min-w-[150px]",children:[(0,M.jsx)("p",{className:"text-[10px] font-black text-amber-500 uppercase tracking-widest border-b border-slate-800 pb-1 mb-2",children:g.label}),O(g.label)?(0,M.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,M.jsx)("span",{className:"text-xl font-mono font-black text-slate-100",children:((null===(i=O(g.label))||void 0===i?void 0:i.value)||0).toFixed(1)}),(0,M.jsx)("span",{className:"text-[9px] font-bold text-slate-500 uppercase",children:null===(a=O(g.label))||void 0===a?void 0:a.unit})]}):(0,M.jsx)("p",{className:"text-[8px] text-slate-500 uppercase font-black italic",children:"Structural Integrity Component"})]})}),f&&(0,M.jsxs)("div",{className:"intelligence-overlay absolute inset-0 z-[100] flex flex-col md:flex-row pointer-events-none p-4 gap-4 overflow-hidden",children:[(0,M.jsx)("div",{className:"absolute inset-0 bg-slate-950/40 backdrop-blur-[2px] pointer-events-auto",onClick:()=>m(null)}),(0,M.jsxs)("div",{className:"relative w-full max-w-md bg-slate-900 border border-slate-800 rounded-lg shadow-[0_30px_60px_rgba(0,0,0,0.8)] flex flex-col pointer-events-auto animate-in slide-in-from-left duration-500 border-l-4 border-l-amber-500",children:[(0,M.jsxs)("div",{className:"p-6 border-b border-slate-800 flex justify-between items-start bg-slate-950/50",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h4",{className:"text-xs font-black text-amber-500 uppercase tracking-[0.2em] mb-1",children:"Brahan Intelligence Panel"}),(0,M.jsx)("h2",{className:"text-2xl font-black text-slate-100 uppercase tracking-tighter",children:f.label}),(0,M.jsx)("p",{className:"text-[10px] text-slate-500 font-mono mt-1",children:(null===k||void 0===k?void 0:k.model)||"Brahan-GEN-Barrier"})]}),(0,M.jsx)("button",{onClick:()=>m(null),className:"p-2 text-slate-600 hover:text-slate-300 transition-colors",children:(0,M.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),(0,M.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8 custom-scrollbar",children:[R&&(0,M.jsxs)("section",{className:"space-y-4",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 border-b border-slate-800 pb-2",children:[(0,M.jsx)("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Operational Status"}),(0,M.jsx)("div",{className:"px-2 py-0.5 rounded text-[8px] font-black uppercase tracking-widest ".concat(b===f.label?"bg-amber-500/20 text-amber-500 border border-amber-500/30":"optimal"===R.status?"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20":"warning"===R.status?"bg-amber-500/10 text-amber-400 border border-amber-500/20":"bg-rose-500/10 text-rose-400 border border-rose-500/20"),children:b===f.label?"PST In Progress":R.status})]}),(0,M.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,M.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,M.jsx)("span",{className:"text-5xl font-mono font-black text-slate-100 tabular-nums",children:E.has(f.label.toLowerCase())?"FAIL":(R.value||0).toFixed(1)}),(0,M.jsx)("span",{className:"text-sm font-black text-slate-500 uppercase",children:E.has(f.label.toLowerCase())?"ERR":R.unit})]}),(0,M.jsxs)("div",{className:"text-right",children:[(0,M.jsx)("span",{className:"text-[9px] text-slate-500 uppercase font-black block",children:"Design Base"}),(0,M.jsxs)("span",{className:"text-xs font-mono font-bold text-slate-300",children:[R.baseValue," ",R.unit]})]})]}),_[f.label]&&(0,M.jsxs)("div",{className:"bg-emerald-500/5 border border-emerald-500/20 p-3 rounded flex flex-col gap-2 animate-in fade-in zoom-in-95",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)("span",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:"Last PST Log"}),(0,M.jsx)("span",{className:"text-[8px] font-mono text-slate-500",children:_[f.label].time})]}),(0,M.jsx)("div",{className:"grid grid-cols-2 gap-2",children:null===(o=_[f.label].phases)||void 0===o?void 0:o.map((e,t)=>(0,M.jsxs)("div",{className:"bg-slate-950/50 p-1.5 rounded text-[8px] border border-slate-800",children:[(0,M.jsx)("span",{className:"text-slate-500 block",children:e.label}),(0,M.jsx)("span",{className:0===t?"text-rose-400 font-bold":"text-emerald-400 font-bold",children:e.delta})]},t))})]}),(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center text-[9px] font-black uppercase tracking-widest",children:[(0,M.jsx)("span",{className:"text-slate-500",children:"Integrity Drift"}),(0,M.jsx)("span",{className:E.has(f.label.toLowerCase())||Math.abs(R.drift)>10?"text-rose-500":"text-emerald-500",children:E.has(f.label.toLowerCase())?"MAX":"".concat(R.drift.toFixed(2),"%")})]}),(0,M.jsx)("div",{className:"h-1 bg-slate-800 rounded-full overflow-hidden",children:(0,M.jsx)("div",{className:"h-full transition-all duration-1000 ".concat(E.has(f.label.toLowerCase())||Math.abs(R.drift)>15?"bg-rose-500":Math.abs(R.drift)>5?"bg-amber-500":"bg-emerald-500"),style:{width:E.has(f.label.toLowerCase())?"100%":"".concat(Math.min(100,4*Math.abs(R.drift)),"%")}})})]})]}),(0,M.jsxs)("section",{className:"space-y-3",children:[(0,M.jsx)("h5",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-l-2 border-slate-700 pl-3",children:"Technical Specifications"}),(0,M.jsx)("p",{className:"text-xs text-slate-300 leading-loose italic",children:(null===k||void 0===k?void 0:k.specs)||"Generic subsea infrastructure barrier component."})]}),(0,M.jsxs)("section",{className:"space-y-3 bg-amber-500/5 p-4 border border-amber-500/20 rounded",children:[(0,M.jsx)("h5",{className:"text-[10px] font-black text-amber-500 uppercase tracking-[0.2em]",children:"Maintenance Foresight"}),(0,M.jsx)("p",{className:"text-xs text-slate-200 leading-loose font-medium",children:E.has(f.label.toLowerCase())?"CRITICAL: Component malfunction simulated. Immediate repair cycle required.":(null===k||void 0===k?void 0:k.recs)||"Continue monitoring via Brahan Hub telemetry stream."})]}),(0,M.jsxs)("section",{className:"grid grid-cols-2 gap-4",children:[(0,M.jsxs)("div",{className:"bg-slate-950 p-4 rounded border border-slate-800",children:[(0,M.jsx)("span",{className:"text-[9px] text-slate-500 uppercase font-black block mb-1",children:"Reliability"}),(0,M.jsx)("span",{className:"text-xl font-mono font-black ".concat(E.has(f.label.toLowerCase())?"text-rose-500":"text-emerald-500"),children:E.has(f.label.toLowerCase())?"0.00%":"".concat((null===k||void 0===k?void 0:k.reliabilityScore)||96,"%")})]}),(0,M.jsxs)("div",{className:"bg-slate-950 p-4 rounded border border-slate-800",children:[(0,M.jsx)("span",{className:"text-[9px] text-slate-500 uppercase font-black block mb-1",children:"Integrity Score"}),(0,M.jsx)("span",{className:"text-xl font-mono font-black text-slate-100",children:E.has(f.label.toLowerCase())?"0.000":(null!==k&&void 0!==k&&k.reliabilityScore?k.reliabilityScore/100-(R?Math.abs(R.drift)/100:0):.96).toFixed(3)})]})]})]}),(0,M.jsxs)("div",{className:"p-4 bg-slate-950 border-t border-slate-800 space-y-2",children:[(0,M.jsxs)("div",{className:"flex gap-2",children:[(0,M.jsx)("button",{onClick:()=>{f.label.toLowerCase().includes("valve")?(e=>{if(b)return;w(e);const t=(new Date).toLocaleTimeString();setTimeout(()=>{const n=(new Date).toLocaleTimeString();w(null),S(r=>l(l({},r),{},{[e]:{time:t,status:"PST Successfully Completed",phases:[{label:"Closing Phase",delta:"-15.2%",time:t},{label:"Reopening Phase",delta:"+15.2%",time:n}]}})),setTimeout(()=>{S(t=>{const n=l({},t);return delete n[e],n})},1e4)},2500)})(f.label):(y(f.label),setTimeout(()=>y(null),3e3))},disabled:null!==b||!!x||E.has(f.label.toLowerCase()),className:"flex-1 bg-amber-500 hover:bg-amber-400 disabled:opacity-30 disabled:cursor-not-allowed text-slate-950 py-3 rounded text-[10px] font-black uppercase tracking-widest transition-all active:scale-95 shadow-lg shadow-amber-900/40",children:b===f.label?"Testing...":f.label.toLowerCase().includes("valve")?"Execute Partial Stroke Test":"Execute Diagnostics"}),(0,M.jsx)("button",{onClick:()=>(e=>{const t=e.toLowerCase();T(e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n})})(f.label),className:"flex-1 py-3 rounded text-[10px] font-black uppercase tracking-widest transition-all active:scale-95 border ".concat(E.has(f.label.toLowerCase())?"bg-emerald-500/10 border-emerald-500/40 text-emerald-400 hover:bg-emerald-500/20":"bg-rose-500/10 border-rose-500/40 text-rose-400 hover:bg-rose-500/20"),children:E.has(f.label.toLowerCase())?"Reset Barrier":"Simulate Failure"})]}),(0,M.jsx)("button",{onClick:()=>m(null),className:"w-full bg-slate-800 hover:bg-slate-700 text-slate-200 py-3 rounded text-[10px] font-black uppercase tracking-widest transition-all",children:"Close Feed"})]})]})]})]}),(0,M.jsx)(ib,{ref:N,name:s.name,params:s.telemetryParams,hubConfig:c,onStatusChange:e=>{d(e),p(!1)}}),(0,M.jsx)("style",{children:"\n        .tree-svg-container .interactive-part { \n          cursor: pointer; \n          transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); \n          transform-origin: center; \n          transform-box: fill-box; \n          paint-order: stroke;\n        }\n\n        .interactive-part:hover { \n          filter: brightness(1.25) drop-shadow(0 0 12px currentColor); \n          transform: scale(1.08); \n          stroke: currentColor;\n          stroke-width: 2.5px;\n          stroke-opacity: 0.6;\n        }\n\n        .active-overlay { \n          filter: brightness(1.4) drop-shadow(0 0 18px currentColor); \n          stroke-width: 4px !important; \n          stroke: currentColor !important;\n          stroke-opacity: 0.8 !important;\n          transform: scale(1.1) !important; \n        }\n\n        @keyframes failed-glitch {\n          0% { transform: translate(0); filter: brightness(1.5) drop-shadow(0 0 5px #f43f5e); }\n          10% { transform: translate(-1px, 1px); }\n          20% { transform: translate(1px, -1px); filter: brightness(2) drop-shadow(0 0 15px #f43f5e); }\n          30% { transform: translate(-2px, -1px); }\n          40% { transform: translate(0); }\n          100% { transform: translate(0); filter: brightness(1.5) drop-shadow(0 0 10px #f43f5e); }\n        }\n        .comp-failed-glitch {\n          animation: failed-glitch 0.2s infinite ease-in-out;\n          stroke: #f43f5e !important;\n          stroke-width: 3px !important;\n          fill: rgba(244, 63, 94, 0.3) !important;\n        }\n        \n        .gauge-needle { stroke-width: 2.5; transform-box: fill-box; transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1); transform-origin: 50% 50%; }\n        .gauge-face { stroke-width: 1.5; transform-box: fill-box; transition: stroke 1s ease; fill: rgba(15, 23, 42, 0.8); }\n        \n        .comp-optimal { stroke: #10b981 !important; fill: rgba(16, 185, 129, 0.05) !important; }\n        .comp-warning { stroke: #f59e0b !important; fill: rgba(245, 158, 11, 0.1) !important; }\n        .comp-critical { stroke: #f43f5e !important; fill: rgba(244, 63, 94, 0.15) !important; }\n        \n        @keyframes pst-animation {\n          0% { transform: rotate(0deg); }\n          40% { transform: rotate(45deg); }\n          60% { transform: rotate(45deg); }\n          100% { transform: rotate(0deg); }\n        }\n        .pst-running-path {\n          animation: pst-animation 2.5s ease-in-out forwards !important;\n          stroke: #f59e0b !important;\n          fill: rgba(245, 158, 11, 0.4) !important;\n          transform-origin: center;\n          transform-box: fill-box;\n          stroke-width: 3px !important;\n        }\n\n        @keyframes gauge-pulse-warning { 0%, 100% { stroke-opacity: 1; } 50% { stroke-opacity: 0.5; } }\n        @keyframes gauge-pulse-critical { 0%, 100% { stroke-opacity: 1; filter: drop-shadow(0 0 5px #f43f5e); } 50% { stroke-opacity: 0.3; filter: drop-shadow(0 0 15px #f43f5e); } }\n        .gauge-face-warning { animation: gauge-pulse-warning 2s infinite ease-in-out; }\n        .gauge-face-critical { animation: gauge-pulse-critical 1s infinite ease-in-out; }\n        \n        @keyframes diag-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n        .diag-scanning { animation: diag-spin 2s linear infinite; stroke: #06b6d4 !important; stroke-dasharray: 4 2; }\n\n        .custom-scrollbar::-webkit-scrollbar { width: 4px; }\n        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }\n        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }\n      "})]})},ob=e=>{let{data:n,currentConfig:r,onSaveConfig:i}=e;const[a,o]=(0,t.useState)(!1),[s,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(l({},r));return(0,M.jsxs)("div",{className:"space-y-12 pb-20",children:[n.groups.map((e,t)=>(0,M.jsxs)("div",{className:"space-y-6",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsx)("h3",{className:"text-amber-500 font-black uppercase tracking-widest text-sm mb-0",children:e.title}),(0,M.jsx)("div",{className:"flex-1 h-px bg-slate-800"})]}),(0,M.jsx)("div",{className:"grid grid-cols-1 gap-6",children:e.settings.map((e,t)=>{const n="drift_threshold"===e.id?u.driftThreshold:"drift_window"===e.id?u.driftWindow:e.defaultValue;return(0,M.jsxs)("div",{className:"bg-slate-900/50 border border-slate-800 p-6 rounded-lg flex flex-col md:flex-row md:items-center justify-between gap-6 hover:border-slate-700 transition-colors",children:[(0,M.jsxs)("div",{className:"max-w-xl",children:[(0,M.jsx)("h4",{className:"text-slate-200 font-bold mb-1",children:e.label}),(0,M.jsx)("p",{className:"text-slate-500 text-xs leading-relaxed",children:e.description})]}),(0,M.jsx)("div",{className:"flex-shrink-0 flex items-center gap-4",children:"toggle"===e.type?(0,M.jsx)("button",{className:"w-12 h-6 bg-slate-800 rounded-full relative p-1 group",children:(0,M.jsx)("div",{className:"w-4 h-4 rounded-full transition-all duration-300 ".concat(n?"bg-amber-500 translate-x-6":"bg-slate-600")})}):"range"===e.type?(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("input",{type:"range",className:"accent-amber-500 w-32 h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer",value:n,min:"drift_threshold"===e.id?5:1,max:"drift_threshold"===e.id?50:168,onChange:t=>((e,t)=>{"drift_threshold"===e&&d(e=>l(l({},e),{},{driftThreshold:Number(t)})),"drift_window"===e&&d(e=>l(l({},e),{},{driftWindow:Number(t)}))})(e.id,t.target.value)}),(0,M.jsx)("span",{className:"text-xs font-mono text-amber-500 font-bold w-8",children:n})]}):(0,M.jsxs)("select",{className:"bg-slate-950 border border-slate-800 rounded px-3 py-1.5 text-xs text-slate-300 focus:border-amber-500/50 outline-none",children:[(0,M.jsx)("option",{children:n}),(0,M.jsx)("option",{children:"Alternative Config"})]})})]},t)})})]},t)),(0,M.jsxs)("div",{className:"sticky bottom-0 left-0 right-0 bg-slate-950/80 backdrop-blur-md pt-6 border-t border-slate-800/50 flex items-center justify-between z-20",children:[(0,M.jsx)("p",{className:"text-[10px] text-slate-600 font-mono uppercase tracking-widest",children:"Brahan Command // Config Ver 4.2.1"}),(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[s&&(0,M.jsx)("span",{className:"text-[10px] text-emerald-500 font-black uppercase tracking-widest animate-pulse",children:"Sync Complete"}),(0,M.jsx)("button",{onClick:()=>{o(!0),setTimeout(()=>{i(u),o(!1),c(!0),setTimeout(()=>c(!1),3e3)},1500)},disabled:a,className:"bg-amber-500 hover:bg-amber-400 text-slate-950 text-xs font-black uppercase tracking-widest px-8 py-3 rounded transition-all shadow-lg shadow-amber-500/20 flex items-center gap-2 ".concat(a?"opacity-50 cursor-not-allowed":""),children:a?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("svg",{className:"animate-spin h-3 w-3",viewBox:"0 0 24 24",children:[(0,M.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,M.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Syncing..."]}):"Save Configuration"})]})]})]})},sb=e=>{let{content:t,isLoading:n,onTriggerIntelligence:r,isAnalyzing:i,hubConfig:a,onUpdateConfig:o}=e;return n?(0,M.jsxs)("div",{className:"flex-grow flex items-center justify-center p-6 bg-slate-950 relative",children:[(0,M.jsx)("div",{className:"absolute inset-0 opacity-[0.03] bg-[linear-gradient(to_right,#808080_1px,transparent_1px),linear-gradient(to_bottom,#808080_1px,transparent_1px)] bg-[size:40px_40px]"}),(0,M.jsx)(ne,{})]}):t?(0,M.jsxs)("div",{className:"flex-grow p-4 sm:p-10 lg:p-16 overflow-y-auto bg-slate-950 relative custom-scrollbar",children:[(0,M.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02] bg-[linear-gradient(to_right,#808080_1px,transparent_1px),linear-gradient(to_bottom,#808080_1px,transparent_1px)] bg-[size:60px_60px]"}),(0,M.jsxs)("div",{className:"max-w-4xl mx-auto relative z-10",children:[(0,M.jsxs)("div",{className:"mb-12 pb-6 border-b border-slate-800/80 flex flex-col sm:flex-row sm:items-end justify-between gap-4",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("span",{className:"text-[10px] text-amber-500 font-black uppercase tracking-[0.4em] mb-3 block",children:"Module // Brahan Hub"}),(0,M.jsx)("h1",{className:"text-4xl sm:text-5xl font-black text-slate-100 tracking-tighter uppercase",children:t.title})]}),(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("span",{className:"flex h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),(0,M.jsx)("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Core Status: Optimal"})]})]}),(0,M.jsx)("div",{className:"prose prose-invert max-w-none  prose-h2:text-2xl prose-h2:font-black prose-h2:tracking-tight prose-h2:text-amber-500 prose-h2:mt-16 prose-h2:mb-6 prose-h2:uppercase prose-h3:text-lg prose-h3:font-black prose-h3:text-slate-200 prose-h3:mb-4 prose-h3:border-l-4 prose-h3:border-amber-500/40 prose-h3:pl-4 prose-p:text-slate-400 prose-p:leading-loose prose-p:mb-8 prose-p:text-base prose-ul:text-slate-400 prose-li:mb-3 prose-li:marker:text-amber-500/50 prose-strong:text-slate-100 prose-strong:font-bold",children:t.pieces.map((e,t)=>{switch(e.type){case"text":return(0,M.jsx)("div",{className:"technical-report",dangerouslySetInnerHTML:{__html:e.data}},t);case"svg":return(0,M.jsxs)("div",{className:"my-12 p-16 bg-slate-900/50 border border-slate-800 rounded-lg flex justify-center items-center text-amber-500 shadow-2xl relative group",children:[(0,M.jsxs)("div",{className:"absolute top-4 left-4 text-[9px] text-slate-600 font-mono uppercase tracking-widest",children:["Infrastructure Projection // 0x",t]}),(0,M.jsx)("div",{className:"w-full max-w-md drop-shadow-[0_0_20px_rgba(245,158,11,0.15)] group-hover:scale-105 transition-transform duration-700",dangerouslySetInnerHTML:{__html:e.data}})]},t);case"chart":return(0,M.jsx)(Ly,{data:e.data,onReanalyze:()=>null===r||void 0===r?void 0:r(e.data),isAnalyzing:i},t);case"tree-unit":return(0,M.jsx)(ab,{data:e.data,hubConfig:a},t);case"settings":return(0,M.jsx)(ob,{data:e.data,currentConfig:a,onSaveConfig:o},t);case"error":const n=e.data.includes("model");return(0,M.jsxs)("div",{className:"bg-rose-950/10 border border-rose-800/40 text-rose-400 p-8 rounded-lg flex items-start gap-5 shadow-2xl animate-pulse",children:[(0,M.jsx)("div",{className:"p-3 bg-rose-900/20 rounded border border-rose-500/20",children:(0,M.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h3",{className:"font-black text-rose-300 uppercase tracking-[0.2em] text-xs",children:n?"Intelligence Engine Fault":"Infrastructure Comms Alert"}),(0,M.jsx)("p",{className:"text-sm mt-2 opacity-90 leading-relaxed italic",children:e.data}),(0,M.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 text-[9px] font-black uppercase tracking-widest border border-rose-500/30 px-3 py-1.5 rounded hover:bg-rose-500/20 transition-all",children:"Retry Synchronization"})]})]},t);default:return null}})})]})]}):(0,M.jsxs)("div",{className:"flex-grow flex flex-col items-center justify-center p-6 text-center bg-slate-950",children:[(0,M.jsxs)("div",{className:"w-24 h-24 border border-slate-800 rounded-lg flex items-center justify-center mb-8 relative group",children:[(0,M.jsx)("div",{className:"absolute inset-0 bg-amber-500/5 blur-xl group-hover:bg-amber-500/10 transition-all"}),(0,M.jsx)("svg",{className:"w-10 h-10 text-slate-700 relative z-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),(0,M.jsx)("h2",{className:"text-xl font-black text-slate-100 mb-2 tracking-tighter uppercase",children:"Initializing Brahan Hub Telemetry"}),(0,M.jsx)("p",{className:"text-slate-500 text-xs max-w-xs mx-auto italic uppercase tracking-widest leading-loose",children:"Awaiting module selection to begin visual data synthesis and predictive analysis."})]})},lb=e=>{let{trend:t}=e;switch(t){case"up":return(0,M.jsx)("svg",{className:"w-3 h-3 text-rose-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 10l7-7m0 0l7 7m-7-7v18"})});case"down":return(0,M.jsx)("svg",{className:"w-3 h-3 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})});case"stable":return(0,M.jsx)("svg",{className:"w-3 h-3 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M20 12H4"})});default:return null}},cb=e=>{var n,r;let{alerts:i}=e;const[a,o]=(0,t.useState)(0),[s,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null);if((0,t.useEffect)(()=>{if(i.length<=1||c)return;const e=setInterval(()=>{o(e=>(e+1)%i.length)},8e3);return()=>clearInterval(e)},[i,c]),s||0===i.length)return null;const p=i[a],f=e=>{switch(e){case"critical":return"bg-rose-500";case"warning":return"bg-amber-500";default:return"bg-slate-400"}},m=e=>{const t="Maintenance Check"===e&&p.suggestedDate?"".concat(e," (Scheduled: ").concat(p.suggestedDate,")"):e;console.log("[Brahan Operational Control] Initiating: ".concat(t," for Alert ID: ").concat(p.id)),h(t),setTimeout(()=>h(null),4e3)};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)("div",{className:"relative z-50 w-full border-b backdrop-blur-xl transition-all duration-700 ease-in-out ".concat((e=>{switch(e){case"critical":return"bg-rose-950/80 border-rose-500/50 text-rose-100";case"warning":return"bg-amber-950/80 border-amber-500/50 text-amber-100";default:return"bg-slate-900/90 border-slate-700/50 text-slate-200"}})(p.severity)),children:[(0,M.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-2 flex items-center justify-between gap-6",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4 overflow-hidden flex-1",children:[(0,M.jsxs)("div",{className:"flex-shrink-0 relative",children:[(0,M.jsx)("span",{className:"flex h-2.5 w-2.5 rounded-full ".concat(f(p.severity)," animate-pulse")}),(0,M.jsx)("span",{className:"absolute inset-0 h-2.5 w-2.5 rounded-full ".concat(f(p.severity)," animate-ping opacity-75")})]}),(0,M.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 overflow-hidden",children:[(0,M.jsxs)("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] whitespace-nowrap opacity-70",children:["Brahan Intelligence // ",p.severity]}),(0,M.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,M.jsx)("span",{className:"hidden sm:inline opacity-30",children:"|"}),(0,M.jsxs)("p",{className:"text-xs font-bold truncate",children:[p.title,": ",(0,M.jsx)("span",{className:"font-normal opacity-90",children:p.message})]})]})]})]}),(0,M.jsxs)("div",{className:"flex items-center gap-4 flex-shrink-0",children:[(0,M.jsx)("button",{onClick:()=>u(!0),className:"text-[9px] font-black uppercase tracking-widest border border-current px-2 py-1 rounded hover:bg-white/10 transition-colors",children:"View Details"}),(0,M.jsx)("div",{className:"hidden lg:flex gap-1",children:i.map((e,t)=>(0,M.jsx)("div",{className:"h-1 w-4 rounded-full transition-all duration-300 ".concat(t===a?"bg-current w-6":"bg-current opacity-20")},t))}),(0,M.jsx)("button",{onClick:()=>l(!0),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors group","aria-label":"Dismiss intelligence stream",children:(0,M.jsx)("svg",{className:"w-4 h-4 opacity-50 group-hover:opacity-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,M.jsx)("div",{className:"absolute bottom-0 left-0 h-[1.5px] bg-current opacity-30 transition-all duration-[8000ms] ease-linear w-full origin-left animate-scan"})]}),c&&(0,M.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-8",children:[(0,M.jsx)("div",{className:"absolute inset-0 bg-slate-950/90 backdrop-blur-md",onClick:()=>u(!1)}),(0,M.jsxs)("div",{className:"relative w-full max-w-4xl bg-slate-900 border border-slate-800 rounded-lg shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[(0,M.jsxs)("div",{className:"p-6 border-b border-slate-800 flex items-start justify-between ".concat("critical"===p.severity?"bg-rose-500/5":"warning"===p.severity?"bg-amber-500/5":"bg-slate-500/5"),children:[(0,M.jsxs)("div",{children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,M.jsx)("span",{className:"h-3 w-3 rounded-full ".concat(f(p.severity))}),(0,M.jsx)("h2",{className:"text-2xl font-black text-slate-100 uppercase tracking-tighter",children:p.title})]}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed max-w-2xl",children:p.message})]}),(0,M.jsx)("button",{onClick:()=>u(!1),className:"p-2 text-slate-500 hover:text-slate-100 hover:bg-slate-800 rounded-lg transition-all",children:(0,M.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,M.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 sm:p-10 space-y-10 custom-scrollbar",children:[(0,M.jsxs)("section",{children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,M.jsx)("div",{className:"h-px flex-1 bg-slate-800"}),(0,M.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-amber-500 whitespace-nowrap",children:"Simulated Telemetry Readout"}),(0,M.jsx)("div",{className:"h-px flex-1 bg-slate-800"})]}),(0,M.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:null===(n=p.telemetry)||void 0===n?void 0:n.map((e,t)=>(0,M.jsxs)("div",{className:"bg-slate-950 border border-slate-800 p-4 rounded group hover:border-amber-500/30 transition-all",children:[(0,M.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,M.jsx)("p",{className:"text-[9px] text-slate-500 uppercase font-black tracking-widest",children:e.label}),(0,M.jsx)(lb,{trend:e.trend})]}),(0,M.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,M.jsx)("p",{className:"text-lg font-mono text-slate-200 group-hover:text-amber-500 transition-colors",children:e.value}),e.trend&&(0,M.jsx)("span",{className:"text-[8px] font-black uppercase tracking-tighter ".concat("up"===e.trend?"text-rose-500":"down"===e.trend?"text-cyan-400":"text-slate-600"),children:e.trend})]})]},t))})]}),(0,M.jsxs)("section",{children:[(0,M.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,M.jsx)("div",{className:"h-px flex-1 bg-slate-800"}),(0,M.jsx)("h3",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-amber-500 whitespace-nowrap",children:"Historical Correlation"}),(0,M.jsx)("div",{className:"h-px flex-1 bg-slate-800"})]}),(0,M.jsxs)("div",{className:"space-y-3",children:[null===(r=p.linkedMaintenance)||void 0===r?void 0:r.map((e,t)=>(0,M.jsxs)("div",{className:"bg-slate-950/50 border border-slate-800 p-4 rounded-md flex items-center gap-6",children:[(0,M.jsx)("div",{className:"text-center border-r border-slate-800 pr-6 min-w-[100px]",children:(0,M.jsx)("p",{className:"text-xs font-mono text-slate-500",children:e.date})}),(0,M.jsx)("div",{className:"flex-1",children:(0,M.jsx)("p",{className:"text-sm text-slate-300 font-medium",children:e.action})}),(0,M.jsx)("div",{className:"text-[10px] px-2 py-0.5 rounded font-black uppercase ".concat("Completed"===e.status?"bg-emerald-500/10 text-emerald-400":"Failed"===e.status?"bg-rose-500/10 text-rose-400":"bg-amber-500/10 text-amber-300"),children:e.status})]},t)),(!p.linkedMaintenance||0===p.linkedMaintenance.length)&&(0,M.jsx)("p",{className:"text-slate-600 text-center text-xs italic italic",children:"No direct historical correlation found in primary cache."})]})]}),(0,M.jsxs)("section",{className:"space-y-6",children:[(0,M.jsxs)("div",{className:"bg-amber-500/5 border border-amber-500/20 p-6 rounded-lg relative overflow-hidden",children:[(0,M.jsx)("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:(0,M.jsx)("svg",{className:"w-16 h-16 text-amber-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{d:"M12 2L1 21h22L12 2zm0 3.45l8.27 14.3H3.73L12 5.45zM11 10v4h2v-4h-2zm0 6v2h2v-2h-2z"})})}),(0,M.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-8 mb-8",children:[(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("h3",{className:"text-xs font-black uppercase tracking-widest text-amber-500 mb-2",children:"Brahan Hub Recommendation"}),(0,M.jsx)("p",{className:"text-slate-100 text-sm leading-relaxed font-medium",children:p.recommendation})]}),p.suggestedDate&&(0,M.jsxs)("div",{className:"bg-slate-950 border border-amber-500/30 p-4 rounded-md shadow-lg min-w-[180px] flex flex-col items-center justify-center text-center",children:[(0,M.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-500 mb-2",children:"Optimal Service Date"}),(0,M.jsx)("div",{className:"text-xl font-mono text-amber-500 font-black mb-1",children:p.suggestedDate}),(0,M.jsx)("span",{className:"text-[8px] font-black uppercase tracking-tighter px-2 py-0.5 rounded ".concat("critical"===p.severity?"bg-rose-500/20 text-rose-400":"bg-amber-500/10 text-amber-400"),children:"critical"===p.severity?"Immediate Priority":"System Optimized"})]})]}),(0,M.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-amber-500/10",children:[(0,M.jsxs)("button",{onClick:()=>m("Maintenance Check"),className:"flex-1 flex flex-col items-center justify-center bg-slate-100 hover:bg-white text-slate-950 py-3 rounded transition-all active:scale-95 group",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,M.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,M.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Schedule Check"})]}),p.suggestedDate&&(0,M.jsxs)("span",{className:"text-[8px] font-bold opacity-60 tracking-wider",children:["Sync with ",p.suggestedDate]})]}),(0,M.jsxs)("button",{onClick:()=>m("Safety Protocol Review"),className:"flex-1 flex items-center justify-center gap-2 bg-slate-800 hover:bg-slate-700 text-slate-200 border border-slate-700 text-[10px] font-black uppercase tracking-widest py-3 rounded transition-all active:scale-95 group",children:[(0,M.jsx)("svg",{className:"w-3.5 h-3.5 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M9 12l2 2 4-4m5.618-4.016A3.323 3.323 0 0010.603 2 3.323 3.323 0 002 10.603v.406a3.323 3.323 0 005.182 2.768L21.618 6.484z"})}),"Review Safety Protocol"]})]})]}),d&&(0,M.jsxs)("div",{className:"bg-emerald-500/10 border border-emerald-500/40 text-emerald-400 p-4 rounded flex items-center gap-3 animate-in fade-in slide-in-from-bottom-2 duration-300 shadow-xl shadow-emerald-500/5",children:[(0,M.jsx)("svg",{className:"w-5 h-5 animate-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,M.jsxs)("div",{className:"flex flex-col",children:[(0,M.jsx)("p",{className:"text-xs font-black uppercase tracking-widest",children:"Operational Command Synchronized"}),(0,M.jsxs)("p",{className:"text-[10px] opacity-70 font-medium",children:["Executing: ",d]})]})]})]})]}),(0,M.jsxs)("div",{className:"p-4 bg-slate-950/80 border-t border-slate-800 flex justify-between items-center",children:[(0,M.jsxs)("span",{className:"text-[9px] text-slate-600 font-mono uppercase tracking-widest",children:["Brahan Intelligence Report // ",p.timestamp]}),(0,M.jsx)("button",{onClick:()=>u(!1),className:"bg-amber-500 hover:bg-amber-400 text-slate-950 text-xs font-black uppercase tracking-widest px-6 py-2 rounded transition-all shadow-lg shadow-amber-500/20",children:"Close Report"})]})]})]}),(0,M.jsx)("style",{children:"\n        @keyframes scan {\n          0% { transform: scaleX(0); }\n          100% { transform: scaleX(1); }\n        }\n        .custom-scrollbar::-webkit-scrollbar {\n          width: 4px;\n        }\n        .custom-scrollbar::-webkit-scrollbar-track {\n          background: transparent;\n        }\n        .custom-scrollbar::-webkit-scrollbar-thumb {\n          background: #334155;\n          border-radius: 10px;\n        }\n      "})]})};var ub,db,hb;!function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"}(ub||(ub={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(db||(db={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(hb||(hb={}));const pb=["user","model","function","system"];var fb,mb,gb,vb,xb,yb,bb,wb;!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"}(fb||(fb={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(mb||(mb={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(gb||(gb={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(vb||(vb={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.OTHER="OTHER"}(xb||(xb={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(yb||(yb={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(bb||(bb={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(wb||(wb={}));class _b extends Error{constructor(e){super("[GoogleGenerativeAI Error]: ".concat(e))}}class Sb extends _b{constructor(e,t){super(e),this.response=t}}class Eb extends _b{constructor(e,t,n,r){super(e),this.status=t,this.statusText=n,this.errorDetails=r}}class Mb extends _b{}var Tb;!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(Tb||(Tb={}));class Nb{constructor(e,t,n,r,i){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=i}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta",r=(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com";let i="".concat(r,"/").concat(n,"/").concat(this.model,":").concat(this.task);return this.stream&&(i+="?alt=sse"),i}}async function Cb(e){var t;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(e){const t=[];return(null===e||void 0===e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("".concat("genai-js","/").concat("0.21.0")),t.join(" ")}(e.requestOptions)),n.append("x-goog-api-key",e.apiKey);let r=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new Mb("unable to convert customHeaders value ".concat(JSON.stringify(r)," to Headers: ").concat(i.message))}for(const[e,t]of r.entries()){if("x-goog-api-key"===e)throw new Mb("Cannot set reserved header name ".concat(e));if("x-goog-api-client"===e)throw new Mb("Header name ".concat(e," can only be set using the apiClient field"));n.append(e,t)}}return n}async function Ab(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fetch;const{url:s,fetchOptions:l}=await async function(e,t,n,r,i,a){const o=new Nb(e,t,n,r,a);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},jb(a)),{method:"POST",headers:await Cb(o),body:i})}}(e,t,n,r,i,a);return async function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fetch;try{n=await r(e,t)}catch(i){!function(e,t){let n=e;e instanceof Eb||e instanceof Mb||(n=new _b("Error fetching from ".concat(t.toString(),": ").concat(e.message)),n.stack=e.stack);throw n}(i,e)}n.ok||await async function(e,t){let n,r="";try{const t=await e.json();r=t.error.message,t.error.details&&(r+=" ".concat(JSON.stringify(t.error.details)),n=t.error.details)}catch(i){}throw new Eb("Error fetching from ".concat(t.toString(),": [").concat(e.status," ").concat(e.statusText,"] ").concat(r),e.status,e.statusText,n)}(n,e);return n}(s,l,o)}function jb(e){const t={};if(void 0!==(null===e||void 0===e?void 0:e.signal)||(null===e||void 0===e?void 0:e.timeout)>=0){const n=new AbortController;(null===e||void 0===e?void 0:e.timeout)>=0&&setTimeout(()=>n.abort(),e.timeout),(null===e||void 0===e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{n.abort()}),t.signal=n.signal}return t}function Pb(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates."),Rb(e.candidates[0]))throw new Sb("".concat(Db(e)),e);return function(e){var t,n,r,i;const a=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const o of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)o.text&&a.push(o.text),o.executableCode&&a.push("\n```"+o.executableCode.language+"\n"+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&a.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}(e)}if(e.promptFeedback)throw new Sb("Text not available. ".concat(Db(e)),e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),Rb(e.candidates[0]))throw new Sb("".concat(Db(e)),e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Ob(e)[0]}if(e.promptFeedback)throw new Sb("Function call not available. ".concat(Db(e)),e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn("This response had ".concat(e.candidates.length," ")+"candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates."),Rb(e.candidates[0]))throw new Sb("".concat(Db(e)),e);return Ob(e)}if(e.promptFeedback)throw new Sb("Function call not available. ".concat(Db(e)),e)},e}function Ob(e){var t,n,r,i;const a=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const o of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)o.functionCall&&a.push(o.functionCall);return a.length>0?a:void 0}const kb=[xb.RECITATION,xb.SAFETY,xb.LANGUAGE];function Rb(e){return!!e.finishReason&&kb.includes(e.finishReason)}function Db(e){var t,n,r;let i="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(r=e.candidates)||void 0===r?void 0:r[0]){const t=e.candidates[0];Rb(t)&&(i+="Candidate was blocked due to ".concat(t.finishReason),t.finishMessage&&(i+=": ".concat(t.finishMessage)))}}else i+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(i+=" due to ".concat(e.promptFeedback.blockReason)),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(i+=": ".concat(e.promptFeedback.blockReasonMessage));return i}function Lb(e){return this instanceof Lb?(this.v=e,this):new Lb(e)}function Ib(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{!function(e){e.value instanceof Lb?Promise.resolve(e.value.v).then(l,c):u(a[0][2],e)}(i[e](t))}catch(n){u(a[0][3],n)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}"function"===typeof SuppressedError&&SuppressedError;const Ub=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Fb(e){const t=function(e){const t=e.getReader(),n=new ReadableStream({start(e){let n="";return r();function r(){return t.read().then(t=>{let{value:i,done:a}=t;if(a)return n.trim()?void e.error(new _b("Failed to parse stream")):void e.close();n+=i;let o,s=n.match(Ub);for(;s;){try{o=JSON.parse(s[1])}catch(l){return void e.error(new _b('Error parsing JSON response: "'.concat(s[1],'"')))}e.enqueue(o),n=n.substring(s[0].length),s=n.match(Ub)}return r()})}}});return n}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,r]=t.tee();return{stream:zb(n),response:Bb(r)}}async function Bb(e){const t=[],n=e.getReader();for(;;){const{done:e,value:r}=await n.read();if(e)return Pb(Hb(t));t.push(r)}}function zb(e){return Ib(this,arguments,function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield Lb(t.read());if(n)break;yield yield Lb(Pb(e))}})}function Hb(e){const t=e[e.length-1],n={promptFeedback:null===t||void 0===t?void 0:t.promptFeedback};for(const r of e){if(r.candidates)for(const e of r.candidates){const t=e.index;if(n.candidates||(n.candidates=[]),n.candidates[t]||(n.candidates[t]={index:e.index}),n.candidates[t].citationMetadata=e.citationMetadata,n.candidates[t].groundingMetadata=e.groundingMetadata,n.candidates[t].finishReason=e.finishReason,n.candidates[t].finishMessage=e.finishMessage,n.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){n.candidates[t].content||(n.candidates[t].content={role:e.content.role||"user",parts:[]});const r={};for(const i of e.content.parts)i.text&&(r.text=i.text),i.functionCall&&(r.functionCall=i.functionCall),i.executableCode&&(r.executableCode=i.executableCode),i.codeExecutionResult&&(r.codeExecutionResult=i.codeExecutionResult),0===Object.keys(r).length&&(r.text=""),n.candidates[t].content.parts.push(r)}}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}async function Vb(e,t,n,r){return Fb(await Ab(t,Tb.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r))}async function Wb(e,t,n,r){const i=await Ab(t,Tb.GENERATE_CONTENT,e,!1,JSON.stringify(n),r);return{response:Pb(await i.json())}}function Gb(e){if(null!=e)return"string"===typeof e?{role:"system",parts:[{text:e}]}:e.text?{role:"system",parts:[e]}:e.parts?e.role?e:{role:"system",parts:e.parts}:void 0}function Xb(e){let t=[];if("string"===typeof e)t=[{text:e}];else for(const n of e)"string"===typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const a of e)"functionResponse"in a?(n.parts.push(a),i=!0):(t.parts.push(a),r=!0);if(r&&i)throw new _b("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new _b("No content is provided for sending chat message.");if(r)return t;return n}(t)}function qb(e){let t;if(e.contents)t=e;else{t={contents:[Xb(e)]}}return e.systemInstruction&&(t.systemInstruction=Gb(e.systemInstruction)),t}const Yb=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Kb={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};const Zb="SILENT_ERROR";class Jb{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.model=t,this.params=n,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null===n||void 0===n?void 0:n.history)&&(!function(e){let t=!1;for(const n of e){const{role:e,parts:r}=n;if(!t&&"user"!==e)throw new _b("First content should be with role 'user', got ".concat(e));if(!pb.includes(e))throw new _b("Each item should include role field. Got ".concat(e," but valid roles are: ").concat(JSON.stringify(pb)));if(!Array.isArray(r))throw new _b("Content should have 'parts' property with an array of Parts");if(0===r.length)throw new _b("Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const t of r)for(const e of Yb)e in t&&(i[e]+=1);const a=Kb[e];for(const t of Yb)if(!a.includes(t)&&i[t]>0)throw new _b("Content with role '".concat(e,"' can't contain '").concat(t,"' part"));t=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,a,o,s;await this._sendPromise;const l=Xb(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(a=this.params)||void 0===a?void 0:a.toolConfig,systemInstruction:null===(o=this.params)||void 0===o?void 0:o.systemInstruction,cachedContent:null===(s=this.params)||void 0===s?void 0:s.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t);let d;return this._sendPromise=this._sendPromise.then(()=>Wb(this._apiKey,this.model,c,u)).then(e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(l);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{const t=Db(e.response);t&&console.warn("sendMessage() was unsuccessful. ".concat(t,". Inspect response object for details."))}d=e}),await this._sendPromise,d}async sendMessageStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r,i,a,o,s;await this._sendPromise;const l=Xb(e),c={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(r=this.params)||void 0===r?void 0:r.generationConfig,tools:null===(i=this.params)||void 0===i?void 0:i.tools,toolConfig:null===(a=this.params)||void 0===a?void 0:a.toolConfig,systemInstruction:null===(o=this.params)||void 0===o?void 0:o.systemInstruction,cachedContent:null===(s=this.params)||void 0===s?void 0:s.cachedContent,contents:[...this._history,l]},u=Object.assign(Object.assign({},this._requestOptions),t),d=Vb(this._apiKey,this.model,c,u);return this._sendPromise=this._sendPromise.then(()=>d).catch(e=>{throw new Error(Zb)}).then(e=>e.response).then(e=>{if(e.candidates&&e.candidates.length>0){this._history.push(l);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=Db(e);t&&console.warn("sendMessageStream() was unsuccessful. ".concat(t,". Inspect response object for details."))}}).catch(e=>{e.message!==Zb&&console.error(e)}),d}}class $b{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.apiKey=e,this._requestOptions=n,t.model.includes("/")?this.model=t.model:this.model="models/".concat(t.model),this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Gb(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const r=qb(e),i=Object.assign(Object.assign({},this._requestOptions),t);return Wb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),i)}async generateContentStream(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;const r=qb(e),i=Object.assign(Object.assign({},this._requestOptions),t);return Vb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},r),i)}startChat(e){var t;return new Jb(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e,t){var n;let r={model:null===t||void 0===t?void 0:t.model,generationConfig:null===t||void 0===t?void 0:t.generationConfig,safetySettings:null===t||void 0===t?void 0:t.safetySettings,tools:null===t||void 0===t?void 0:t.tools,toolConfig:null===t||void 0===t?void 0:t.toolConfig,systemInstruction:null===t||void 0===t?void 0:t.systemInstruction,cachedContent:null===(n=null===t||void 0===t?void 0:t.cachedContent)||void 0===n?void 0:n.name,contents:[]};const i=null!=e.generateContentRequest;if(e.contents){if(i)throw new Mb("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=e.contents}else if(i)r=Object.assign(Object.assign({},r),e.generateContentRequest);else{const t=Xb(e);r.contents=[t]}return{generateContentRequest:r}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await Ab(t,Tb.COUNT_TOKENS,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async embedContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){if("string"===typeof e||Array.isArray(e))return{content:Xb(e)};return e}(e),r=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){return(await Ab(t,Tb.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,n,r)}async batchEmbedContents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Object.assign(Object.assign({},this._requestOptions),t);return async function(e,t,n,r){const i=n.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await Ab(t,Tb.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),r)).json()}(this.apiKey,this.model,e,n)}}class Qb{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new _b("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new $b(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,n){if(!e.name)throw new Mb("Cached content must contain a `name` field.");if(!e.model)throw new Mb("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const a of r)if((null===t||void 0===t?void 0:t[a])&&e[a]&&(null===t||void 0===t?void 0:t[a])!==e[a]){if("model"===a){if((t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue}throw new Mb('Different value for "'.concat(a,'" specified in modelParams')+" (".concat(t[a],") and cachedContent (").concat(e[a],")"))}const i=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new $b(this.apiKey,i,n)}}const ew=new Qb({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_KEY||""),tw=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(e=>{const t="You are the Brahan Hub AI, a visionary expert in subsea and surface well integrity with a focus on rugged industrial safety and predictive foresight. Your tone is authoritative, professional, and sophisticated.";switch(e){case W.OVERVIEW:return"".concat(t," Provide a comprehensive overview of Well Integrity. Structure with a main title (Brahan Foresight: Global Well Integrity), and then break it down into sections. Cover definition, the 'Golden Rules' of barriers, and lifecycle risk management. Use clean HTML with h2, h3, p, ul, li.");case W.TREES:return"".concat(t," Describe three common types of Christmas Trees (e.g., Conventional, Subsea, Horizontal). For each, provide technical specs, application environment, and visionary advantages. \n      Also, generate a high-fidelity 2D SVG line drawing (monochrome, 'currentColor') for each. \n      \n      CRITICAL: For each tree, define these real-time telemetry parameters to monitor:\n      1. \"Pressure\" (unit: 'psi', baseValue: ~5000)\n      2. \"Production Flow\" (unit: 'bpd', baseValue: ~12000)\n      3. \"Temperature\" (unit: '\xb0C', baseValue: ~65)\n      4. \"Pressure Valve\" (unit: '% open', baseValue: 100)\n      5. \"Master Valve\" (unit: '% open', baseValue: 100)\n      6. \"Wing Valve\" (unit: '% open', baseValue: 100)\n      7. \"Swab Valve\" (unit: '% open', baseValue: 100)\n      \n      SVG INTERACTIVITY & DESIGN:\n      Inside the SVG, represent these as distinct engineering components.\n      - ALL VALVES (Pressure, Master, Wing, Swab) MUST be represented as classic bowtie valve symbols with class 'interactive-part' and 'data-label' attributes matching their names exactly.\n      - The \"Pressure\" parameter MUST be a dedicated Gauge Assembly with:\n        1. A circular boundary (class 'interactive-part gauge-face', data-label=\"Pressure\").\n        2. A central needle line (class 'gauge-needle').\n        3. A text element (class 'gauge-digital-readout') showing \"---\".\n      - \"Production Flow\" and \"Temperature\" MUST be distinct, clickable shapes with class 'interactive-part' and correct 'data-label'.\n      \n      The SVG should look like a professional blueprint. Use 'stroke-width' around 1.5-2.\n      IMPORTANT: The \"data-label\" strings in the SVG MUST MATCH the \"label\" fields in the telemetryParams array EXACTLY.\n      \n      Output must be a JSON array of objects with 'name', 'description' (clean HTML), 'svg' (string), and 'telemetryParams' (array of objects with 'label', 'unit', and 'baseValue').");case W.ISSUES:return"".concat(t," List and explain five critical well integrity issues. Describe causes, catastrophic consequences, and Brahan-level mitigation methods. Format as clean HTML with h2 title and h3 for each issue.");case W.MAINTENANCE:return"".concat(t," Generate a sample maintenance history for well 'BRAHAN-ALPHA-01' specifically focusing on the Christmas Tree and Wellhead components over 5 years. Include 12-18 records. Use technical terms like SCSSV, Annulus, Valve Cavity, Actuator. Output must be a JSON array of objects: 'date' (YYYY-MM-DD), 'action' (detailed technical task), 'cost' (5000-75000), and 'status' ('Completed', 'Scheduled', 'Failed').");case W.PROCEDURES:return"".concat(t," Outline a rigorous technical procedure for an 'Annulus Pressure Test' (A-Annulus). \n      Include Objective, Safety Prerequisites, Step-by-Step Test Sequence, and Acceptance Criteria. Format as clean HTML.");case W.SETTINGS:return"".concat(t," Define a set of configurable parameters for the Brahan Hub interface. \n      Output a JSON object with a 'groups' array. \n      MANDATORY: Include 'drift_threshold' and 'drift_window' settings in the 'Alert Thresholds' group.");default:throw new Error("Unknown section")}})(e),r=e===W.TREES||e===W.MAINTENANCE||e===W.SETTINGS;try{const t=ew.getGenerativeModel({model:"gemini-pro",generationConfig:{responseMimeType:r?"application/json":"text/plain"}}),i=(await t.generateContent(n)).response.text();if(!i)throw new Error("Connection to Brahan Hub failed.");return((e,t)=>{const n=e=>{const t=e.match(/\[[\s\S]*\]|\{[\s\S]*\}/);return t?t[0]:e};try{switch(e){case W.MAINTENANCE:return{title:"Predictive Asset Maintenance",pieces:[{type:"chart",data:JSON.parse(n(t))}]};case W.TREES:return{title:"Subsea & Surface Infrastructure",pieces:JSON.parse(n(t)).map(e=>({type:"tree-unit",data:e}))};case W.SETTINGS:return{title:"Brahan Hub Configuration",pieces:[{type:"settings",data:JSON.parse(n(t))}]};case W.OVERVIEW:case W.ISSUES:case W.PROCEDURES:return{title:e,pieces:[{type:"text",data:t}]};default:throw new Error("Parsing not implemented for this section")}}catch(r){return console.error("Error parsing Gemini response:",r),{title:e,pieces:[{type:"error",data:"Predictive model structural mismatch for ".concat(e,".")}]}}})(e,i)}catch(i){return console.error("Error fetching content for ".concat(e,":"),i),t<1&&"INTERNAL"===(null===i||void 0===i?void 0:i.status)?tw(e,t+1):{title:e,pieces:[{type:"error",data:"Telemetry data stream interrupted."}]}}};let nw=function(e){return e.OVERVIEW="Well Integrity Overview",e.TREES="Christmas Trees",e.ISSUES="Integrity Issues",e.MAINTENANCE="Maintenance History",e.PROCEDURES="Test Procedures",e.SETTINGS="Hub Configuration",e}({});const rw=e=>{let{onExit:n}=e;const[r,i]=(0,t.useState)(null),[a,o]=(0,t.useState)({}),[s,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)({driftThreshold:15,driftWindow:24}),[f,m]=(0,t.useState)([{id:"default-1",severity:"info",title:"Brahan Hub Online",message:"Predictive intelligence engine synchronizing with wellhead BRAHAN-ALPHA-01.",recommendation:"Standby for telemetry synthesis and integrity analysis.",timestamp:(new Date).toISOString()}]),[g,v]=(0,t.useState)(!1),x=async e=>{v(!0);const t=await(async e=>{const t=(new Date).toISOString().split("T")[0],n="As Brahan Hub AI, analyze the maintenance history for Well BRAHAN-ALPHA-01. \n  Maintenance History: ".concat(JSON.stringify(e),"\n  Current Date: ").concat(t,"\n  Generate exactly 3 predictive alerts (critical, warning, info) with suggested maintenance dates. Output as JSON array of PredictiveAlert objects.");try{const e=ew.getGenerativeModel({model:"gemini-pro",generationConfig:{responseMimeType:"application/json"}}),t=(await e.generateContent(n)).response.text().match(/\[[\s\S]*\]/);return t?JSON.parse(t[0]):[]}catch(r){return console.error("Predictive alert failure:",r),[]}})(e);t&&t.length>0&&m(t),v(!1)},y=(0,t.useCallback)(async e=>{if(a[e])return void i(e);c(!0),i(e);const t=await tw(e);if(o(n=>l(l({},n),{},{[e]:t})),c(!1),e===nw.MAINTENANCE){var n;const e=null===(n=t.pieces.find(e=>"chart"===e.type))||void 0===n?void 0:n.data;e&&x(e)}},[a]),b=e=>{y(e),d(!1)};(0,t.useEffect)(()=>{y(nw.OVERVIEW)},[y]);return(0,M.jsxs)("div",{className:"flex flex-col h-screen bg-slate-950 text-slate-100 font-sans selection:bg-amber-500/30 selection:text-amber-200",children:[n&&(0,M.jsx)("div",{className:"absolute top-4 left-4 z-50",children:(0,M.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white rounded-lg transition-all border border-slate-700 shadow-xl",children:[(0,M.jsx)(U,{className:"w-4 h-4"}),(0,M.jsx)("span",{className:"text-sm font-medium",children:"Exit Integrity Hub"})]})}),(0,M.jsx)(cb,{alerts:f}),(0,M.jsxs)("div",{className:"flex flex-1 overflow-hidden relative",children:[g&&(0,M.jsxs)("div",{className:"absolute top-4 right-4 z-40 bg-slate-900/80 border border-amber-500/30 px-3 py-1.5 rounded-full flex items-center gap-3 backdrop-blur-md shadow-2xl",children:[(0,M.jsx)("span",{className:"flex h-2 w-2 rounded-full bg-amber-500 animate-ping"}),(0,M.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest text-amber-500",children:"AI Analysis In Progress"})]}),(0,M.jsxs)("div",{className:"md:hidden fixed top-[37px] left-0 right-0 bg-slate-900/95 backdrop-blur-md border-b border-slate-800 z-20 flex items-center justify-between p-4 shadow-xl",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)("div",{className:"w-8 h-8 bg-amber-500 rounded flex items-center justify-center font-bold text-slate-950 text-lg shadow-lg shadow-amber-500/20",children:"B"}),(0,M.jsx)("h1",{className:"text-lg font-black tracking-tighter uppercase",children:"Brahan Hub"})]}),(0,M.jsx)("button",{onClick:()=>d(!u),className:"p-2 rounded bg-slate-800 text-slate-300 active:scale-95 transition-transform",children:(0,M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})})]}),(0,M.jsxs)("div",{className:"fixed inset-0 z-30 transform ".concat(u?"translate-x-0":"-translate-x-full"," transition-transform duration-500 md:hidden"),children:[(0,M.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>d(!1)}),(0,M.jsx)("div",{className:"relative w-72 h-full shadow-2xl",children:(0,M.jsx)(te,{activeSection:r||nw.OVERVIEW,onSelectSection:b})})]}),(0,M.jsx)("div",{className:"hidden md:flex md:flex-shrink-0",children:(0,M.jsx)(te,{activeSection:r||nw.OVERVIEW,onSelectSection:b})}),(0,M.jsxs)("main",{className:"flex-1 flex flex-col overflow-hidden pt-16 md:pt-0 relative",children:[(0,M.jsx)("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"}),(0,M.jsx)(sb,{isLoading:s,isAnalyzing:g,content:r?a[r]:null,onTriggerIntelligence:x,hubConfig:h,onUpdateConfig:e=>{p(e)}})]})]})]})},iw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})})),aw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v18M20.25 3v18M3.75 3h16.5M3.75 21h16.5"})})),ow=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v18M15.75 3v18M8.25 3h7.5M8.25 21h7.5"})})),sw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l7.5-7.5 7.5 7.5m-15 3l7.5-7.5 7.5 7.5"})})),lw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m0 0l-3.75-3.75M12 19.5l3.75-3.75M4.5 12h15"})})),cw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 3.75H6.75A2.25 2.25 0 004.5 6v12a2.25 2.25 0 002.25 2.25h10.5A2.25 2.25 0 0019.5 18V6a2.25 2.25 0 00-2.25-2.25H15M9 3.75L12 6.75M9 3.75v6.75h6.75"})})),uw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 13.5l3 3m0 0l3-3m-3 3v-6m1.06-4.19l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})})),dw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})})),hw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m.75 12l3 3m0 0l3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})),pw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m-1.5 9l-3-3m0 0l3-3m-3 3h6m6 9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})),fw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0M2.985 19.644A8.25 8.25 0 0116.023 9.348"})})),mw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5h10.5a1.125 1.125 0 001.125-1.125v-8.625c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v8.625c0 .621.504 1.125 1.125 1.125h3.375z"})})),gw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})),vw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})),xw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})),yw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})),bw=e=>(0,M.jsx)("svg",l(l({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},e),{},{children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})})),ww=e=>{let{onSave:n,onLoad:r,onImport:i,onExport:a}=e;const o=(0,t.useRef)(null);return(0,M.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,M.jsxs)("button",{onClick:()=>{var e;null===(e=o.current)||void 0===e||e.click()},className:"flex items-center space-x-2 px-3 py-2 bg-gray-700/50 hover:bg-cyan-500/20 text-gray-300 hover:text-cyan-300 rounded-md transition-colors text-sm","aria-label":"Import configuration from file",title:"Import from File",children:[(0,M.jsx)(hw,{className:"w-4 h-4"}),(0,M.jsx)("span",{className:"hidden sm:inline",children:"Import"})]}),(0,M.jsx)("input",{type:"file",ref:o,onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const r=new FileReader;r.onload=e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.result;"string"===typeof n&&i(n)},r.readAsText(n),e.target.value=""},accept:".json",style:{display:"none"},"aria-hidden":"true"}),(0,M.jsxs)("button",{onClick:a,className:"flex items-center space-x-2 px-3 py-2 bg-gray-700/50 hover:bg-cyan-500/20 text-gray-300 hover:text-cyan-300 rounded-md transition-colors text-sm","aria-label":"Export configuration to file",title:"Export Field to File",children:[(0,M.jsx)(pw,{className:"w-4 h-4"}),(0,M.jsx)("span",{className:"hidden sm:inline",children:"Export"})]}),(0,M.jsx)("div",{className:"w-px h-6 bg-gray-600 mx-2"}),(0,M.jsx)("button",{onClick:n,className:"flex items-center space-x-2 px-3 py-2 bg-gray-700/50 hover:bg-cyan-500/20 text-gray-300 hover:text-cyan-300 rounded-md transition-colors text-sm","aria-label":"Save configuration to browser",title:"Save to Browser",children:(0,M.jsx)(cw,{className:"w-4 h-4"})}),(0,M.jsx)("button",{onClick:r,className:"flex items-center space-x-2 px-3 py-2 bg-gray-700/50 hover:bg-cyan-500/20 text-gray-300 hover:text-cyan-300 rounded-md transition-colors text-sm","aria-label":"Load configuration from browser",title:"Load from Browser",children:(0,M.jsx)(uw,{className:"w-4 h-4"})})]})},_w=e=>{let{onSave:t,onLoad:n,onImport:r,onExport:i}=e;return(0,M.jsxs)("header",{className:"flex items-center justify-between px-6 py-3 bg-gray-900/80 backdrop-blur-md border-b border-white/10 shadow-lg text-white",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-3 select-none",children:[(0,M.jsx)("div",{className:"p-1.5 bg-cyan-500/20 rounded-lg border border-cyan-500/30",children:(0,M.jsx)(iw,{className:"w-6 h-6 text-cyan-400"})}),(0,M.jsxs)("div",{children:[(0,M.jsxs)("h1",{className:"text-lg font-bold tracking-wider uppercase leading-none",children:["Wellbore",(0,M.jsx)("span",{className:"text-cyan-400",children:"Viz"})]}),(0,M.jsx)("span",{className:"text-[10px] text-gray-400 tracking-widest uppercase",children:"3D Field Visualizer"})]})]}),(0,M.jsx)("div",{className:"bg-black/20 rounded-lg p-1 backdrop-blur-sm border border-white/5",children:(0,M.jsx)(ww,{onSave:t,onLoad:n,onImport:r,onExport:i})})]})},Sw=["label","name","readOnly"],Ew=e=>{let{title:t,children:n}=e;return(0,M.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,M.jsx)("h3",{className:"text-sm font-semibold text-cyan-400 uppercase mb-3 tracking-wider",children:t}),n]})},Mw=e=>{let{label:t,name:n,readOnly:r}=e,i=c(e,Sw);return(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{htmlFor:n,className:"block text-xs text-gray-400 mb-1",children:t}),(0,M.jsx)("input",l(l({id:n,name:n,readOnly:r},i),{},{className:["w-full border rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500",r?"bg-gray-800 text-gray-400 cursor-not-allowed border-gray-700":"bg-gray-700/50 border-gray-600"].join(" ")}))]})},Tw=e=>{let{well:n,onSetDeviationSurvey:r,selectedComponent:i,onSelectComponent:a,onUpdateComponent:o,onRemoveComponent:s,onUpdateWell:c}=e;const[u,d]=(0,t.useState)(n.deviationSurvey.map(e=>"".concat(e.md,",").concat(e.inc,",").concat(e.azm)).join("\n")),[h,p]=(0,t.useState)({md:"",inc:"",azm:""}),f=(0,t.useRef)(null),m=(0,t.useRef)(null),[g]=(0,t.useState)(""),[v,x]=(0,t.useState)({key:"topDepth",direction:"asc"});(0,t.useEffect)(()=>{d(n.deviationSurvey.map(e=>"".concat(e.md,",").concat(e.inc,",").concat(e.azm)).join("\n"))},[n.deviationSurvey]);const y=(e,t)=>{const n=new FileReader;n.onload=e=>{var n;const r=null===(n=e.target)||void 0===n?void 0:n.result;"string"===typeof r&&t(r)},n.readAsText(e)},b=e=>{var t;if(!i||i.type!==X.TUBING)return;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&(y(n,e=>{const t=e.split("\n").map(e=>parseFloat(e.trim())).filter(e=>!isNaN(e)&&e>0),n=t.reduce((e,t)=>e+t,0),r=i.topDepth+n;o(i.id,{tally:e,bottomDepth:r})}),e.target.value="")},w=e=>{if(!i)return;const{name:t,value:n}=e.target;o(i.id,{[t]:parseFloat(n)||n})},_=e=>{if(!i||i.type!==X.TUBING)return;const t=e.target.value,n=t.split("\n").map(e=>parseFloat(e.trim())).filter(e=>!isNaN(e)&&e>0),r=n.reduce((e,t)=>e+t,0),a=i.topDepth+r;o(i.id,{tally:t,bottomDepth:a})};(0,t.useMemo)(()=>{let e=[...n.components];if(g){const t=g.toLowerCase();e=e.filter(e=>e.type.toLowerCase().includes(t)||e.id.toLowerCase().includes(t))}return e.sort((e,t)=>{let n=e[v.key],r=t[v.key];var i,a;"bottomDepth"===v.key&&(n=null!==(i=e.bottomDepth)&&void 0!==i?i:e.topDepth,r=null!==(a=t.bottomDepth)&&void 0!==a?a:t.topDepth);return n<r?"asc"===v.direction?-1:1:n>r?"asc"===v.direction?1:-1:0}),e},[n.components,g,v]);return(0,M.jsxs)("div",{className:"h-full flex flex-col",children:[(0,M.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,M.jsx)("h3",{className:"text-lg font-bold text-white tracking-wide",children:n.name}),(0,M.jsx)("p",{className:"text-xs font-semibold px-2 py-1 rounded-full inline-block mt-1 ".concat(n.type===q.SUBSEA?"bg-blue-500/30 text-blue-300":"bg-green-500/30 text-green-300"),children:n.type})]}),n.type===q.SUBSEA&&(0,M.jsxs)(Ew,{title:"Subsea Configuration",children:[(0,M.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Associated Structure"}),(0,M.jsxs)("select",{value:n.subseaStructure||"None",onChange:e=>null===c||void 0===c?void 0:c({subseaStructure:e.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,M.jsx)("option",{value:"None",children:"None"}),(0,M.jsx)("option",{value:"Template",children:"Template (Wireframe)"}),(0,M.jsx)("option",{value:"Manifold",children:"Manifold (Complex)"}),(0,M.jsx)("option",{value:"PLET",children:"PLET (Pipeline End)"})]})]}),(0,M.jsxs)(Ew,{title:"Deviation Survey",children:[(0,M.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),className:"w-full h-24 bg-gray-900/70 border border-gray-600 rounded-md p-2 text-xs font-mono focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"MD,INC,AZM"}),(0,M.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,M.jsx)("button",{onClick:()=>{const e=u.split("\n").map(e=>{const t=e.split(",").map(e=>e.trim()),n=parseFloat(t[0]),r=parseFloat(t[1]),i=parseFloat(t[2]);return isNaN(n)||isNaN(r)||isNaN(i)?null:{md:n,inc:r,azm:i}}).filter(e=>null!==e).sort((e,t)=>e.md-t.md);r(e)},className:"flex-grow py-2 bg-cyan-600 hover:bg-cyan-500 rounded-md text-sm font-semibold transition-colors",children:"Apply Changes"}),(0,M.jsx)("button",{onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},className:"p-2 bg-gray-700/50 hover:bg-cyan-500/20 text-gray-300 hover:text-cyan-300 rounded-md transition-colors",title:"Import CSV",children:(0,M.jsx)(dw,{className:"w-5 h-5"})})]}),(0,M.jsx)("input",{type:"file",ref:f,onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&(y(n,e=>d(e)),e.target.value="")},accept:".csv,.txt",style:{display:"none"}}),(0,M.jsxs)("div",{className:"mt-4 p-3 bg-gray-800/50 border border-gray-700/50 rounded-md",children:[(0,M.jsx)("span",{className:"text-xs font-semibold text-gray-400 uppercase block mb-2",children:"New Survey Point"}),(0,M.jsxs)("div",{className:"flex space-x-2",children:[(0,M.jsx)("input",{type:"number",placeholder:"MD",value:h.md,onChange:e=>p(t=>l(l({},t),{},{md:e.target.value})),className:"flex-1 bg-gray-900/70 border border-gray-600 rounded px-2 py-1.5 text-xs focus:ring-1 focus:ring-cyan-500"}),(0,M.jsx)("input",{type:"number",placeholder:"Inc",value:h.inc,onChange:e=>p(t=>l(l({},t),{},{inc:e.target.value})),className:"flex-1 bg-gray-900/70 border border-gray-600 rounded px-2 py-1.5 text-xs focus:ring-1 focus:ring-cyan-500"}),(0,M.jsx)("input",{type:"number",placeholder:"Azm",value:h.azm,onChange:e=>p(t=>l(l({},t),{},{azm:e.target.value})),className:"flex-1 bg-gray-900/70 border border-gray-600 rounded px-2 py-1.5 text-xs focus:ring-1 focus:ring-cyan-500"}),(0,M.jsx)("button",{onClick:()=>{const e=parseFloat(h.md),t=parseFloat(h.inc),i=parseFloat(h.azm);if(isNaN(e)||isNaN(t)||isNaN(i))return;const a={md:e,inc:t,azm:i,tvd:e},o=[...n.deviationSurvey,a].sort((e,t)=>e.md-t.md);r(o),p({md:"",inc:"",azm:""})},disabled:!h.md||!h.inc||!h.azm,className:"px-3 py-1 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-50 text-white rounded text-xs font-bold transition-colors",children:"ADD"})]})]}),(0,M.jsxs)("div",{className:"mt-4 border border-gray-700/50 rounded-md overflow-hidden bg-gray-800/30",children:[(0,M.jsxs)("div",{className:"px-3 py-2 bg-gray-800/50 border-b border-gray-700/50 flex justify-between items-center sticky top-0 z-10",children:[(0,M.jsx)("span",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Survey Point Table"}),(0,M.jsxs)("span",{className:"text-[10px] text-gray-500 font-mono",children:[n.deviationSurvey.length," pts"]})]}),(0,M.jsx)("div",{className:"max-h-56 overflow-y-auto scrollbar-thin",children:(0,M.jsxs)("table",{className:"w-full text-[11px] text-left border-collapse",children:[(0,M.jsx)("thead",{className:"bg-gray-900/80 text-gray-500 sticky top-0 backdrop-blur-md shadow-sm",children:(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{className:"px-3 py-2 font-medium border-r border-gray-700/50",children:"MD (ft)"}),(0,M.jsx)("th",{className:"px-3 py-2 font-medium border-r border-gray-700/50",children:"Inc (\xb0)"}),(0,M.jsx)("th",{className:"px-3 py-2 font-medium border-r border-gray-700/50",children:"Azm (\xb0)"}),(0,M.jsx)("th",{className:"px-2 py-2 text-center"})]})}),(0,M.jsxs)("tbody",{className:"divide-y divide-gray-700/30",children:[n.deviationSurvey.map((e,t)=>(0,M.jsxs)("tr",{className:"hover:bg-cyan-500/5 transition-colors group",children:[(0,M.jsx)("td",{className:"px-3 py-1.5 font-mono text-cyan-400 border-r border-gray-700/10",children:e.md.toFixed(1)}),(0,M.jsx)("td",{className:"px-3 py-1.5 font-mono text-gray-300 border-r border-gray-700/10",children:e.inc.toFixed(2)}),(0,M.jsx)("td",{className:"px-3 py-1.5 font-mono text-gray-300 border-r border-gray-700/10",children:e.azm.toFixed(2)}),(0,M.jsx)("td",{className:"px-2 py-1.5 text-center",children:(0,M.jsx)("button",{onClick:()=>(e=>{const t=n.deviationSurvey.filter((t,n)=>n!==e);r(t)})(t),className:"text-gray-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-all p-1",children:(0,M.jsx)(yw,{className:"w-3.5 h-3.5"})})})]},t)),0===n.deviationSurvey.length&&(0,M.jsx)("tr",{children:(0,M.jsx)("td",{colSpan:4,className:"px-3 py-8 text-center text-gray-600 italic",children:"No survey points defined."})})]})]})})]})]}),(0,M.jsx)("div",{className:"flex-grow p-4 overflow-y-auto",children:(()=>{if(!i)return(0,M.jsx)("div",{className:"text-center text-gray-500 p-4 italic",children:"Select a component to edit properties."});const e=i.type===X.CASING,t=(0,M.jsx)(Mw,{label:"Top Depth (MD)",name:"topDepth",type:"number",value:i.topDepth,onChange:w,readOnly:e});let n;switch(i.type){case X.CASING:{const e=i;n=(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Mw,{label:"Bottom Depth (MD)",name:"bottomDepth",type:"number",value:e.bottomDepth,onChange:w,readOnly:!0}),(0,M.jsx)(Mw,{label:"Size (in)",name:"size",type:"number",value:e.size,onChange:w,readOnly:!0}),(0,M.jsx)(Mw,{label:"Weight (lb/ft)",name:"weight",type:"number",value:e.weight,onChange:w,readOnly:!0}),(0,M.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,M.jsx)("label",{htmlFor:"notes",className:"block text-xs text-gray-400 mb-1",children:"Casing Notes"}),(0,M.jsx)("textarea",{id:"notes",name:"notes",value:e.notes||"",onChange:w,className:"w-full h-24 bg-gray-900/70 border border-gray-600 rounded-md p-2 text-xs font-mono focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Integrity issues, etc..."})]})]});break}case X.TUBING:{const e=i;n=(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Mw,{label:"Bottom Depth (MD)",name:"bottomDepth",type:"number",value:(e.bottomDepth||0).toFixed(2),onChange:w,readOnly:!!e.tally&&e.tally.trim().length>0}),(0,M.jsx)(Mw,{label:"Size (in)",name:"size",type:"number",value:e.size,onChange:w}),(0,M.jsx)(Mw,{label:"Weight (lb/ft)",name:"weight",type:"number",value:e.weight,onChange:w}),(0,M.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,M.jsx)("label",{htmlFor:"tally",className:"block text-xs text-gray-400",children:"Tubing Tally"}),(0,M.jsxs)("button",{onClick:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.click()},className:"flex items-center space-x-1 text-xs text-cyan-400 hover:text-cyan-300",children:[(0,M.jsx)(dw,{className:"w-3 h-3"}),(0,M.jsx)("span",{children:"Import"})]})]}),(0,M.jsx)("textarea",{id:"tally",name:"tally",value:e.tally||"",onChange:_,className:"w-full h-24 bg-gray-900/70 border border-gray-600 rounded-md p-2 text-xs font-mono focus:outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Lengths (one per line)"}),(0,M.jsx)("input",{type:"file",ref:m,onChange:b,accept:".txt",style:{display:"none"}})]})]});break}case X.PACKER:n=(0,M.jsx)(Mw,{label:"Packer Type",name:"packerType",type:"text",value:i.packerType,onChange:w});break;case X.PERFORATION:n=(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Mw,{label:"Bottom Depth (MD)",name:"bottomDepth",type:"number",value:i.bottomDepth,onChange:w}),(0,M.jsx)(Mw,{label:"Shots Per Foot (SPF)",name:"shotsPerFoot",type:"number",value:i.shotsPerFoot,onChange:w})]})}return(0,M.jsxs)("div",{className:"space-y-4",children:[(0,M.jsxs)("h4",{className:"font-bold text-lg text-white",children:[i.type," Editor"]}),t,n,(0,M.jsx)("button",{onClick:()=>s(i.id),className:"w-full text-center py-2 bg-red-600/50 hover:bg-red-600/80 rounded-md text-sm transition-colors mt-4",children:"Delete Component"})]})})()})]})};function Nw(e,t){let n,r;if(void 0===t)for(const i of e)null!=i&&(void 0===n?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)null!=(a=t(a,++i,e))&&(void 0===n?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}function Cw(){}function Aw(e){return null==e?Cw:function(){return this.querySelector(e)}}function jw(){return[]}function Pw(e){return null==e?jw:function(){return this.querySelectorAll(e)}}function Ow(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function kw(e){return function(){return this.matches(e)}}function Rw(e){return function(t){return t.matches(e)}}var Dw=Array.prototype.find;function Lw(){return this.firstElementChild}var Iw=Array.prototype.filter;function Uw(){return Array.from(this.children)}function Fw(e){return new Array(e.length)}function Bw(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function zw(e,t,n,r,i,a){for(var o,s=0,l=t.length,c=a.length;s<c;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new Bw(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function Hw(e,t,n,r,i,a,o){var s,l,c,u=new Map,d=t.length,h=a.length,p=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(p[s]=c=o.call(l,l.__data__,s,t)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<h;++s)c=o.call(e,a[s],s,a)+"",(l=u.get(c))?(r[s]=l,l.__data__=a[s],u.delete(c)):n[s]=new Bw(e,a[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(p[s])===l&&(i[s]=l)}function Vw(e){return e.__data__}function Ww(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function Gw(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Bw.prototype={constructor:Bw,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Xw="http://www.w3.org/1999/xhtml";const qw={svg:"http://www.w3.org/2000/svg",xhtml:Xw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yw(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),qw.hasOwnProperty(t)?{space:qw[t],local:e}:e}function Kw(e){return function(){this.removeAttribute(e)}}function Zw(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Jw(e,t){return function(){this.setAttribute(e,t)}}function $w(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Qw(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function e_(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function t_(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function n_(e){return function(){this.style.removeProperty(e)}}function r_(e,t,n){return function(){this.style.setProperty(e,t,n)}}function i_(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function a_(e,t){return e.style.getPropertyValue(t)||t_(e).getComputedStyle(e,null).getPropertyValue(t)}function o_(e){return function(){delete this[e]}}function s_(e,t){return function(){this[e]=t}}function l_(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function c_(e){return e.trim().split(/^|\s+/)}function u_(e){return e.classList||new d_(e)}function d_(e){this._node=e,this._names=c_(e.getAttribute("class")||"")}function h_(e,t){for(var n=u_(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function p_(e,t){for(var n=u_(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function f_(e){return function(){h_(this,e)}}function m_(e){return function(){p_(this,e)}}function g_(e,t){return function(){(t.apply(this,arguments)?h_:p_)(this,e)}}function v_(){this.textContent=""}function x_(e){return function(){this.textContent=e}}function y_(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function b_(){this.innerHTML=""}function w_(e){return function(){this.innerHTML=e}}function __(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function S_(){this.nextSibling&&this.parentNode.appendChild(this)}function E_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function M_(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Xw&&t.documentElement.namespaceURI===Xw?t.createElement(e):t.createElementNS(n,e)}}function T_(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function N_(e){var t=Yw(e);return(t.local?T_:M_)(t)}function C_(){return null}function A_(){var e=this.parentNode;e&&e.removeChild(this)}function j_(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function P_(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function O_(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function k_(e,t,n){return function(){var r,i=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function R_(e,t,n){var r=t_(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function D_(e,t){return function(){return R_(this,e,t)}}function L_(e,t){return function(){return R_(this,e,t.apply(this,arguments))}}d_.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var I_=[null];function U_(e,t){this._groups=e,this._parents=t}function F_(){return new U_([[document.documentElement]],I_)}U_.prototype=F_.prototype={constructor:U_,select:function(e){"function"!==typeof e&&(e=Aw(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=t[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=e.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new U_(r,this._parents)},selectAll:function(e){e="function"===typeof e?Ow(e):Pw(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,s=t[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(r.push(e.call(o,o.__data__,c,s)),i.push(o));return new U_(r,i)},selectChild:function(e){return this.select(null==e?Lw:function(e){return function(){return Dw.call(this.children,e)}}("function"===typeof e?e:Rw(e)))},selectChildren:function(e){return this.selectAll(null==e?Uw:function(e){return function(){return Iw.call(this.children,e)}}("function"===typeof e?e:Rw(e)))},filter:function(e){"function"!==typeof e&&(e=kw(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new U_(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Vw);var n,r=t?Hw:zw,i=this._parents,a=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),c=new Array(o),u=0;u<o;++u){var d=i[u],h=a[u],p=h.length,f=Ww(e.call(d,d&&d.__data__,u,i)),m=f.length,g=l[u]=new Array(m),v=s[u]=new Array(m);r(d,h,g,v,c[u]=new Array(p),f,t);for(var x,y,b=0,w=0;b<m;++b)if(x=g[b]){for(b>=w&&(w=b+1);!(y=v[w])&&++w<m;);x._next=y||null}}return(s=new U_(s,i))._enter=l,s._exit=c,s},enter:function(){return new U_(this._enter||this._groups.map(Fw),this._parents)},exit:function(){return new U_(this._exit||this._groups.map(Fw),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c,u=n[l],d=r[l],h=u.length,p=s[l]=new Array(h),f=0;f<h;++f)(c=u[f]||d[f])&&(p[f]=c);for(;l<i;++l)s[l]=n[l];return new U_(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Gw);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(t)}return new U_(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=Yw(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Zw:Kw:"function"===typeof t?n.local?e_:Qw:n.local?$w:Jw)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?n_:"function"===typeof t?i_:r_)(e,t,null==n?"":n)):a_(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?o_:"function"===typeof t?l_:s_)(e,t)):this.node()[e]},classed:function(e,t){var n=c_(e+"");if(arguments.length<2){for(var r=u_(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?g_:t?f_:m_)(n,t))},text:function(e){return arguments.length?this.each(null==e?v_:("function"===typeof e?y_:x_)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?b_:("function"===typeof e?__:w_)(e)):this.node().innerHTML},raise:function(){return this.each(S_)},lower:function(){return this.each(E_)},append:function(e){var t="function"===typeof e?e:N_(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"===typeof e?e:N_(e),r=null==t?C_:"function"===typeof t?t:Aw(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(A_)},clone:function(e){return this.select(e?P_:j_)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?k_:O_,r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?L_:D_)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};const B_=F_;var z_={value:()=>{}};function H_(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new V_(r)}function V_(e){this._=e}function W_(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function G_(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=z_,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}V_.prototype=H_.prototype={constructor:V_,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=a[o]).type)i[n]=G_(i[n],e.name,t);else if(null==t)for(n in i)i[n]=G_(i[n],e.name,null);return this}for(;++o<s;)if((n=(e=a[o]).type)&&(n=W_(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new V_(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};const X_=H_;var q_,Y_,K_=0,Z_=0,J_=0,$_=0,Q_=0,eS=0,tS="object"===typeof performance&&performance.now?performance:Date,nS="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function rS(){return Q_||(nS(iS),Q_=tS.now()+eS)}function iS(){Q_=0}function aS(){this._call=this._time=this._next=null}function oS(e,t,n){var r=new aS;return r.restart(e,t,n),r}function sS(){Q_=($_=tS.now())+eS,K_=Z_=0;try{!function(){rS(),++K_;for(var e,t=q_;t;)(e=Q_-t._time)>=0&&t._call.call(void 0,e),t=t._next;--K_}()}finally{K_=0,function(){var e,t,n=q_,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:q_=t);Y_=e,cS(r)}(),Q_=0}}function lS(){var e=tS.now(),t=e-$_;t>1e3&&(eS-=t,$_=e)}function cS(e){K_||(Z_&&(Z_=clearTimeout(Z_)),e-Q_>24?(e<1/0&&(Z_=setTimeout(sS,e-tS.now()-eS)),J_&&(J_=clearInterval(J_))):(J_||($_=tS.now(),J_=setInterval(lS,1e3)),K_=1,nS(sS)))}function uS(e,t,n){var r=new aS;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}aS.prototype=oS.prototype={constructor:aS,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?rS():+n)+(null==t?0:+t),this._next||Y_===this||(Y_?Y_._next=this:q_=this,Y_=this),this._call=e,this._time=n,cS()},stop:function(){this._call&&(this._call=null,this._time=1/0,cS())}};var dS=X_("start","end","cancel","interrupt"),hS=[];function pS(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var c,u,d,h;if(1!==n.state)return l();for(c in i)if((h=i[c]).name===n.name){if(3===h.state)return uS(o);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(uS(function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=oS(a,0,n.time)}(e,n,{name:t,index:r,group:i,on:dS,tween:hS,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function fS(e,t){var n=gS(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function mS(e,t){var n=gS(e,t);if(n.state>3)throw new Error("too late; already running");return n}function gS(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function vS(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}var xS,yS=180/Math.PI,bS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wS(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*yS,skewX:Math.atan(l)*yS,scaleX:o,scaleY:s}}function _S(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],l=[];return a=e(a),o=e(o),function(e,r,i,a,o,s){if(e!==i||r!==a){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:Ds(e,i)},{i:l-2,x:Ds(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Ds(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,s,l),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Ds(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,s,l),function(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Ds(e,n)},{i:s-2,x:Ds(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var SS=_S(function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bS:wS(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),ES=_S(function(e){return null==e?bS:(xS||(xS=document.createElementNS("http://www.w3.org/2000/svg","g")),xS.setAttribute("transform",e),(e=xS.transform.baseVal.consolidate())?wS((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):bS)},", ",")",")");function MS(e,t){var n,r;return function(){var i=mS(this,e),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function TS(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var a=mS(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function NS(e,t,n){var r=e._id;return e.each(function(){var e=mS(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return gS(e,r).value[t]}}function CS(e,t){var n;return("number"===typeof t?Ds:t instanceof us?Ps:(n=us(t))?(t=n,Ps):Fs)(e,t)}function AS(e){return function(){this.removeAttribute(e)}}function jS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function PS(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function OS(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function kS(e,t,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(e))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l));this.removeAttribute(e)}}function RS(e,t,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l));this.removeAttributeNS(e.space,e.local)}}function DS(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function LS(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function IS(e,t){return function(){fS(this,e).delay=+t.apply(this,arguments)}}function US(e,t){return t=+t,function(){fS(this,e).delay=t}}function FS(e,t){return function(){mS(this,e).duration=+t.apply(this,arguments)}}function BS(e,t){return t=+t,function(){mS(this,e).duration=t}}var zS=B_.prototype.constructor;function HS(e){return function(){this.style.removeProperty(e)}}var VS=0;function WS(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function GS(){return++VS}var XS=B_.prototype;WS.prototype=function(e){return B_().transition(e)}.prototype={constructor:WS,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Aw(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,c=r[o],u=c.length,d=a[o]=new Array(u),h=0;h<u;++h)(s=c[h])&&(l=e.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,pS(d[h],t,n,h,d,gS(s,n)));return new WS(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Pw(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,p=e.call(l,l.__data__,d,c),f=gS(l,n),m=0,g=p.length;m<g;++m)(h=p[m])&&pS(h,t,n,m,p,f);a.push(p),o.push(l)}return new WS(a,o,t,n)},selectChild:XS.selectChild,selectChildren:XS.selectChildren,filter:function(e){"function"!==typeof e&&(e=kw(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new WS(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,c=t[s],u=n[s],d=c.length,h=o[s]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;s<r;++s)o[s]=t[s];return new WS(o,this._parents,this._name,this._id)},selection:function(){return new zS(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=GS(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=gS(o,t);pS(o,e,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new WS(r,this._parents,e,n)},call:XS.call,nodes:XS.nodes,node:XS.node,size:XS.size,empty:XS.empty,each:XS.each,on:function(e,t){var n=this._id;return arguments.length<2?gS(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?fS:mS;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}(n,e,t))},attr:function(e,t){var n=Yw(e),r="transform"===n?ES:CS;return this.attrTween(e,"function"===typeof t?(n.local?RS:kS)(n,r,NS(this,"attr."+e,t)):null==t?(n.local?jS:AS)(n):(n.local?OS:PS)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=Yw(e);return this.tween(n,(r.local?DS:LS)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?SS:CS;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=a_(this,e),o=(this.style.removeProperty(e),a_(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,HS(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var o=a_(this,e),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=a_(this,e)),o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s))}}(e,r,NS(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,s="end."+o;return function(){var l=mS(this,e),c=l.on,u=null==l.value[o]?a||(a=HS(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var o=a_(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,a,n)),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(NS(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=gS(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?MS:TS)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?IS:US)(t,e)):gS(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?FS:BS)(t,e)):gS(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){mS(this,e).ease=t}}(t,e)):gS(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;mS(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){0===--i&&a()}};n.each(function(){var n=mS(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===i&&a()})},[Symbol.iterator]:XS[Symbol.iterator]};var qS={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function YS(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error("transition ".concat(t," not found"));return n}B_.prototype.interrupt=function(e){return this.each(function(){vS(this,e)})},B_.prototype.transition=function(e){var t,n;e instanceof WS?(t=e._id,e=e._name):(t=GS(),(n=qS).time=rS(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)(o=s[c])&&pS(o,e,t,c,s,n||YS(o,t));return new WS(r,this._parents,e,t)};const{abs:KS,max:ZS,min:JS}=Math;function $S(e){return[+e[0],+e[1]]}function QS(e){return[$S(e[0]),$S(e[1])]}["w","e"].map(eE),["n","s"].map(eE),["n","w","e","s","nw","ne","sw","se"].map(eE);function eE(e){return{type:e}}function tE(e){return"string"===typeof e?new U_([[document.querySelector(e)]],[document.documentElement]):new U_([[e]],I_)}function nE(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const rE={passive:!1},iE={capture:!0,passive:!1};function aE(e){e.stopImmediatePropagation()}function oE(e){e.preventDefault(),e.stopImmediatePropagation()}function sE(e){var t=e.document.documentElement,n=tE(e).on("dragstart.drag",oE,iE);"onselectstart"in t?n.on("selectstart.drag",oE,iE):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function lE(e,t){var n=e.document.documentElement,r=tE(e).on("dragstart.drag",null);t&&(r.on("click.drag",oE,iE),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const cE=e=>()=>e;function uE(e,t){let{sourceEvent:n,subject:r,target:i,identifier:a,active:o,x:s,y:l,dx:c,dy:u,dispatch:d}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}function dE(e){return!e.ctrlKey&&!e.button}function hE(){return this.parentNode}function pE(e,t){return null==t?{x:e.x,y:e.y}:t}function fE(){return navigator.maxTouchPoints||"ontouchstart"in this}uE.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function mE(e){return((e=Math.exp(e))+1/e)/2}const gE=function e(t,n,r){function i(e,i){var a,o,s=e[0],l=e[1],c=e[2],u=i[0],d=i[1],h=i[2],p=u-s,f=d-l,m=p*p+f*f;if(m<1e-12)o=Math.log(h/c)/t,a=function(e){return[s+e*p,l+e*f,c*Math.exp(t*e*o)]};else{var g=Math.sqrt(m),v=(h*h-c*c+r*m)/(2*c*n*g),x=(h*h-c*c-r*m)/(2*h*n*g),y=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(x*x+1)-x);o=(b-y)/t,a=function(e){var r,i=e*o,a=mE(y),u=c/(n*g)*(a*(r=t*i+y,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(y));return[s+u*p,l+u*f,c*a/mE(t*i+y)]}}return a.duration=1e3*o*t/Math.SQRT2,a}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4),vE=e=>()=>e;function xE(e,t){let{sourceEvent:n,target:r,transform:i,dispatch:a}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function yE(e,t,n){this.k=e,this.x=t,this.y=n}yE.prototype={constructor:yE,scale:function(e){return 1===e?this:new yE(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new yE(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bE=new yE(1,0,0);function wE(e){e.stopImmediatePropagation()}function _E(e){e.preventDefault(),e.stopImmediatePropagation()}function SE(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function EE(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function ME(){return this.__zoom||bE}function TE(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function NE(){return navigator.maxTouchPoints||"ontouchstart"in this}function CE(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}yE.prototype;const AE={[X.CASING]:{color:"#94a3b8",highlight:"#cbd5e1",shadow:"#475569",width:24},[X.TUBING]:{color:"#10b981",highlight:"#6ee7b7",shadow:"#047857",width:10},[X.PACKER]:{color:"#f59e0b",highlight:"#fcd34d",shadow:"#b45309",width:22},[X.PERFORATION]:{color:"#ef4444",highlight:"#fca5a5",shadow:"#7f1d1d",width:14}},jE=e=>{let{wells:n,wellPaths:r,selectedWellId:i,selectedComponentId:a,onSelectComponent:o}=e;const s=(0,t.useRef)(null),c=(0,t.useRef)(null),u=(0,t.useRef)(null),d=(0,t.useRef)(!1),[h,p]=(0,t.useState)({visible:!1,content:"",x:0,y:0}),[f,m]=(0,t.useState)(1),[g,v]=(0,t.useState)(!0),x=(0,t.useRef)({x:-Math.PI/4,y:Math.PI/4}),y=(0,t.useRef)({x:0,y:0}),b=(0,t.useRef)(null),w=n.find(e=>e.id===i);return(0,t.useEffect)(()=>{if(n&&n.length>0&&s.current){var e,t,h,f;const v=tE(s.current),{width:_,height:S}=s.current.getBoundingClientRect(),E=[];n.forEach(e=>{(r.get(e.id)||[]).forEach(t=>{E.push(l(l({},t),{},{x:t.x+(e.surfaceX||0),y:t.y+(e.surfaceY||0)}))}),E.push({x:e.surfaceX||0,y:e.surfaceY||0,z:0,md:0})});const M=Ul(E,e=>e.z)||2e3,T=Nw(E,e=>e.x),N=Nw(E,e=>e.y),C=[null!==(e=T[0])&&void 0!==e?e:0,null!==(t=T[1])&&void 0!==t?t:0],A=[null!==(h=N[0])&&void 0!==h?h:0,null!==(f=N[1])&&void 0!==f?f:0],j=C[1]-C[0]||1,P=A[1]-A[0]||1,O=M,k=Math.max(j,P,O,2e3),R=Math.min(_,S)/k*.8,D=e=>{let{x:t,y:n,z:r}=e;t-=C[0]+j/2,n-=A[0]+P/2,r-=O/2;const i=Math.sin(x.current.x),a=Math.cos(x.current.x),o=Math.sin(x.current.y);return[(t*Math.cos(x.current.y)+(n*i+r*a)*o)*R,(n*a-r*i)*R]},L=(e,t)=>{if(!t||t.length<1)return null;if(e<=t[0].md)return t[0];if(e>=t[t.length-1].md)return t[t.length-1];for(let n=1;n<t.length;n++){const r=t[n-1],i=t[n];if(e>=r.md&&e<=i.md){const t=i.md-r.md===0?0:(e-r.md)/(i.md-r.md);return{x:r.x+(i.x-r.x)*t,y:r.y+(i.y-r.y)*t,z:r.z+(i.z-r.z)*t,md:e}}}return null},I=(e,t,n)=>{const r=[],i=L(e,n);i&&r.push(i);for(const o of n)o.md>e&&o.md<t&&r.push(o);const a=L(t,n);return a&&r.push(a),r},U=gv().x(e=>D(e)[0]).y(e=>D(e)[1]);v.selectAll("*").remove();const F=v.append("defs"),B=F.append("linearGradient").attr("id","pathGradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");B.append("stop").attr("offset","0%").attr("stop-color","#2563eb"),B.append("stop").attr("offset","100%").attr("stop-color","#4ade80");const z=F.append("filter").attr("id","glow");z.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur"),z.append("feMerge").selectAll("feMergeNode").data(["coloredBlur","SourceGraphic"]).enter().append("feMergeNode").attr("in",e=>e);const H=v.append("g"),V=(H.append("g").attr("class","seabed-group"),H.append("g").attr("class","ruler-bg-group")),W=H.append("g").attr("class","ruler-group"),G=(H.append("g").attr("class","surface-layer"),H.append("g").attr("class","wells-layer")),Y=H.append("g").attr("class","structures-layer"),K=(H.append("g").attr("class","markers-layer"),function(e,t,n,r){t.length<2||(e.append("path").datum(t).attr("d",U).attr("fill","none").attr("stroke",r.shadow).attr("stroke-width",n).attr("stroke-linejoin","round"),e.append("path").datum(t).attr("d",U).attr("fill","none").attr("stroke",r.main).attr("stroke-width",.85*n).attr("stroke-linejoin","round"),e.append("path").datum(t).attr("d",U).attr("fill","none").attr("stroke",r.highlight).attr("stroke-width",.2*n).attr("stroke-opacity",.5).attr("stroke-linecap","butt").attr("transform","translate(-0.5, -0.5)"))}),Z=(e,t,n)=>{const r=t.type===q.SUBSEA,i=r?"#facc15":"#ef4444",a=r?"#ca8a04":"#991b1b",o=e=>l(l({},e),{},{x:e.x+(t.surfaceX||0),y:e.y+(t.surfaceY||0),z:e.z}),s=[{x:0,y:0,z:n,md:0},{x:0,y:0,z:n-25,md:0}].map(o);K(e,s,12,{main:i,shadow:a,highlight:"#fff"});const c=n-15,u=[{x:0,y:0,z:c,md:0},{x:12,y:0,z:c,md:0}].map(o);K(e,u,12*.6,{main:i,shadow:a,highlight:"#fff"})},J=()=>{V.selectAll("*").remove(),W.selectAll("*").remove();const e=.12*Math.max(j,P),t=C[0]-e,c=A[0]-e;if(w){const e=r.get(w.id);if(e){const n=w.components.filter(e=>e.type===X.CASING);n.forEach((n,r)=>{const i=L(n.topDepth,e),a=L(n.bottomDepth,e);if(i&&a){const e=[{x:t+5,y:c,z:i.z,md:0},{x:t+5,y:c,z:a.z,md:0}],o="grad-ruler-".concat(n.id),s=F.append("linearGradient").attr("id",o).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");s.append("stop").attr("offset","0%").attr("stop-color","transparent"),s.append("stop").attr("offset","100%").attr("stop-color",AE[X.CASING].color).attr("stop-opacity",.1+.05*r),V.append("path").datum(e).attr("d",U).attr("stroke","url(#".concat(o,")")).attr("stroke-width",40).attr("fill","none")}})}}for(let n=0;n<=M;n+=500){const e=D({x:t,y:c,z:n,md:0});W.append("line").attr("x1",e[0]-6).attr("y1",e[1]).attr("x2",e[0]).attr("y2",e[1]).attr("stroke","#9ca3af").attr("stroke-width",1),W.append("text").attr("x",e[0]-10).attr("y",e[1]).attr("text-anchor","end").attr("dominant-baseline","middle").attr("fill","#6b7280").attr("font-size","9px").text(n)}G.selectAll("*").remove(),n.forEach(e=>{const t=G.append("g").attr("opacity",e.id===i?1:.4),n=r.get(e.id)||[],c=t=>l(l({},t),{},{x:t.x+(e.surfaceX||0),y:t.y+(e.surfaceY||0),z:t.z}),u=n.map(c);t.append("path").datum(u).attr("d",U).attr("fill","none").attr("stroke",e.id===i?"url(#pathGradient)":"#475569").attr("stroke-width",e.id===i?2.5:1).style("filter",e.id===i?"url(#glow)":"none");const d=e.type===q.SUBSEA?(e.datumElevation||25)+e.waterDepth:0;if(Z(t.append("g"),e,d),e.components.forEach(r=>{const s=t.append("g").style("cursor","pointer").on("click",()=>o(r.id)),l=AE[r.type],u=r.id===a&&e.id===i?1.3*l.width:l.width;if("bottomDepth"in r){const e=I(r.topDepth,r.bottomDepth,n).map(c);e.length>1&&K(s,e,u,{main:l.color,shadow:l.shadow,highlight:l.highlight})}else if(r.type===X.PACKER){const e=r.topDepth,t=I(e-8,e+8,n).map(c);t.length>1&&K(s,t,1.1*u,{main:l.color,shadow:l.shadow,highlight:l.highlight})}}),g&&e.type===q.SUBSEA){const t=e;if(t.subseaStructure&&"None"!==t.subseaStructure){const e=(t.datumElevation||0)+t.waterDepth,n=t.surfaceX,r=t.surfaceY,i=Y.append("g").attr("class","struct");if("Template"===t.subseaStructure){const t=18;[[{x:n-t,y:r-t,z:e,md:0},{x:n+t,y:r-t,z:e,md:0},{x:n+t,y:r+t,z:e,md:0},{x:n-t,y:r+t,z:e,md:0},{x:n-t,y:r-t,z:e,md:0}],[{x:n-t,y:r-t,z:e-8,md:0},{x:n+t,y:r-t,z:e-8,md:0},{x:n+t,y:r+t,z:e-8,md:0},{x:n-t,y:r+t,z:e-8,md:0},{x:n-t,y:r-t,z:e-8,md:0}]].forEach(e=>i.append("path").datum(e).attr("d",U).attr("fill","none").attr("stroke","#fbbf24").attr("stroke-width",2)),[[0,0],[0,1],[1,1],[1,0]].forEach(a=>{const o=[{x:n+(a[0]?t:-t),y:r+(a[1]?t:-t),z:e,md:0},{x:n+(a[0]?t:-t),y:r+(a[1]?t:-t),z:e-8,md:0}];i.append("path").datum(o).attr("d",U).attr("stroke","#fbbf24").attr("stroke-width",2)})}else if("Manifold"===t.subseaStructure)for(let t=0;t<4;t++){K(i,[{x:n-12+8*t,y:r-10,z:e-4,md:0},{x:n-12+8*t,y:r+10,z:e-4,md:0}],6,{main:"#475569",shadow:"#0f172a",highlight:"#94a3b8"})}i.style("cursor","help").on("mousemove",e=>{var n;const[r,i]=nE(e,null===(n=s.current)||void 0===n?void 0:n.parentElement);p({visible:!0,content:'<div class="font-bold text-yellow-500">'.concat(t.subseaStructure,'</div><div class="text-[10px] text-gray-400">Assoc. with ').concat(t.name,"</div>"),x:r,y:i})}).on("mouseout",()=>p({visible:!1,content:"",x:0,y:0}))}}})},$=()=>{Math.abs(y.current.x)<1e-4&&Math.abs(y.current.y)<1e-4||(y.current.x*=.95,y.current.y*=.95,x.current.x+=y.current.x,x.current.y+=y.current.y,x.current.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,x.current.x)),J(),b.current=requestAnimationFrame($))},Q=function(){var e,t,n,r,i=dE,a=hE,o=pE,s=fE,l={},c=X_("start","drag","end"),u=0,d=0;function h(e){e.on("mousedown.drag",p).filter(s).on("touchstart.drag",g).on("touchmove.drag",v,rE).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(o,s){if(!r&&i.call(this,o,s)){var l=y(this,a.call(this,o,s),o,s,"mouse");l&&(tE(o.view).on("mousemove.drag",f,iE).on("mouseup.drag",m,iE),sE(o.view),aE(o),n=!1,e=o.clientX,t=o.clientY,l("start",o))}}function f(r){if(oE(r),!n){var i=r.clientX-e,a=r.clientY-t;n=i*i+a*a>d}l.mouse("drag",r)}function m(e){tE(e.view).on("mousemove.drag mouseup.drag",null),lE(e.view,n),oE(e),l.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,r,o=e.changedTouches,s=a.call(this,e,t),l=o.length;for(n=0;n<l;++n)(r=y(this,s,e,t,o[n].identifier,o[n]))&&(aE(e),r("start",e,o[n]))}}function v(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(oE(e),n("drag",e,r[t]))}function x(e){var t,n,i=e.changedTouches,a=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<a;++t)(n=l[i[t].identifier])&&(aE(e),n("end",e,i[t]))}function y(e,t,n,r,i,a){var s,d,p,f=c.copy(),m=nE(a||n,t);if(null!=(p=o.call(e,new uE("beforestart",{sourceEvent:n,target:h,identifier:i,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:f}),r)))return s=p.x-m[0]||0,d=p.y-m[1]||0,function n(a,o,c){var g,v=m;switch(a){case"start":l[i]=n,g=u++;break;case"end":delete l[i],--u;case"drag":m=nE(c||o,t),g=u}f.call(a,e,new uE(a,{sourceEvent:o,subject:p,target:h,identifier:i,active:g,x:m[0]+s,y:m[1]+d,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:f}),r)}}return h.filter=function(e){return arguments.length?(i="function"===typeof e?e:cE(!!e),h):i},h.container=function(e){return arguments.length?(a="function"===typeof e?e:cE(e),h):a},h.subject=function(e){return arguments.length?(o="function"===typeof e?e:cE(e),h):o},h.touchable=function(e){return arguments.length?(s="function"===typeof e?e:cE(!!e),h):s},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}().on("drag",e=>{x.current.y+=.01*e.dx,x.current.x-=.01*e.dy,x.current.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,x.current.x)),y.current={x:.01*-e.dy,y:.01*e.dx},J()}).on("end",()=>$()),ee=function(){var e,t,n,r=SE,i=EE,a=CE,o=TE,s=NE,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=gE,h=X_("start","zoom","end"),p=0,f=10;function m(e){e.property("__zoom",ME).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",E).filter(s).on("touchstart.zoom",M).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new yE(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new yE(e.k,r,i)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function y(e,t,n,r){e.on("start.zoom",function(){b(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,a=arguments,o=b(e,a).event(r),s=i.apply(e,a),l=null==n?x(s):"function"===typeof n?n.apply(e,a):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=e.__zoom,h="function"===typeof t?t.apply(e,a):t,p=d(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=p(e),n=c/t[2];e=new yE(n,l[0]-t[0]*n,l[1]-t[1]*n)}o.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function _(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(r.apply(this,arguments)){var s=b(this,n).event(e),u=this.__zoom,d=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,o.apply(this,arguments)))),h=nE(e);if(s.wheel)s.mouse[0][0]===h[0]&&s.mouse[0][1]===h[1]||(s.mouse[1]=u.invert(s.mouse[0]=h)),clearTimeout(s.wheel);else{if(u.k===d)return;s.mouse=[h,u.invert(h)],vS(this),s.start()}_E(e),s.wheel=setTimeout(function(){s.wheel=null,s.end()},150),s.zoom("mouse",a(v(g(u,d),s.mouse[0],s.mouse[1]),s.extent,c))}}function S(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];if(!n&&r.apply(this,arguments)){var s=e.currentTarget,l=b(this,i,!0).event(e),u=tE(e.view).on("mousemove.zoom",function(e){if(_E(e),!l.moved){var t=e.clientX-h,n=e.clientY-f;l.moved=t*t+n*n>p}l.event(e).zoom("mouse",a(v(l.that.__zoom,l.mouse[0]=nE(e,s),l.mouse[1]),l.extent,c))},!0).on("mouseup.zoom",function(e){u.on("mousemove.zoom mouseup.zoom",null),lE(e.view,l.moved),_E(e),l.event(e).end()},!0),d=nE(e,s),h=e.clientX,f=e.clientY;sE(e.view),wE(e),l.mouse=[d,this.__zoom.invert(d)],vS(this),l.start()}}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(r.apply(this,arguments)){var s=this.__zoom,l=nE(e.changedTouches?e.changedTouches[0]:e,this),d=s.invert(l),h=s.k*(e.shiftKey?.5:2),p=a(v(g(s,h),l,d),i.apply(this,n),c);_E(e),u>0?tE(this).transition().duration(u).call(y,p,l,e):tE(this).call(m.transform,p,l,e)}}function M(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if(r.apply(this,arguments)){var s,l,c,u,d=n.touches,h=d.length,p=b(this,a,n.changedTouches.length===h).event(n);for(wE(n),l=0;l<h;++l)u=[u=nE(c=d[l],this),this.__zoom.invert(u),c.identifier],p.touch0?p.touch1||p.touch0[2]===u[2]||(p.touch1=u,p.taps=0):(p.touch0=u,s=!0,p.taps=1+!!e);e&&(e=clearTimeout(e)),s&&(p.taps<2&&(t=u[0],e=setTimeout(function(){e=null},500)),vS(this),p.start())}}function T(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s,l,u=b(this,n).event(e),d=e.changedTouches,h=d.length;for(_E(e),i=0;i<h;++i)s=nE(o=d[i],this),u.touch0&&u.touch0[2]===o.identifier?u.touch0[0]=s:u.touch1&&u.touch1[2]===o.identifier&&(u.touch1[0]=s);if(o=u.that.__zoom,u.touch1){var p=u.touch0[0],f=u.touch0[1],m=u.touch1[0],x=u.touch1[1],y=(y=m[0]-p[0])*y+(y=m[1]-p[1])*y,w=(w=x[0]-f[0])*w+(w=x[1]-f[1])*w;o=g(o,Math.sqrt(y/w)),s=[(p[0]+m[0])/2,(p[1]+m[1])/2],l=[(f[0]+x[0])/2,(f[1]+x[1])/2]}else{if(!u.touch0)return;s=u.touch0[0],l=u.touch0[1]}u.zoom("touch",a(v(o,s,l),u.extent,c))}}function N(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(this.__zooming){var o,s,l=b(this,i).event(e),c=e.changedTouches,u=c.length;for(wE(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),o=0;o<u;++o)s=c[o],l.touch0&&l.touch0[2]===s.identifier?delete l.touch0:l.touch1&&l.touch1[2]===s.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(s=nE(s,this),Math.hypot(t[0]-s[0],t[1]-s[1])<f)){var d=tE(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",ME),e!==i?y(e,t,n,r):i.interrupt().each(function(){b(this,arguments).event(r).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=i.apply(this,arguments),r=this.__zoom,o=null==n?x(e):"function"===typeof n?n.apply(this,arguments):n,s=r.invert(o),l="function"===typeof t?t.apply(this,arguments):t;return a(v(g(r,l),o,s),e,c)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return a(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)},null,r)},m.translateTo=function(e,t,n,r,o){m.transform(e,function(){var e=i.apply(this,arguments),o=this.__zoom,s=null==r?x(e):"function"===typeof r?r.apply(this,arguments):r;return a(bE.translate(s[0],s[1]).scale(o.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,c)},r,o)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=tE(this.that).datum();h.call(e,this.that,new xE(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:h}),t)}},m.wheelDelta=function(e){return arguments.length?(o="function"===typeof e?e:vE(+e),m):o},m.filter=function(e){return arguments.length?(r="function"===typeof e?e:vE(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"===typeof e?e:vE(!!e),m):s},m.extent=function(e){return arguments.length?(i="function"===typeof e?e:vE([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):i},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(a=e,m):a},m.duration=function(e){return arguments.length?(u=+e,m):u},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,m):Math.sqrt(p)},m.tapDistance=function(e){return arguments.length?(f=+e,m):f},m}().scaleExtent([.1,5]).on("zoom",e=>{H.attr("transform",e.transform),m(e.transform.k)});return u.current=ee,v.call(Q).call(ee),d.current||(v.call(ee.transform,bE.translate(_/2,S/2)),d.current=!0),tE(c.current).on("click",()=>{v.transition().duration(750).call(ee.transform,bE.translate(_/2,S/2).scale(1)),x.current={x:-Math.PI/4,y:Math.PI/4},J()}),J(),()=>{b.current&&cancelAnimationFrame(b.current)}}},[n,r,i,a,o,g,w]),(0,M.jsxs)("div",{className:"w-full h-full flex relative bg-gray-950",children:[(0,M.jsx)("svg",{ref:s,className:"w-full h-full outline-none block cursor-move",style:{touchAction:"none"}}),(0,M.jsxs)("div",{className:"absolute top-4 right-4 flex flex-col space-y-2",children:[(0,M.jsx)("button",{ref:c,className:"p-2.5 bg-gray-900/80 hover:bg-cyan-500/20 rounded-xl transition-all text-gray-300 hover:text-cyan-300 border border-white/5 shadow-2xl backdrop-blur-md",title:"Reset View",children:(0,M.jsx)(fw,{className:"w-5 h-5"})}),(0,M.jsx)("button",{onClick:()=>v(e=>!e),className:"p-2.5 rounded-xl transition-all border shadow-2xl backdrop-blur-md ".concat(g?"bg-cyan-500/30 text-cyan-300 border-cyan-500/30":"bg-gray-900/80 text-gray-400 border-white/5 hover:text-cyan-300"),title:"Subsea Structures",children:(0,M.jsx)(bw,{className:"w-5 h-5"})})]}),(0,M.jsxs)("div",{className:"absolute bottom-6 right-6 bg-gray-900/60 backdrop-blur-xl border border-white/5 rounded-2xl p-5 shadow-[0_0_50px_rgba(0,0,0,0.5)] text-xs space-y-4 pointer-events-none ring-1 ring-white/10",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h4",{className:"text-gray-500 font-bold uppercase tracking-widest mb-3 text-[10px]",children:"Visual Reference"}),(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,M.jsx)("span",{className:"w-2.5 h-2.5 rounded-full bg-cyan-500 shadow-[0_0_8px_rgba(34,211,238,0.5)]"}),(0,M.jsx)("span",{className:"text-gray-400",children:"Target Well"})]}),(0,M.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,M.jsx)("span",{className:"w-2.5 h-2.5 bg-slate-400 rounded-sm"}),(0,M.jsx)("span",{className:"text-gray-400",children:"Casing"})]}),(0,M.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,M.jsx)("span",{className:"w-2.5 h-2.5 bg-emerald-500 rounded-sm"}),(0,M.jsx)("span",{className:"text-gray-400",children:"Tubing"})]}),(0,M.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,M.jsx)("span",{className:"w-2.5 h-2.5 bg-amber-500 rounded-sm"}),(0,M.jsx)("span",{className:"text-gray-400",children:"Packer"})]})]})]}),(0,M.jsxs)("div",{className:"pt-3 border-t border-white/5 flex items-center justify-between text-[10px]",children:[(0,M.jsx)("span",{className:"text-gray-500 font-bold uppercase tracking-widest",children:"Viewport Scale"}),(0,M.jsxs)("span",{className:"font-mono text-cyan-400 bg-cyan-400/10 px-1.5 py-0.5 rounded",children:[(100*f).toFixed(0),"%"]})]})]}),h.visible&&(0,M.jsx)("div",{className:"absolute p-3 bg-gray-900/95 border border-white/10 rounded-xl shadow-2xl pointer-events-none z-50 text-white transform -translate-x-1/2 -translate-y-full mt-[-15px] animate-in fade-in zoom-in duration-200",style:{left:"".concat(h.x,"px"),top:"".concat(h.y,"px")},dangerouslySetInnerHTML:{__html:h.content}})]})},PE=e=>{let{icon:t,label:n,onClick:r,disabled:i}=e;return(0,M.jsxs)("button",{onClick:r,disabled:i,className:"flex flex-col items-center justify-center p-3 space-y-2 text-gray-400 bg-gray-800/50 rounded-lg hover:bg-cyan-400/10 hover:text-cyan-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-gray-800/50 disabled:hover:text-gray-400",children:[t,(0,M.jsx)("span",{className:"text-xs font-medium",children:n})]})},OE=e=>{let{onAddComponent:t,disabled:n}=e;const r=[{label:"Casing",icon:(0,M.jsx)(aw,{className:"w-8 h-8"}),type:"Casing"},{label:"Tubing",icon:(0,M.jsx)(ow,{className:"w-8 h-8"}),type:"Tubing"},{label:"Packer",icon:(0,M.jsx)(sw,{className:"w-8 h-8"}),type:"Packer"},{label:"Perfs",icon:(0,M.jsx)(lw,{className:"w-8 h-8"}),type:"Perforation"}];return(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-sm font-semibold text-center text-gray-500 mb-4 uppercase",children:"Toolbox"}),(0,M.jsx)("div",{className:"grid grid-cols-1 gap-2",children:r.map(e=>(0,M.jsx)(PE,{label:e.label,icon:e.icon,onClick:()=>t(e.type),disabled:n},e.label))})]})};let kE=function(e){return e.CASING="Casing",e.TUBING="Tubing",e.PACKER="Packer",e.PERFORATION="Perforation",e}({}),RE=function(e){return e.PLATFORM="Platform",e.SUBSEA="Subsea",e}({});const DE=(e,t,n,r)=>({id:"casing-".concat(Math.random().toString(36).substr(2,9)),type:kE.CASING,topDepth:e,bottomDepth:t,size:n,weight:0,notes:r}),LE=[{id:"11",name:"Well_11",type:RE.PLATFORM,surfaceX:0,surfaceY:0,datumElevation:25,deviationSurvey:[{md:0,inc:0,azm:0,tvd:0},{md:500,inc:1.5,azm:45,tvd:500},{md:1e3,inc:3.5,azm:45,tvd:998},{md:2e3,inc:15,azm:45,tvd:1931},{md:3500,inc:45,azm:45,tvd:2475}],components:[DE(0,500,20,"Surface Casing"),DE(0,2500,13.375,"Intermediate"),DE(0,3500,9.625,"Production")]},{id:"55",name:"Satellite_55",type:RE.SUBSEA,waterDepth:450,surfaceX:600,surfaceY:-600,datumElevation:25,subseaStructure:"Template",deviationSurvey:[{md:0,inc:0,azm:180,tvd:0},{md:1e3,inc:20,azm:180,tvd:940},{md:2500,inc:60,azm:180,tvd:1250},{md:4e3,inc:90,azm:180,tvd:1250}],components:[DE(475,1200,20,"Surface"),DE(475,4e3,13.375,"Intermediate")]}],IE=()=>{const[e,n]=(0,t.useState)((()=>{try{const e=localStorage.getItem("wellboreConfig");if(e){const t=JSON.parse(e);if(t&&Array.isArray(t.wells))return{wells:t.wells}}}catch(e){}return{wells:LE}})().wells),r=(0,t.useMemo)(()=>{const t=new Map;return e.forEach(e=>t.set(e.id,(e=>{if(0===e.length)return[];const t=[{x:0,y:0,z:0,md:0}];for(let n=1;n<e.length;n++){const r=e[n-1],i=e[n],a=t[n-1],o=i.md-r.md;if(o<=0){t.push(l(l({},a),{},{md:i.md}));continue}const s=r.inc*(Math.PI/180),c=i.inc*(Math.PI/180),u=r.azm*(Math.PI/180),d=i.azm*(Math.PI/180),h=Math.acos(Math.cos(c-s)-Math.sin(s)*Math.sin(c)*(1-Math.cos(d-u))),p=0!==h?2/h*Math.tan(h/2):1,f=o/2*(Math.sin(s)*Math.cos(u)+Math.sin(c)*Math.cos(d))*p,m=o/2*(Math.sin(s)*Math.sin(u)+Math.sin(c)*Math.sin(d))*p,g=o/2*(Math.cos(s)+Math.cos(c))*p;t.push({x:a.x+m,y:a.y+f,z:a.z+g,md:i.md})}return t})(e.deviationSurvey))),t},[e]);return{wells:e,wellPaths:r,addWell:e=>n(t=>[...t,e]),updateWell:(e,t)=>{n(n=>n.map(n=>n.id===e?l(l({},n),t):n))},addComponent:(e,t)=>{let i=null;return n(n=>n.map(n=>{if(n.id===e){let a;i="".concat(t.toLowerCase(),"-").concat(Date.now());const o=r.get(e),s=o&&o.length>0?o[o.length-1].md:2e3,c=Math.floor(s/2);switch(t){case"Casing":a={id:i,type:kE.CASING,topDepth:0,bottomDepth:c,size:7,weight:26};break;case"Tubing":a={id:i,type:kE.TUBING,topDepth:0,bottomDepth:c-100,size:2.875,weight:6.5};break;case"Packer":a={id:i,type:kE.PACKER,topDepth:c-200,packerType:"Permanent"};break;default:a={id:i,type:kE.PERFORATION,topDepth:c+100,bottomDepth:c+200,shotsPerFoot:4}}return l(l({},n),{},{components:[...n.components,a]})}return n})),i},updateComponent:(e,t,r)=>{n(n=>n.map(n=>n.id===e?l(l({},n),{},{components:n.components.map(e=>e.id===t?l(l({},e),r):e)}):n))},removeComponent:(e,t)=>{n(n=>n.map(n=>n.id===e?l(l({},n),{},{components:n.components.filter(e=>e.id!==t)}):n))},setDeviationSurvey:(e,t)=>{n(n=>n.map(n=>n.id===e?l(l({},n),{},{deviationSurvey:t}):n))},saveConfiguration:()=>{localStorage.setItem("wellboreConfig",JSON.stringify({wells:e})),alert("Field configuration saved.")},loadConfiguration:()=>{const e=localStorage.getItem("wellboreConfig");if(e){var t;const r=JSON.parse(e);return n(r.wells),null===(t=r.wells[0])||void 0===t?void 0:t.id}return null}}},UE=e=>{let{label:t,value:n,unit:r}=e;return(0,M.jsxs)("div",{className:"bg-black/40 backdrop-blur-sm border border-gray-700/50 p-3 rounded-lg text-center min-w-[100px]",children:[(0,M.jsx)("div",{className:"text-[10px] text-cyan-200/70 uppercase tracking-wider font-semibold",children:t}),(0,M.jsx)("div",{className:"text-xl font-bold text-white shadow-black drop-shadow-md",children:n}),(0,M.jsx)("div",{className:"text-xs text-gray-400",children:r})]})},FE=e=>{let{pathCoords:t}=e;if(0===t.length)return null;const n=t[t.length-1],r=n.md,i=n.z,a=Math.sqrt(n.x**2+n.y**2);return(0,M.jsxs)("div",{className:"flex space-x-2 p-2 bg-gray-900/80 backdrop-blur-md rounded-xl border border-gray-700/50 shadow-2xl",children:[(0,M.jsx)(UE,{label:"Total MD",value:r.toFixed(0),unit:"ft"}),(0,M.jsx)(UE,{label:"Final TVD",value:i.toFixed(0),unit:"ft"}),(0,M.jsx)(UE,{label:"Displacement",value:a.toFixed(0),unit:"ft"})]})},BE=e=>{let{onClose:n,onAddWell:r}=e;const[i,a]=(0,t.useState)(""),[o,s]=(0,t.useState)(q.PLATFORM),[c,u]=(0,t.useState)("1000"),[d,h]=(0,t.useState)("0"),[p,f]=(0,t.useState)("0");return(0,M.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center",onClick:n,children:(0,M.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md border border-gray-700",onClick:e=>e.stopPropagation(),children:[(0,M.jsx)("h2",{className:"text-lg font-bold text-white mb-4",children:"Add New Well"}),(0,M.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={id:"well-".concat(Date.now()),name:i||"Well-".concat(Date.now()%1e3),components:[],deviationSurvey:[{md:0,inc:0,azm:0,tvd:0}],datumElevation:25,surfaceX:0,surfaceY:0};let a;a=o===q.SUBSEA?l(l({},t),{},{type:q.SUBSEA,waterDepth:parseFloat(c)||0,surfaceX:parseFloat(d)||0,surfaceY:parseFloat(p)||0}):l(l({},t),{},{type:q.PLATFORM}),r(a),n()},className:"space-y-4",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Well Name"}),(0,M.jsx)("input",{type:"text",value:i,onChange:e=>a(e.target.value),placeholder:"e.g. Alpha-1",className:"w-full bg-gray-700 border border-gray-600 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",autoFocus:!0})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Well Type"}),(0,M.jsxs)("select",{value:o,onChange:e=>s(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500",children:[(0,M.jsx)("option",{value:q.PLATFORM,children:"Platform"}),(0,M.jsx)("option",{value:q.SUBSEA,children:"Subsea"})]})]}),o===q.SUBSEA&&(0,M.jsxs)("div",{className:"space-y-4 border-l-2 border-blue-500/30 pl-4 ml-1",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Water Depth (ft)"}),(0,M.jsx)("input",{type:"number",step:"any",value:c,onChange:e=>u(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Surface X (Easting)"}),(0,M.jsx)("input",{type:"number",step:"any",placeholder:"0",value:d,onChange:e=>h(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Surface Y (Northing)"}),(0,M.jsx)("input",{type:"number",step:"any",placeholder:"0",value:p,onChange:e=>f(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500"})]})]})]}),(0,M.jsxs)("div",{className:"flex justify-end space-x-2 pt-4 border-t border-gray-700/50 mt-6",children:[(0,M.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md text-sm font-semibold transition-colors text-gray-300",children:"Cancel"}),(0,M.jsx)("button",{type:"submit",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-md text-sm font-semibold transition-colors text-white shadow-lg shadow-cyan-500/20",children:"Create Well"})]})]})]})})},zE=e=>{let{wells:n,selectedWellId:r,onSelectWell:i,onAddWell:a}=e;const[o,s]=(0,t.useState)(!1);return(0,M.jsxs)("div",{className:"flex flex-col",children:[(0,M.jsx)("h2",{className:"text-sm font-semibold text-center text-gray-500 mb-2 uppercase tracking-wider",children:"Well List"}),(0,M.jsx)("ul",{className:"space-y-1 overflow-y-auto max-h-64 mb-3 pr-1",children:n.map(e=>(0,M.jsx)("li",{children:(0,M.jsxs)("button",{onClick:()=>i(e.id),className:"w-full text-left p-2 rounded-md text-sm transition-all duration-200 flex items-center space-x-3 group ".concat(r===e.id?"bg-cyan-500/20 text-cyan-300 border border-cyan-500/30":"hover:bg-gray-800 text-gray-400 border border-transparent"),children:[(0,M.jsx)("div",{className:"p-1.5 rounded-md ".concat(r===e.id?"bg-cyan-500/20":"bg-gray-800 group-hover:bg-gray-700"),children:(0,M.jsx)(mw,{className:"w-4 h-4"})}),(0,M.jsx)("div",{className:"flex-grow min-w-0",children:(0,M.jsx)("div",{className:"truncate font-medium",title:e.name,children:e.name})}),(0,M.jsx)("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded uppercase tracking-wider ".concat(e.type===q.SUBSEA?"bg-blue-500/20 text-blue-400":"bg-green-500/20 text-green-400"),children:e.type===q.SUBSEA?"SUB":"PLT"})]})},e.id))}),(0,M.jsx)("button",{onClick:()=>s(!0),className:"w-full py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 hover:border-gray-600 rounded-lg text-sm font-medium text-gray-300 hover:text-white transition-all shadow-lg",children:"+ New Well"}),o&&(0,M.jsx)(BE,{onClose:()=>s(!1),onAddWell:a})]})},HE=e=>{let{onExit:n}=e;const{wells:r,wellPaths:i,addWell:a,updateWell:o,addComponent:s,updateComponent:l,removeComponent:c,setDeviationSurvey:u,saveConfiguration:d,loadConfiguration:h}=IE(),[p,f]=(0,t.useState)(r.length>0?r[0].id:null),[m,g]=(0,t.useState)(null),[v,x]=(0,t.useState)(!0),[y,b]=(0,t.useState)(!0);(0,t.useEffect)(()=>{p&&r.some(e=>e.id===p)||f(r.length>0?r[0].id:null)},[r,p]);const w=(0,t.useMemo)(()=>r.find(e=>e.id===p),[r,p]),_=(0,t.useMemo)(()=>null===w||void 0===w?void 0:w.components.find(e=>e.id===m),[w,m]);return(0,M.jsxs)("div",{className:"relative h-screen w-screen bg-gray-950 text-gray-200 overflow-hidden font-sans selection:bg-cyan-500/30",children:[n&&(0,M.jsx)("div",{className:"absolute top-4 left-4 z-50",children:(0,M.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white rounded-lg transition-all border border-gray-700 shadow-xl",children:[(0,M.jsx)(U,{className:"w-4 h-4"}),(0,M.jsx)("span",{className:"text-sm font-medium",children:"Exit Visualizer"})]})}),(0,M.jsxs)("div",{className:"absolute inset-0 z-0",children:[(0,M.jsx)(jE,{wells:r,wellPaths:i,selectedWellId:p,selectedComponentId:m,onSelectComponent:g}),w&&i.get(w.id)&&(0,M.jsx)("div",{className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 z-10 pointer-events-none",children:(0,M.jsx)(FE,{pathCoords:i.get(w.id)})})]}),(0,M.jsx)("div",{className:"absolute top-0 left-0 right-0 z-20 pointer-events-none",children:(0,M.jsx)("div",{className:"pointer-events-auto",children:(0,M.jsx)(_w,{onSave:d,onLoad:()=>{const e=h();e&&f(e)},onImport:()=>{},onExport:()=>{}})})}),(0,M.jsx)("aside",{className:"absolute left-4 top-20 bottom-4 w-80 z-30 transition-all duration-500 ease-[cubic-bezier(0.4,0,0.2,1)] ".concat(v?"translate-x-0 opacity-100":"-translate-x-[calc(100%+2rem)] opacity-0"),children:(0,M.jsxs)("div",{className:"h-full flex flex-col bg-gray-900/60 backdrop-blur-xl border border-white/5 rounded-3xl shadow-2xl overflow-hidden ring-1 ring-white/10",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-white/5 bg-white/5",children:[(0,M.jsx)("h2",{className:"text-xs font-bold text-gray-400 uppercase tracking-[0.2em]",children:"Inventory"}),(0,M.jsx)("button",{onClick:()=>x(!1),className:"text-gray-500 hover:text-white transition-colors p-1",children:(0,M.jsx)(gw,{className:"w-5 h-5"})})]}),(0,M.jsxs)("div",{className:"flex-grow overflow-y-auto p-5 space-y-8 scrollbar-thin",children:[(0,M.jsx)(zE,{wells:r,selectedWellId:p,onSelectWell:e=>{f(e),g(null)},onAddWell:a}),(0,M.jsx)(OE,{onAddComponent:e=>{if(!p)return;const t=s(p,e);t&&g(t)},disabled:!w})]})]})}),!v&&(0,M.jsx)("button",{onClick:()=>x(!0),className:"absolute left-6 top-24 z-30 p-3 bg-gray-900/80 backdrop-blur-md border border-white/10 rounded-2xl text-cyan-400 shadow-2xl hover:bg-gray-800 transition-all",children:(0,M.jsx)(xw,{className:"w-6 h-6"})}),(0,M.jsx)("aside",{className:"absolute right-4 top-20 bottom-4 w-[420px] z-30 transition-all duration-500 ease-[cubic-bezier(0.4,0,0.2,1)] ".concat(y?"translate-x-0 opacity-100":"translate-x-[calc(100%+2rem)] opacity-0"),children:(0,M.jsxs)("div",{className:"h-full flex flex-col bg-gray-900/60 backdrop-blur-xl border border-white/5 rounded-3xl shadow-2xl overflow-hidden ring-1 ring-white/10",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-white/5 bg-white/5",children:[(0,M.jsx)("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-white transition-colors p-1",children:(0,M.jsx)(vw,{className:"w-5 h-5"})}),(0,M.jsx)("h2",{className:"text-xs font-bold text-gray-400 uppercase tracking-[0.2em]",children:"Configuration"})]}),(0,M.jsx)("div",{className:"flex-grow overflow-y-auto scrollbar-thin",children:w&&p&&(0,M.jsx)(Tw,{well:w,selectedComponent:_,onSelectComponent:g,onUpdateComponent:(e,t)=>l(p,e,t),onRemoveComponent:e=>c(p,e),onUpdateWell:e=>o(p,e),onSetDeviationSurvey:e=>u(p,e)})})]})}),!y&&(0,M.jsx)("button",{onClick:()=>b(!0),className:"absolute right-6 top-24 z-30 p-3 bg-gray-900/80 backdrop-blur-md border border-white/10 rounded-2xl text-cyan-400 shadow-2xl hover:bg-gray-800 transition-all",children:(0,M.jsx)(xw,{className:"w-6 h-6"})})]})},VE={rope_socket:{id:"rope_socket",name:'Rope Socket (Wedge, 0.108")',length:1.5,weight:8,maxOD:1.875,color:11184810,topConnection:"wire-0.108",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},rope_socket_125:{id:"rope_socket_125",name:'Rope Socket (Wedge, 0.125")',length:1.5,weight:9,maxOD:1.875,color:12303291,topConnection:"wire-0.125",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},rope_socket_142:{id:"rope_socket_142",name:'Rope Socket (Wedge, 0.142")',length:1.5,weight:10,maxOD:1.875,color:13421772,topConnection:"wire-0.142",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},bar_socket:{id:"bar_socket",name:'Bar Socket (for 1/4" bar)',length:1.8,weight:12,maxOD:1.875,color:10066329,topConnection:"bar-0.25",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},safety_joint:{id:"safety_joint",name:"Safety Joint (Shear Pin)",length:1.5,weight:10,maxOD:1.875,color:16737792,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},stem_steel_1ft:{id:"stem_steel_1ft",name:'Stem (Steel, 1ft, 1.75")',length:1,weight:8,maxOD:1.75,color:8947848,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.75-external-fish-neck"},stem_steel_2ft:{id:"stem_steel_2ft",name:'Stem (Steel, 2ft, 1.75")',length:2,weight:16,maxOD:1.75,color:8947848,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.75-external-fish-neck"},stem_steel_3ft:{id:"stem_steel_3ft",name:'Stem (Steel, 3ft, 1.75")',length:3,weight:24,maxOD:1.75,color:8947848,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.75-external-fish-neck"},stem_steel_5ft:{id:"stem_steel_5ft",name:'Stem (Steel, 5ft, 1.75")',length:5,weight:40,maxOD:1.75,color:8947848,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.75-external-fish-neck"},stem_leaded_1ft:{id:"stem_leaded_1ft",name:'Stem (Leaded, 1ft, 1.75")',length:1,weight:15,maxOD:1.75,color:5592405,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.75-external-fish-neck"},stem_leaded_2ft:{id:"stem_leaded_2ft",name:'Stem (Leaded, 2ft, 1.75")',length:2,weight:30,maxOD:1.75,color:5592405,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.75-external-fish-neck"},stem_leaded_3ft:{id:"stem_leaded_3ft",name:'Stem (Leaded, 3ft, 1.75")',length:3,weight:45,maxOD:1.75,color:5592405,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.75-external-fish-neck"},jar_mechanical:{id:"jar_mechanical",name:'Spang Jar (Mechanical, 1.875")',length:4.5,weight:35,maxOD:1.875,color:30719,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},jar_hydraulic:{id:"jar_hydraulic",name:'Hydraulic Jar (1.875")',length:5,weight:38,maxOD:1.875,color:39423,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},knuckle_joint:{id:"knuckle_joint",name:'Knuckle Joint (1.875")',length:1.2,weight:10,maxOD:1.875,color:65399,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},swivel:{id:"swivel",name:'Swivel (1.875")',length:1,weight:8,maxOD:1.875,color:7864064,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},accelerator:{id:"accelerator",name:'Jar Accelerator (1.875")',length:2.5,weight:20,maxOD:1.875,color:22015,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},gs_pulling_tool:{id:"gs_pulling_tool",name:'GS Pulling Tool (2")',length:2,weight:12,maxOD:2.2,color:16755200,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.0-GS-Internal"},jds_pulling_tool:{id:"jds_pulling_tool",name:'JDS Pulling Tool (2")',length:2,weight:13,maxOD:2.2,color:16711850,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.0-JDS-External"},s_pulling_tool:{id:"s_pulling_tool",name:'S Pulling Tool (2")',length:2,weight:12,maxOD:2.2,color:11206400,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.0-S-External"},x_pulling_tool:{id:"x_pulling_tool",name:'X Pulling Tool (2")',length:2,weight:12,maxOD:2.2,color:16733440,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.0-X-External"},bore_gauge:{id:"bore_gauge",name:'Bore Gauge (2.5")',length:1.5,weight:8,maxOD:2.5,color:43775,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"none"},gauge_cutter_225:{id:"gauge_cutter_225",name:'Gauge Cutter (2.25")',length:1,weight:10,maxOD:2.25,color:16711680,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"none"},gauge_cutter_250:{id:"gauge_cutter_250",name:'Gauge Cutter (2.5")',length:1,weight:11,maxOD:2.5,color:16711680,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"none"},gauge_cutter_275:{id:"gauge_cutter_275",name:'Gauge Cutter (2.75")',length:1,weight:12,maxOD:2.75,color:16711680,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"none"},drift_225:{id:"drift_225",name:'Drift (2.25")',length:3,weight:15,maxOD:2.25,color:16746496,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"none"},drift_250:{id:"drift_250",name:'Drift (2.5")',length:3,weight:16,maxOD:2.5,color:16746496,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"none"},wireline_vent:{id:"wireline_vent",name:'Wireline Vent (1.875")',length:1.5,weight:10,maxOD:1.875,color:65535,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"none"},punch:{id:"punch",name:'Mechanical Punch (1.875")',length:2.5,weight:12,maxOD:1.875,color:16711935,topConnection:"1-1-16-UN-Box",bottomConnection:"none",specialFeature:"Has piercing mechanism"},sample_bailer:{id:"sample_bailer",name:'Sample Bailer (2")',length:4,weight:18,maxOD:2,color:8913151,topConnection:"1-1-16-UN-Box",bottomConnection:"none",specialFeature:"Has valve mechanism"},sand_bailer:{id:"sand_bailer",name:'Sand Bailer (2")',length:5,weight:20,maxOD:2,color:8913151,topConnection:"1-1-16-UN-Box",bottomConnection:"none",specialFeature:"Has valve mechanism"},overshot_2:{id:"overshot_2",name:'Overshot (2")',length:3,weight:25,maxOD:2.25,color:16755200,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.0-External"},overshot_25:{id:"overshot_25",name:'Overshot (2.5")',length:3,weight:28,maxOD:2.75,color:16755200,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.5-External"},overshot_3:{id:"overshot_3",name:'Overshot (3")',length:3,weight:32,maxOD:3.25,color:16755200,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"3.0-External"},spear_125:{id:"spear_125",name:'Releasing Spear (1.25")',length:2,weight:15,maxOD:1.5,color:16733440,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"1.25-Internal"},spear_150:{id:"spear_150",name:'Releasing Spear (1.5")',length:2,weight:16,maxOD:1.75,color:16733440,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"1.5-Internal"},spear_200:{id:"spear_200",name:'Releasing Spear (2")',length:2,weight:18,maxOD:2.25,color:16733440,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.0-Internal"},junk_basket:{id:"junk_basket",name:'Junk Basket (2")',length:3.5,weight:22,maxOD:2.25,color:43775,topConnection:"1-1-16-UN-Box",bottomConnection:"none",specialFeature:"Has magnetic inserts"},magnet:{id:"magnet",name:'Magnet (1.875")',length:1.5,weight:12,maxOD:1.875,color:16711680,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"none"},impression_block:{id:"impression_block",name:'Impression Block (2")',length:1.5,weight:8,maxOD:2,color:16777215,topConnection:"1-1-16-UN-Box",bottomConnection:"none",specialFeature:"Lead impression surface"},washover_pipe:{id:"washover_pipe",name:'Washover Pipe (2.5")',length:4,weight:30,maxOD:2.5,color:11184810,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"none"},gs_setting_tool:{id:"gs_setting_tool",name:'GS Setting Tool (2")',length:2.5,weight:15,maxOD:2.2,color:65450,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.0-GS-Internal"},jds_setting_tool:{id:"jds_setting_tool",name:'JDS Setting Tool (2")',length:2.5,weight:16,maxOD:2.2,color:16711850,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.0-JDS-External"},wireline_choke:{id:"wireline_choke",name:'Wireline Choke Setter (2")',length:2,weight:14,maxOD:2.2,color:65535,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.0-Choke-Internal"},plug_setting_tool:{id:"plug_setting_tool",name:'Plug Setting Tool (2")',length:2.5,weight:15,maxOD:2.2,color:16755455,topConnection:"1-1-16-UN-Box",bottomConnection:"none",latchMechanism:"2.0-Plug-Internal"},gs_plug:{id:"gs_plug",name:'Blanking Plug w/ GS Profile (2")',length:1.8,weight:15,maxOD:2.28,color:52394,topConnection:"none",bottomConnection:"none",latchProfile:"2.0-GS-Internal"},jds_plug:{id:"jds_plug",name:'Plug w/ JDS Neck (2")',length:1.5,weight:14,maxOD:2.28,color:11141324,topConnection:"none",bottomConnection:"none",latchProfile:"2.0-JDS-External"},s_plug:{id:"s_plug",name:'Plug w/ S Profile (2")',length:1.5,weight:14,maxOD:2.28,color:11193344,topConnection:"none",bottomConnection:"none",latchProfile:"2.0-S-External"},x_plug:{id:"x_plug",name:'Plug w/ X Profile (2")',length:1.5,weight:14,maxOD:2.28,color:13412864,topConnection:"none",bottomConnection:"none",latchProfile:"2.0-X-External"},choke_32:{id:"choke_32",name:'Choke (32/64")',length:1.2,weight:8,maxOD:2.28,color:43775,topConnection:"none",bottomConnection:"none",latchProfile:"2.0-Choke-Internal"},choke_48:{id:"choke_48",name:'Choke (48/64")',length:1.2,weight:8,maxOD:2.28,color:43775,topConnection:"none",bottomConnection:"none",latchProfile:"2.0-Choke-Internal"},choke_64:{id:"choke_64",name:'Choke (64/64")',length:1.2,weight:8,maxOD:2.28,color:43775,topConnection:"none",bottomConnection:"none",latchProfile:"2.0-Choke-Internal"},wireline_choke_installed:{id:"wireline_choke_installed",name:"Installed Wireline Choke",length:1.5,weight:10,maxOD:2.28,color:65535,topConnection:"none",bottomConnection:"none",latchProfile:"2.0-Choke-Internal"},tubing_punch:{id:"tubing_punch",name:'Tubing Punch (1/8")',length:2,weight:10,maxOD:2.28,color:16711935,topConnection:"none",bottomConnection:"none",latchProfile:"2.0-Punch-Internal"},tubing_punch_14:{id:"tubing_punch_14",name:'Tubing Punch (1/4")',length:2,weight:10,maxOD:2.28,color:16711935,topConnection:"none",bottomConnection:"none",latchProfile:"2.0-Punch-Internal"},lost_rope_socket:{id:"lost_rope_socket",name:"Lost Rope Socket",length:1.5,weight:8,maxOD:1.875,color:8947848,topConnection:"none",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.875-external-fish-neck"},lost_stem:{id:"lost_stem",name:'Lost Stem (1.75")',length:3,weight:24,maxOD:1.75,color:6710886,topConnection:"1-1-16-UN-Box",bottomConnection:"1-1-16-UN-Pin",latchProfile:"1.75-external-fish-neck"},wireline_frag:{id:"wireline_frag",name:"Wireline Fragment",length:2,weight:5,maxOD:.5,color:11184810,topConnection:"none",bottomConnection:"none",latchProfile:"0.5-External"}},WE=e=>{let{onExport:t,onImport:n,onClear:r}=e;return(0,M.jsxs)("header",{className:"bg-gray-800 border-b border-gray-700 p-3 flex justify-between items-center shadow-md",children:[(0,M.jsx)("h1",{className:"text-xl font-bold text-white",children:"3D Intelligent Slickline Tool String Assembler"}),(0,M.jsxs)("div",{className:"flex gap-2",children:[(0,M.jsx)("button",{onClick:t,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-all duration-200",children:"Export"}),(0,M.jsx)("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-all duration-200",children:"Import"}),(0,M.jsx)("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-all duration-200",children:"Clear String"})]})]})},GE=e=>{let{id:t,name:n,isSelected:r,onClick:i}=e;return(0,M.jsx)("button",{className:"w-full text-left p-2 border rounded-md transition-all duration-200 text-sm ".concat(r?"bg-cyan-900/50 border-cyan-500 text-white ring-1 ring-cyan-500":"border-gray-700 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white"),onClick:()=>i(t),children:n})},XE=e=>{let{title:n,components:r,selectedId:i,onSelect:a}=e;const[o,s]=(0,t.useState)(!0);return(0,M.jsxs)("div",{className:"mb-2",children:[(0,M.jsxs)("button",{onClick:()=>s(!o),className:"flex items-center justify-between w-full p-2 bg-gray-700/40 hover:bg-gray-700 rounded-md transition-colors group mb-1 border border-transparent hover:border-gray-600",children:[(0,M.jsxs)("div",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:"text-[10px] text-gray-400 transition-transform duration-200 ".concat(o?"rotate-180":"-rotate-90"),children:"\u25bc"}),(0,M.jsx)("span",{className:"text-sm font-semibold text-cyan-400 group-hover:text-cyan-300",children:n})]}),(0,M.jsx)("span",{className:"text-xs text-gray-500 bg-gray-800 px-1.5 py-0.5 rounded-full",children:r.length})]}),o&&(0,M.jsx)("div",{className:"space-y-1 pl-1 border-l-2 border-gray-700/50 ml-2 animate-fadeIn",children:r.map(e=>(0,M.jsx)(GE,{id:e.id,name:e.name,isSelected:i===e.id,onClick:a},e.id))})]})},qE=e=>{let{wellData:n,setWellData:r,onAddComponent:i}=e;const[a,o]=(0,t.useState)(""),[s,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)({topConn:"",bottomConn:"",latchProfile:"",specialFeature:"",minOD:"",maxOD:"",minLength:"",maxLength:""}),f=e=>{const{id:t,value:n}=e.target;r(e=>l(l({},e),{},{[t]:parseFloat(n)||0}))},m=(e,t)=>{p(n=>l(l({},n),{},{[e]:t}))},g=(0,t.useMemo)(()=>{const e=Object.values(VE),t=Array.from(new Set(e.map(e=>e.topConnection).filter(Boolean))).sort(),n=Array.from(new Set(e.map(e=>e.bottomConnection).filter(Boolean))).sort(),r=Array.from(new Set(e.map(e=>e.latchProfile).filter(Boolean))).sort(),i=Array.from(new Set(e.map(e=>e.specialFeature).filter(Boolean))).sort();return{topConns:t,bottomConns:n,latchProfiles:r,specialFeatures:i}},[]),v=(0,t.useMemo)(()=>{let e=Object.values(VE);if(h.topConn&&(e=e.filter(e=>e.topConnection===h.topConn)),h.bottomConn&&(e=e.filter(e=>e.bottomConnection===h.bottomConn)),h.latchProfile&&(e=e.filter(e=>e.latchProfile===h.latchProfile)),h.specialFeature&&(e=e.filter(e=>e.specialFeature===h.specialFeature)),h.minOD&&(e=e.filter(e=>e.maxOD>=parseFloat(h.minOD))),h.maxOD&&(e=e.filter(e=>e.maxOD<=parseFloat(h.maxOD))),h.minLength&&(e=e.filter(e=>e.length>=parseFloat(h.minLength))),h.maxLength&&(e=e.filter(e=>e.length<=parseFloat(h.maxLength))),a.trim()){const t=a.trim().split(/\s+OR\s+/i).map(e=>{const t=e.trim().split(/\s+/),n=[];for(let r=0;r<t.length;r++){const e=t[r];"AND"!==e.toUpperCase()&&("NOT"===e.toUpperCase()?r+1<t.length&&(n.push({term:t[r+1].toLowerCase(),exclude:!0}),r++):e.startsWith("-")&&e.length>1?n.push({term:e.substring(1).toLowerCase(),exclude:!0}):n.push({term:e.toLowerCase(),exclude:!1}))}return n});e=e.filter(e=>{const n=[e.name,e.topConnection,e.bottomConnection,e.latchProfile,e.latchMechanism,e.specialFeature,e.id].filter(Boolean).join(" ").toLowerCase();return t.some(e=>e.every(e=>{const t=n.includes(e.term);return e.exclude?!t:t}))})}const t={Conveyance:[],"Weight & Impact":[],"Service Tools":[],"Fishing Tools":[],"Setting Tools":[],'"Fish" (Targets)':[]};for(const n of e)["rope_socket","rope_socket_125","rope_socket_142","bar_socket","safety_joint"].includes(n.id)?t.Conveyance.push(n):["stem_steel_1ft","stem_steel_2ft","stem_steel_3ft","stem_steel_5ft","stem_leaded_1ft","stem_leaded_2ft","stem_leaded_3ft","jar_mechanical","jar_hydraulic","knuckle_joint","swivel","accelerator"].includes(n.id)?t["Weight & Impact"].push(n):n.id.includes("pulling")||n.id.includes("gauge")||n.id.includes("drift")||["bore_gauge","wireline_vent","punch","sample_bailer","sand_bailer"].includes(n.id)?t["Service Tools"].push(n):n.id.includes("overshot")||n.id.includes("spear")||["junk_basket","magnet","impression_block","washover_pipe"].includes(n.id)?t["Fishing Tools"].push(n):n.id.includes("setting")||n.id.includes("wireline_choke")?t["Setting Tools"].push(n):t['"Fish" (Targets)'].push(n);return t},[a,h]),x=Object.values(h).filter(Boolean).length;return(0,M.jsxs)("div",{className:"flex flex-col h-full",children:[(0,M.jsx)("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-600 pb-2",children:"Job Setup"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{htmlFor:"tubingID",className:"block text-sm font-medium text-gray-300",children:"Tubing ID (in)"}),(0,M.jsx)("input",{type:"number",id:"tubingID",value:n.tubingID,onChange:f,step:"0.125",className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm p-2 text-white"})]}),(0,M.jsxs)("div",{className:"mt-3",children:[(0,M.jsx)("label",{htmlFor:"nippleID",className:"block text-sm font-medium text-gray-300",children:"Min. Nipple ID (in)"}),(0,M.jsx)("input",{type:"number",id:"nippleID",value:n.nippleID,onChange:f,step:"0.125",className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm p-2 text-white"})]}),(0,M.jsxs)("div",{className:"mt-3",children:[(0,M.jsx)("label",{htmlFor:"whp",className:"block text-sm font-medium text-gray-300",children:"Wellhead Pressure (psi)"}),(0,M.jsx)("input",{type:"number",id:"whp",value:n.whp,onChange:f,step:"100",className:"mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm p-2 text-white"})]}),(0,M.jsx)("h2",{className:"text-xl font-semibold text-white mt-6 mb-4 border-b border-gray-600 pb-2",children:"Component Library"}),(0,M.jsxs)("div",{className:"mb-3 space-y-2",children:[(0,M.jsx)("div",{className:"relative",children:(0,M.jsx)("input",{type:"text",placeholder:'Search (e.g., "stem NOT leaded")',value:a,onChange:e=>o(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md p-2 text-white focus:ring-2 focus:ring-cyan-500 focus:outline-none"})}),(0,M.jsxs)("button",{onClick:()=>d(!u),className:"text-xs flex items-center gap-1 transition-colors ".concat(u||x>0?"text-cyan-400 font-medium":"text-gray-400 hover:text-white"),children:[u?"Hide Advanced Filters":"Show Advanced Filters ".concat(x>0?"(".concat(x," active)"):""),(0,M.jsx)("span",{className:"text-[10px]",children:u?"\u25b2":"\u25bc"})]}),u&&(0,M.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-md p-3 animate-fadeIn space-y-3",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,M.jsx)("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wide",children:"Filters"}),(0,M.jsx)("button",{onClick:()=>{p({topConn:"",bottomConn:"",latchProfile:"",specialFeature:"",minOD:"",maxOD:"",minLength:"",maxLength:""}),o("")},className:"text-xs text-red-400 hover:text-red-300 hover:underline",children:"Clear All"})]}),(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Top Connection"}),(0,M.jsxs)("select",{value:h.topConn,onChange:e=>m("topConn",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded text-xs text-white p-1.5 focus:ring-1 focus:ring-cyan-500 outline-none",children:[(0,M.jsx)("option",{value:"",children:"Any"}),g.topConns.map(e=>(0,M.jsx)("option",{value:e,children:e},e))]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Bottom Connection"}),(0,M.jsxs)("select",{value:h.bottomConn,onChange:e=>m("bottomConn",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded text-xs text-white p-1.5 focus:ring-1 focus:ring-cyan-500 outline-none",children:[(0,M.jsx)("option",{value:"",children:"Any"}),g.bottomConns.map(e=>(0,M.jsx)("option",{value:e,children:e},e))]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Latch Profile"}),(0,M.jsxs)("select",{value:h.latchProfile,onChange:e=>m("latchProfile",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded text-xs text-white p-1.5 focus:ring-1 focus:ring-cyan-500 outline-none",children:[(0,M.jsx)("option",{value:"",children:"Any"}),g.latchProfiles.map(e=>(0,M.jsx)("option",{value:e,children:e},e))]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Special Feature"}),(0,M.jsxs)("select",{value:h.specialFeature,onChange:e=>m("specialFeature",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded text-xs text-white p-1.5 focus:ring-1 focus:ring-cyan-500 outline-none",children:[(0,M.jsx)("option",{value:"",children:"Any"}),g.specialFeatures.map(e=>(0,M.jsx)("option",{value:e,children:e},e))]})]})]}),(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t border-gray-700/50",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"OD Range (inches)"}),(0,M.jsxs)("div",{className:"flex gap-2",children:[(0,M.jsx)("input",{type:"number",placeholder:"Min",value:h.minOD,onChange:e=>m("minOD",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded text-xs text-white p-1.5 placeholder-gray-500 focus:ring-1 focus:ring-cyan-500 outline-none"}),(0,M.jsx)("input",{type:"number",placeholder:"Max",value:h.maxOD,onChange:e=>m("maxOD",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded text-xs text-white p-1.5 placeholder-gray-500 focus:ring-1 focus:ring-cyan-500 outline-none"})]})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Length Range (ft)"}),(0,M.jsxs)("div",{className:"flex gap-2",children:[(0,M.jsx)("input",{type:"number",placeholder:"Min",value:h.minLength,onChange:e=>m("minLength",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded text-xs text-white p-1.5 placeholder-gray-500 focus:ring-1 focus:ring-cyan-500 outline-none"}),(0,M.jsx)("input",{type:"number",placeholder:"Max",value:h.maxLength,onChange:e=>m("maxLength",e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded text-xs text-white p-1.5 placeholder-gray-500 focus:ring-1 focus:ring-cyan-500 outline-none"})]})]})]})]})]}),(0,M.jsx)("div",{className:"space-y-3 overflow-y-auto flex-1 pr-1",children:Object.keys(v).map(e=>{const t=v[e];return t&&0!==t.length?(0,M.jsx)(XE,{title:e,components:t,selectedId:s,onSelect:c},e):null})}),(0,M.jsx)("div",{className:"pt-4 mt-2 border-t border-gray-700 sticky bottom-0 bg-gray-800",children:(0,M.jsxs)("button",{onClick:()=>{s&&i(s)},disabled:!s,className:"w-full bg-cyan-600 hover:bg-cyan-500 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded shadow-lg transition-all transform active:scale-[0.98] duration-100 flex items-center justify-center gap-2",children:[(0,M.jsx)("span",{children:"Add Selected Component"}),(0,M.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]})})]})},YE=e=>{let{label:t,id:n,value:r,type:i="number",step:a,onChange:o,children:s}=e;return(0,M.jsxs)("div",{className:"flex items-center mb-2",children:[(0,M.jsxs)("div",{className:"w-28 text-sm text-gray-400",children:[t,":"]}),(0,M.jsx)("div",{className:"flex-1",children:s?(0,M.jsx)("select",{id:n,value:r,onChange:o,className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-sm",children:s}):(0,M.jsx)("input",{type:i,id:n,value:r,step:a,onChange:o,className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-sm"})})]})},KE=e=>{let{wellboreData:t,setWellboreData:n,showNotification:r}=e;const i=e=>{const{id:t,value:r}=e.target,i="number"===e.target.getAttribute("type");n(e=>l(l({},e),{},{[t]:i?parseFloat(r)||0:r}))};return(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-600 pb-2",children:"Wellbore Schematic"}),(0,M.jsxs)("div",{className:"mb-4",children:[(0,M.jsx)("h3",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Geometry"}),(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)(YE,{label:"Casing OD",id:"casingOD",value:t.casingOD,step:"0.125",onChange:i}),(0,M.jsx)(YE,{label:"Casing ID",id:"casingID",value:t.casingID,step:"0.125",onChange:i}),(0,M.jsx)(YE,{label:"Tubing OD",id:"tubingOD",value:t.tubingOD,step:"0.125",onChange:i}),(0,M.jsx)(YE,{label:"Tubing ID",id:"tubingID",value:t.tubingID,step:"0.125",onChange:i})]})]}),(0,M.jsxs)("div",{className:"mb-4",children:[(0,M.jsx)("h3",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Depths & Hardware"}),(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)(YE,{label:"Tubing Depth",id:"tubingDepth",value:t.tubingDepth,step:"100",onChange:i}),(0,M.jsx)(YE,{label:"Packer Depth",id:"packerDepth",value:t.packerDepth,step:"100",onChange:i}),(0,M.jsxs)(YE,{label:"Nipple Profile",id:"nippleProfile",value:t.nippleProfile,onChange:i,children:[(0,M.jsx)("option",{value:"XN",children:"XN Nipple"}),(0,M.jsx)("option",{value:"F",children:"F Nipple"}),(0,M.jsx)("option",{value:"R",children:"R Nipple"}),(0,M.jsx)("option",{value:"S",children:"S Nipple"}),(0,M.jsx)("option",{value:"P",children:"P Nipple"})]}),(0,M.jsx)(YE,{label:"Nipple Depth",id:"nippleDepth",value:t.nippleDepth,step:"100",onChange:i}),(0,M.jsx)(YE,{label:"Perf Top",id:"perfTop",value:t.perfTop,step:"100",onChange:i}),(0,M.jsx)(YE,{label:"Perf Bottom",id:"perfBottom",value:t.perfBottom,step:"100",onChange:i})]})]}),(0,M.jsxs)("div",{className:"mb-4 border-t border-gray-700 pt-3",children:[(0,M.jsx)("h3",{className:"text-xs font-bold text-cyan-500 uppercase mb-2",children:"Fluids & Environment"}),(0,M.jsxs)("div",{className:"space-y-2",children:[(0,M.jsx)(YE,{label:"Fluid Type",id:"fluidType",value:t.fluidType,type:"text",onChange:i}),(0,M.jsx)(YE,{label:"Density (ppg)",id:"fluidDensity",value:t.fluidDensity,step:"0.1",onChange:i}),(0,M.jsx)(YE,{label:"Viscosity (cP)",id:"viscosity",value:t.viscosity,step:"0.1",onChange:i}),(0,M.jsx)(YE,{label:"Surface Temp",id:"surfaceTemp",value:t.surfaceTemp,step:"1",onChange:i}),(0,M.jsx)(YE,{label:"BHT (F)",id:"bottomHoleTemp",value:t.bottomHoleTemp,step:"1",onChange:i})]})]}),(0,M.jsx)("button",{onClick:()=>{r("Wellbore model and contents updated.","success")},className:"mt-2 w-full bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-all duration-200",children:"Update Model"})]})},ZE=[{md:0,inc:0,azm:0,tvd:0},{md:1e3,inc:2,azm:45,tvd:999},{md:2e3,inc:5,azm:50,tvd:1996},{md:3e3,inc:8,azm:55,tvd:2989},{md:4e3,inc:12,azm:60,tvd:3975},{md:5e3,inc:15,azm:65,tvd:4952},{md:6e3,inc:18,azm:70,tvd:5917},{md:7e3,inc:20,azm:75,tvd:6868},{md:8e3,inc:22,azm:80,tvd:7803},{md:8500,inc:23,azm:85,tvd:8263}],JE=e=>{let{surveyData:n,setSurveyData:r,showNotification:i}=e;const a=(0,t.useCallback)(()=>{r(e=>[...e,{md:0,inc:0,azm:0,tvd:0}])},[r]),o=(0,t.useCallback)(e=>{r(t=>t.filter((t,n)=>n!==e))},[r]),s=(0,t.useCallback)((e,t,n)=>{const i=parseFloat(n)||0;r(n=>{const r=[...n];return r[e]=l(l({},r[e]),{},{[t]:i}),r.sort((e,t)=>e.md-t.md)})},[r]);return(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-600 pb-2",children:"Deviation Survey"}),(0,M.jsxs)("div",{className:"mb-3 flex gap-2",children:[(0,M.jsx)("button",{onClick:a,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs",children:"Add Row"}),(0,M.jsx)("button",{onClick:()=>{r([]),i("Survey cleared.","success")},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs",children:"Clear Survey"}),(0,M.jsx)("button",{onClick:()=>{r(ZE),i("Sample survey loaded.","success")},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs",children:"Load Sample"})]}),(0,M.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:"400px"},children:(0,M.jsxs)("table",{className:"w-full text-sm",children:[(0,M.jsx)("thead",{children:(0,M.jsxs)("tr",{children:[(0,M.jsx)("th",{className:"bg-gray-700 px-2 py-1 text-left text-xs font-medium text-gray-300",children:"MD (ft)"}),(0,M.jsx)("th",{className:"bg-gray-700 px-2 py-1 text-left text-xs font-medium text-gray-300",children:"Incl (\xb0)"}),(0,M.jsx)("th",{className:"bg-gray-700 px-2 py-1 text-left text-xs font-medium text-gray-300",children:"Azim (\xb0)"}),(0,M.jsx)("th",{className:"bg-gray-700 px-2 py-1 text-left text-xs font-medium text-gray-300",children:"TVD (ft)"}),(0,M.jsx)("th",{className:"bg-gray-700 px-2 py-1"})]})}),(0,M.jsx)("tbody",{children:n.map((e,t)=>(0,M.jsxs)("tr",{children:[(0,M.jsx)("td",{children:(0,M.jsx)("input",{type:"number",value:e.md,onChange:e=>s(t,"md",e.target.value),step:"10",className:"w-full bg-gray-600 border border-gray-500 rounded px-1 py-0.5 text-white text-xs"})}),(0,M.jsx)("td",{children:(0,M.jsx)("input",{type:"number",value:e.inc,onChange:e=>s(t,"inc",e.target.value),step:"0.1",className:"w-full bg-gray-600 border border-gray-500 rounded px-1 py-0.5 text-white text-xs"})}),(0,M.jsx)("td",{children:(0,M.jsx)("input",{type:"number",value:e.azm,onChange:e=>s(t,"azm",e.target.value),step:"0.1",className:"w-full bg-gray-600 border border-gray-500 rounded px-1 py-0.5 text-white text-xs"})}),(0,M.jsx)("td",{children:(0,M.jsx)("input",{type:"number",value:e.tvd,onChange:e=>s(t,"tvd",e.target.value),step:"10",className:"w-full bg-gray-600 border border-gray-500 rounded px-1 py-0.5 text-white text-xs"})}),(0,M.jsx)("td",{children:(0,M.jsx)("button",{onClick:()=>o(t),className:"bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded text-xs",children:"X"})})]},t))})]})})]})},$E="Well_ID,Well_Name,Field,Region,Type,Total_Depth_ft,Water_Depth_ft,Operator,Status,Last_Intervention_Date,Next_Scheduled,Production_Status,Daily_Oil_bopd,Daily_Gas_mcfd,Reservoir_Pressure_psi,Wellhead_Pressure_psi,Cumulative_NPT_hrs,Safety_Critical_Issues,Integrity_Rating,Last_Inspection_Date,Estimated_Remaining_Life_years,Well_Cost_MM_USD,Intervention_Count,Last_Intervention_Type,Risk_Level\n666,The Perfect Storm,Brahan Field,SEER,HPHT Gas Condensate,18500,450,WellTegra Demo,Active,2024-10-15,2025-02-01,Producing,2400,8500,9200,3200,156,2,B+,2024-09-20,8.5,42.5,7,Multi-barrier Intervention,High\nW101,North Star Alpha,Brent,SEER,Oil Producer,14200,380,Equinor,Active,2024-08-10,2025-01-15,Producing,1800,3200,7800,2850,42,0,A,2024-10-01,12.5,28.3,3,Scale Treatment,Medium\nW102,Viking Thunder,Forties,SEER,Gas Condensate,16800,425,Shell,Active,2024-09-22,2025-03-10,Producing,950,12500,8900,3100,18,0,A+,2024-11-01,15.2,35.7,2,Safety Valve Replacement,Low\nW103,Emerald Deep,Brahan Field,SEER,HPHT Oil,17500,460,BP,Suspended,2024-06-30,2024-12-15,Shut In,0,0,9500,4200,224,3,C,2024-06-15,6.2,48.2,9,Casing Repair,Critical\nW201,Atlantic Dawn,Rosebank,UKCS West,Oil Producer,12500,1100,Equinor,Active,2024-07-18,2025-04-01,Producing,3200,2800,6500,2200,32,0,A,2024-09-15,18.5,52.8,2,Artificial Lift Install,Low\nW202,Celtic Horizon,Clair,UKCS West,Heavy Oil,13800,1350,BP,Active,2024-10-05,2025-06-20,Producing,2800,1500,5800,1950,68,1,B,2024-10-05,14.8,64.5,4,Tubing Replacement,Medium\nW203,Majestic Tide,Foinaven,UKCS West,Subsea Tieback,15200,1480,Shell,Active,2024-09-01,2025-05-15,Producing,1650,4200,7200,2650,52,1,B+,2024-09-01,11.3,78.9,3,Subsea Control System,Medium\nW301,Desert Falcon,Ghawar,Middle East,Giant Oil Field,8500,0,Saudi Aramco,Active,2024-10-20,2025-12-01,Producing,8500,2200,4800,1800,8,0,A+,2024-10-20,25.5,18.5,1,Workover,Low\nW302,Sand Dunes,Burgan,Middle East,Mature Oil,9200,0,Kuwait Oil Co,Active,2024-08-25,2025-09-10,Producing,5200,1800,4200,1650,45,0,A,2024-08-25,22.8,16.2,2,Sand Control,Low\nW401,Lone Star,Permian Basin,USA,Unconventional,12800,0,ConocoPhillips,Active,2024-11-01,2026-01-05,Producing,850,6500,5200,2100,12,0,A,2024-11-01,8.5,12.8,1,Hydraulic Fracturing,Low\nW402,Eagle Ford,Eagle Ford Shale,USA,Unconventional,13500,0,EOG Resources,Active,2024-09-15,2025-11-20,Producing,920,7200,5800,2350,22,0,A,2024-09-15,9.2,14.5,2,Re-fracturing,Low\nW501,Maple Leaf,Hibernia,Canada Offshore,Cold Environment,16500,260,ExxonMobil,Active,2024-07-12,2025-08-01,Producing,2100,3800,7500,2750,88,1,B+,2024-07-12,16.5,45.2,3,Wellhead Maintenance,Medium\nW502,Northern Light,Terra Nova,Canada Offshore,Harsh Environment,15800,315,Suncor,Active,2024-08-30,2025-07-15,Producing,1850,3200,7100,2600,102,2,B,2024-08-30,14.2,42.8,4,Subsea Equipment,Medium\nW601,Southern Cross,Santos Basin,Brazil,Pre-Salt,18200,6800,Petrobras,Active,2024-06-15,2025-09-30,Producing,4200,5500,11200,4500,142,1,B,2024-06-15,12.8,125.5,5,Deepwater Intervention,High\nW602,Tropical Storm,Campos Basin,Brazil,Deepwater,17500,5200,Shell,Active,2024-09-28,2025-10-25,Producing,3800,4800,10500,4200,78,0,A-,2024-09-28,13.5,98.7,3,Well Integrity Check,Medium\nW701,Aurora Borealis,Sn\xf8hvit,Norway,Arctic Gas,14800,330,Equinor,Active,2024-10-10,2025-12-20,Producing,450,18500,8500,3400,38,0,A,2024-10-10,18.5,56.2,2,Gas Lift Optimization,Low\nW702,Midnight Sun,Johan Sverdrup,Norway,Giant Oil Field,15500,110,Equinor,Active,2024-11-03,2026-03-15,Producing,12500,8200,6800,2200,14,0,A+,2024-11-03,28.5,38.5,1,Inspection,Low\nW801,Wallaby,Gorgon,Australia,LNG Feed,16200,1350,Chevron,Active,2024-07-28,2025-11-10,Producing,680,22000,9800,3800,62,0,A,2024-07-28,16.8,88.5,2,Subsea Tie-in,Medium\nW802,Kangaroo Jump,Browse Basin,Australia,Gas Condensate,17800,2450,Woodside,Active,2024-08-19,2025-08-30,Producing,1250,16500,10200,4100,95,1,B+,2024-08-19,15.2,112.3,4,Flowline Repair,Medium\nW901,Dragon Fire,South China Sea,Asia Pacific,High Pressure,14500,380,CNOOC,Active,2024-09-10,2025-10-05,Producing,2200,6800,8200,3150,72,1,B,2024-09-10,11.5,42.8,3,High Pressure Workover,Medium",QE="Timestamp,Time_Minutes,Depth_ft,WHP_psi,Hookload_kips,Flow_Rate_bpm,Temperature_F,RPM,Torque_ftlbs,Status,Alerts\n2024-11-01 08:00:00,0,0,3200,125,0,72,0,0,Rigging Up,None\n2024-11-01 08:15:00,15,2500,3450,215,12,78,65,2800,Running In,None\n2024-11-01 08:30:00,30,5000,3680,245,15,82,70,3200,Circulating,None\n2024-11-01 08:45:00,45,7500,4100,285,18,88,75,3600,Running In,None\n2024-11-01 09:00:00,60,10000,4500,325,20,95,80,4200,Circulating,None\n2024-11-01 09:15:00,75,12500,7800,395,22,102,85,4800,Running In,High WHP Warning\n2024-11-01 09:30:00,90,14500,5200,365,20,108,78,4400,Circulating,Resolved\n2024-11-01 09:45:00,105,16000,5600,385,25,115,82,4600,Running In,None\n2024-11-01 10:00:00,120,17500,6100,425,28,122,88,5200,At Depth,None\n2024-11-01 10:15:00,135,18000,6450,465,30,128,92,5800,Working Tools,High Hookload Warning\n2024-11-01 10:30:00,150,18200,6800,445,32,132,95,6200,Setting Tools,None\n2024-11-01 10:45:00,165,18500,7200,425,30,135,90,5800,Testing,None\n2024-11-01 11:00:00,180,18500,7500,405,28,138,88,5400,Pulling Out,None\n2024-11-01 11:15:00,195,16000,7100,385,25,132,85,5000,Pulling Out,None\n2024-11-01 11:30:00,210,13500,6600,345,22,125,80,4600,Pulling Out,None\n2024-11-01 11:45:00,225,11000,6100,305,20,118,75,4200,Pulling Out,None\n2024-11-01 12:00:00,240,8500,5500,265,18,110,70,3800,Pulling Out,None\n2024-11-01 12:15:00,255,6000,4900,225,15,102,65,3400,Pulling Out,None\n2024-11-01 12:30:00,270,3500,4200,185,12,95,60,3000,Pulling Out,None\n2024-11-01 12:45:00,285,1000,3600,145,10,88,55,2600,Laid Down Tools,None\n2024-11-01 13:00:00,300,0,3200,95,0,82,0,0,Rigging Down,Complete",eM=e=>{let{showNotification:n,toolString:r,wellData:i,setWellData:a,wellboreData:o,setWellboreData:s}=e;const[c,u]=(0,t.useState)([]),[d,h]=(0,t.useState)(""),[p,f]=(0,t.useState)(!1),m=(0,t.useRef)(null),[g,v]=(0,t.useState)(!0),[x,y]=(0,t.useState)(!0),[b,w]=(0,t.useState)(.108),[_,S]=(0,t.useState)(o.tubingDepth),[E,T]=(0,t.useState)("W101"),[N,C]=(0,t.useState)(null),[A,j]=(0,t.useState)(null),[P,O]=(0,t.useState)("image/jpeg"),k=(0,t.useRef)(null),[R,D]=(0,t.useState)([]),[L,I]=(0,t.useState)([]),[U,F]=(0,t.useState)("Depth_ft"),[B,z]=(0,t.useState)(null),H=(0,t.useRef)(null);(0,t.useEffect)(()=>{S(o.tubingDepth)},[o.tubingDepth]),(0,t.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.scrollTo(0,m.current.scrollHeight)},[c]),(0,t.useEffect)(()=>{const e=QE.trim().split("\n"),t=e[0].split(",").map(e=>e.trim()),n=e.slice(1).map(e=>{const n=e.split(","),r={};return t.forEach((e,t)=>{var i;const a=null===(i=n[t])||void 0===i?void 0:i.trim(),o=parseFloat(a);r[e]=isNaN(o)?a:o}),r});D(n);const r=t.filter(e=>"Time_Minutes"!==e&&"Timestamp"!==e&&"Status"!==e&&"Alerts"!==e);I(r),r.length>0&&F(r[0])},[]);const V=(0,t.useMemo)(()=>{const e=o.fluidDensity,t=(65.5-e)/65.5;let n=0,a=0;r.forEach(e=>{n+=e.weight,e.maxOD>a&&(a=e.maxOD)});const s=n*t,l=2.67*Math.pow(b,2),c=l*_,u=c*t,d=Math.PI*Math.pow(b/2,2),h=i.whp*d,p=s+u-h,f=.052*e*_,m=(o.bottomHoleTemp-o.surfaceTemp)/o.tubingDepth,g=o.surfaceTemp+m*_,v=Math.min(i.tubingID||99,i.nippleID||99);return{bf:t,totalAirWeight:n,buoyedStringWeight:s,wireWeightPerFt:l,totalWireWeightAir:c,surfaceTension:p,hydrostaticPressure:f,maxToolOD:a,tempAtDepth:g,pressureAreaForce:h,minClearance:v-a}},[r,o,b,_,i]),W=async(e,t)=>{if(p)return;const a=t||e||(A?"Analyze attached image":"");if(!a&&!A)return;const s=[...c,{author:"user",text:a,image:A?"data:".concat(P,";base64,").concat(A):void 0,timestamp:new Date}];u(s),t||h(""),f(!0);const l=A,d=P;j(null),k.current&&(k.current.value="");try{const t=new Qb({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_KEY),n=Object.values(VE).map(e=>"- ID: ".concat(e.id,", Name: ").concat(e.name,", OD: ").concat(e.maxOD,'", Weight: ').concat(e.weight,"lbs, Top: ").concat(e.topConnection,", Bot: ").concat(e.bottomConnection)).join("\n"),a=r.length>0?r.map((e,t)=>"".concat(t+1,". ").concat(e.name," (OD: ").concat(e.maxOD,'", Wt: ').concat(e.weight,"lbs)")).join("\n"):"Empty String",c="You are an expert well intervention analyst. Your task is to answer questions based *only* on the data provided below. If the answer cannot be found in the data, state that clearly.\n\n            **Available Component Database (Internal):**\n            You may suggest replacing components using ONLY items from this list:\n            ".concat(n,"\n\n            **Current Tool String Assembly:**\n            ").concat(a,"\n\n            **Wellbore Constraints & Geometry:**\n            - Tubing ID: ").concat(i.tubingID,'"\n            - Min Nipple ID: ').concat(i.nippleID,'"\n            - WHP: ').concat(i.whp," psi\n            - Casing: ").concat(o.casingOD,'" OD / ').concat(o.casingID,'" ID\n            - Tubing Depth: ').concat(o.tubingDepth," ft\n            - Wire OD: ").concat(b,'"\n            - Calculation Target Depth: ').concat(_," ft\n            - Selected Well: ").concat(E," ").concat(N?"(".concat(N.Well_Name,")"):"","\n\n            **Fluid & Environment Properties:**\n            - Fluid Type: ").concat(o.fluidType,"\n            - Fluid Density: ").concat(o.fluidDensity," ppg\n            - Viscosity: ").concat(o.viscosity," cP\n            - Surface Temp: ").concat(o.surfaceTemp," F\n            - Bottom Hole Temp: ").concat(o.bottomHoleTemp," F\n\n            **Dataset 1: Well Portfolio Data**\n            ```csv\n            ").concat($E,"\n            ```\n\n            **Dataset 2: Live Intervention Data for a specific operation**\n            ```csv\n            ").concat(QE,"\n            ```\n\n            **Dataset 3: Equipment & Tools Catalog (Rental/External)**\n            ```csv\n            ").concat('Equipment_ID,Category,Item_Name,Vendor,Daily_Rate_USD,Mobilization_USD,Demobilization_USD,Standby_Rate_USD,Min_Rental_Days,Specifications,Typical_Use\nEQ-001,Wireline Unit,Slickline Unit,Schlumberger,8500,25000,15000,4250,3,"Max depth 20000ft, 0.092in line",Gauge runs, plug setting, fishing\nEQ-002,Wireline Unit,E-line Unit,Halliburton,12000,35000,20000,6000,3,"Max depth 25000ft, 7-conductor",Perforating, logging, setting tools\nEQ-003,Coiled Tubing,CT Unit 1.5in,Baker Hughes,18000,45000,25000,9000,5,"1.5in OD, 15000ft capacity",Scale removal, chemical treatment\nEQ-004,Coiled Tubing,CT Unit 2.0in,Archer,22000,50000,28000,11000,5,"2.0in OD, 18000ft capacity",Heavy duty cleanout, milling\nEQ-005,Pumping,Cement Unit,Weatherford,15000,30000,18000,7500,2,"2x 2000hp pumps, mixing",Squeeze jobs, plug & abandon\nEQ-006,Pumping,Frac Spread (Small),Liberty,25000,60000,35000,12500,7,"5x 2500hp, 50bpm total",Acid stimulation, small fracs\nEQ-007,Well Control,Snubbing Unit,Cudd,20000,40000,22000,10000,3,"500k lbs capacity, HPHT rated",Live well interventions\nEQ-008,Testing,Well Test Separator,Expro,8000,20000,12000,4000,3,"3-phase, 10000psi rating",Production testing, cleanup\nEQ-009,Lifting,Hydraulic Workover Unit,Key Energy,16000,35000,20000,8000,5,"350k lbs, self-contained",Rigless interventions\nEQ-010,Completion,Completion Riser,Subsea 7,12000,50000,30000,6000,7,"18000ft WD rated, XT",Subsea completions\nEQ-011,Barriers,IWOCS System,Aker Solutions,10000,40000,25000,5000,5,"Dual barrier, remote operated",Through-tubing operations\nEQ-012,Tools,BOP Stack (Surface),Cameron,5000,15000,10000,2500,3,"15000psi, 5-1/8 bore",Well control operations\nTOOL-001,Mechanical,Expandable Patch 7in,Enventure,0,45000,0,0,0,"60ft length, 9-5/8 casing",Casing repair\nTOOL-002,Mechanical,Expandable Patch 9in,Enventure,0,55000,0,0,0,"80ft length, 13-3/8 casing",Large bore casing repair\nTOOL-003,Chemical,DTPA Scale Dissolver,Champion X,0,8500,0,0,0,"15% solution, 500gal batch",BaSO4 scale removal\nTOOL-004,Chemical,HCl Acid 15%,Nalco,0,3200,0,0,0,"15% HCl, 1000gal batch",CaCO3 scale removal\nTOOL-005,Chemical,Wax Solvent,Baker Hughes,0,6800,0,0,0,"Heated aromatic, 300gal",Paraffin removal\nTOOL-006,Safety Valve,TRSSV Insert Valve,Halliburton,0,28000,0,0,0,"2-7/8 tubing, flapper type",Subsurface safety\nTOOL-007,Safety Valve,SSSV Insert Valve,Baker Hughes,0,32000,0,0,0,"3-1/2 tubing, ball type",Surface controlled safety\nTOOL-008,Fishing,Overshot & Jars,Schlumberger,1200,5000,2000,600,2,"6in OD, 150k lbs pull",Stuck pipe fishing\nTOOL-009,Fishing,Spear & Intensifier,Halliburton,1500,6000,2500,750,2,"Internal catch, 200k lbs",Tubing fishing\nTOOL-010,Milling,Junk Mill 6in,Baker Hughes,800,3500,1500,400,1,"6in OD, carbide inserts",Metal debris removal\nTOOL-011,Milling,Section Mill 7in,Weatherford,1200,4500,2000,600,1,"7in OD, aggressive",Casing milling\nTOOL-012,Cutting,Mechanical Cutter 4.5in,Archer,600,2500,1000,300,1,"4-1/2 tubing, hydraulic",Tubing cutting\nTOOL-013,Sand Control,Expandable Screen 4in,Halliburton,0,38000,0,0,0,"4in base, 200 mesh",Through-tubing sand control\nTOOL-014,Sand Control,Wire-Wrapped Screen 5.5in,Baker Hughes,0,42000,0,0,0,"5-1/2 OD, premium connection",Gravel pack screen\nTOOL-015,Perforation,TCP Guns 3-3/8in,Schlumberger,0,15000,0,0,0,"60 SPF, 0\xb0 phasing, DP",Through-tubing perforating\nTOOL-016,Perforation,Big Hole Guns 4.5in,Halliburton,0,22000,0,0,0,"20 SPF, 0\xb0 phasing, HC",Casing perforating\nTOOL-017,Packer,Production Packer 7in,Baker Hughes,0,18000,0,0,0,"Permanent, 10k psi diff",Zonal isolation\nTOOL-018,Packer,Retrievable Packer 5.5in,Weatherford,0,12000,0,0,0,"Mechanical set, retrievable",Temporary isolation\nTOOL-019,Plugs,Bridge Plug 7in,Halliburton,0,8500,0,0,0,"Composite, drillable",Temporary barrier\nTOOL-020,Plugs,Cement Retainer 4.5in,Baker Hughes,0,6500,0,0,0,"Mechanical, 5000psi",Squeeze operations\nCONSUMABLE-001,Fluids,Completion Brine,Tetra,0,12000,0,0,0,"CaCl2, 11.6 ppg, 500bbl",Completion fluid\nCONSUMABLE-002,Fluids,Kill Fluid,Baker Hughes,0,18000,0,0,0,"CaCl2/CaBr2, 14.2 ppg, 750bbl",Well control\nCONSUMABLE-003,Fluids,Spacer Fluid,Halliburton,0,8500,0,0,0,"Surfactant, 9.5 ppg, 200bbl",Cement operations\nCONSUMABLE-004,Cement,Class G Cement,Schlumberger,0,15000,0,0,0,"15.8 ppg, 200 sacks",Plugging, squeeze\nCONSUMABLE-005,Cement,Lightweight Cement,Halliburton,0,18000,0,0,0,"12.5 ppg, microspheres, 150 sacks",Low pressure zones',"\n            ```\n\n            **Current Physics Context (Calculated at ").concat(_," ft):**\n            - Total String Weight (Air): ").concat(V.totalAirWeight.toFixed(1)," lbs\n            - Buoyancy Factor: ").concat(V.bf.toFixed(3),"\n            - Buoyed String Weight: ").concat(V.buoyedStringWeight.toFixed(1)," lbs\n            - Total Wire Weight (Air): ").concat(V.totalWireWeightAir.toFixed(0)," lbs\n            - Pressure Area Force (WHP): ").concat(V.pressureAreaForce.toFixed(0)," lbs\n            - Surface Tension (Net Hook Load): ").concat(V.surfaceTension.toFixed(0)," lbs\n            - Hydrostatic Pressure: ").concat(V.hydrostaticPressure.toFixed(0)," psi\n            - Est. Temp at Depth: ").concat(V.tempAtDepth.toFixed(1)," F\n            - Max Tool OD: ").concat(V.maxToolOD,' inches\n\n            ---\n            User Request: "').concat(e,'"\n            ').concat(l?"Note: An image has been provided. Please prioritize extracting component dimensions, connection types, and identifying any visible damage or wear from the image for detailed analysis.":"","\n            \n            Please provide a concise and accurate answer based on the data."),h=l?"gemini-1.5-pro":"gemini-pro",p=t.getGenerativeModel({model:h});let f;f=l?[c,{inlineData:{mimeType:d,data:l}}]:c;const m=(await p.generateContent(f)).response.text();u([...s,{author:"model",text:m,timestamp:new Date}])}catch(m){console.error(m),n("Failed to get response from AI assistant.","error"),u([...s,{author:"model",text:"Sorry, I encountered an error. Please try again.",timestamp:new Date}])}finally{f(!1)}},G=()=>{(d.trim()||A)&&W(d)},X=e=>{let t="",n="";switch(e){case"weight":n="Optimize string for Weight",t="Analyze the current tool string configuration for weight optimization.\nCurrent Total Weight: ".concat(V.totalAirWeight.toFixed(1)," lbs.\nRequired Weight for WHP (").concat(i.whp," psi): ").concat(V.pressureAreaForce.toFixed(0)," lbs.\n\n1. Determine if the string is Overbalanced (Weight > Force) or Underbalanced.\n2. If Overbalanced: Suggest lighter components from the 'Available Component Database' (e.g., Steel Stem vs Leaded, shorter lengths) to reduce weight while maintaining safety margin (>0).\n3. If Underbalanced: Suggest heavier components (e.g., Leaded Stem, Tungsten if avail, or longer bars) to overcome WHP.\n4. Calculate specific weight savings or additions.");break;case"clearance":n="Optimize string for Clearance",t="Analyze the current tool string for annular clearance.\nMax Tool OD: ".concat(V.maxToolOD,'".\nMin Nipple ID: ').concat(i.nippleID,'".\nTubing ID: ').concat(i.tubingID,"\".\n\n1. Calculate the minimum clearance (Restriction ID - Max Tool OD).\n2. Identify the component(s) with the largest OD.\n3. Suggest specific replacements from the 'Available Component Database' with smaller ODs to increase bypass area.\n4. Verify that suggested replacements are compatible with adjacent connections.");break;case"safety":n="Run Safety & Compatibility Check",t="Perform a comprehensive safety and compatibility check on the 'Current Tool String Assembly'.\n1. **Clearance Check**: Compare Max Tool OD (".concat(V.maxToolOD,'") against Min Nipple ID (').concat(i.nippleID,'") and Tubing ID (').concat(i.tubingID,'").\n2. **Force Balance**: Check if Total String Weight (').concat(V.totalAirWeight.toFixed(1)," lbs) > Pressure Area Force (").concat(V.pressureAreaForce.toFixed(0)," lbs) at ").concat(i.whp," psi.\n3. **Connection Logic**: Verify the assembly sequence (Socket -> Stem -> Jar -> Tool) and check for obvious connection mismatches (e.g., Pin to Pin).\n4. **Length**: Check if the total length (").concat(r.reduce((e,t)=>e+t.length,0).toFixed(1)," ft) fits standard surface lubricator constraints (assume 20ft limit).\n5. **Strength**: Identify if any 'weak points' (like shear pins) are positioned correctly.")}W(t,n)};return(0,M.jsxs)("div",{className:"flex flex-col h-full",children:[(0,M.jsx)("h2",{className:"text-xl font-semibold text-white mb-2 border-b border-gray-600 pb-2",children:"AI & Physics Assistant"}),(0,M.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md mb-3 border border-gray-700 shadow-sm",children:[(0,M.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,M.jsx)("input",{type:"text",value:E,onChange:e=>T(e.target.value),placeholder:"Enter Well ID",className:"flex-1 bg-gray-700 border border-gray-600 rounded px-3 py-1 text-sm text-white focus:ring-1 focus:ring-cyan-500 outline-none"}),(0,M.jsx)("button",{onClick:()=>{if(!E.trim())return;const e=$E.trim().split("\n"),t=e[0].split(",").map(e=>e.trim()),r=t.indexOf("Well_ID");if(-1===r)return;const i=e.slice(1).find(e=>e.split(",")[r].trim()===E.trim());if(i){const e=i.split(",").map(e=>e.trim()),r={};if(t.forEach((t,n)=>{r[t]=e[n]}),C(r),n("Loaded data for ".concat(r.Well_Name),"success"),r.Wellhead_Pressure_psi&&a(e=>l(l({},e),{},{whp:parseFloat(r.Wellhead_Pressure_psi)})),r.Total_Depth_ft){const e=parseFloat(r.Total_Depth_ft);s(t=>l(l({},t),{},{tubingDepth:e})),S(e)}}else n("Well ID not found in portfolio.","error"),C(null)},className:"bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold py-1 px-3 rounded transition-colors",children:"Fetch Well Data"})]}),N&&(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-xs text-gray-300 bg-gray-700/30 p-2 rounded border border-gray-600/50",children:[(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("span",{className:"text-gray-500",children:"Name:"})," ",(0,M.jsx)("span",{className:"font-medium text-white",children:N.Well_Name})]}),(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("span",{className:"text-gray-500",children:"Field:"})," ",(0,M.jsx)("span",{className:"font-medium text-white",children:N.Field})]}),(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("span",{className:"text-gray-500",children:"Operator:"})," ",(0,M.jsx)("span",{className:"font-medium text-white",children:N.Operator})]}),(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("span",{className:"text-gray-500",children:"Type:"})," ",(0,M.jsx)("span",{className:"font-medium text-white",children:N.Type})]}),(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("span",{className:"text-gray-500",children:"Status:"})," ",(0,M.jsx)("span",{className:"font-medium ".concat("Active"===N.Status?"text-green-400":"text-yellow-400"),children:N.Status})]}),(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("span",{className:"text-gray-500",children:"Production:"})," ",(0,M.jsx)("span",{className:"font-medium text-white",children:N.Production_Status})]}),(0,M.jsxs)("div",{className:"flex justify-between col-span-2 border-t border-gray-600/30 pt-1 mt-1",children:[(0,M.jsx)("span",{className:"text-gray-500",children:"Total Depth:"})," ",(0,M.jsxs)("span",{className:"font-medium text-cyan-400",children:[N.Total_Depth_ft," ft"]})]})]})]}),(0,M.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[(0,M.jsx)("button",{onClick:()=>X("weight"),disabled:p||0===r.length,className:"bg-gray-700 hover:bg-cyan-700 hover:text-white text-cyan-400 text-xs py-2 px-1 rounded border border-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Optimize Weight"}),(0,M.jsx)("button",{onClick:()=>X("clearance"),disabled:p||0===r.length,className:"bg-gray-700 hover:bg-cyan-700 hover:text-white text-cyan-400 text-xs py-2 px-1 rounded border border-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Max Clearance"}),(0,M.jsx)("button",{onClick:()=>X("safety"),disabled:p||0===r.length,className:"bg-gray-700 hover:bg-green-700 hover:text-white text-green-400 text-xs py-2 px-1 rounded border border-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Safety Check"})]}),(0,M.jsxs)("div",{className:"bg-gray-700 rounded-md mb-3 overflow-hidden border border-gray-600",children:[(0,M.jsxs)("button",{onClick:()=>v(!g),className:"w-full px-4 py-2 text-left text-sm font-semibold text-cyan-400 bg-gray-800 hover:bg-gray-750 flex justify-between items-center transition-colors",children:[(0,M.jsxs)("span",{className:"flex items-center gap-2",children:[(0,M.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Real-Time Physics Analysis"]}),(0,M.jsx)("span",{className:"text-gray-500 text-xs",children:g?"\u25b2":"\u25bc"})]}),g&&(0,M.jsxs)("div",{className:"p-4 bg-gray-800/50 backdrop-blur-sm",children:[(0,M.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Tubing ID (in)"}),(0,M.jsx)("input",{type:"number",value:i.tubingID,onChange:e=>a(t=>l(l({},t),{},{tubingID:parseFloat(e.target.value)||0})),step:"0.125",className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-cyan-500 outline-none"})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"WHP (psi)"}),(0,M.jsx)("input",{type:"number",value:i.whp,onChange:e=>a(t=>l(l({},t),{},{whp:parseFloat(e.target.value)||0})),step:"100",className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-cyan-500 outline-none"})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Fluid Density (ppg)"}),(0,M.jsx)("input",{type:"number",value:o.fluidDensity,onChange:e=>s(t=>l(l({},t),{},{fluidDensity:parseFloat(e.target.value)||0})),step:"0.1",className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-cyan-500 outline-none"})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Wire OD (in)"}),(0,M.jsx)("input",{type:"number",value:b,onChange:e=>w(parseFloat(e.target.value)||0),step:"0.001",className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-cyan-500 outline-none"})]}),(0,M.jsxs)("div",{className:"col-span-2",children:[(0,M.jsx)("label",{className:"block text-xs font-medium text-gray-400 mb-1",children:"Target Depth (ft)"}),(0,M.jsx)("input",{type:"number",value:_,onChange:e=>S(parseFloat(e.target.value)||0),className:"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-cyan-500 outline-none"})]})]}),(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 text-xs border-t border-gray-600 pt-3",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)("span",{className:"text-gray-400",children:"Fluid Type:"}),(0,M.jsx)("span",{className:"text-white font-mono",children:o.fluidType})]}),(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)("span",{className:"text-gray-400",children:"Buoyancy Factor:"}),(0,M.jsx)("span",{className:"text-cyan-400 font-mono",children:V.bf.toFixed(3)})]}),(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)("span",{className:"text-gray-400",children:"Buoyed String Wt:"}),(0,M.jsxs)("span",{className:"text-white font-mono",children:[V.buoyedStringWeight.toFixed(1)," lbs"]})]}),(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)("span",{className:"text-gray-400",children:"Hydrostatic Pres:"}),(0,M.jsxs)("span",{className:"text-white font-mono",children:[V.hydrostaticPressure.toFixed(0)," psi"]})]}),(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)("span",{className:"text-gray-400",children:"Temp @ Depth:"}),(0,M.jsxs)("span",{className:"text-white font-mono",children:[V.tempAtDepth.toFixed(1)," F"]})]}),(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)("span",{className:"text-gray-400",children:"Pressure Area Force:"}),(0,M.jsxs)("span",{className:"text-red-400 font-mono",children:[V.pressureAreaForce.toFixed(0)," lbs"]})]}),(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)("span",{className:"text-gray-400",children:"Min Clearance:"}),(0,M.jsxs)("span",{className:"font-mono ".concat(V.minClearance<.05?"text-red-400":"text-green-400"),children:[V.minClearance.toFixed(3),'"']})]}),(0,M.jsxs)("div",{className:"col-span-2 mt-2 pt-2 border-t border-gray-700 flex justify-between items-center bg-gray-700/30 p-2 rounded",children:[(0,M.jsx)("span",{className:"text-gray-300 font-medium",children:"Net Hook Load @ TD:"}),(0,M.jsxs)("span",{className:"font-bold text-sm ".concat(V.surfaceTension<0?"text-red-500":"text-green-400"),children:[V.surfaceTension.toFixed(0)," lbs"]})]})]})]})]}),(0,M.jsxs)("div",{className:"bg-gray-700 rounded-md mb-3 overflow-hidden border border-gray-600",children:[(0,M.jsxs)("button",{onClick:()=>y(!x),className:"w-full px-4 py-2 text-left text-sm font-semibold text-cyan-400 bg-gray-800 hover:bg-gray-750 flex justify-between items-center transition-colors",children:[(0,M.jsxs)("span",{className:"flex items-center gap-2",children:[(0,M.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"Live Intervention Monitor"]}),(0,M.jsx)("span",{className:"text-gray-500 text-xs",children:x?"\u25b2":"\u25bc"})]}),x&&(0,M.jsxs)("div",{className:"p-4 bg-gray-800/50 backdrop-blur-sm",children:[(0,M.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,M.jsx)("label",{className:"text-xs font-medium text-gray-400 mr-2",children:"Metric:"}),(0,M.jsx)("select",{value:U,onChange:e=>F(e.target.value),className:"bg-gray-700 border border-gray-600 rounded px-2 py-1 text-white text-xs focus:ring-1 focus:ring-cyan-500 outline-none flex-1 cursor-pointer hover:bg-gray-600 transition-colors",children:L.map(e=>(0,M.jsx)("option",{value:e,children:e.replace(/_/g," ")},e))})]}),(0,M.jsx)("div",{className:"h-40 w-full mt-2 bg-gray-900/50 rounded border border-gray-700 relative pl-6 pr-2 pt-2 pb-2",children:(()=>{if(!R||0===R.length)return(0,M.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500 text-xs",children:"No data available"});const e=R.map(e=>({x:e.Time_Minutes,y:e[U]}));if(e.some(e=>isNaN(e.x)||isNaN(e.y)))return(0,M.jsx)("div",{className:"text-gray-500 text-xs p-4",children:"Invalid data for chart."});const t=Math.max(...e.map(e=>e.x)),n=Math.min(...e.map(e=>e.x)),r=Math.max(...e.map(e=>e.y)),i=Math.min(...e.map(e=>e.y)),a=e=>(e-n)/(t-n||1)*100,o=e=>100-(e-i)/(r-i||1)*100,s=e.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(a(e.x)," ").concat(o(e.y))).join(" ");return(0,M.jsxs)("div",{ref:H,className:"w-full h-full relative group cursor-crosshair",onMouseMove:r=>{if(!H.current)return;const i=H.current.getBoundingClientRect(),s=(r.clientX-i.left)/i.width*100/100*(t-n)+n,l=e.reduce((e,t)=>Math.abs(t.x-s)<Math.abs(e.x-s)?t:e);z({time:l.x,value:l.y,xPerc:a(l.x),yPerc:o(l.y)})},onMouseLeave:()=>{z(null)},children:[(0,M.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"overflow-visible absolute inset-0",children:[(0,M.jsx)("line",{x1:"25",y1:"0",x2:"25",y2:"100",stroke:"#374151",strokeWidth:"0.2"}),(0,M.jsx)("line",{x1:"50",y1:"0",x2:"50",y2:"100",stroke:"#374151",strokeWidth:"0.2"}),(0,M.jsx)("line",{x1:"75",y1:"0",x2:"75",y2:"100",stroke:"#374151",strokeWidth:"0.2"}),(0,M.jsx)("line",{x1:"0",y1:"25",x2:"100",y2:"25",stroke:"#374151",strokeWidth:"0.2",vectorEffect:"non-scaling-stroke"}),(0,M.jsx)("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"#374151",strokeWidth:"0.2",vectorEffect:"non-scaling-stroke"}),(0,M.jsx)("line",{x1:"0",y1:"75",x2:"100",y2:"75",stroke:"#374151",strokeWidth:"0.2",vectorEffect:"non-scaling-stroke"}),(0,M.jsx)("path",{d:s,fill:"none",stroke:"#22d3ee",strokeWidth:"2",vectorEffect:"non-scaling-stroke"})]}),(0,M.jsxs)("div",{className:"absolute left-0 top-0 bottom-0 flex flex-col justify-between text-[9px] text-gray-500 pointer-events-none pr-1",style:{transform:"translateX(-100%)"},children:[(0,M.jsx)("span",{children:r.toFixed(0)}),(0,M.jsx)("span",{children:((r+i)/2).toFixed(0)}),(0,M.jsx)("span",{children:i.toFixed(0)})]}),B&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{className:"absolute top-0 bottom-0 w-px bg-white/50 pointer-events-none border-r border-dashed border-white/30",style:{left:"".concat(B.xPerc,"%")}}),(0,M.jsx)("div",{className:"absolute w-3 h-3 bg-cyan-500 rounded-full border-2 border-white pointer-events-none shadow-md",style:{left:"".concat(B.xPerc,"%"),top:"".concat(B.yPerc,"%"),transform:"translate(-50%, -50%)"}}),(0,M.jsxs)("div",{className:"absolute z-20 bg-gray-900/90 backdrop-blur-md border border-gray-600 rounded p-2 text-xs text-white shadow-xl pointer-events-none min-w-[120px]",style:{left:(B.xPerc,"".concat(B.xPerc,"%")),top:"".concat(B.yPerc,"%"),transform:B.xPerc>50?"translate(-105%, -50%)":"translate(10px, -50%)"},children:[(0,M.jsx)("div",{className:"font-bold text-cyan-400 mb-1 border-b border-gray-700 pb-1",children:U.replace(/_/g," ")}),(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 gap-y-0.5 text-[10px]",children:[(0,M.jsx)("span",{className:"text-gray-400",children:"Time:"}),(0,M.jsxs)("span",{className:"font-mono text-right",children:[B.time," min"]}),(0,M.jsx)("span",{className:"text-gray-400",children:"Value:"}),(0,M.jsx)("span",{className:"font-mono text-right",children:B.value.toFixed(1)})]})]})]})]})})()}),(0,M.jsxs)("div",{className:"flex justify-between mt-1 text-[10px] text-gray-500 pl-6",children:[(0,M.jsx)("span",{children:"0 min"}),(0,M.jsx)("span",{children:"Time (Minutes)"}),(0,M.jsxs)("span",{children:[R.length>0?R[R.length-1].Time_Minutes:"End"," min"]})]})]})]}),(0,M.jsxs)("div",{ref:m,className:"flex-1 overflow-y-auto space-y-4 p-2 pr-4 bg-gray-800 rounded-md",children:[0===c.length&&(0,M.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 space-y-2",children:[(0,M.jsx)("svg",{className:"w-12 h-12 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),(0,M.jsx)("p",{className:"text-sm",children:"Ask about well data, equipment, or physics analysis."}),(0,M.jsx)("p",{className:"text-xs text-gray-600",children:"You can also upload schematic images."})]}),c.map((e,t)=>(0,M.jsx)("div",{className:"flex flex-col ".concat("user"===e.author?"items-end":"items-start"," mb-2 group"),children:(0,M.jsxs)("div",{className:"relative max-w-[85%]",children:[(0,M.jsxs)("div",{className:"absolute -top-6 ".concat("user"===e.author?"right-0":"left-0"," \n                                bg-gray-900 text-gray-300 text-[10px] py-1 px-2 rounded border border-gray-700 \n                                opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-10 shadow-lg"),children:[(0,M.jsx)("span",{className:"font-bold text-white",children:"user"===e.author?"User":"AI Assistant"})," \u2022 ",e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,M.jsxs)("div",{className:"p-3 rounded-lg shadow-sm ".concat("user"===e.author?"bg-cyan-700 text-white rounded-br-none":"bg-gray-600 text-gray-100 rounded-bl-none"),children:[e.image&&(0,M.jsx)("img",{src:e.image,alt:"User uploaded",className:"max-w-full h-auto rounded mb-2 border border-white/20",style:{maxHeight:"200px"}}),(0,M.jsx)("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:e.text})]})]})},t)),p&&(0,M.jsx)("div",{className:"flex justify-start",children:(0,M.jsx)("div",{className:"bg-gray-600 p-3 rounded-lg rounded-bl-none shadow-sm",children:(0,M.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,M.jsx)("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce"}),(0,M.jsx)("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.15s"}}),(0,M.jsx)("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.3s"}})]})})})]}),A&&(0,M.jsxs)("div",{className:"px-2 pt-2 pb-1 flex items-center gap-2",children:[(0,M.jsxs)("div",{className:"relative group",children:[(0,M.jsx)("img",{src:"data:".concat(P,";base64,").concat(A),alt:"Preview",className:"h-16 w-16 object-cover rounded border border-gray-500"}),(0,M.jsx)("button",{onClick:()=>{j(null),k.current&&(k.current.value="")},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:"\xd7"})]}),(0,M.jsx)("span",{className:"text-xs text-cyan-400",children:"Image attached for analysis"})]}),(0,M.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,M.jsx)("input",{type:"file",ref:k,onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!n)return;const r=new FileReader;r.onloadend=()=>{const e=r.result.match(/^data:(.+);base64,(.+)$/);e&&(O(e[1]),j(e[2]))},r.readAsDataURL(n)},accept:"image/*",className:"hidden"}),(0,M.jsx)("button",{onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.click()},className:"bg-gray-700 hover:bg-gray-600 text-gray-300 px-3 rounded-md border border-gray-600 transition-colors",title:"Upload Image",children:(0,M.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,M.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),G())},placeholder:A?"Ask about the image...":"Type your question...",className:"flex-1 bg-gray-700 border border-gray-600 rounded-md shadow-sm p-3 text-white resize-none text-sm focus:ring-2 focus:ring-cyan-500 focus:outline-none placeholder-gray-500",rows:1,disabled:p,style:{minHeight:"44px",maxHeight:"120px"}}),(0,M.jsx)("button",{onClick:G,disabled:p||!d.trim()&&!A,className:"bg-cyan-600 hover:bg-cyan-700 text-white px-4 rounded-md font-medium transition-colors duration-200 disabled:bg-gray-600 disabled:cursor-not-allowed text-sm flex items-center justify-center shadow-md",children:(0,M.jsx)("svg",{className:"w-5 h-5 transform rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})},tM=e=>{let{tabId:t,activeTab:n,onClick:r,children:i}=e;const a=n===t;return(0,M.jsx)("button",{className:"px-4 py-2 text-sm font-medium rounded-t-lg transition-all duration-200 ".concat(a?"bg-gray-700 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-white"),onClick:()=>r(t),children:i})},nM=e=>{const[n,r]=(0,t.useState)(G.Components);return(0,M.jsxs)("div",{className:"md:col-span-1 bg-gray-800 rounded-lg shadow-lg p-4 overflow-y-auto flex flex-col",children:[(0,M.jsxs)("div",{className:"flex border-b border-gray-700 mb-4",children:[(0,M.jsx)(tM,{tabId:G.Components,activeTab:n,onClick:r,children:"Components"}),(0,M.jsx)(tM,{tabId:G.Wellbore,activeTab:n,onClick:r,children:"Wellbore"}),(0,M.jsx)(tM,{tabId:G.Survey,activeTab:n,onClick:r,children:"Survey"}),(0,M.jsx)(tM,{tabId:G.AIAssistant,activeTab:n,onClick:r,children:"AI Assistant"})]}),n===G.Components&&(0,M.jsx)(qE,{wellData:e.wellData,setWellData:e.setWellData,onAddComponent:e.onAddComponent}),n===G.Wellbore&&(0,M.jsx)(KE,{wellboreData:e.wellboreData,setWellboreData:e.setWellboreData,showNotification:e.showNotification}),n===G.Survey&&(0,M.jsx)(JE,{surveyData:e.surveyData,setSurveyData:e.setSurveyData,showNotification:e.showNotification}),n===G.AIAssistant&&(0,M.jsx)(eM,{showNotification:e.showNotification,toolString:e.toolString,wellData:e.wellData,setWellData:e.setWellData,wellboreData:e.wellboreData,setWellboreData:e.setWellboreData})]})},rM="158",iM=0,aM=1,oM=2,sM=0,lM=1,cM=2,uM=3,dM=0,hM=1,pM=2,fM=100,mM=101,gM=102,vM=200,xM=201,yM=202,bM=203,wM=204,_M=205,SM=206,EM=207,MM=208,TM=209,NM=210,CM=211,AM=212,jM=213,PM=214,OM=301,kM=302,RM=303,DM=304,LM=306,IM=1e3,UM=1001,FM=1002,BM=1003,zM=1004,HM=1005,VM=1006,WM=1007,GM=1008,XM=1009,qM=1012,YM=1013,KM=1014,ZM=1015,JM=1016,$M=1020,QM=1023,eT=1026,tT=1027,nT=33776,rT=33777,iT=33778,aT=33779,oT=36492,sT=2300,lT=2301,cT=2302,uT=2400,dT=2401,hT=2402,pT=3001,fT="",mT="srgb",gT="srgb-linear",vT="display-p3",xT="display-p3-linear",yT="linear",bT="srgb",wT="rec709",_T="p3",ST=7680,ET=512,MT=513,TT=514,NT=515,CT=516,AT=517,jT=518,PT=519,OT=35044,kT="300 es",RT=1035,DT=2e3,LT=2001;class IT{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const UT=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const FT=Math.PI/180,BT=180/Math.PI;function zT(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(UT[255&e]+UT[e>>8&255]+UT[e>>16&255]+UT[e>>24&255]+"-"+UT[255&t]+UT[t>>8&255]+"-"+UT[t>>16&15|64]+UT[t>>24&255]+"-"+UT[63&n|128]+UT[n>>8&255]+"-"+UT[n>>16&255]+UT[n>>24&255]+UT[255&r]+UT[r>>8&255]+UT[r>>16&255]+UT[r>>24&255]).toLowerCase()}function HT(e,t,n){return Math.max(t,Math.min(n,e))}function VT(e,t){return(e%t+t)%t}function WT(e,t,n){return(1-n)*e+n*t}function GT(e){return 0===(e&e-1)&&0!==e}function XT(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function qT(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function YT(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const KT=FT;class ZT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ZT.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(HT(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class JT{constructor(e,t,n,r,i,a,o,s,l){JT.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l)}set(e,t,n,r,i,a,o,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],x=r[4],y=r[7],b=r[2],w=r[5],_=r[8];return i[0]=a*f+o*v+s*b,i[3]=a*m+o*x+s*w,i[6]=a*g+o*y+s*_,i[1]=l*f+c*v+u*b,i[4]=l*m+c*x+u*w,i[7]=l*g+c*y+u*_,i[2]=d*f+h*v+p*b,i[5]=d*m+h*x+p*w,i[8]=d*g+h*y+p*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8];return t*a*c-t*o*l-n*i*c+n*o*s+r*i*l-r*a*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=c*a-o*l,d=o*s-c*i,h=l*i-a*s,p=t*u+n*d+r*h;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(o*n-r*a)*f,e[3]=d*f,e[4]=(c*t-r*s)*f,e[5]=(r*i-o*t)*f,e[6]=h*f,e[7]=(n*s-l*t)*f,e[8]=(a*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,o){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply($T.makeScale(e,t)),this}rotate(e){return this.premultiply($T.makeRotation(-e)),this}translate(e,t){return this.premultiply($T.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const $T=new JT;function QT(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function eN(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function tN(){const e=eN("canvas");return e.style.display="block",e}const nN={};function rN(e){e in nN||(nN[e]=!0,console.warn(e))}const iN=(new JT).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),aN=(new JT).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),oN={[gT]:{transfer:yT,primaries:wT,toReference:e=>e,fromReference:e=>e},[mT]:{transfer:bT,primaries:wT,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[xT]:{transfer:yT,primaries:_T,toReference:e=>e.applyMatrix3(aN),fromReference:e=>e.applyMatrix3(iN)},[vT]:{transfer:bT,primaries:_T,toReference:e=>e.convertSRGBToLinear().applyMatrix3(aN),fromReference:e=>e.applyMatrix3(iN).convertLinearToSRGB()}},sN=new Set([gT,xT]),lN={enabled:!0,_workingColorSpace:gT,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!sN.has(e))throw new Error('Unsupported working color space, "'.concat(e,'".'));this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=oN[t].toReference;return(0,oN[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return oN[e].primaries},getTransfer:function(e){return e===fT?yT:oN[e].transfer}};function cN(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function uN(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let dN;class hN{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===dN&&(dN=eN("canvas")),dN.width=e.width,dN.height=e.height;const n=dN.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=dN}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=eN("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*cN(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*cN(t[e]/255)):t[e]=cN(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let pN=0;class fN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:pN++}),this.uuid=zT(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(mN(r[t].image)):e.push(mN(r[t]))}else e=mN(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function mN(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?hN.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let gN=0;class vN extends IT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vN.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vN.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UM,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:UM,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:VM,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:GM,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:QM,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:XM,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:vN.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:fT;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:gN++}),this.uuid=zT(),this.name="",this.source=new fN(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new ZT(0,0),this.repeat=new ZT(1,1),this.center=new ZT(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new JT,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"===typeof c?this.colorSpace=c:(rN("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===pT?mT:fT),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case IM:e.x=e.x-Math.floor(e.x);break;case UM:e.x=e.x<0?0:1;break;case FM:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case IM:e.y=e.y-Math.floor(e.y);break;case UM:e.y=e.y<0?0:1;break;case FM:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return rN("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===mT?pT:3e3}set encoding(e){rN("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===pT?mT:fT}}vN.DEFAULT_IMAGE=null,vN.DEFAULT_MAPPING=300,vN.DEFAULT_ANISOTROPY=1;class xN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;xN.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const a=.01,o=.1,s=e.elements,l=s[0],c=s[4],u=s[8],d=s[1],h=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(c-d)<a&&Math.abs(u-f)<a&&Math.abs(p-m)<a){if(Math.abs(c+d)<o&&Math.abs(u+f)<o&&Math.abs(p+m)<o&&Math.abs(l+h+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(h+1)/2,v=(g+1)/2,x=(c+d)/4,y=(u+f)/4,b=(p+m)/4;return e>s&&e>v?e<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=x/n,i=y/n):s>v?s<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=x/r,i=b/r):v<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=y/i,r=b/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class yN extends IT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new xN(0,0,e,t),this.scissorTest=!1,this.viewport=new xN(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==n.encoding&&(rN("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===pT?mT:fT),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:VM,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new vN(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new fN(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class bN extends yN{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class wN extends vN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=BM,this.minFilter=BM,this.wrapR=UM,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _N extends vN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=BM,this.minFilter=BM,this.wrapR=UM,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class SN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,o){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=i[a+0],h=i[a+1],p=i[a+2],f=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===o)return e[t+0]=d,e[t+1]=h,e[t+2]=p,void(e[t+3]=f);if(u!==f||s!==d||l!==h||c!==p){let e=1-o;const t=s*d+l*h+c*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,o=Math.sin(o*a)/i}const i=o*n;if(s=s*e+d*i,l=l*e+h*i,c=c*e+p*i,u=u*e+f*i,e===1-o){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,a){const o=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[a],d=i[a+1],h=i[a+2],p=i[a+3];return e[t]=o*p+c*u+s*h-l*d,e[t+1]=s*p+c*d+l*u-o*h,e[t+2]=l*p+c*h+o*d-s*u,e[t+3]=c*p-o*u-s*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),c=o(r/2),u=o(i/2),d=s(n/2),h=s(r/2),p=s(i/2);switch(a){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],c=t[6],u=t[10],d=n+o+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(HT(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+a*o+r*l-i*s,this._y=r*c+a*s+i*o-n*l,this._z=i*c+a*l+n*s-r*o,this._w=a*c-n*o-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const s=1-o*o;if(s<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,o),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class EN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;EN.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(TN.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(TN.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=2*(a*r-o*n),c=2*(o*t-i*r),u=2*(i*n-a*t);return this.x=t+s*l+a*u-o*c,this.y=n+s*c+o*l-i*u,this.z=r+s*u+i*c-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return MN.copy(this).projectOnVector(e),this.sub(MN)}reflect(e){return this.sub(MN.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(HT(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const MN=new EN,TN=new SN;class NN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EN(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EN(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(AN.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(AN.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=AN.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,AN):AN.fromBufferAttribute(r,t),AN.applyMatrix4(e.matrixWorld),this.expandByPoint(AN);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),jN.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),jN.copy(n.boundingBox)),jN.applyMatrix4(e.matrixWorld),this.union(jN)}const r=e.children;for(let i=0,a=r.length;i<a;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,AN),AN.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(IN),UN.subVectors(this.max,IN),PN.subVectors(e.a,IN),ON.subVectors(e.b,IN),kN.subVectors(e.c,IN),RN.subVectors(ON,PN),DN.subVectors(kN,ON),LN.subVectors(PN,kN);let t=[0,-RN.z,RN.y,0,-DN.z,DN.y,0,-LN.z,LN.y,RN.z,0,-RN.x,DN.z,0,-DN.x,LN.z,0,-LN.x,-RN.y,RN.x,0,-DN.y,DN.x,0,-LN.y,LN.x,0];return!!zN(t,PN,ON,kN,UN)&&(t=[1,0,0,0,1,0,0,0,1],!!zN(t,PN,ON,kN,UN)&&(FN.crossVectors(RN,DN),t=[FN.x,FN.y,FN.z],zN(t,PN,ON,kN,UN)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,AN).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(AN).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(CN[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),CN[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),CN[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),CN[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),CN[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),CN[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),CN[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),CN[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(CN)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const CN=[new EN,new EN,new EN,new EN,new EN,new EN,new EN,new EN],AN=new EN,jN=new NN,PN=new EN,ON=new EN,kN=new EN,RN=new EN,DN=new EN,LN=new EN,IN=new EN,UN=new EN,FN=new EN,BN=new EN;function zN(e,t,n,r,i){for(let a=0,o=e.length-3;a<=o;a+=3){BN.fromArray(e,a);const o=i.x*Math.abs(BN.x)+i.y*Math.abs(BN.y)+i.z*Math.abs(BN.z),s=t.dot(BN),l=n.dot(BN),c=r.dot(BN);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>o)return!1}return!0}const HN=new NN,VN=new EN,WN=new EN;class GN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):HN.setFromPoints(e).getCenter(n);let r=0;for(let i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;VN.subVectors(e,this.center);const t=VN.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(VN,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(WN.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(VN.copy(e.center).add(WN)),this.expandByPoint(VN.copy(e.center).sub(WN))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const XN=new EN,qN=new EN,YN=new EN,KN=new EN,ZN=new EN,JN=new EN,$N=new EN;class QN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EN(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,XN)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=XN.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(XN.copy(this.origin).addScaledVector(this.direction,t),XN.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){qN.copy(e).add(t).multiplyScalar(.5),YN.copy(t).sub(e).normalize(),KN.copy(this.origin).sub(qN);const i=.5*e.distanceTo(t),a=-this.direction.dot(YN),o=KN.dot(this.direction),s=-KN.dot(YN),l=KN.lengthSq(),c=Math.abs(1-a*a);let u,d,h,p;if(c>0)if(u=a*s-o,d=a*o-s,p=i*c,u>=0)if(d>=-p)if(d<=p){const e=1/c;u*=e,d*=e,h=u*(u+a*d+2*o)+d*(a*u+d+2*s)+l}else d=i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;else d=-i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;else d<=-p?(u=Math.max(0,-(-a*i+o)),d=u>0?-i:Math.min(Math.max(-i,-s),i),h=-u*u+d*(d+2*s)+l):d<=p?(u=0,d=Math.min(Math.max(-i,-s),i),h=d*(d+2*s)+l):(u=Math.max(0,-(a*i+o)),d=u>0?i:Math.min(Math.max(-i,-s),i),h=-u*u+d*(d+2*s)+l);else d=a>0?-i:i,u=Math.max(0,-(a*d+o)),h=-u*u+d*(d+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(qN).addScaledVector(YN,d),h}intersectSphere(e,t){XN.subVectors(e.center,this.origin);const n=XN.dot(this.direction),r=XN.dot(XN)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,a,o,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),u>=0?(o=(e.min.z-d.z)*u,s=(e.max.z-d.z)*u):(o=(e.max.z-d.z)*u,s=(e.min.z-d.z)*u),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,XN)}intersectTriangle(e,t,n,r,i){ZN.subVectors(t,e),JN.subVectors(n,e),$N.crossVectors(ZN,JN);let a,o=this.direction.dot($N);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}KN.subVectors(this.origin,e);const s=a*this.direction.dot(JN.crossVectors(KN,JN));if(s<0)return null;const l=a*this.direction.dot(ZN.cross(KN));if(l<0)return null;if(s+l>o)return null;const c=-a*KN.dot($N);return c<0?null:this.at(c/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class eC{constructor(e,t,n,r,i,a,o,s,l,c,u,d,h,p,f,m){eC.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l,c,u,d,h,p,f,m)}set(e,t,n,r,i,a,o,s,l,c,u,d,h,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new eC).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/tC.setFromMatrixColumn(e,0).length(),i=1/tC.setFromMatrixColumn(e,1).length(),a=1/tC.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=a*c,n=a*u,r=o*c,i=o*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*o,t[4]=r*o-n,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=a*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*o,t[4]=-a*u,t[8]=r+n*o,t[1]=n+r*o,t[5]=a*c,t[9]=i-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){const e=a*c,n=a*u,r=o*c,i=o*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=a*c,t[9]=-o*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=a*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=o*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(rC,e,iC)}lookAt(e,t,n){const r=this.elements;return sC.subVectors(e,t),0===sC.lengthSq()&&(sC.z=1),sC.normalize(),aC.crossVectors(n,sC),0===aC.lengthSq()&&(1===Math.abs(n.z)?sC.x+=1e-4:sC.z+=1e-4,sC.normalize(),aC.crossVectors(n,sC)),aC.normalize(),oC.crossVectors(sC,aC),r[0]=aC.x,r[4]=oC.x,r[8]=sC.x,r[1]=aC.y,r[5]=oC.y,r[9]=sC.y,r[2]=aC.z,r[6]=oC.z,r[10]=sC.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],x=n[7],y=n[11],b=n[15],w=r[0],_=r[4],S=r[8],E=r[12],M=r[1],T=r[5],N=r[9],C=r[13],A=r[2],j=r[6],P=r[10],O=r[14],k=r[3],R=r[7],D=r[11],L=r[15];return i[0]=a*w+o*M+s*A+l*k,i[4]=a*_+o*T+s*j+l*R,i[8]=a*S+o*N+s*P+l*D,i[12]=a*E+o*C+s*O+l*L,i[1]=c*w+u*M+d*A+h*k,i[5]=c*_+u*T+d*j+h*R,i[9]=c*S+u*N+d*P+h*D,i[13]=c*E+u*C+d*O+h*L,i[2]=p*w+f*M+m*A+g*k,i[6]=p*_+f*T+m*j+g*R,i[10]=p*S+f*N+m*P+g*D,i[14]=p*E+f*C+m*O+g*L,i[3]=v*w+x*M+y*A+b*k,i[7]=v*_+x*T+y*j+b*R,i[11]=v*S+x*N+y*P+b*D,i[15]=v*E+x*C+y*O+b*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+i*s*u-r*l*u-i*o*d+n*l*d+r*o*h-n*s*h)+e[7]*(+t*s*h-t*l*d+i*a*d-r*a*h+r*l*c-i*s*c)+e[11]*(+t*l*u-t*o*h-i*a*u+n*a*h+i*o*c-n*l*c)+e[15]*(-r*o*c-t*s*u+t*o*d+r*a*u-n*a*d+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*d*l+f*s*h-o*m*h-u*s*g+o*d*g,x=p*d*l-c*m*l-p*s*h+a*m*h+c*s*g-a*d*g,y=c*f*l-p*u*l+p*o*h-a*f*h-c*o*g+a*u*g,b=p*u*s-c*f*s-p*o*d+a*f*d+c*o*m-a*u*m,w=t*v+n*x+r*y+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/w;return e[0]=v*_,e[1]=(f*d*i-u*m*i-f*r*h+n*m*h+u*r*g-n*d*g)*_,e[2]=(o*m*i-f*s*i+f*r*l-n*m*l-o*r*g+n*s*g)*_,e[3]=(u*s*i-o*d*i-u*r*l+n*d*l+o*r*h-n*s*h)*_,e[4]=x*_,e[5]=(c*m*i-p*d*i+p*r*h-t*m*h-c*r*g+t*d*g)*_,e[6]=(p*s*i-a*m*i-p*r*l+t*m*l+a*r*g-t*s*g)*_,e[7]=(a*d*i-c*s*i+c*r*l-t*d*l-a*r*h+t*s*h)*_,e[8]=y*_,e[9]=(p*u*i-c*f*i-p*n*h+t*f*h+c*n*g-t*u*g)*_,e[10]=(a*f*i-p*o*i+p*n*l-t*f*l-a*n*g+t*o*g)*_,e[11]=(c*o*i-a*u*i-c*n*l+t*u*l+a*n*h-t*o*h)*_,e[12]=b*_,e[13]=(c*f*r-p*u*r+p*n*d-t*f*d-c*n*m+t*u*m)*_,e[14]=(p*o*r-a*f*r-p*n*s+t*f*s+a*n*m-t*o*m)*_,e[15]=(a*u*r-c*o*r+c*n*s-t*u*s-a*n*d+t*o*d)*_,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,c=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,c*o+n,c*s-r*a,0,l*s-r*o,c*s+r*a,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,c=a+a,u=o+o,d=i*l,h=i*c,p=i*u,f=a*c,m=a*u,g=o*u,v=s*l,x=s*c,y=s*u,b=n.x,w=n.y,_=n.z;return r[0]=(1-(f+g))*b,r[1]=(h+y)*b,r[2]=(p-x)*b,r[3]=0,r[4]=(h-y)*w,r[5]=(1-(d+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(p+x)*_,r[9]=(m-v)*_,r[10]=(1-(d+f))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=tC.set(r[0],r[1],r[2]).length();const a=tC.set(r[4],r[5],r[6]).length(),o=tC.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],nC.copy(this);const s=1/i,l=1/a,c=1/o;return nC.elements[0]*=s,nC.elements[1]*=s,nC.elements[2]*=s,nC.elements[4]*=l,nC.elements[5]*=l,nC.elements[6]*=l,nC.elements[8]*=c,nC.elements[9]*=c,nC.elements[10]*=c,t.setFromRotationMatrix(nC),n.x=i,n.y=a,n.z=o,this}makePerspective(e,t,n,r,i,a){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:DT;const s=this.elements,l=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),d=(n+r)/(n-r);let h,p;if(o===DT)h=-(a+i)/(a-i),p=-2*a*i/(a-i);else{if(o!==LT)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);h=-a/(a-i),p=-a*i/(a-i)}return s[0]=l,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=c,s[9]=d,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,r,i,a){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:DT;const s=this.elements,l=1/(t-e),c=1/(n-r),u=1/(a-i),d=(t+e)*l,h=(n+r)*c;let p,f;if(o===DT)p=(a+i)*u,f=-2*u;else{if(o!==LT)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);p=i*u,f=-1*u}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-d,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=f,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const tC=new EN,nC=new eC,rC=new EN(0,0,0),iC=new EN(1,1,1),aC=new EN,oC=new EN,sC=new EN,lC=new eC,cC=new SN;class uC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uC.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(HT(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-HT(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(HT(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-HT(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(HT(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-HT(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return lC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(lC,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return cC.setFromEuler(this),this.setFromQuaternion(cC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}uC.DEFAULT_ORDER="XYZ";class dC{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let hC=0;const pC=new EN,fC=new SN,mC=new eC,gC=new EN,vC=new EN,xC=new EN,yC=new SN,bC=new EN(1,0,0),wC=new EN(0,1,0),_C=new EN(0,0,1),SC={type:"added"},EC={type:"removed"};class MC extends IT{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:hC++}),this.uuid=zT(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=MC.DEFAULT_UP.clone();const e=new EN,t=new uC,n=new SN,r=new EN(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new eC},normalMatrix:{value:new JT}}),this.matrix=new eC,this.matrixWorld=new eC,this.matrixAutoUpdate=MC.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=MC.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new dC,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return fC.setFromAxisAngle(e,t),this.quaternion.multiply(fC),this}rotateOnWorldAxis(e,t){return fC.setFromAxisAngle(e,t),this.quaternion.premultiply(fC),this}rotateX(e){return this.rotateOnAxis(bC,e)}rotateY(e){return this.rotateOnAxis(wC,e)}rotateZ(e){return this.rotateOnAxis(_C,e)}translateOnAxis(e,t){return pC.copy(e).applyQuaternion(this.quaternion),this.position.add(pC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(bC,e)}translateY(e){return this.translateOnAxis(wC,e)}translateZ(e){return this.translateOnAxis(_C,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(mC.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?gC.copy(e):gC.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),vC.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?mC.lookAt(vC,gC,this.up):mC.lookAt(gC,vC,this.up),this.quaternion.setFromRotationMatrix(mC),r&&(mC.extractRotation(r.matrixWorld),fC.setFromRotationMatrix(mC),this.quaternion.premultiply(fC.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(SC)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(EC)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),mC.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),mC.multiply(e.parent.matrixWorld)),e.applyMatrix4(mC),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(e,t);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vC,e,xC),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vC,yC,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=a(e.geometries),r=a(e.materials),i=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function a(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}MC.DEFAULT_UP=new EN(0,1,0),MC.DEFAULT_MATRIX_AUTO_UPDATE=!0,MC.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const TC=new EN,NC=new EN,CC=new EN,AC=new EN,jC=new EN,PC=new EN,OC=new EN,kC=new EN,RC=new EN,DC=new EN;let LC=!1;class IC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EN,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new EN,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new EN;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),TC.subVectors(e,t),r.cross(TC);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){TC.subVectors(r,t),NC.subVectors(n,t),CC.subVectors(e,t);const a=TC.dot(TC),o=TC.dot(NC),s=TC.dot(CC),l=NC.dot(NC),c=NC.dot(CC),u=a*l-o*o;if(0===u)return i.set(-2,-1,-1);const d=1/u,h=(l*s-o*c)*d,p=(a*c-o*s)*d;return i.set(1-h-p,p,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,AC),AC.x>=0&&AC.y>=0&&AC.x+AC.y<=1}static getUV(e,t,n,r,i,a,o,s){return!1===LC&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),LC=!0),this.getInterpolation(e,t,n,r,i,a,o,s)}static getInterpolation(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,AC),s.setScalar(0),s.addScaledVector(i,AC.x),s.addScaledVector(a,AC.y),s.addScaledVector(o,AC.z),s}static isFrontFacing(e,t,n,r){return TC.subVectors(n,t),NC.subVectors(e,t),TC.cross(NC).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return TC.subVectors(this.c,this.b),NC.subVectors(this.a,this.b),.5*TC.cross(NC).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return IC.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return IC.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return!1===LC&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),LC=!0),IC.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}getInterpolation(e,t,n,r,i){return IC.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return IC.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return IC.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let a,o;jC.subVectors(r,n),PC.subVectors(i,n),kC.subVectors(e,n);const s=jC.dot(kC),l=PC.dot(kC);if(s<=0&&l<=0)return t.copy(n);RC.subVectors(e,r);const c=jC.dot(RC),u=PC.dot(RC);if(c>=0&&u<=c)return t.copy(r);const d=s*u-c*l;if(d<=0&&s>=0&&c<=0)return a=s/(s-c),t.copy(n).addScaledVector(jC,a);DC.subVectors(e,i);const h=jC.dot(DC),p=PC.dot(DC);if(p>=0&&h<=p)return t.copy(i);const f=h*l-s*p;if(f<=0&&l>=0&&p<=0)return o=l/(l-p),t.copy(n).addScaledVector(PC,o);const m=c*p-h*u;if(m<=0&&u-c>=0&&h-p>=0)return OC.subVectors(i,r),o=(u-c)/(u-c+(h-p)),t.copy(r).addScaledVector(OC,o);const g=1/(m+f+d);return a=f*g,o=d*g,t.copy(n).addScaledVector(jC,a).addScaledVector(PC,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const UC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},FC={h:0,s:0,l:0},BC={h:0,s:0,l:0};function zC(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class HC{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mT;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,lN.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lN.workingColorSpace;return this.r=e,this.g=t,this.b=n,lN.toWorkingColorSpace(this,r),this}setHSL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lN.workingColorSpace;if(e=VT(e,1),t=HT(t,0,1),n=HT(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=zC(i,r,e+1/3),this.g=zC(i,r,e),this.b=zC(i,r,e-1/3)}return lN.toWorkingColorSpace(this,r),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mT;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=t[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(6===i)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mT;const n=UC[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=cN(e.r),this.g=cN(e.g),this.b=cN(e.b),this}copyLinearToSRGB(e){return this.r=uN(e.r),this.g=uN(e.g),this.b=uN(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mT;return lN.fromWorkingColorSpace(VC.copy(this),e),65536*Math.round(HT(255*VC.r,0,255))+256*Math.round(HT(255*VC.g,0,255))+Math.round(HT(255*VC.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mT;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lN.workingColorSpace;lN.fromWorkingColorSpace(VC.copy(this),t);const n=VC.r,r=VC.g,i=VC.b,a=Math.max(n,r,i),o=Math.min(n,r,i);let s,l;const c=(o+a)/2;if(o===a)s=0,l=0;else{const e=a-o;switch(l=c<=.5?e/(a+o):e/(2-a-o),a){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lN.workingColorSpace;return lN.fromWorkingColorSpace(VC.copy(this),t),e.r=VC.r,e.g=VC.g,e.b=VC.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mT;lN.fromWorkingColorSpace(VC.copy(this),e);const t=VC.r,n=VC.g,r=VC.b;return e!==mT?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}offsetHSL(e,t,n){return this.getHSL(FC),this.setHSL(FC.h+e,FC.s+t,FC.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(FC),e.getHSL(BC);const n=WT(FC.h,BC.h,t),r=WT(FC.s,BC.s,t),i=WT(FC.l,BC.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const VC=new HC;HC.NAMES=UC;let WC=0;class GC extends IT{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:WC++}),this.uuid=zT(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=fM,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new HC(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ST,this.stencilZFail=ST,this.stencilZPass=ST,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==fM&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ST&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ST&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ST&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class XC extends GC{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new HC(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qC=new EN,YC=new ZT;class KC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=OT,this.updateRange={offset:0,count:-1},this.gpuType=ZM,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)YC.fromBufferAttribute(this,t),YC.applyMatrix3(e),this.setXY(t,YC.x,YC.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)qC.fromBufferAttribute(this,t),qC.applyMatrix3(e),this.setXYZ(t,qC.x,qC.y,qC.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)qC.fromBufferAttribute(this,t),qC.applyMatrix4(e),this.setXYZ(t,qC.x,qC.y,qC.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)qC.fromBufferAttribute(this,t),qC.applyNormalMatrix(e),this.setXYZ(t,qC.x,qC.y,qC.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)qC.fromBufferAttribute(this,t),qC.transformDirection(e),this.setXYZ(t,qC.x,qC.y,qC.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=qT(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=YT(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=qT(t,this.array)),t}setX(e,t){return this.normalized&&(t=YT(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=qT(t,this.array)),t}setY(e,t){return this.normalized&&(t=YT(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=qT(t,this.array)),t}setZ(e,t){return this.normalized&&(t=YT(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=qT(t,this.array)),t}setW(e,t){return this.normalized&&(t=YT(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=YT(t,this.array),n=YT(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=YT(t,this.array),n=YT(n,this.array),r=YT(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=YT(t,this.array),n=YT(n,this.array),r=YT(r,this.array),i=YT(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==OT&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}class ZC extends KC{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class JC extends KC{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class $C extends KC{constructor(e,t,n){super(new Float32Array(e),t,n)}}let QC=0;const eA=new eC,tA=new MC,nA=new EN,rA=new NN,iA=new NN,aA=new EN;class oA extends IT{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:QC++}),this.uuid=zT(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(QT(e)?JC:ZC)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new JT).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return eA.makeRotationFromQuaternion(e),this.applyMatrix4(eA),this}rotateX(e){return eA.makeRotationX(e),this.applyMatrix4(eA),this}rotateY(e){return eA.makeRotationY(e),this.applyMatrix4(eA),this}rotateZ(e){return eA.makeRotationZ(e),this.applyMatrix4(eA),this}translate(e,t,n){return eA.makeTranslation(e,t,n),this.applyMatrix4(eA),this}scale(e,t,n){return eA.makeScale(e,t,n),this.applyMatrix4(eA),this}lookAt(e){return tA.lookAt(e),tA.updateMatrix(),this.applyMatrix4(tA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(nA).negate(),this.translate(nA.x,nA.y,nA.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new $C(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new NN);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new EN(-1/0,-1/0,-1/0),new EN(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];rA.setFromBufferAttribute(e),this.morphTargetsRelative?(aA.addVectors(this.boundingBox.min,rA.min),this.boundingBox.expandByPoint(aA),aA.addVectors(this.boundingBox.max,rA.max),this.boundingBox.expandByPoint(aA)):(this.boundingBox.expandByPoint(rA.min),this.boundingBox.expandByPoint(rA.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new GN);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new EN,1/0);if(e){const n=this.boundingSphere.center;if(rA.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];iA.setFromBufferAttribute(n),this.morphTargetsRelative?(aA.addVectors(rA.min,iA.min),rA.expandByPoint(aA),aA.addVectors(rA.max,iA.max),rA.expandByPoint(aA)):(rA.expandByPoint(iA.min),rA.expandByPoint(iA.max))}rA.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)aA.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(aA));if(t)for(let i=0,a=t.length;i<a;i++){const a=t[i],o=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)aA.fromBufferAttribute(a,t),o&&(nA.fromBufferAttribute(e,t),aA.add(nA)),r=Math.max(r,n.distanceToSquared(aA))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new KC(new Float32Array(4*o),4));const s=this.getAttribute("tangent").array,l=[],c=[];for(let M=0;M<o;M++)l[M]=new EN,c[M]=new EN;const u=new EN,d=new EN,h=new EN,p=new ZT,f=new ZT,m=new ZT,g=new EN,v=new EN;function x(e,t,n){u.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),p.fromArray(a,2*e),f.fromArray(a,2*t),m.fromArray(a,2*n),d.sub(u),h.sub(u),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-f.y).multiplyScalar(i),v.copy(h).multiplyScalar(f.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let M=0,T=y.length;M<T;++M){const e=y[M],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)x(n[r+0],n[r+1],n[r+2])}const b=new EN,w=new EN,_=new EN,S=new EN;function E(e){_.fromArray(i,3*e),S.copy(_);const t=l[e];b.copy(t),b.sub(_.multiplyScalar(_.dot(t))).normalize(),w.crossVectors(S,t);const n=w.dot(c[e])<0?-1:1;s[4*e]=b.x,s[4*e+1]=b.y,s[4*e+2]=b.z,s[4*e+3]=n}for(let M=0,T=y.length;M<T;++M){const e=y[M],t=e.start;for(let r=t,i=t+e.count;r<i;r+=3)E(n[r+0]),E(n[r+1]),E(n[r+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new KC(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new EN,i=new EN,a=new EN,o=new EN,s=new EN,l=new EN,c=new EN,u=new EN;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),p=e.getX(d+1),f=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),o.fromBufferAttribute(n,h),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),o.add(c),s.add(c),l.add(c),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,d=t.count;e<d;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)aA.fromBufferAttribute(e,t),aA.normalize(),e.setXYZ(t,aA.x,aA.y,aA.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r);let o=0,s=0;for(let l=0,c=t.length;l<c;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)a[s++]=n[o++]}return new KC(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new oA,n=this.index.array,r=this.attributes;for(const o in r){const i=e(r[o],n);t.setAttribute(o,i)}const i=this.morphAttributes;for(const o in i){const r=[],a=i[o];for(let t=0,i=a.length;t<i;t++){const i=e(a[t],n);r.push(i)}t.morphAttributes[o]=r}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,s=a.length;o<s;o++){const e=a[o];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const r={};let i=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,c=a.length;l<c;l++){const e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const sA=new eC,lA=new QN,cA=new GN,uA=new EN,dA=new EN,hA=new EN,pA=new EN,fA=new EN,mA=new EN,gA=new ZT,vA=new ZT,xA=new ZT,yA=new EN,bA=new EN,wA=new EN,_A=new EN,SA=new EN;class EA extends MC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new oA,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new XC;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(i&&o){mA.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=o[n],s=i[n];0!==r&&(fA.fromBufferAttribute(s,e),a?mA.addScaledVector(fA,r):mA.addScaledVector(fA.sub(t),r))}t.add(mA)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),cA.copy(n.boundingSphere),cA.applyMatrix4(i),lA.copy(e.ray).recast(e.near),!1===cA.containsPoint(lA.origin)){if(null===lA.intersectSphere(cA,uA))return;if(lA.origin.distanceToSquared(uA)>(e.far-e.near)**2)return}sA.copy(i).invert(),lA.copy(e.ray).applyMatrix4(sA),null!==n.boundingBox&&!1===lA.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,lA)}}_computeIntersections(e,t,n){let r;const i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,d=i.groups,h=i.drawRange;if(null!==o)if(Array.isArray(a))for(let p=0,f=d.length;p<f;p++){const i=d[p],s=a[i.materialIndex];for(let a=Math.max(i.start,h.start),d=Math.min(o.count,Math.min(i.start+i.count,h.start+h.count));a<d;a+=3){r=MA(this,s,e,n,l,c,u,o.getX(a),o.getX(a+1),o.getX(a+2)),r&&(r.faceIndex=Math.floor(a/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);i<s;i+=3){r=MA(this,a,e,n,l,c,u,o.getX(i),o.getX(i+1),o.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}else if(void 0!==s)if(Array.isArray(a))for(let p=0,f=d.length;p<f;p++){const i=d[p],o=a[i.materialIndex];for(let a=Math.max(i.start,h.start),d=Math.min(s.count,Math.min(i.start+i.count,h.start+h.count));a<d;a+=3){r=MA(this,o,e,n,l,c,u,a,a+1,a+2),r&&(r.faceIndex=Math.floor(a/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);i<o;i+=3){r=MA(this,a,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}}}function MA(e,t,n,r,i,a,o,s,l,c){e.getVertexPosition(s,dA),e.getVertexPosition(l,hA),e.getVertexPosition(c,pA);const u=function(e,t,n,r,i,a,o,s){let l;if(l=1===t.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,0===t.side,s),null===l)return null;SA.copy(s),SA.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(SA);return c<n.near||c>n.far?null:{distance:c,point:SA.clone(),object:e}}(e,t,n,r,dA,hA,pA,_A);if(u){i&&(gA.fromBufferAttribute(i,s),vA.fromBufferAttribute(i,l),xA.fromBufferAttribute(i,c),u.uv=IC.getInterpolation(_A,dA,hA,pA,gA,vA,xA,new ZT)),a&&(gA.fromBufferAttribute(a,s),vA.fromBufferAttribute(a,l),xA.fromBufferAttribute(a,c),u.uv1=IC.getInterpolation(_A,dA,hA,pA,gA,vA,xA,new ZT),u.uv2=u.uv1),o&&(yA.fromBufferAttribute(o,s),bA.fromBufferAttribute(o,l),wA.fromBufferAttribute(o,c),u.normal=IC.getInterpolation(_A,dA,hA,pA,yA,bA,wA,new EN),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const e={a:s,b:l,c:c,normal:new EN,materialIndex:0};IC.getNormal(dA,hA,pA,e.normal),u.face=e}return u}class TA extends oA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const o=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const s=[],l=[],c=[],u=[];let d=0,h=0;function p(e,t,n,r,i,a,p,f,m,g,v){const x=a/m,y=p/g,b=a/2,w=p/2,_=f/2,S=m+1,E=g+1;let M=0,T=0;const N=new EN;for(let o=0;o<E;o++){const a=o*y-w;for(let s=0;s<S;s++){const d=s*x-b;N[e]=d*r,N[t]=a*i,N[n]=_,l.push(N.x,N.y,N.z),N[e]=0,N[t]=0,N[n]=f>0?1:-1,c.push(N.x,N.y,N.z),u.push(s/m),u.push(1-o/g),M+=1}}for(let o=0;o<g;o++)for(let e=0;e<m;e++){const t=d+e+S*o,n=d+e+S*(o+1),r=d+(e+1)+S*(o+1),i=d+(e+1)+S*o;s.push(t,n,i),s.push(n,r,i),T+=6}o.addGroup(h,T,v),h+=T,d+=M}p("z","y","x",-1,-1,n,t,e,a,i,0),p("z","y","x",1,-1,n,t,-e,a,i,1),p("x","z","y",1,1,e,n,t,r,a,2),p("x","z","y",1,-1,e,n,-t,r,a,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new $C(l,3)),this.setAttribute("normal",new $C(c,3)),this.setAttribute("uv",new $C(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TA(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function NA(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function CA(e){const t={};for(let n=0;n<e.length;n++){const r=NA(e[n]);for(const e in r)t[e]=r[e]}return t}function AA(e){return null===e.getRenderTarget()?e.outputColorSpace:lN.workingColorSpace}const jA={clone:NA,merge:CA};class PA extends GC{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=NA(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class OA extends MC{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new eC,this.projectionMatrix=new eC,this.projectionMatrixInverse=new eC,this.coordinateSystem=DT}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class kA extends OA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*BT*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*FT*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*BT*Math.atan(Math.tan(.5*FT*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*FT*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/o,r*=a.width/e,n*=a.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const RA=-90;class DA extends MC{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new kA(RA,1,e,t);r.layers=this.layers,this.add(r);const i=new kA(RA,1,e,t);i.layers=this.layers,this.add(i);const a=new kA(RA,1,e,t);a.layers=this.layers,this.add(a);const o=new kA(RA,1,e,t);o.layers=this.layers,this.add(o);const s=new kA(RA,1,e,t);s.layers=this.layers,this.add(s);const l=new kA(RA,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,o,s]=t;for(const l of t)this.remove(l);if(e===DT)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(e!==LT)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,a,o,s,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,s),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class LA extends vN{constructor(e,t,n,r,i,a,o,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:OM,n,r,i,a,o,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class IA extends bN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];void 0!==t.encoding&&(rN("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===pT?mT:fT),this.texture=new LA(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:VM}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new TA(5,5,5),o=new PA({name:"CubemapFromEquirect",uniforms:NA(n),vertexShader:r,fragmentShader:i,side:1,blending:0});o.uniforms.tEquirect.value=t;const s=new EA(a,o),l=t.minFilter;t.minFilter===GM&&(t.minFilter=VM);return new DA(1,10,this).update(e,s),t.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}const UA=new EN,FA=new EN,BA=new JT;class zA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EN(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=UA.subVectors(n,t).cross(FA.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(UA),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||BA.getNormalMatrix(e),r=this.coplanarPoint(UA).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const HA=new GN,VA=new EN;class WA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zA,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zA,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zA,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new zA,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new zA,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new zA;this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DT;const n=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],p=r[9],f=r[10],m=r[11],g=r[12],v=r[13],x=r[14],y=r[15];if(n[0].setComponents(s-i,d-l,m-h,y-g).normalize(),n[1].setComponents(s+i,d+l,m+h,y+g).normalize(),n[2].setComponents(s+a,d+c,m+p,y+v).normalize(),n[3].setComponents(s-a,d-c,m-p,y-v).normalize(),n[4].setComponents(s-o,d-u,m-f,y-x).normalize(),t===DT)n[5].setComponents(s+o,d+u,m+f,y+x).normalize();else{if(t!==LT)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(o,u,f,x).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),HA.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),HA.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(HA)}intersectsSprite(e){return HA.center.set(0,0,0),HA.radius=.7071067811865476,HA.applyMatrix4(e.matrixWorld),this.intersectsSphere(HA)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(VA.x=r.normal.x>0?e.max.x:e.min.x,VA.y=r.normal.y>0?e.max.y:e.min.y,VA.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(VA)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function GA(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function XA(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=r.get(t);void 0===a?r.set(t,function(t,r){const i=t.array,a=t.usage,o=e.createBuffer();let s;if(e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback(),i instanceof Float32Array)s=e.FLOAT;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=e.HALF_FLOAT}else s=e.UNSIGNED_SHORT;else if(i instanceof Int16Array)s=e.SHORT;else if(i instanceof Uint32Array)s=e.UNSIGNED_INT;else if(i instanceof Int32Array)s=e.INT;else if(i instanceof Int8Array)s=e.BYTE;else if(i instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=e.UNSIGNED_BYTE}return{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(!function(t,r,i){const a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),r.onUploadCallback()}(a.buffer,t,i),a.version=t.version)}}}class qA extends oA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,a=t/2,o=Math.floor(n),s=Math.floor(r),l=o+1,c=s+1,u=e/o,d=t/s,h=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*d-a;for(let t=0;t<l;t++){const n=t*u-i;p.push(n,-e,0),f.push(0,0,1),m.push(t/o),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<o;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;h.push(t,n,i),h.push(n,r,i)}this.setIndex(h),this.setAttribute("position",new $C(p,3)),this.setAttribute("normal",new $C(f,3)),this.setAttribute("uv",new $C(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qA(e.width,e.height,e.widthSegments,e.heightSegments)}}const YA={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},KA={common:{diffuse:{value:new HC(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new JT},alphaMap:{value:null},alphaMapTransform:{value:new JT},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new JT}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new JT}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new JT}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new JT},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new JT},normalScale:{value:new ZT(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new JT},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new JT}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new JT}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new JT}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new HC(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new HC(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new JT},alphaTest:{value:0},uvTransform:{value:new JT}},sprite:{diffuse:{value:new HC(16777215)},opacity:{value:1},center:{value:new ZT(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new JT},alphaMap:{value:null},alphaMapTransform:{value:new JT},alphaTest:{value:0}}},ZA={basic:{uniforms:CA([KA.common,KA.specularmap,KA.envmap,KA.aomap,KA.lightmap,KA.fog]),vertexShader:YA.meshbasic_vert,fragmentShader:YA.meshbasic_frag},lambert:{uniforms:CA([KA.common,KA.specularmap,KA.envmap,KA.aomap,KA.lightmap,KA.emissivemap,KA.bumpmap,KA.normalmap,KA.displacementmap,KA.fog,KA.lights,{emissive:{value:new HC(0)}}]),vertexShader:YA.meshlambert_vert,fragmentShader:YA.meshlambert_frag},phong:{uniforms:CA([KA.common,KA.specularmap,KA.envmap,KA.aomap,KA.lightmap,KA.emissivemap,KA.bumpmap,KA.normalmap,KA.displacementmap,KA.fog,KA.lights,{emissive:{value:new HC(0)},specular:{value:new HC(1118481)},shininess:{value:30}}]),vertexShader:YA.meshphong_vert,fragmentShader:YA.meshphong_frag},standard:{uniforms:CA([KA.common,KA.envmap,KA.aomap,KA.lightmap,KA.emissivemap,KA.bumpmap,KA.normalmap,KA.displacementmap,KA.roughnessmap,KA.metalnessmap,KA.fog,KA.lights,{emissive:{value:new HC(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:YA.meshphysical_vert,fragmentShader:YA.meshphysical_frag},toon:{uniforms:CA([KA.common,KA.aomap,KA.lightmap,KA.emissivemap,KA.bumpmap,KA.normalmap,KA.displacementmap,KA.gradientmap,KA.fog,KA.lights,{emissive:{value:new HC(0)}}]),vertexShader:YA.meshtoon_vert,fragmentShader:YA.meshtoon_frag},matcap:{uniforms:CA([KA.common,KA.bumpmap,KA.normalmap,KA.displacementmap,KA.fog,{matcap:{value:null}}]),vertexShader:YA.meshmatcap_vert,fragmentShader:YA.meshmatcap_frag},points:{uniforms:CA([KA.points,KA.fog]),vertexShader:YA.points_vert,fragmentShader:YA.points_frag},dashed:{uniforms:CA([KA.common,KA.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:YA.linedashed_vert,fragmentShader:YA.linedashed_frag},depth:{uniforms:CA([KA.common,KA.displacementmap]),vertexShader:YA.depth_vert,fragmentShader:YA.depth_frag},normal:{uniforms:CA([KA.common,KA.bumpmap,KA.normalmap,KA.displacementmap,{opacity:{value:1}}]),vertexShader:YA.meshnormal_vert,fragmentShader:YA.meshnormal_frag},sprite:{uniforms:CA([KA.sprite,KA.fog]),vertexShader:YA.sprite_vert,fragmentShader:YA.sprite_frag},background:{uniforms:{uvTransform:{value:new JT},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:YA.background_vert,fragmentShader:YA.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:YA.backgroundCube_vert,fragmentShader:YA.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:YA.cube_vert,fragmentShader:YA.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:YA.equirect_vert,fragmentShader:YA.equirect_frag},distanceRGBA:{uniforms:CA([KA.common,KA.displacementmap,{referencePosition:{value:new EN},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:YA.distanceRGBA_vert,fragmentShader:YA.distanceRGBA_frag},shadow:{uniforms:CA([KA.lights,KA.fog,{color:{value:new HC(0)},opacity:{value:1}}]),vertexShader:YA.shadow_vert,fragmentShader:YA.shadow_frag}};ZA.physical={uniforms:CA([ZA.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new JT},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new JT},clearcoatNormalScale:{value:new ZT(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new JT},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new JT},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new JT},sheen:{value:0},sheenColor:{value:new HC(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new JT},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new JT},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new JT},transmissionSamplerSize:{value:new ZT},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new JT},attenuationDistance:{value:0},attenuationColor:{value:new HC(0)},specularColor:{value:new HC(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new JT},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new JT},anisotropyVector:{value:new ZT},anisotropyMap:{value:null},anisotropyMapTransform:{value:new JT}}]),vertexShader:YA.meshphysical_vert,fragmentShader:YA.meshphysical_frag};const JA={r:0,b:0,g:0};function $A(e,t,n,r,i,a,o){const s=new HC(0);let l,c,u=!0===a?0:1,d=null,h=0,p=null;function f(t,n){t.getRGB(JA,AA(e)),r.buffers.color.setClear(JA.r,JA.g,JA.b,n,o)}return{getClearColor:function(){return s},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),u=t,f(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(s,u)},render:function(a,m){let g=!1,v=!0===m.isScene?m.background:null;if(v&&v.isTexture){v=(m.backgroundBlurriness>0?n:t).get(v)}null===v?f(s,u):v&&v.isColor&&(f(v,1),g=!0);const x=e.xr.getEnvironmentBlendMode();"additive"===x?r.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===x&&r.buffers.color.setClear(0,0,0,0,o),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===LM)?(void 0===c&&(c=new EA(new TA(1,1,1),new PA({name:"BackgroundCubeMaterial",uniforms:NA(ZA.backgroundCube.uniforms),vertexShader:ZA.backgroundCube.vertexShader,fragmentShader:ZA.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=lN.getTransfer(v.colorSpace)!==bT,d===v&&h===v.version&&p===e.toneMapping||(c.material.needsUpdate=!0,d=v,h=v.version,p=e.toneMapping),c.layers.enableAll(),a.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new EA(new qA(2,2),new PA({name:"BackgroundMaterial",uniforms:NA(ZA.background.uniforms),vertexShader:ZA.background.vertexShader,fragmentShader:ZA.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=lN.getTransfer(v.colorSpace)!==bT,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),d===v&&h===v.version&&p===e.toneMapping||(l.material.needsUpdate=!0,d=v,h=v.version,p=e.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null))}}}function QA(e,t,n,r){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},l=p(null);let c=l,u=!1;function d(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const a=c.newAttributes,o=c.enabledAttributes,s=c.attributeDivisors;if(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function x(t,n,r,i,a,o,s){!0===s?e.vertexAttribIPointer(t,n,r,a,o):e.vertexAttribPointer(t,n,r,i,a,o)}function y(){b(),u=!0,c!==l&&(c=l,d(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,y,b){let w=!1;if(o){const t=function(t,n,i){const o=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[o];void 0===u&&(u=p(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[o]=u);return u}(y,h,l);c!==t&&(c=t,d(c.object)),w=function(e,t,n,r){const i=c.attributes,a=t.attributes;let o=0;const s=n.getAttributes();for(const l in s){if(s[l].location>=0){const t=i[l];let n=a[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;o++}}return c.attributesNum!==o||c.index!==r}(i,y,h,b),w&&function(e,t,n,r){const i={},a=t.attributes;let o=0;const s=n.getAttributes();for(const l in s){if(s[l].location>=0){let t=a[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[l]=n,o++}}c.attributes=i,c.attributesNum=o,c.index=r}(i,y,h,b)}else{const e=!0===l.wireframe;c.geometry===y.id&&c.program===h.id&&c.wireframe===e||(c.geometry=y.id,c.program=h.id,c.wireframe=e,w=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(w||u)&&(u=!1,function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=s.attributes,c=o.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const a=c[t];if(a.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,l=o.itemSize,c=n.get(o);if(void 0===c)continue;const u=c.buffer,d=c.type,h=c.bytesPerElement,p=!0===r.isWebGL2&&(d===e.INT||d===e.UNSIGNED_INT||o.gpuType===YM);if(o.isInterleavedBufferAttribute){const n=o.data,r=n.stride,c=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)g(a.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)x(a.location+e,l/a.locationSize,d,t,r*h,(c+l/a.locationSize*e)*h,p)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)g(a.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<a.locationSize;e++)x(a.location+e,l/a.locationSize,d,t,l*h,l/a.locationSize*e*h,p)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(a.location,n);break;case 3:e.vertexAttrib3fv(a.location,n);break;case 4:e.vertexAttrib4fv(a.location,n);break;default:e.vertexAttrib1fv(a.location,n)}}}}v()}(i,l,h,y),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){y();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const n in t){const e=t[n];for(const t in e)h(e[t].object),delete e[t];delete t[n]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function ej(e,t,n,r){const i=r.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,r){e.drawArrays(a,t,r),n.update(r,a,1)},this.renderInstances=function(r,o,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,r,o,s),n.update(o,a,s)}}function tj(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let o=void 0!==n.precision?n.precision:"highp";const s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const l=a||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),x=d>0,y=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:x,floatFragmentTextures:y,floatVertexTextures:x&&y,maxSamples:a?e.getParameter(e.MAX_SAMPLES):0}}function nj(e){const t=this;let n=null,r=0,i=!1,a=!1;const o=new zA,s=new JT,l={value:null,needsUpdate:!1};function c(e,n,r,i){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==i||null===c){const t=r+4*a,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==a;++n,l+=4)o.copy(e[n]).applyMatrix4(i,s),o.normal.toArray(c,l),c[l+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(o,s,u){const d=o.clippingPlanes,h=o.clipIntersection,p=o.clipShadows,f=e.get(o);if(!i||null===d||0===d.length||a&&!p)a?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=a?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=c(d,s,t,u);for(let r=0;r!==t;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function rj(e){let t=new WeakMap;function n(e,t){return t===RM?e.mapping=OM:t===DM&&(e.mapping=kM),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const a=i.mapping;if(a===RM||a===DM){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const a=i.image;if(a&&a.height>0){const o=new IA(a.height/2);return o.fromEquirectangularTexture(e,i),t.set(i,o),i.addEventListener("dispose",r),n(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}class ij extends OA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const aj=[.125,.215,.35,.446,.526,.582],oj=20,sj=new ij,lj=new HC;let cj=null,uj=0,dj=0;const hj=(1+Math.sqrt(5))/2,pj=1/hj,fj=[new EN(1,1,1),new EN(-1,1,1),new EN(1,1,-1),new EN(-1,1,-1),new EN(0,hj,pj),new EN(0,hj,-pj),new EN(pj,0,hj),new EN(-pj,0,hj),new EN(hj,pj,0),new EN(-hj,pj,0)];class mj{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;cj=this._renderer.getRenderTarget(),uj=this._renderer.getActiveCubeFace(),dj=this._renderer.getActiveMipmapLevel(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=yj(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=xj(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cj,uj,dj),e.scissorTest=!1,vj(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===OM||e.mapping===kM?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cj=this._renderer.getRenderTarget(),uj=this._renderer.getActiveCubeFace(),dj=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:VM,minFilter:VM,generateMipmaps:!1,type:JM,format:QM,colorSpace:gT,depthBuffer:!1},r=gj(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=gj(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const a=e-4+1+aj.length;for(let o=0;o<a;o++){const a=Math.pow(2,i);n.push(a);let s=1/a;o>e-4?s=aj[o-e+4-1]:0===o&&(s=0),r.push(s);const l=1/(a-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*h),x=new Float32Array(m*p*h),y=new Float32Array(g*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,f*p*e),x.set(d,m*p*e);const i=[e,e,e,e,e,e];y.set(i,g*p*e)}const b=new oA;b.setAttribute("position",new KC(v,f)),b.setAttribute("uv",new KC(x,m)),b.setAttribute("faceIndex",new KC(y,g)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(oj),i=new EN(0,1,0),a=new PA({name:"SphericalGaussianBlur",defines:{n:oj,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return a}(r,e,t)}return r}_compileMaterial(e){const t=new EA(this._lodPlanes[0],e);this._renderer.compile(t,sj)}_sceneToCubeUV(e,t,n,r){const i=new kA(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(lj),s.toneMapping=0,s.autoClear=!1;const u=new XC({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new EA(new TA,u);let h=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,h=!0):(u.color.copy(lj),h=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(i.up.set(0,a[f],0),i.lookAt(o[f],0,0)):1===t?(i.up.set(0,0,a[f]),i.lookAt(0,o[f],0)):(i.up.set(0,a[f],0),i.lookAt(0,0,o[f]));const n=this._cubeSize;vj(r,t*n,f>2?n:0,n,n),s.setRenderTarget(r),h&&s.render(d,i),s.render(e,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===OM||e.mapping===kM;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=yj()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=xj());const i=r?this._cubemapMaterial:this._equirectMaterial,a=new EA(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const o=this._cubeSize;vj(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,sj)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=fj[(r-1)%fj.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,o){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new EA(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,p=i/h,f=isFinite(i)?1+Math.floor(3*p):oj;f>oj&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(oj));const m=[];let g=0;for(let y=0;y<oj;++y){const e=y/p,t=Math.exp(-e*e/2);m.push(t),0===y?g+=t:y<f&&(g+=2*t)}for(let y=0;y<m.length;y++)m[y]=m[y]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===a,o&&(u.poleAxis.value=o);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const x=this._sizeLods[r];vj(t,3*x*(r>v-4?r-v+4:0),4*(this._cubeSize-x),3*x,2*x),s.setRenderTarget(t),s.render(c,sj)}}function gj(e,t,n){const r=new bN(e,t,n);return r.texture.mapping=LM,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function vj(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function xj(){return new PA({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function yj(){return new PA({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function bj(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping,o=a===RM||a===DM,s=a===OM||a===kM;if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new mj(e)),r=o?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const a=i.image;if(o&&a&&a.height>0||s&&a&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(a)){null===n&&(n=new mj(e));const a=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,a),i.addEventListener("dispose",r),a.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function wj(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function _j(e,t,n,r){const i={},a=new WeakMap;function o(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);for(const n in s.morphAttributes){const e=s.morphAttributes[n];for(let n=0,r=e.length;n<r;n++)t.remove(e[n])}s.removeEventListener("dispose",o),delete i[s.id];const l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===i)return;{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const s=new(QT(n)?JC:ZC)(n,1);s.version=o;const l=a.get(e);l&&t.remove(l),a.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const a in r)t.update(r[a],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const a in i){const n=i[a];for(let r=0,i=n.length;r<i;r++)t.update(n[r],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Sj(e,t,n,r){const i=r.isWebGL2;let a,o,s;this.setMode=function(e){a=e},this.setIndex=function(e){o=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(a,r,o,t*s),n.update(r,a,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,d;if(i)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](a,l,o,r*s,c),n.update(l,a,c)}}function Ej(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Mj(e,t){return e[0]-t[0]}function Tj(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Nj(e,t,n){const r={},i=new Float32Array(8),a=new WeakMap,o=new xN,s=[];for(let l=0;l<8;l++)s[l]=[l,0];return{update:function(l,c,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==h?h.length:0;let f=a.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const v=void 0!==c.morphAttributes.position,x=void 0!==c.morphAttributes.normal,y=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],_=c.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===x&&(S=2),!0===y&&(S=3);let E=c.attributes.position.count*S,M=1;E>t.maxTextureSize&&(M=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);const T=new Float32Array(E*M*4*p),N=new wN(T,E,M,p);N.type=ZM,N.needsUpdate=!0;const C=4*S;for(let j=0;j<p;j++){const P=b[j],O=w[j],k=_[j],R=E*M*4*j;for(let D=0;D<P.count;D++){const L=D*C;!0===v&&(o.fromBufferAttribute(P,D),T[R+L+0]=o.x,T[R+L+1]=o.y,T[R+L+2]=o.z,T[R+L+3]=0),!0===x&&(o.fromBufferAttribute(O,D),T[R+L+4]=o.x,T[R+L+5]=o.y,T[R+L+6]=o.z,T[R+L+7]=0),!0===y&&(o.fromBufferAttribute(k,D),T[R+L+8]=o.x,T[R+L+9]=o.y,T[R+L+10]=o.z,T[R+L+11]=4===k.itemSize?o.w:1)}}function A(){N.dispose(),a.delete(c),c.removeEventListener("dispose",A)}f={count:p,texture:N,size:new ZT(E,M)},a.set(c,f),c.addEventListener("dispose",A)}let m=0;for(let I=0;I<d.length;I++)m+=d[I];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",g),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const U=void 0===d?0:d.length;let F=r[c.id];if(void 0===F||F.length!==U){F=[];for(let W=0;W<U;W++)F[W]=[W,0];r[c.id]=F}for(let G=0;G<U;G++){const X=F[G];X[0]=G,X[1]=d[G]}F.sort(Tj);for(let q=0;q<8;q++)q<U&&F[q][1]?(s[q][0]=F[q][0],s[q][1]=F[q][1]):(s[q][0]=Number.MAX_SAFE_INTEGER,s[q][1]=0);s.sort(Mj);const B=c.morphAttributes.position,z=c.morphAttributes.normal;let H=0;for(let Y=0;Y<8;Y++){const K=s[Y],Z=K[0],J=K[1];Z!==Number.MAX_SAFE_INTEGER&&J?(B&&c.getAttribute("morphTarget"+Y)!==B[Z]&&c.setAttribute("morphTarget"+Y,B[Z]),z&&c.getAttribute("morphNormal"+Y)!==z[Z]&&c.setAttribute("morphNormal"+Y,z[Z]),i[Y]=J,H+=J):(B&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),z&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),i[Y]=0)}const V=c.morphTargetsRelative?1:1-H;u.getUniforms().setValue(e,"morphTargetBaseInfluence",V),u.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Cj(e,t,n,r){let i=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){const s=r.render.frame,l=o.geometry,c=t.get(o,l);if(i.get(c)!==s&&(t.update(c),i.set(c,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),i.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,s))),o.isSkinnedMesh){const e=o.skeleton;i.get(e)!==s&&(e.update(),i.set(e,s))}return c},dispose:function(){i=new WeakMap}}}const Aj=new vN,jj=new wN,Pj=new _N,Oj=new LA,kj=[],Rj=[],Dj=new Float32Array(16),Lj=new Float32Array(9),Ij=new Float32Array(4);function Uj(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=kj[i];if(void 0===a&&(a=new Float32Array(i),kj[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function Fj(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Bj(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function zj(e,t){let n=Rj[t];void 0===n&&(n=new Int32Array(t),Rj[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Hj(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Vj(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Fj(n,t))return;e.uniform2fv(this.addr,t),Bj(n,t)}}function Wj(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Fj(n,t))return;e.uniform3fv(this.addr,t),Bj(n,t)}}function Gj(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Fj(n,t))return;e.uniform4fv(this.addr,t),Bj(n,t)}}function Xj(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Fj(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Bj(n,t)}else{if(Fj(n,r))return;Ij.set(r),e.uniformMatrix2fv(this.addr,!1,Ij),Bj(n,r)}}function qj(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Fj(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Bj(n,t)}else{if(Fj(n,r))return;Lj.set(r),e.uniformMatrix3fv(this.addr,!1,Lj),Bj(n,r)}}function Yj(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Fj(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Bj(n,t)}else{if(Fj(n,r))return;Dj.set(r),e.uniformMatrix4fv(this.addr,!1,Dj),Bj(n,r)}}function Kj(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Zj(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Fj(n,t))return;e.uniform2iv(this.addr,t),Bj(n,t)}}function Jj(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Fj(n,t))return;e.uniform3iv(this.addr,t),Bj(n,t)}}function $j(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Fj(n,t))return;e.uniform4iv(this.addr,t),Bj(n,t)}}function Qj(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function eP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Fj(n,t))return;e.uniform2uiv(this.addr,t),Bj(n,t)}}function tP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Fj(n,t))return;e.uniform3uiv(this.addr,t),Bj(n,t)}}function nP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Fj(n,t))return;e.uniform4uiv(this.addr,t),Bj(n,t)}}function rP(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Aj,i)}function iP(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Pj,i)}function aP(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Oj,i)}function oP(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||jj,i)}function sP(e,t){e.uniform1fv(this.addr,t)}function lP(e,t){const n=Uj(t,this.size,2);e.uniform2fv(this.addr,n)}function cP(e,t){const n=Uj(t,this.size,3);e.uniform3fv(this.addr,n)}function uP(e,t){const n=Uj(t,this.size,4);e.uniform4fv(this.addr,n)}function dP(e,t){const n=Uj(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function hP(e,t){const n=Uj(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function pP(e,t){const n=Uj(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function fP(e,t){e.uniform1iv(this.addr,t)}function mP(e,t){e.uniform2iv(this.addr,t)}function gP(e,t){e.uniform3iv(this.addr,t)}function vP(e,t){e.uniform4iv(this.addr,t)}function xP(e,t){e.uniform1uiv(this.addr,t)}function yP(e,t){e.uniform2uiv(this.addr,t)}function bP(e,t){e.uniform3uiv(this.addr,t)}function wP(e,t){e.uniform4uiv(this.addr,t)}function _P(e,t,n){const r=this.cache,i=t.length,a=zj(n,i);Fj(r,a)||(e.uniform1iv(this.addr,a),Bj(r,a));for(let o=0;o!==i;++o)n.setTexture2D(t[o]||Aj,a[o])}function SP(e,t,n){const r=this.cache,i=t.length,a=zj(n,i);Fj(r,a)||(e.uniform1iv(this.addr,a),Bj(r,a));for(let o=0;o!==i;++o)n.setTexture3D(t[o]||Pj,a[o])}function EP(e,t,n){const r=this.cache,i=t.length,a=zj(n,i);Fj(r,a)||(e.uniform1iv(this.addr,a),Bj(r,a));for(let o=0;o!==i;++o)n.setTextureCube(t[o]||Oj,a[o])}function MP(e,t,n){const r=this.cache,i=t.length,a=zj(n,i);Fj(r,a)||(e.uniform1iv(this.addr,a),Bj(r,a));for(let o=0;o!==i;++o)n.setTexture2DArray(t[o]||jj,a[o])}class TP{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Hj;case 35664:return Vj;case 35665:return Wj;case 35666:return Gj;case 35674:return Xj;case 35675:return qj;case 35676:return Yj;case 5124:case 35670:return Kj;case 35667:case 35671:return Zj;case 35668:case 35672:return Jj;case 35669:case 35673:return $j;case 5125:return Qj;case 36294:return eP;case 36295:return tP;case 36296:return nP;case 35678:case 36198:case 36298:case 36306:case 35682:return rP;case 35679:case 36299:case 36307:return iP;case 35680:case 36300:case 36308:case 36293:return aP;case 36289:case 36303:case 36311:case 36292:return oP}}(t.type)}}class NP{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return sP;case 35664:return lP;case 35665:return cP;case 35666:return uP;case 35674:return dP;case 35675:return hP;case 35676:return pP;case 5124:case 35670:return fP;case 35667:case 35671:return mP;case 35668:case 35672:return gP;case 35669:case 35673:return vP;case 5125:return xP;case 36294:return yP;case 36295:return bP;case 36296:return wP;case 35678:case 36198:case 36298:case 36306:case 35682:return _P;case 35679:case 36299:case 36307:return SP;case 35680:case 36300:case 36308:case 36293:return EP;case 36289:case 36303:case 36311:case 36292:return MP}}(t.type)}}class CP{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(e,t[a.id],n)}}}const AP=/(\w+)(\])?(\[|\.)?/g;function jP(e,t){e.seq.push(t),e.map[t.id]=t}function PP(e,t,n){const r=e.name,i=r.length;for(AP.lastIndex=0;;){const a=AP.exec(r),o=AP.lastIndex;let s=a[1];const l="]"===a[2],c=a[3];if(l&&(s|=0),void 0===c||"["===c&&o+2===i){jP(n,void 0===c?new TP(s,e,t):new NP(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new CP(s),jP(n,e)),n=e}}}class OP{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);PP(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){const a=t[i],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function kP(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let RP=0;function DP(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let o=i;o<a;o++){const e=o+1;r.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),r)}return i}function LP(e,t){const n=function(e){const t=lN.getPrimaries(lN.workingColorSpace),n=lN.getPrimaries(e);let r;switch(t===n?r="":t===_T&&n===wT?r="LinearDisplayP3ToLinearSRGB":t===wT&&n===_T&&(r="LinearSRGBToLinearDisplayP3"),e){case gT:case xT:return[r,"LinearTransferOETF"];case mT:case vT:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[r,"LinearTransferOETF"]}}(t);return"vec4 ".concat(e,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function IP(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function UP(e){return""!==e}function FP(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function BP(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const zP=/^[ \t]*#include +<([\w\d./]+)>/gm;function HP(e){return e.replace(zP,WP)}const VP=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function WP(e,t){let n=YA[t];if(void 0===n){const e=VP.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=YA[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return HP(n)}const GP=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function XP(e){return e.replace(GP,qP)}function qP(e,t,n,r){let i="";for(let a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function YP(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function KP(e,t,n,r){const i=e.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case OM:case kM:t="ENVMAP_TYPE_CUBE";break;case LM:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===kM&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),h=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(UP).join("\n")}(n),f=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),m=i.createProgram();let g,v,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(UP).join("\n"),g.length>0&&(g+="\n"),v=[p,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(UP).join("\n"),v.length>0&&(v+="\n")):(g=[YP(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(UP).join("\n"),v=[p,YP(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?YA.tonemapping_pars_fragment:"",0!==n.toneMapping?IP("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",YA.colorspace_pars_fragment,LP("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(UP).join("\n")),o=HP(o),o=FP(o,n),o=BP(o,n),s=HP(s),s=FP(s,n),s=BP(s,n),o=XP(o),s=XP(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===kT?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===kT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const y=x+g+o,b=x+v+s,w=kP(i,i.VERTEX_SHADER,y),_=kP(i,i.FRAGMENT_SHADER,b);function S(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(m).trim(),r=i.getShaderInfoLog(w).trim(),a=i.getShaderInfoLog(_).trim();let o=!0,s=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(o=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(i,m,w,_);else{const e=DP(i,w,"vertex"),t=DP(i,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==a||(s=!1);s&&(t.diagnostics={runnable:o,programLog:n,vertexShader:{log:r,prefix:g},fragmentShader:{log:a,prefix:v}})}i.deleteShader(w),i.deleteShader(_),E=new OP(i,m),M=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),a=r.name;let o=1;r.type===e.FLOAT_MAT2&&(o=2),r.type===e.FLOAT_MAT3&&(o=3),r.type===e.FLOAT_MAT4&&(o=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(i,m)}let E,M;i.attachShader(m,w),i.attachShader(m,_),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),this.getUniforms=function(){return void 0===E&&S(this),E},this.getAttributes=function(){return void 0===M&&S(this),M};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=i.getProgramParameter(m,37297)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=RP++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=_,this}let ZP=0;class JP{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new $P(e),t.set(e,n)),n}}class $P{constructor(e){this.id=ZP++,this.code=e,this.usedTimes=0}}function QP(e,t,n,r,i,a,o){const s=new dC,l=new JP,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 0===e?"uv":"uv".concat(e)}return{getParameters:function(a,s,c,g,v){const x=g.fog,y=v.geometry,b=a.isMeshStandardMaterial?g.environment:null,w=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),_=w&&w.mapping===LM?w.image.height:null,S=f[a.type];null!==a.precision&&(p=i.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const E=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,M=void 0!==E?E.length:0;let T,N,C,A,j=0;if(void 0!==y.morphAttributes.position&&(j=1),void 0!==y.morphAttributes.normal&&(j=2),void 0!==y.morphAttributes.color&&(j=3),S){const e=ZA[S];T=e.vertexShader,N=e.fragmentShader}else T=a.vertexShader,N=a.fragmentShader,l.update(a),C=l.getVertexShaderID(a),A=l.getFragmentShaderID(a);const P=e.getRenderTarget(),O=!0===v.isInstancedMesh,k=!!a.map,R=!!a.matcap,D=!!w,L=!!a.aoMap,I=!!a.lightMap,U=!!a.bumpMap,F=!!a.normalMap,B=!!a.displacementMap,z=!!a.emissiveMap,H=!!a.metalnessMap,V=!!a.roughnessMap,W=a.anisotropy>0,G=a.clearcoat>0,X=a.iridescence>0,q=a.sheen>0,Y=a.transmission>0,K=W&&!!a.anisotropyMap,Z=G&&!!a.clearcoatMap,J=G&&!!a.clearcoatNormalMap,$=G&&!!a.clearcoatRoughnessMap,Q=X&&!!a.iridescenceMap,ee=X&&!!a.iridescenceThicknessMap,te=q&&!!a.sheenColorMap,ne=q&&!!a.sheenRoughnessMap,re=!!a.specularMap,ie=!!a.specularColorMap,ae=!!a.specularIntensityMap,oe=Y&&!!a.transmissionMap,se=Y&&!!a.thicknessMap,le=!!a.gradientMap,ce=!!a.alphaMap,ue=a.alphaTest>0,de=!!a.alphaHash,he=!!a.extensions,pe=!!y.attributes.uv1,fe=!!y.attributes.uv2,me=!!y.attributes.uv3;let ge=0;return a.toneMapped&&(null!==P&&!0!==P.isXRRenderTarget||(ge=e.toneMapping)),{isWebGL2:u,shaderID:S,shaderType:a.type,shaderName:a.name,vertexShader:T,fragmentShader:N,defines:a.defines,customVertexShaderID:C,customFragmentShaderID:A,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,instancing:O,instancingColor:O&&null!==v.instanceColor,supportsVertexTextures:h,outputColorSpace:null===P?e.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:gT,map:k,matcap:R,envMap:D,envMapMode:D&&w.mapping,envMapCubeUVHeight:_,aoMap:L,lightMap:I,bumpMap:U,normalMap:F,displacementMap:h&&B,emissiveMap:z,normalMapObjectSpace:F&&1===a.normalMapType,normalMapTangentSpace:F&&0===a.normalMapType,metalnessMap:H,roughnessMap:V,anisotropy:W,anisotropyMap:K,clearcoat:G,clearcoatMap:Z,clearcoatNormalMap:J,clearcoatRoughnessMap:$,iridescence:X,iridescenceMap:Q,iridescenceThicknessMap:ee,sheen:q,sheenColorMap:te,sheenRoughnessMap:ne,specularMap:re,specularColorMap:ie,specularIntensityMap:ae,transmission:Y,transmissionMap:oe,thicknessMap:se,gradientMap:le,opaque:!1===a.transparent&&1===a.blending,alphaMap:ce,alphaTest:ue,alphaHash:de,combine:a.combine,mapUv:k&&m(a.map.channel),aoMapUv:L&&m(a.aoMap.channel),lightMapUv:I&&m(a.lightMap.channel),bumpMapUv:U&&m(a.bumpMap.channel),normalMapUv:F&&m(a.normalMap.channel),displacementMapUv:B&&m(a.displacementMap.channel),emissiveMapUv:z&&m(a.emissiveMap.channel),metalnessMapUv:H&&m(a.metalnessMap.channel),roughnessMapUv:V&&m(a.roughnessMap.channel),anisotropyMapUv:K&&m(a.anisotropyMap.channel),clearcoatMapUv:Z&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:J&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:Q&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:ee&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:te&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:ne&&m(a.sheenRoughnessMap.channel),specularMapUv:re&&m(a.specularMap.channel),specularColorMapUv:ie&&m(a.specularColorMap.channel),specularIntensityMapUv:ae&&m(a.specularIntensityMap.channel),transmissionMapUv:oe&&m(a.transmissionMap.channel),thicknessMapUv:se&&m(a.thicknessMap.channel),alphaMapUv:ce&&m(a.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(F||W),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUv1s:pe,vertexUv2s:fe,vertexUv3s:me,pointsUvs:!0===v.isPoints&&!!y.attributes.uv&&(k||ce),fog:!!x,useFog:!0===a.fog,fogExp2:x&&x.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:M,morphTextureStride:j,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,useLegacyLights:e._useLegacyLights,decodeVideoTexture:k&&!0===a.map.isVideoTexture&&lN.getTransfer(a.map.colorSpace)===bT,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:he&&!0===a.extensions.derivatives,extensionFragDepth:he&&!0===a.extensions.fragDepth,extensionDrawBuffers:he&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:he&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0);t.supportsVertexTextures&&s.enable(1);t.instancing&&s.enable(2);t.instancingColor&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUv1s&&s.enable(13);t.vertexUv2s&&s.enable(14);t.vertexUv3s&&s.enable(15);t.vertexTangents&&s.enable(16);t.anisotropy&&s.enable(17);t.alphaHash&&s.enable(18);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.skinning&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.useLegacyLights&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.transmission&&s.enable(15);t.sheen&&s.enable(16);t.opaque&&s.enable(17);t.pointsUvs&&s.enable(18);t.decodeVideoTexture&&s.enable(19);e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=ZA[t];n=jA.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=c.length;e<i;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new KP(e,n,t,a),c.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function eO(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function tO(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function nO(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function rO(){const e=[];let t=0;const n=[],r=[],i=[];function a(n,r,i,a,o,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,c){const u=a(e,t,o,s,l,c);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)},unshift:function(e,t,o,s,l,c){const u=a(e,t,o,s,l,c);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||tO),r.length>1&&r.sort(t||nO),i.length>1&&i.sort(t||nO)}}}function iO(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new rO,e.set(t,[i])):n>=r.length?(i=new rO,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function aO(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new EN,color:new HC};break;case"SpotLight":n={position:new EN,direction:new EN,color:new HC,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new EN,color:new HC,distance:0,decay:0};break;case"HemisphereLight":n={direction:new EN,skyColor:new HC,groundColor:new HC};break;case"RectAreaLight":n={color:new HC,position:new EN,halfWidth:new EN,halfHeight:new EN}}return e[t.id]=n,n}}}let oO=0;function sO(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function lO(e,t){const n=new aO,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ZT};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ZT,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new EN);const a=new EN,o=new eC,s=new eC;return{setup:function(a,o){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,d=0,h=0,p=0,f=0,m=0,g=0,v=0,x=0,y=0,b=0;a.sort(sO);const w=!0===o?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],o=t.color,_=t.intensity,S=t.distance,E=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=o.r*_*w,l+=o.g*_*w,c+=o.b*_*w;else if(t.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],_);b++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*w),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=E,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(o).multiplyScalar(_*w),e.distance=S,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[h]=e;const a=t.shadow;if(t.map&&(i.spotLightMap[x]=t.map,x++,a.updateMatrices(t),t.castShadow&&y++),i.spotLightMatrix[h]=a.matrix,t.castShadow){const e=r.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,i.spotShadow[h]=e,i.spotShadowMap[h]=E,v++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(o).multiplyScalar(_),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*w),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=E,i.pointShadowMatrix[d]=t.shadow.matrix,g++}i.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(_*w),e.groundColor.copy(t.groundColor).multiplyScalar(_*w),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=KA.LTC_FLOAT_1,i.rectAreaLTC2=KA.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=KA.LTC_HALF_1,i.rectAreaLTC2=KA.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;const _=i.hash;_.directionalLength===u&&_.pointLength===d&&_.spotLength===h&&_.rectAreaLength===p&&_.hemiLength===f&&_.numDirectionalShadows===m&&_.numPointShadows===g&&_.numSpotShadows===v&&_.numSpotMaps===x&&_.numLightProbes===b||(i.directional.length=u,i.spot.length=h,i.rectArea.length=p,i.point.length=d,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+x-y,i.spotLightMap.length=x,i.numSpotLightShadowsWithMaps=y,i.numLightProbes=b,_.directionalLength=u,_.pointLength=d,_.spotLength=h,_.rectAreaLength=p,_.hemiLength=f,_.numDirectionalShadows=m,_.numPointShadows=g,_.numSpotShadows=v,_.numSpotMaps=x,_.numLightProbes=b,i.version=oO++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let h=0,p=e.length;h<p;h++){const t=e[h];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(t.matrixWorld),a.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(d),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),s.identity(),o.copy(t.matrixWorld),o.premultiply(d),s.extractRotation(o),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(d),r++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(d),u++}}},state:i}}function cO(e,t){const n=new lO(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function uO(e,t){let n=new WeakMap;return{get:function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=n.get(r);let o;return void 0===a?(o=new cO(e,t),n.set(r,[o])):i>=a.length?(o=new cO(e,t),a.push(o)):o=a[i],o},dispose:function(){n=new WeakMap}}}class dO extends GC{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class hO extends GC{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function pO(e,t,n){let r=new WA;const i=new ZT,a=new ZT,o=new xN,s=new dO({depthPacking:3201}),l=new hO,c={},u=n.maxTextureSize,d={[dM]:1,[hM]:0,[pM]:2},h=new PA({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ZT},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new oA;f.setAttribute("position",new KC(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new EA(f,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function x(n,r){const a=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new bN(i.x,i.y)),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,p,m,null)}function y(t,n,r,i){let a=null;const o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=a.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=a.clone(),r[t]=i),a=i}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=3===i?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial){e.properties.get(a).light=r}return a}function b(n,i,a,o,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=i[c.materialIndex];if(u&&u.visible){const t=y(n,u,o,s);e.renderBufferDirect(a,null,r,t,n,c)}}}else if(i.visible){const t=y(n,i,o,s);e.renderBufferDirect(a,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],i,a,o,s)}this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),h=e.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);const p=3!==v&&3===this.type,f=3===v&&3!==this.type;for(let m=0,g=t.length;m<g;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const d=c.getFrameExtents();if(i.multiply(d),a.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(a.x=Math.floor(u/d.x),i.x=a.x*d.x,c.mapSize.x=a.x),i.y>u&&(a.y=Math.floor(u/d.y),i.y=a.y*d.y,c.mapSize.y=a.y)),null===c.map||!0===p||!0===f){const e=3!==this.type?{minFilter:BM,magFilter:BM}:{};null!==c.map&&c.map.dispose(),c.map=new bN(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);o.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),h.viewport(o),c.updateMatrices(l,e),r=c.getFrustum(),b(n,s,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&x(c,s),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,d)}}function fO(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new xN;let r=null;const i=new xN(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?H(e.DEPTH_TEST):V(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){let t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):V(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,c=null}}},s=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,h=[],p=null,f=!1,m=null,g=null,v=null,x=null,y=null,b=null,w=null,_=new HC(0,0,0),S=0,E=!1,M=null,T=null,N=null,C=null,A=null;const j=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let P=!1,O=0;const k=e.getParameter(e.VERSION);-1!==k.indexOf("WebGL")?(O=parseFloat(/^WebGL (\d)/.exec(k)[1]),P=O>=1):-1!==k.indexOf("OpenGL ES")&&(O=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),P=O>=2);let R=null,D={};const L=e.getParameter(e.SCISSOR_BOX),I=e.getParameter(e.VIEWPORT),U=(new xN).fromArray(L),F=(new xN).fromArray(I);function B(t,n,i,a){const o=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<i;l++)!r||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,o);return s}const z={};function H(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function V(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}z[e.TEXTURE_2D]=B(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=B(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(z[e.TEXTURE_2D_ARRAY]=B(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=B(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),H(e.DEPTH_TEST),a.setFunc(3),q(!1),Y(1),H(e.CULL_FACE),X(0);const W={[fM]:e.FUNC_ADD,[mM]:e.FUNC_SUBTRACT,[gM]:e.FUNC_REVERSE_SUBTRACT};if(r)W[103]=e.MIN,W[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(W[103]=e.MIN_EXT,W[104]=e.MAX_EXT)}const G={[vM]:e.ZERO,[xM]:e.ONE,[yM]:e.SRC_COLOR,[wM]:e.SRC_ALPHA,[NM]:e.SRC_ALPHA_SATURATE,[MM]:e.DST_COLOR,[SM]:e.DST_ALPHA,[bM]:e.ONE_MINUS_SRC_COLOR,[_M]:e.ONE_MINUS_SRC_ALPHA,[TM]:e.ONE_MINUS_DST_COLOR,[EM]:e.ONE_MINUS_DST_ALPHA,[CM]:e.CONSTANT_COLOR,[AM]:e.ONE_MINUS_CONSTANT_COLOR,[jM]:e.CONSTANT_ALPHA,[PM]:e.ONE_MINUS_CONSTANT_ALPHA};function X(t,n,r,i,a,o,s,l,c,u){if(0!==t){if(!1===f&&(H(e.BLEND),f=!0),5===t)a=a||n,o=o||r,s=s||i,n===g&&a===y||(e.blendEquationSeparate(W[n],W[a]),g=n,y=a),r===v&&i===x&&o===b&&s===w||(e.blendFuncSeparate(G[r],G[i],G[o],G[s]),v=r,x=i,b=o,w=s),!1!==l.equals(_)&&c===S||(e.blendColor(l.r,l.g,l.b,c),_.copy(l),S=c),m=t,E=!1;else if(t!==m||u!==E){if(g===fM&&y===fM||(e.blendEquation(e.FUNC_ADD),g=fM,y=fM),u)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,x=null,b=null,w=null,_.set(0,0,0),S=0,m=t,E=u}}else!0===f&&(V(e.BLEND),f=!1)}function q(t){M!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),M=t)}function Y(t){0!==t?(H(e.CULL_FACE),t!==T&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):V(e.CULL_FACE),T=t}function K(t,n,r){t?(H(e.POLYGON_OFFSET_FILL),C===n&&A===r||(e.polygonOffset(n,r),C=n,A=r)):V(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:a,stencil:o},enable:H,disable:V,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let a=h,o=!1;if(r)if(a=d.get(i),void 0===a&&(a=[],d.set(i,a)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)a[n]=e.COLOR_ATTACHMENT0+n;a.length=t.length,o=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,o=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:X,setMaterial:function(t,n){2===t.side?V(e.CULL_FACE):H(e.CULL_FACE);let r=1===t.side;n&&(r=!r),q(r),1===t.blending&&!1===t.transparent?X(0):X(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),i.setMask(t.colorWrite);const s=t.stencilWrite;o.setTest(s),s&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),K(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):V(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:q,setCullFace:Y,setLineWidth:function(t){t!==N&&(P&&e.lineWidth(t),N=t)},setPolygonOffset:K,setScissorTest:function(t){t?H(e.SCISSOR_TEST):V(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+j-1),R!==t&&(e.activeTexture(t),R=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===R?e.TEXTURE0+j-1:R);let i=D[r];void 0===i&&(i={type:void 0,texture:void 0},D[r]=i),i.type===t&&i.texture===n||(R!==r&&(e.activeTexture(r),R=r),e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=D[R];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=l.get(n).get(t);s.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),s.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},R=null,D={},u={},d=new WeakMap,h=[],p=null,f=!1,m=null,g=null,v=null,x=null,y=null,b=null,w=null,_=new HC(0,0,0),S=0,E=!1,M=null,T=null,N=null,C=null,A=null,U.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),i.reset(),a.reset(),o.reset()}}}function mO(e,t,n,r,i,a,o){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function x(e,t){return v?new OffscreenCanvas(e,t):eN("canvas")}function y(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?XT:Math.floor,a=r(i*e.width),o=r(i*e.height);void 0===m&&(m=x(a,o));const s=n?x(a,o):m;s.width=a,s.height=o;return s.getContext("2d").drawImage(e,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return GT(e.width)&&GT(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==BM&&e.minFilter!==VM}function _(t){e.generateMipmap(t)}function S(n,r,i,a){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;if(r===e.RED&&(i===e.FLOAT&&(l=e.R32F),i===e.HALF_FLOAT&&(l=e.R16F),i===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(l=e.R8UI),i===e.UNSIGNED_SHORT&&(l=e.R16UI),i===e.UNSIGNED_INT&&(l=e.R32UI),i===e.BYTE&&(l=e.R8I),i===e.SHORT&&(l=e.R16I),i===e.INT&&(l=e.R32I)),r===e.RG&&(i===e.FLOAT&&(l=e.RG32F),i===e.HALF_FLOAT&&(l=e.RG16F),i===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RGBA){const t=o?yT:lN.getTransfer(a);i===e.FLOAT&&(l=e.RGBA32F),i===e.HALF_FLOAT&&(l=e.RGBA16F),i===e.UNSIGNED_BYTE&&(l=t===bT?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function E(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&e.minFilter!==BM&&e.minFilter!==VM?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function M(t){return t===BM||t===zM||t===HM?e.NEAREST:e.LINEAR}function T(e){const t=e.target;t.removeEventListener("dispose",T),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=g.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&C(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function N(t){const n=t.target;n.removeEventListener("dispose",N),function(t){const n=t.texture,i=r.get(t),a=r.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(i.__webglFramebuffer[r]))for(let t=0;t<i.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(i.__webglFramebuffer[r][t]);else e.deleteFramebuffer(i.__webglFramebuffer[r]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r])}else{if(Array.isArray(i.__webglFramebuffer))for(let t=0;t<i.__webglFramebuffer.length;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let s=0,l=n.length;s<l;s++){const t=r.get(n[s]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),o.memory.textures--),r.remove(n[s])}r.remove(n),r.remove(t)}(n)}function C(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete g.get(i)[n.__cacheKey],o.memory.textures--}let A=0;function j(t,i){const a=r.get(t);if(t.isVideoTexture&&function(e){const t=o.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void L(a,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}const P={[IM]:e.REPEAT,[UM]:e.CLAMP_TO_EDGE,[FM]:e.MIRRORED_REPEAT},O={[BM]:e.NEAREST,[zM]:e.NEAREST_MIPMAP_NEAREST,[HM]:e.NEAREST_MIPMAP_LINEAR,[VM]:e.LINEAR,[WM]:e.LINEAR_MIPMAP_NEAREST,[GM]:e.LINEAR_MIPMAP_LINEAR},k={[ET]:e.NEVER,[PT]:e.ALWAYS,[MT]:e.LESS,[NT]:e.LEQUAL,[TT]:e.EQUAL,[jT]:e.GEQUAL,[CT]:e.GREATER,[AT]:e.NOTEQUAL};function R(n,a,o){if(o?(e.texParameteri(n,e.TEXTURE_WRAP_S,P[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,P[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,P[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,O[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,O[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS===UM&&a.wrapT===UM||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,M(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,M(a.minFilter)),a.minFilter!==BM&&a.minFilter!==VM&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,k[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const o=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===BM)return;if(a.minFilter!==HM&&a.minFilter!==GM)return;if(a.type===ZM&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&a.type===JM&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function D(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",T));const i=n.source;let a=g.get(i);void 0===a&&(a={},g.set(i,a));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;const i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&C(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function L(t,i,o){let l=e.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),i.isData3DTexture&&(l=e.TEXTURE_3D);const c=D(t,i),d=i.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);const h=r.get(d);if(d.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+o);const t=lN.getPrimaries(lN.workingColorSpace),r=i.colorSpace===fT?null:lN.getPrimaries(i.colorSpace),p=i.colorSpace===fT||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const f=function(e){return!s&&(e.wrapS!==UM||e.wrapT!==UM||e.minFilter!==BM&&e.minFilter!==VM)}(i)&&!1===b(i.image);let m=y(i.image,f,!1,u);m=H(i,m);const g=b(m)||s,v=a.convert(i.format,i.colorSpace);let x,M=a.convert(i.type),T=S(i.internalFormat,v,M,i.colorSpace,i.isVideoTexture);R(l,i,g);const N=i.mipmaps,C=s&&!0!==i.isVideoTexture,A=void 0===h.__version||!0===c,j=E(i,m,g);if(i.isDepthTexture)T=e.DEPTH_COMPONENT,s?T=i.type===ZM?e.DEPTH_COMPONENT32F:i.type===KM?e.DEPTH_COMPONENT24:i.type===$M?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:i.type===ZM&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===eT&&T===e.DEPTH_COMPONENT&&i.type!==qM&&i.type!==KM&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=KM,M=a.convert(i.type)),i.format===tT&&T===e.DEPTH_COMPONENT&&(T=e.DEPTH_STENCIL,i.type!==$M&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=$M,M=a.convert(i.type))),A&&(C?n.texStorage2D(e.TEXTURE_2D,1,T,m.width,m.height):n.texImage2D(e.TEXTURE_2D,0,T,m.width,m.height,0,v,M,null));else if(i.isDataTexture)if(N.length>0&&g){C&&A&&n.texStorage2D(e.TEXTURE_2D,j,T,N[0].width,N[0].height);for(let t=0,r=N.length;t<r;t++)x=N[t],C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,v,M,x.data):n.texImage2D(e.TEXTURE_2D,t,T,x.width,x.height,0,v,M,x.data);i.generateMipmaps=!1}else C?(A&&n.texStorage2D(e.TEXTURE_2D,j,T,m.width,m.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,v,M,m.data)):n.texImage2D(e.TEXTURE_2D,0,T,m.width,m.height,0,v,M,m.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){C&&A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,j,T,N[0].width,N[0].height,m.depth);for(let t=0,r=N.length;t<r;t++)x=N[t],i.format!==QM?null!==v?C?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,m.depth,v,x.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,T,x.width,x.height,m.depth,0,x.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,m.depth,v,M,x.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,T,x.width,x.height,m.depth,0,v,M,x.data)}else{C&&A&&n.texStorage2D(e.TEXTURE_2D,j,T,N[0].width,N[0].height);for(let t=0,r=N.length;t<r;t++)x=N[t],i.format!==QM?null!==v?C?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,v,x.data):n.compressedTexImage2D(e.TEXTURE_2D,t,T,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,v,M,x.data):n.texImage2D(e.TEXTURE_2D,t,T,x.width,x.height,0,v,M,x.data)}else if(i.isDataArrayTexture)C?(A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,j,T,m.width,m.height,m.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,v,M,m.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,T,m.width,m.height,m.depth,0,v,M,m.data);else if(i.isData3DTexture)C?(A&&n.texStorage3D(e.TEXTURE_3D,j,T,m.width,m.height,m.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,v,M,m.data)):n.texImage3D(e.TEXTURE_3D,0,T,m.width,m.height,m.depth,0,v,M,m.data);else if(i.isFramebufferTexture){if(A)if(C)n.texStorage2D(e.TEXTURE_2D,j,T,m.width,m.height);else{let t=m.width,r=m.height;for(let i=0;i<j;i++)n.texImage2D(e.TEXTURE_2D,i,T,t,r,0,v,M,null),t>>=1,r>>=1}}else if(N.length>0&&g){C&&A&&n.texStorage2D(e.TEXTURE_2D,j,T,N[0].width,N[0].height);for(let t=0,r=N.length;t<r;t++)x=N[t],C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,v,M,x):n.texImage2D(e.TEXTURE_2D,t,T,v,M,x);i.generateMipmaps=!1}else C?(A&&n.texStorage2D(e.TEXTURE_2D,j,T,m.width,m.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,v,M,m)):n.texImage2D(e.TEXTURE_2D,0,T,v,M,m);w(i,g)&&_(l),h.__version=d.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function I(t,i,o,s,l,c){const u=a.convert(o.format,o.colorSpace),d=a.convert(o.type),p=S(o.internalFormat,u,d,o.colorSpace);if(!r.get(i).__hasExternalTextures){const t=Math.max(1,i.width>>c),r=Math.max(1,i.height>>c);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,c,p,t,r,i.depth,0,u,d,null):n.texImage2D(l,c,p,t,r,0,u,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),z(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,l,r.get(o).__webglTexture,0,B(i)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,l,r.get(o).__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function U(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=!0===s?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(r||z(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===ZM?i=e.DEPTH_COMPONENT32F:t.type===KM&&(i=e.DEPTH_COMPONENT24));const r=B(n);z(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=B(n);r&&!1===z(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):z(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const o=t[i],s=a.convert(o.format,o.colorSpace),l=a.convert(o.type),c=S(o.internalFormat,s,l,o.colorSpace),u=B(n);r&&!1===z(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,n.width,n.height):z(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function F(t){const i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),j(i.depthTexture,0);const a=r.get(i.depthTexture).__webglTexture,o=B(i);if(i.depthTexture.format===eT)z(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(i.depthTexture.format!==tT)throw new Error("Unknown depthTexture format");z(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),U(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),U(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function B(e){return Math.min(d,e.samples)}function z(e){const n=r.get(e);return s&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function H(e,n){const r=e.colorSpace,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===RT||r!==gT&&r!==fT&&(lN.getTransfer(r)===bT?!1===s?!0===t.has("EXT_sRGB")&&i===QM?(e.format=RT,e.minFilter=VM,e.generateMipmaps=!1):n=hN.sRGBToLinear(n):i===QM&&a===XM||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=function(){const e=A;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),A+=1,e},this.resetTextureUnits=function(){A=0},this.setTexture2D=j,this.setTexture2DArray=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?L(a,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?L(a,t,i):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?function(t,i,o){if(6!==i.image.length)return;const l=D(t,i),u=i.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);const d=r.get(u);if(u.version!==d.__version||!0===l){n.activeTexture(e.TEXTURE0+o);const t=lN.getPrimaries(lN.workingColorSpace),r=i.colorSpace===fT?null:lN.getPrimaries(i.colorSpace),h=i.colorSpace===fT||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const p=i.isCompressedTexture||i.image[0].isCompressedTexture,f=i.image[0]&&i.image[0].isDataTexture,m=[];for(let e=0;e<6;e++)m[e]=p||f?f?i.image[e].image:i.image[e]:y(i.image[e],!1,!0,c),m[e]=H(i,m[e]);const g=m[0],v=b(g)||s,x=a.convert(i.format,i.colorSpace),M=a.convert(i.type),T=S(i.internalFormat,x,M,i.colorSpace),N=s&&!0!==i.isVideoTexture,C=void 0===d.__version||!0===l;let A,j=E(i,g,v);if(R(e.TEXTURE_CUBE_MAP,i,v),p){N&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,j,T,g.width,g.height);for(let t=0;t<6;t++){A=m[t].mipmaps;for(let r=0;r<A.length;r++){const a=A[r];i.format!==QM?null!==x?N?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,a.width,a.height,x,a.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,T,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):N?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,a.width,a.height,x,M,a.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,T,a.width,a.height,0,x,M,a.data)}}}else{A=i.mipmaps,N&&C&&(A.length>0&&j++,n.texStorage2D(e.TEXTURE_CUBE_MAP,j,T,m[0].width,m[0].height));for(let t=0;t<6;t++)if(f){N?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m[t].width,m[t].height,x,M,m[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,T,m[t].width,m[t].height,0,x,M,m[t].data);for(let r=0;r<A.length;r++){const i=A[r].image[t].image;N?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,x,M,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,T,i.width,i.height,0,x,M,i.data)}}else{N?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,x,M,m[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,T,x,M,m[t]);for(let r=0;r<A.length;r++){const i=A[r];N?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,x,M,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,T,x,M,i.image[t])}}}w(i,v)&&_(e.TEXTURE_CUBE_MAP),d.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(o,t,i):n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+i)},this.rebindTextures=function(t,n,i){const a=r.get(t);void 0!==n&&I(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&F(t)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",N),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,o.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,p=b(t)||s;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(s&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(s&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(h)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&t.samples>0&&!1===z(t)){const r=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const o=a.convert(i.format,i.colorSpace),s=a.convert(i.type),l=S(i.internalFormat,o,s,i.colorSpace,!0===t.isXRRenderTarget),u=B(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),U(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),R(e.TEXTURE_CUBE_MAP,l,p);for(let n=0;n<6;n++)if(s&&l.mipmaps&&l.mipmaps.length>0)for(let r=0;r<l.mipmaps.length;r++)I(c.__webglFramebuffer[n][r],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else I(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);w(l,p)&&_(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const i=t.texture;for(let a=0,o=i.length;a<o;a++){const o=i[a],s=r.get(o);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),R(e.TEXTURE_2D,o,p),I(c.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,0),w(o,p)&&_(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(s?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),R(r,l,p),s&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)I(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,r,n);else I(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r,0);w(l,p)&&_(r),n.unbindTexture()}t.depthBuffer&&F(t)},this.updateRenderTargetMipmap=function(t){const i=b(t)||s,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,s=a.length;o<s;o++){const s=a[o];if(w(s,i)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(s).__webglTexture;n.bindTexture(i,a),_(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(s&&t.samples>0&&!1===z(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height;let s=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),d=!0===t.isWebGLMultipleRenderTargets;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),d&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),d){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),p&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=I,this.useMultisampledRTT=z}function gO(e,t,n){const r=n.isWebGL2;return{convert:function(n){let i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fT;const o=lN.getTransfer(a);if(n===XM)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(n===qM)return e.UNSIGNED_SHORT;if(n===YM)return e.INT;if(n===KM)return e.UNSIGNED_INT;if(n===ZM)return e.FLOAT;if(n===JM)return r?e.HALF_FLOAT:(i=t.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===QM)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===eT)return e.DEPTH_COMPONENT;if(n===tT)return e.DEPTH_STENCIL;if(n===RT)return i=t.get("EXT_sRGB"),null!==i?i.SRGB_ALPHA_EXT:null;if(1028===n)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===nT||n===rT||n===iT||n===aT)if(o===bT){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===nT)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===rT)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===iT)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===aT)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===nT)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===rT)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===iT)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===aT)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(35840===n)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return i=t.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(37492===n)return o===bT?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(37496===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(37808===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return o===bT?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===oT||36494===n||36495===n){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===oT)return o===bT?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(n===oT)return i.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===$M?r?e.UNSIGNED_INT_24_8:(i=t.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class vO extends kA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class xO extends MC{constructor(){super(),this.isGroup=!0,this.type="Group"}}const yO={type:"move"};class bO{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new xO,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new xO,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new EN,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new EN),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new xO,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new EN,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new EN),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null;const o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const a of e.hand.values()){const e=t.getJointPose(a,n),r=this._getHandJoint(l,a);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&o>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==o&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(yO)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new xO;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class wO extends vN{constructor(e,t,n,r,i,a,o,s,l,c){if((c=void 0!==c?c:eT)!==eT&&c!==tT)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===eT&&(n=KM),void 0===n&&c===tT&&(n=$M),super(null,r,i,a,o,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:BM,this.minFilter=void 0!==s?s:BM,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class _O extends IT{constructor(e,t){super();const n=this;let r=null,i=1,a=null,o="local-floor",s=1,l=null,c=null,u=null,d=null,h=null,p=null;const f=t.getContextAttributes();let m=null,g=null;const v=[],x=[],y=new kA;y.layers.enable(1),y.viewport=new xN;const b=new kA;b.layers.enable(2),b.viewport=new xN;const w=[y,b],_=new vO;_.layers.enable(1),_.layers.enable(2);let S=null,E=null;function M(e){const t=x.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function T(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",N);for(let e=0;e<v.length;e++){const t=x[e];null!==t&&(x[e]=null,v[e].disconnect(t))}S=null,E=null,e.setRenderTarget(m),h=null,d=null,u=null,r=null,g=null,O.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function N(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=x.indexOf(n);r>=0&&(x[r]=null,v[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=x.indexOf(n);if(-1===r){for(let e=0;e<v.length;e++){if(e>=x.length){x.push(n),r=e;break}if(null===x[e]){x[e]=n,r=e;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new bO,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new bO,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new bO,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",T),r.addEventListener("inputsourceschange",N),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),g=new bN(h.framebufferWidth,h.framebufferHeight,{format:QM,type:XM,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,a=null,o=null;f.depth&&(o=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?tT:eT,a=f.stencil?$M:KM);const s={colorFormat:t.RGBA8,depthFormat:o,scaleFactor:i};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(s),r.updateRenderState({layers:[d]}),g=new bN(d.textureWidth,d.textureHeight,{format:QM,type:XM,depthTexture:new wO(d.textureWidth,d.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0});e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(s),l=null,a=await r.requestReferenceSpace(o),O.setContext(r),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const C=new EN,A=new EN;function j(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;_.near=b.near=y.near=e.near,_.far=b.far=y.far=e.far,S===_.near&&E===_.far||(r.updateRenderState({depthNear:_.near,depthFar:_.far}),S=_.near,E=_.far);const t=e.parent,n=_.cameras;j(_,t);for(let r=0;r<n.length;r++)j(n[r],t);2===n.length?function(e,t,n){C.setFromMatrixPosition(t.matrixWorld),A.setFromMatrixPosition(n.matrixWorld);const r=C.distanceTo(A),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(a[8]+1)/a[0],h=o*u,p=o*d,f=r/(-u+d),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=o+f,v=s+f,x=h-m,y=p+(r-m),b=l*s/v*g,w=c*s/v*g;e.projectionMatrix.makePerspective(x,y,b,w,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(_,y,b):_.projectionMatrix.copy(y.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*BT*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,_,t)},this.getCamera=function(){return _},this.getFoveation=function(){if(null!==d||null!==h)return s},this.setFoveation=function(e){s=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let P=null;const O=new GA;O.setAnimationLoop(function(t,r){if(c=r.getViewerPose(l||a),p=r,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==_.cameras.length&&(_.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let a=null;if(null!==h)a=h.getViewport(i);else{const t=u.getViewSubImage(d,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let o=w[r];void 0===o&&(o=new kA,o.layers.enable(r),o.viewport=new xN,w[r]=o),o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(i.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(a.x,a.y,a.width,a.height),0===r&&(_.matrix.copy(o.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale)),!0===n&&_.cameras.push(o)}}for(let e=0;e<v.length;e++){const t=x[e],n=v[e];null!==t&&void 0!==n&&n.update(t,r,l||a)}P&&P(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),p=null}),this.setAnimationLoop=function(e){P=e},this.dispose=function(){}}}function SO(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,1===i.side&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),1===i.side&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const a=t.get(i).envMap;if(a&&(r.envMap.value=a,r.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*t,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,AA(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,o,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform));e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));const i=t.get(r).envMap;i&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function EO(e,t,n,r){let i={},a={},o=[];const s=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n){const r=e.value;if(void 0===n[t]){if("number"===typeof r)n[t]=r;else{const e=Array.isArray(r)?r:[r],i=[];for(let t=0;t<e.length;t++)i.push(e[t].clone());n[t]=i}return!0}if("number"===typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],i=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(i[t]))return n.copy(i[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,d){let h=i[n.id];void 0===h&&(!function(e){const t=e.uniforms;let n=0;const r=16;let i=0;for(let a=0,o=t.length;a<o;a++){const e=t[a],o={boundary:0,storage:0},s=Array.isArray(e.value)?e.value:[e.value];for(let t=0,n=s.length;t<n;t++){const e=c(s[t]);o.boundary+=e.boundary,o.storage+=e.storage}if(e.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,a>0){i=n%r;0!==i&&r-i-o.boundary<0&&(n+=r-i,e.__offset=n)}n+=o.storage}i=n%r,i>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",u));const p=d.program;r.updateUBOMapping(n,p);const f=t.render.frame;a[n.id]!==f&&(!function(t){const n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let i=0,o=r.length;i<o;i++){const t=r[i];if(!0===l(t,i,a)){const n=t.__offset,r=Array.isArray(t.value)?t.value:[t.value];let i=0;for(let a=0;a<r.length;a++){const o=r[a],s=c(o);"number"===typeof o?(t.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,n+i,t.__data)):o.isMatrix3?(t.__data[0]=o.elements[0],t.__data[1]=o.elements[1],t.__data[2]=o.elements[2],t.__data[3]=o.elements[0],t.__data[4]=o.elements[3],t.__data[5]=o.elements[4],t.__data[6]=o.elements[5],t.__data[7]=o.elements[0],t.__data[8]=o.elements[6],t.__data[9]=o.elements[7],t.__data[10]=o.elements[8],t.__data[11]=o.elements[0]):(o.toArray(t.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,n,t.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}class MO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=tN(),context:n=null,depth:r=!0,stencil:i=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=e;let d;this.isWebGLRenderer=!0,d=null!==n?n.getContextAttributes().alpha:a;const h=new Uint32Array(4),p=new Int32Array(4);let f=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=mT,this._useLegacyLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const x=this;let y=!1,b=0,w=0,_=null,S=-1,E=null;const M=new xN,T=new xN;let N=null;const C=new HC(0);let A=0,j=t.width,P=t.height,O=1,k=null,R=null;const D=new xN(0,0,j,P),L=new xN(0,0,j,P);let I=!1;const U=new WA;let F=!1,B=!1,z=null;const H=new eC,V=new ZT,W=new EN,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return null===_?O:1}let q,Y,K,Z,J,$,Q,ee,te,ne,re,ie,ae,oe,se,le,ce,ue,de,he,pe,fe,me,ge,ve=n;function xe(e,n){for(let r=0;r<e.length;r++){const i=e[r],a=t.getContext(i,n);if(null!==a)return a}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(rM)),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",_e,!1),t.addEventListener("webglcontextcreationerror",Se,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&t.shift(),ve=xe(t,e),null===ve)throw xe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&ve instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ie){throw console.error("THREE.WebGLRenderer: "+Ie.message),Ie}function ye(){q=new wj(ve),Y=new tj(ve,q,e),q.init(Y),fe=new gO(ve,q,Y),K=new fO(ve,q,Y),Z=new Ej(ve),J=new eO,$=new mO(ve,q,K,J,Y,fe,Z),Q=new rj(x),ee=new bj(x),te=new XA(ve,Y),me=new QA(ve,q,te,Y),ne=new _j(ve,te,Z,me),re=new Cj(ve,ne,te,Z),de=new Nj(ve,Y,$),le=new nj(J),ie=new QP(x,Q,ee,q,Y,me,le),ae=new SO(x,J),oe=new iO,se=new uO(q,Y),ue=new $A(x,Q,ee,K,re,d,s),ce=new pO(x,re,Y),ge=new EO(ve,Z,Y,K),he=new ej(ve,q,Z,Y),pe=new Sj(ve,q,Z,Y),Z.programs=ie.programs,x.capabilities=Y,x.extensions=q,x.properties=J,x.renderLists=oe,x.shadowMap=ce,x.state=K,x.info=Z}ye();const be=new _O(x,ve);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function _e(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const e=Z.autoReset,t=ce.enabled,n=ce.autoUpdate,r=ce.needsUpdate,i=ce.type;ye(),Z.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=r,ce.type=i}function Se(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ee(e){const t=e.target;t.removeEventListener("dispose",Ee),function(e){(function(e){const t=J.get(e).programs;void 0!==t&&(t.forEach(function(e){ie.releaseProgram(e)}),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),J.remove(e)}(t)}function Me(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,Re(e,t,n),e.side=0,e.needsUpdate=!0,Re(e,t,n),e.side=2):Re(e,t,n)}this.xr=be,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(e){void 0!==e&&(O=e,this.setSize(j,P,!1))},this.getSize=function(e){return e.set(j,P)},this.setSize=function(e,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(j=e,P=n,t.width=Math.floor(e*O),t.height=Math.floor(n*O),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(j*O,P*O).floor()},this.setDrawingBufferSize=function(e,n,r){j=e,P=n,O=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(M)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),K.viewport(M.copy(D).multiplyScalar(O).floor())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),K.scissor(T.copy(L).multiplyScalar(O).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(e){K.setScissorTest(I=e)},this.setOpaqueSort=function(e){k=e},this.setTransparentSort=function(e){R=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==_){const t=_.texture.format;e=1033===t||1031===t||1029===t}if(e){const e=_.texture.type,t=e===XM||e===KM||e===qM||e===$M||1017===e||1018===e,n=ue.getClearColor(),r=ue.getClearAlpha(),i=n.r,a=n.g,o=n.b;t?(h[0]=i,h[1]=a,h[2]=o,h[3]=r,ve.clearBufferuiv(ve.COLOR,0,h)):(p[0]=i,p[1]=a,p[2]=o,p[3]=r,ve.clearBufferiv(ve.COLOR,0,p))}else n|=ve.COLOR_BUFFER_BIT}e&&(n|=ve.DEPTH_BUFFER_BIT),t&&(n|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",_e,!1),t.removeEventListener("webglcontextcreationerror",Se,!1),oe.dispose(),se.dispose(),J.dispose(),Q.dispose(),ee.dispose(),re.dispose(),me.dispose(),ge.dispose(),ie.dispose(),be.dispose(),be.removeEventListener("sessionstart",Ne),be.removeEventListener("sessionend",Ce),z&&(z.dispose(),z=null),Ae.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=G);const o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=G);$.resetTextureUnits();const a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===_?x.outputColorSpace:!0===_.isXRRenderTarget?_.texture.colorSpace:gT,l=(r.isMeshStandardMaterial?ee:Q).get(r.envMap||o),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=0;r.toneMapped&&(null!==_&&!0!==_.isXRRenderTarget||(f=x.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,y=J.get(r),b=m.state.lights;if(!0===F&&(!0===B||e!==E)){const t=e===E&&r.id===S;le.setState(r,e,t)}let w=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputColorSpace!==s||i.isInstancedMesh&&!1===y.instancing?w=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?w=!0:i.isSkinnedMesh||!0!==y.skinning?i.isInstancedMesh&&!0===y.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===y.instancingColor&&null!==i.instanceColor||y.envMap!==l||!0===r.fog&&y.fog!==a?w=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===le.numPlanes&&y.numIntersection===le.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==d||y.morphNormals!==h||y.morphColors!==p||y.toneMapping!==f||!0===Y.isWebGL2&&y.morphTargetsCount!==v)&&(w=!0):w=!0:w=!0:w=!0:(w=!0,y.__version=r.version);let M=y.currentProgram;!0===w&&(M=Re(r,t,i));let T=!1,N=!1,C=!1;const A=M.getUniforms(),j=y.uniforms;K.useProgram(M.program)&&(T=!0,N=!0,C=!0);r.id!==S&&(S=r.id,N=!0);if(T||E!==e){A.setValue(ve,"projectionMatrix",e.projectionMatrix),A.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=A.map.cameraPosition;void 0!==t&&t.setValue(ve,W.setFromMatrixPosition(e.matrixWorld)),Y.logarithmicDepthBuffer&&A.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&A.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),E!==e&&(E=e,N=!0,C=!0)}if(i.isSkinnedMesh){A.setOptional(ve,i,"bindMatrix"),A.setOptional(ve,i,"bindMatrixInverse");const e=i.skeleton;e&&(Y.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),A.setValue(ve,"boneTexture",e.boneTexture,$),A.setValue(ve,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const k=n.morphAttributes;(void 0!==k.position||void 0!==k.normal||void 0!==k.color&&!0===Y.isWebGL2)&&de.update(i,n,M);(N||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,A.setValue(ve,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(j.envMap.value=l,j.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);N&&(A.setValue(ve,"toneMappingExposure",x.toneMappingExposure),y.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(j,C),a&&!0===r.fog&&ae.refreshFogUniforms(j,a),ae.refreshMaterialUniforms(j,r,O,P,z),OP.upload(ve,De(y),j,$));r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(OP.upload(ve,De(y),j,$),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&A.setValue(ve,"center",i.center);if(A.setValue(ve,"modelViewMatrix",i.modelViewMatrix),A.setValue(ve,"normalMatrix",i.normalMatrix),A.setValue(ve,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(Y.isWebGL2){const n=e[t];ge.update(n,M),ge.bind(n,M)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return M}(e,t,n,r,i);K.setMaterial(r,o);let l=n.index,c=1;if(!0===r.wireframe){if(l=ne.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,p=(u.start+u.count)*c;null!==a&&(h=Math.max(h,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(h=Math.max(h,0),p=Math.min(p,l.count)):void 0!==d&&null!==d&&(h=Math.max(h,0),p=Math.min(p,d.count));const f=p-h;if(f<0||f===1/0)return;let g;me.setup(i,r,s,n,l);let v=he;if(null!==l&&(g=te.get(l),v=pe,v.setIndex(g)),i.isMesh)!0===r.wireframe?(K.setLineWidth(r.wireframeLinewidth*X()),v.setMode(ve.LINES)):v.setMode(ve.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),K.setLineWidth(e*X()),i.isLineSegments?v.setMode(ve.LINES):i.isLineLoop?v.setMode(ve.LINE_LOOP):v.setMode(ve.LINE_STRIP)}else i.isPoints?v.setMode(ve.POINTS):i.isSprite&&v.setMode(ve.TRIANGLES);if(i.isInstancedMesh)v.renderInstances(h,f,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(h,f,t)}else v.render(h,f)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),m=se.get(n),m.init(),v.push(m),n.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))}),e!==n&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))}),m.setupLights(x._useLegacyLights);const r=new Set;return e.traverse(function(e){const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const a=t[i];Me(a,n,e),r.add(a)}else Me(t,n,e),r.add(t)}),v.pop(),m=null,r},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.compile(e,t,n);return new Promise(t=>{function n(){r.forEach(function(e){J.get(e).currentProgram.isReady()&&r.delete(e)}),0!==r.size?setTimeout(n,10):t(e)}null!==q.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Te=null;function Ne(){Ae.stop()}function Ce(){Ae.start()}const Ae=new GA;function je(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||U.intersectsSprite(e)){r&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=re.update(e),i=e.material;i.visible&&f.push(e,t,i,n,W.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||U.intersectsObject(e))){const t=re.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),W.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),W.copy(t.boundingSphere.center)),W.applyMatrix4(e.matrixWorld).applyMatrix4(H)),Array.isArray(i)){const r=t.groups;for(let a=0,o=r.length;a<o;a++){const o=r[a],s=i[o.materialIndex];s&&s.visible&&f.push(e,t,s,n,W.z,o)}}else i.visible&&f.push(e,t,i,n,W.z,null)}const i=e.children;for(let a=0,o=i.length;a<o;a++)je(i[a],t,n,r)}function Pe(e,t,n,r){const i=e.opaque,a=e.transmissive,o=e.transparent;m.setupLightsView(n),!0===F&&le.setGlobalState(x.clippingPlanes,n),a.length>0&&function(e,t,n,r){const i=!0===n.isScene?n.overrideMaterial:null;if(null!==i)return;const a=Y.isWebGL2;null===z&&(z=new bN(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")?JM:XM,minFilter:GM,samples:a?4:0}));x.getDrawingBufferSize(V),a?z.setSize(V.x,V.y):z.setSize(XT(V.x),XT(V.y));const o=x.getRenderTarget();x.setRenderTarget(z),x.getClearColor(C),A=x.getClearAlpha(),A<1&&x.setClearColor(16777215,.5);x.clear();const s=x.toneMapping;x.toneMapping=0,Oe(e,n,r),$.updateMultisampleRenderTarget(z),$.updateRenderTargetMipmap(z);let l=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c],i=e.object,a=e.geometry,o=e.material,s=e.group;if(2===o.side&&i.layers.test(r.layers)){const e=o.side;o.side=1,o.needsUpdate=!0,ke(i,n,r,a,o,s),o.side=e,o.needsUpdate=!0,l=!0}}!0===l&&($.updateMultisampleRenderTarget(z),$.updateRenderTargetMipmap(z));x.setRenderTarget(o),x.setClearColor(C,A),x.toneMapping=s}(i,a,t,n),r&&K.viewport(M.copy(r)),i.length>0&&Oe(i,t,n),a.length>0&&Oe(a,t,n),o.length>0&&Oe(o,t,n),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function Oe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){const a=e[i],o=a.object,s=a.geometry,l=null===r?a.material:r,c=a.group;o.layers.test(n.layers)&&ke(o,t,n,s,l,c)}}function ke(e,t,n,r,i,a){e.onBeforeRender(x,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(x,t,n,r,e,a),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=1,i.needsUpdate=!0,x.renderBufferDirect(n,t,r,i,e,a),i.side=0,i.needsUpdate=!0,x.renderBufferDirect(n,t,r,i,e,a),i.side=2):x.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(x,t,n,r,i,a)}function Re(e,t,n){!0!==t.isScene&&(t=G);const r=J.get(e),i=m.state.lights,a=m.state.shadowsArray,o=i.state.version,s=ie.getParameters(e,i.state,a,t,n),l=ie.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:Q).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",Ee),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return Le(e,s),u}else s.uniforms=ie.getUniforms(e),e.onBuild(n,s,x),e.onBeforeCompile(s,x),u=ie.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const d=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=le.uniform),Le(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotLightMatrix.value=i.state.spotLightMatrix,d.spotLightMap.value=i.state.spotLightMap,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function De(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=OP.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Le(e,t){const n=J.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ae.setAnimationLoop(function(e){Te&&Te(e)}),"undefined"!==typeof self&&Ae.setContext(self),this.setAnimationLoop=function(e){Te=e,be.setAnimationLoop(e),null===e?Ae.stop():Ae.start()},be.addEventListener("sessionstart",Ne),be.addEventListener("sessionend",Ce),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(x,e,t,_),m=se.get(e,v.length),m.init(),v.push(m),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),U.setFromProjectionMatrix(H),B=this.localClippingEnabled,F=le.init(this.clippingPlanes,B),f=oe.get(e,g.length),f.init(),g.push(f),je(e,t,0,x.sortObjects),f.finish(),!0===x.sortObjects&&f.sort(k,R),this.info.render.frame++,!0===F&&le.beginShadows();const n=m.state.shadowsArray;if(ce.render(n,e,t),!0===F&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(f,e),m.setupLights(x._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Pe(f,e,r,r.viewport)}}else Pe(f,e,t);null!==_&&($.updateMultisampleRenderTarget(_),$.updateRenderTargetMipmap(_)),!0===e.isScene&&e.onAfterRender(x,e,t),me.resetDefaultState(),S=-1,E=null,v.pop(),m=v.length>0?v[v.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(e,t,n){J.get(e.texture).__webglTexture=t,J.get(e.depthTexture).__webglTexture=n;const r=J.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=J.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=e,b=t,w=n;let r=!0,i=null,a=!1,o=!1;if(e){const s=J.get(e);void 0!==s.__useDefaultFramebuffer?(K.bindFramebuffer(ve.FRAMEBUFFER,null),r=!1):void 0===s.__webglFramebuffer?$.setupRenderTarget(e):s.__hasExternalTextures&&$.rebindTextures(e,J.get(e.texture).__webglTexture,J.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);const c=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],a=!0):i=Y.isWebGL2&&e.samples>0&&!1===$.useMultisampledRTT(e)?J.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,M.copy(e.viewport),T.copy(e.scissor),N=e.scissorTest}else M.copy(D).multiplyScalar(O).floor(),T.copy(L).multiplyScalar(O).floor(),N=I;if(K.bindFramebuffer(ve.FRAMEBUFFER,i)&&Y.drawBuffers&&r&&K.drawBuffers(e,i),K.viewport(M),K.scissor(T),K.setScissorTest(N),a){const r=J.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(o){const r=J.get(e.texture),i=t||0;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}S=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){K.bindFramebuffer(ve.FRAMEBUFFER,s);try{const o=e.texture,s=o.format,l=o.type;if(s!==QM&&fe.convert(s)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===JM&&(q.has("EXT_color_buffer_half_float")||Y.isWebGL2&&q.has("EXT_color_buffer_float"));if(l!==XM&&fe.convert(l)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==ZM||!(Y.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ve.readPixels(t,n,r,i,fe.convert(s),fe.convert(l),a)}finally{const e=null!==_?J.get(_).__webglFramebuffer:null;K.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r);$.setTexture2D(t,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,e.x,e.y,i,a),K.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=t.image.width,a=t.image.height,o=fe.convert(n.format),s=fe.convert(n.type);$.setTexture2D(n,0),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,n.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ve.texSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&ve.generateMipmap(ve.TEXTURE_2D),K.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=fe.convert(r.format),c=fe.convert(r.type);let u;if(r.isData3DTexture)$.setTexture3D(r,0),u=ve.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");$.setTexture2DArray(r,0),u=ve.TEXTURE_2D_ARRAY}ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,r.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,r.unpackAlignment);const d=ve.getParameter(ve.UNPACK_ROW_LENGTH),h=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),p=ve.getParameter(ve.UNPACK_SKIP_PIXELS),f=ve.getParameter(ve.UNPACK_SKIP_ROWS),m=ve.getParameter(ve.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ve.pixelStorei(ve.UNPACK_ROW_LENGTH,g.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,g.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,e.min.x),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,e.min.y),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ve.texSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,g.data)):ve.texSubImage3D(u,i,t.x,t.y,t.z,a,o,s,l,c,g),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,d),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,h),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,p),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,f),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&ve.generateMipmap(u),K.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?$.setTextureCube(e,0):e.isData3DTexture?$.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?$.setTexture2DArray(e,0):$.setTexture2D(e,0),K.unbindTexture()},this.resetState=function(){b=0,w=0,_=null,K.reset(),me.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return DT}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===vT?"display-p3":"srgb",t.unpackColorSpace=lN.workingColorSpace===xT?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===mT?pT:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===pT?mT:gT}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class extends MO{}).prototype.isWebGL1Renderer=!0;class TO extends MC{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class NO extends GC{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new HC(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const CO=new EN,AO=new EN,jO=new eC,PO=new QN,OO=new GN;class kO extends MC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new oA,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new NO;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)CO.fromBufferAttribute(t,e-1),AO.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=CO.distanceTo(AO);e.setAttribute("lineDistance",new $C(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),OO.copy(n.boundingSphere),OO.applyMatrix4(r),OO.radius+=i,!1===e.ray.intersectsSphere(OO))return;jO.copy(r).invert(),PO.copy(e.ray).applyMatrix4(jO);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new EN,c=new EN,u=new EN,d=new EN,h=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){for(let n=Math.max(0,a.start),r=Math.min(p.count,a.start+a.count)-1;n<r;n+=h){const r=p.getX(n),i=p.getX(n+1);l.fromBufferAttribute(f,r),c.fromBufferAttribute(f,i);if(PO.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const a=e.ray.origin.distanceTo(d);a<e.near||a>e.far||t.push({distance:a,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,a.start),r=Math.min(f.count,a.start+a.count)-1;n<r;n+=h){l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1);if(PO.distanceSqToSegment(l,c,d,u)>s)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const RO=new EN,DO=new EN;class LO extends kO{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)RO.fromBufferAttribute(t,e),DO.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+RO.distanceTo(DO);e.setAttribute("lineDistance",new $C(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class IO extends oA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],d=[],h=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const i=p,a=new ZT,f=new EN;let v=0;const x=!0===n?e:t,y=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*y,0),d.push(0,y,0),h.push(.5,.5),p++;const b=p;for(let e=0;e<=r;e++){const t=e/r*s+o,n=Math.cos(t),i=Math.sin(t);f.x=x*i,f.y=m*y,f.z=x*n,u.push(f.x,f.y,f.z),d.push(0,y,0),a.x=.5*n+.5,a.y=.5*i*y+.5,h.push(a.x,a.y),p++}for(let e=0;e<r;e++){const t=i+e,r=b+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const a=new EN,v=new EN;let x=0;const y=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,x=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+o,l=Math.sin(i),f=Math.cos(i);v.x=x*l,v.y=-g*n+m,v.z=x*f,u.push(v.x,v.y,v.z),a.set(l,y,f).normalize(),d.push(a.x,a.y,a.z),h.push(t,1-g),c.push(p++)}f.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],a=f[t][e+1];c.push(n,r,a),c.push(r,i,a),x+=6}l.addGroup(g,x,0),g+=x}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new $C(u,3)),this.setAttribute("normal",new $C(d,3)),this.setAttribute("uv",new $C(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new IO(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class UO extends oA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],s=[],l=[],c=new EN,u=new EN,d=new EN;for(let h=0;h<=n;h++)for(let a=0;a<=r;a++){const p=a/r*i,f=h/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),o.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),s.push(d.x,d.y,d.z),l.push(a/r),l.push(h/n)}for(let h=1;h<=n;h++)for(let e=1;e<=r;e++){const t=(r+1)*h+e-1,n=(r+1)*(h-1)+e-1,i=(r+1)*(h-1)+e,o=(r+1)*h+e;a.push(t,n,o),a.push(n,i,o)}this.setIndex(a),this.setAttribute("position",new $C(o,3)),this.setAttribute("normal",new $C(s,3)),this.setAttribute("uv",new $C(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new UO(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class FO extends GC{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new HC(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new HC(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ZT(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class BO extends GC{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new HC(16777215),this.specular=new HC(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new HC(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new ZT(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function zO(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function HO(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}class VO{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=i)){const o=t[1];e<o&&(n=2,i=o);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0;break n}break e}for(;n<a;){const r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let a=0;a!==r;++a)t[a]=n[i+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class WO extends VO{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:uT,endingEnd:uT}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case dT:i=e,o=2*t-n;break;case hT:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case dT:a=e,s=2*n-t;break;case hT:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=a*c}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-d*m+2*d*f-d*p,v=(1+d)*m+(-1.5-2*d)*f+(-.5+d)*p+1,x=(-1-h)*m+(1.5+h)*f+.5*p,y=h*m-h*f;for(let b=0;b!==o;++b)i[b]=g*a[c+b]+v*a[l+b]+x*a[s+b]+y*a[u+b];return i}}class GO extends VO{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,c=(n-t)/(r-t),u=1-c;for(let d=0;d!==o;++d)i[d]=a[l+d]*u+a[s+d]*c;return i}}class XO extends VO{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class qO{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=zO(t,this.TimeBufferType),this.values=zO(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:zO(e.times,Array),values:zO(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new XO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new GO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new WO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case sT:t=this.InterpolantFactoryMethodDiscrete;break;case lT:t=this.InterpolantFactoryMethodLinear;break;case cT:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sT;case this.InterpolantFactoryMethodLinear:return lT;case this.InterpolantFactoryMethodSmooth:return cT}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==i;o++){const t=n[o];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,t),e=!1;break}if(null!==a&&a>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,t,a),e=!1;break}a=t}if(void 0!==r&&HO(r))for(let o=0,s=r.length;o!==s;++o){const t=r[o];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===cT,i=e.length-1;let a=1;for(let o=1;o<i;++o){let i=!1;const s=e[o];if(s!==e[o+1]&&(1!==o||s!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,a=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[a+o]){i=!0;break}}}if(i){if(o!==a){e[a]=e[o];const r=o*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,o=0;o!==n;++o)t[r+o]=t[e+o];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}qO.prototype.TimeBufferType=Float32Array,qO.prototype.ValueBufferType=Float32Array,qO.prototype.DefaultInterpolation=lT;class YO extends qO{}YO.prototype.ValueTypeName="bool",YO.prototype.ValueBufferType=Array,YO.prototype.DefaultInterpolation=sT,YO.prototype.InterpolantFactoryMethodLinear=void 0,YO.prototype.InterpolantFactoryMethodSmooth=void 0;class KO extends qO{}KO.prototype.ValueTypeName="color";class ZO extends qO{}ZO.prototype.ValueTypeName="number";class JO extends VO{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t);let l=e*o;for(let c=l+o;l!==c;l+=4)SN.slerpFlat(i,0,a,l-o,a,l,s);return i}}class $O extends qO{InterpolantFactoryMethodLinear(e){return new JO(this.times,this.values,this.getValueSize(),e)}}$O.prototype.ValueTypeName="quaternion",$O.prototype.DefaultInterpolation=lT,$O.prototype.InterpolantFactoryMethodSmooth=void 0;class QO extends qO{}QO.prototype.ValueTypeName="string",QO.prototype.ValueBufferType=Array,QO.prototype.DefaultInterpolation=sT,QO.prototype.InterpolantFactoryMethodLinear=void 0,QO.prototype.InterpolantFactoryMethodSmooth=void 0;class ek extends qO{}ek.prototype.ValueTypeName="vector";class tk{constructor(e,t,n){const r=this;let i,a=!1,o=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const nk=new tk;class rk{constructor(e){this.manager=void 0!==e?e:nk,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}rk.DEFAULT_MATERIAL_NAME="__DEFAULT";Error;class ik extends MC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new HC(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const ak=new eC,ok=new EN,sk=new EN;class lk{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ZT(512,512),this.map=null,this.mapPass=null,this.matrix=new eC,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new WA,this._frameExtents=new ZT(1,1),this._viewportCount=1,this._viewports=[new xN(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;ok.setFromMatrixPosition(e.matrixWorld),t.position.copy(ok),sk.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(sk),t.updateMatrixWorld(),ak.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ak),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ak)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ck extends lk{constructor(){super(new ij(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class uk extends ik{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(MC.DEFAULT_UP),this.updateMatrix(),this.target=new MC,this.shadow=new ck}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class dk extends ik{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}const hk="\\[\\]\\.:\\/",pk=new RegExp("["+hk+"]","g"),fk="[^"+hk+"]",mk="[^"+hk.replace("\\.","")+"]",gk=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",fk)+/(WCOD+)?/.source.replace("WCOD",mk)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fk)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fk)+"$"),vk=["material","materials","bones","map"];class xk{constructor(e,t,n){this.path=t,this.parsedPath=n||xk.parseTrackName(t),this.node=xk.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new xk.Composite(e,t,n):new xk(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(pk,"")}static parseTrackName(e){const t=gk.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==vk.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=xk.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const a=e[r];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}xk.Composite=class{constructor(e,t,n){const r=n||xk.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},xk.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},xk.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},xk.prototype.GetterByBindingType=[xk.prototype._getValue_direct,xk.prototype._getValue_array,xk.prototype._getValue_arrayElement,xk.prototype._getValue_toArray],xk.prototype.SetterByBindingTypeAndVersioning=[[xk.prototype._setValue_direct,xk.prototype._setValue_direct_setNeedsUpdate,xk.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xk.prototype._setValue_array,xk.prototype._setValue_array_setNeedsUpdate,xk.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xk.prototype._setValue_arrayElement,xk.prototype._setValue_arrayElement_setNeedsUpdate,xk.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xk.prototype._setValue_fromArray,xk.prototype._setValue_fromArray_setNeedsUpdate,xk.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class yk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new QN(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new dC,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return wk(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(bk),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,i=e.length;r<i;r++)wk(e[r],this,n,t);return n.sort(bk),n}}function bk(e,t){return e.distance-t.distance}function wk(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)wk(r[e],t,n,!0)}}class _k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(HT(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Sk extends LO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new HC(n),r=new HC(r);const i=t/2,a=e/t,o=e/2,s=[],l=[];for(let u=0,d=0,h=-o;u<=t;u++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);const e=u===i?n:r;e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3,e.toArray(l,d),d+=3}const c=new oA;c.setAttribute("position",new $C(s,3)),c.setAttribute("color",new $C(l,3));super(c,new NO({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ek extends LO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new oA;n.setAttribute("position",new $C(t,3)),n.setAttribute("color",new $C([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new NO({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new HC,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:rM}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=rM);const Mk={type:"change"},Tk={type:"start"},Nk={type:"end"},Ck=new QN,Ak=new zA,jk=Math.cos(70*KT);class Pk extends IT{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new EN,this.cursor=new EN,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:iM,MIDDLE:aM,RIGHT:oM},this.touches={ONE:sM,TWO:cM},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",X),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",X),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(Mk),n.update(),i=r.NONE},this.update=function(){const t=new EN,u=(new SN).setFromUnitVectors(e.up,new EN(0,1,0)),d=u.clone().invert(),h=new EN,p=new SN,f=new EN,m=2*Math.PI;return function(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const v=n.object.position;t.copy(v).sub(n.target),t.applyQuaternion(u),o.setFromVector3(t),n.autoRotate&&i===r.NONE&&M(function(e){return null!==e?2*Math.PI/60*n.autoRotateSpeed*e:2*Math.PI/60/60*n.autoRotateSpeed}(g)),n.enableDamping?(o.theta+=s.theta*n.dampingFactor,o.phi+=s.phi*n.dampingFactor):(o.theta+=s.theta,o.phi+=s.phi);let x=n.minAzimuthAngle,_=n.maxAzimuthAngle;isFinite(x)&&isFinite(_)&&(x<-Math.PI?x+=m:x>Math.PI&&(x-=m),_<-Math.PI?_+=m:_>Math.PI&&(_-=m),o.theta=x<=_?Math.max(x,Math.min(_,o.theta)):o.theta>(x+_)/2?Math.max(x,o.theta):Math.min(_,o.theta)),o.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,o.phi)),o.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(c,n.dampingFactor):n.target.add(c),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor),n.zoomToCursor&&w||n.object.isOrthographicCamera?o.radius=k(o.radius):o.radius=k(o.radius*l),t.setFromSpherical(o),t.applyQuaternion(d),v.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(s.theta*=1-n.dampingFactor,s.phi*=1-n.dampingFactor,c.multiplyScalar(1-n.dampingFactor)):(s.set(0,0,0),c.set(0,0,0));let S=!1;if(n.zoomToCursor&&w){let r=null;if(n.object.isPerspectiveCamera){const e=t.length();r=k(e*l);const i=e-r;n.object.position.addScaledVector(y,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new EN(b.x,b.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/l)),n.object.updateProjectionMatrix(),S=!0;const i=new EN(b.x,b.y,0);i.unproject(n.object),n.object.position.sub(i).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(Ck.origin.copy(n.object.position),Ck.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Ck.direction))<jk?e.lookAt(n.target):(Ak.setFromNormalAndCoplanarPoint(n.object.up,n.target),Ck.intersectPlane(Ak,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/l)),n.object.updateProjectionMatrix(),S=!0);return l=1,w=!1,!!(S||h.distanceToSquared(n.object.position)>a||8*(1-p.dot(n.object.quaternion))>a||f.distanceToSquared(n.target)>0)&&(n.dispatchEvent(Mk),h.copy(n.object.position),p.copy(n.object.quaternion),f.copy(n.target),S=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",q),n.domElement.removeEventListener("pointerdown",H),n.domElement.removeEventListener("pointercancel",W),n.domElement.removeEventListener("wheel",G),n.domElement.removeEventListener("pointermove",V),n.domElement.removeEventListener("pointerup",W),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",X),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const a=1e-6,o=new _k,s=new _k;let l=1;const c=new EN,u=new ZT,d=new ZT,h=new ZT,p=new ZT,f=new ZT,m=new ZT,g=new ZT,v=new ZT,x=new ZT,y=new EN,b=new ZT;let w=!1;const _=[],S={};function E(){return Math.pow(.95,n.zoomSpeed)}function M(e){s.theta-=e}function T(e){s.phi-=e}const N=function(){const e=new EN;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),c.add(e)}}(),C=function(){const e=new EN;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),c.add(e)}}(),A=function(){const e=new EN;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),N(2*t*o/i.clientHeight,n.object.matrix),C(2*r*o/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(N(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),C(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function j(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?l/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?l*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){if(!n.zoomToCursor)return;w=!0;const t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,a=t.width,o=t.height;b.x=r/a*2-1,b.y=-i/o*2+1,y.set(b.x,b.y,1).unproject(n.object).sub(n.object.position).normalize()}function k(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function R(e){u.set(e.clientX,e.clientY)}function D(e){p.set(e.clientX,e.clientY)}function L(){if(1===_.length)u.set(_[0].pageX,_[0].pageY);else{const e=.5*(_[0].pageX+_[1].pageX),t=.5*(_[0].pageY+_[1].pageY);u.set(e,t)}}function I(){if(1===_.length)p.set(_[0].pageX,_[0].pageY);else{const e=.5*(_[0].pageX+_[1].pageX),t=.5*(_[0].pageY+_[1].pageY);p.set(e,t)}}function U(){const e=_[0].pageX-_[1].pageX,t=_[0].pageY-_[1].pageY,n=Math.sqrt(e*e+t*t);g.set(0,n)}function F(e){if(1==_.length)d.set(e.pageX,e.pageY);else{const t=K(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);d.set(n,r)}h.subVectors(d,u).multiplyScalar(n.rotateSpeed);const t=n.domElement;M(2*Math.PI*h.x/t.clientHeight),T(2*Math.PI*h.y/t.clientHeight),u.copy(d)}function B(e){if(1===_.length)f.set(e.pageX,e.pageY);else{const t=K(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);f.set(n,r)}m.subVectors(f,p).multiplyScalar(n.panSpeed),A(m.x,m.y),p.copy(f)}function z(e){const t=K(e),r=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(r*r+i*i);v.set(0,a),x.set(0,Math.pow(v.y/g.y,n.zoomSpeed)),j(x.y),g.copy(v)}function H(e){!1!==n.enabled&&(0===_.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",V),n.domElement.addEventListener("pointerup",W)),function(e){_.push(e)}(e),"touch"===e.pointerType?function(e){switch(Y(e),_.length){case 1:switch(n.touches.ONE){case sM:if(!1===n.enableRotate)return;L(),i=r.TOUCH_ROTATE;break;case lM:if(!1===n.enablePan)return;I(),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case cM:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&U(),n.enablePan&&I(),i=r.TOUCH_DOLLY_PAN;break;case uM:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&U(),n.enableRotate&&L(),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(Tk)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case aM:if(!1===n.enableZoom)return;!function(e){O(e),g.set(e.clientX,e.clientY)}(e),i=r.DOLLY;break;case iM:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;D(e),i=r.PAN}else{if(!1===n.enableRotate)return;R(e),i=r.ROTATE}break;case oM:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;R(e),i=r.ROTATE}else{if(!1===n.enablePan)return;D(e),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(Tk)}(e))}function V(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Y(e),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;F(e),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;B(e),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&z(e),n.enablePan&&B(e)}(e),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&z(e),n.enableRotate&&F(e)}(e),n.update();break;default:i=r.NONE}}(e):function(e){switch(i){case r.ROTATE:if(!1===n.enableRotate)return;!function(e){d.set(e.clientX,e.clientY),h.subVectors(d,u).multiplyScalar(n.rotateSpeed);const t=n.domElement;M(2*Math.PI*h.x/t.clientHeight),T(2*Math.PI*h.y/t.clientHeight),u.copy(d),n.update()}(e);break;case r.DOLLY:if(!1===n.enableZoom)return;!function(e){v.set(e.clientX,e.clientY),x.subVectors(v,g),x.y>0?j(E()):x.y<0&&P(E()),g.copy(v),n.update()}(e);break;case r.PAN:if(!1===n.enablePan)return;!function(e){f.set(e.clientX,e.clientY),m.subVectors(f,p).multiplyScalar(n.panSpeed),A(m.x,m.y),p.copy(f),n.update()}(e)}}(e))}function W(e){!function(e){delete S[e.pointerId];for(let t=0;t<_.length;t++)if(_[t].pointerId==e.pointerId)return void _.splice(t,1)}(e),0===_.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",V),n.domElement.removeEventListener("pointerup",W)),n.dispatchEvent(Nk),i=r.NONE}function G(e){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(e.preventDefault(),n.dispatchEvent(Tk),function(e){O(e),e.deltaY<0?P(E()):e.deltaY>0&&j(E()),n.update()}(e),n.dispatchEvent(Nk))}function X(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):A(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):A(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?M(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):A(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?M(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):A(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function q(e){!1!==n.enabled&&e.preventDefault()}function Y(e){let t=S[e.pointerId];void 0===t&&(t=new ZT,S[e.pointerId]=t),t.set(e.pageX,e.pageY)}function K(e){const t=e.pointerId===_[0].pointerId?_[1]:_[0];return S[t.pointerId]}n.domElement.addEventListener("contextmenu",q),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",W),n.domElement.addEventListener("wheel",G,{passive:!1}),this.update()}}const Ok=(e,t,n)=>{const r=new xO,i=(null===n||void 0===n?void 0:n.id)===e.id&&n.name===e.name,a=new HC(e.color||13421772);(e.maxOD>t.nippleID||e.maxOD>t.tubingID)&&a.setHex(16711680);const o=new FO({color:a,metalness:.7,roughness:.3,emissive:i?65535:0,emissiveIntensity:i?.4:0}),s=e=>Math.max((e||1)/2/12*4,.01),l=Math.max(e.length||.1,.1),c=s(e.maxOD);let u=0,d=0;if(e.latchProfile&&(e.latchProfile.includes("neck")||e.latchProfile.includes("internal"))){u=.25;const t=(e=>{if(!e)return null;const t=e.match(/([\d.]+)/);return t?parseFloat(t[1]):null})(e.latchProfile);d=t?s(t):.75*c,d>=c&&(d=.9*c),u>.4*l&&(u=.2*l)}let h=0,p=0;e.bottomConnection&&e.bottomConnection.toLowerCase().includes("pin")&&(h=.12,p=.65*c,h>.2*l&&(h=.1*l));const f=Math.max(l-u-h,.01);let m=0;if(u>0){const e=new IO(d,d,u,32),t=new EA(e,o);t.position.y=m-u/2,t.castShadow=!0,t.receiveShadow=!0,r.add(t),m-=u;const n=.02,i=new IO(d,c,n,32),a=new EA(i,o);a.position.y=m-n/2,r.add(a)}const g=new IO(c,c,f,32),v=new EA(g,o);if(v.position.y=m-f/2,v.castShadow=!0,v.receiveShadow=!0,r.add(v),m-=f,h>0){const e=new IO(p,.95*p,h,16),t=new EA(e,o);t.position.y=m-h/2,t.castShadow=!0,t.receiveShadow=!0,r.add(t),m-=h}return r.children.forEach(t=>{t.userData={component:e}}),r.userData={component:e},r},kk=e=>{const{toolString:n,wellData:r,wellboreData:i,showWellbore:a,selectedComponent:o,onSelectComponent:s}=e,l=(0,t.useRef)(null),c=(e=>{const n=(0,t.useRef)(null);return(0,t.useEffect)(()=>{if(!e.current)return;const t=e.current,r=t.clientWidth||300,i=t.clientHeight||300,a=new TO,o=new kA(50,r/i,.1,1e3);o.position.set(8,5,8);const s=new MO({canvas:t,antialias:!0,alpha:!0,preserveDrawingBuffer:!0});s.setPixelRatio(window.devicePixelRatio),s.setSize(r,i),s.shadowMap.enabled=!0,s.shadowMap.type=2;const l=new Pk(o,s.domElement);l.enableDamping=!0,l.dampingFactor=.05,l.target.set(0,-1,0),l.update();const c=new dk(16777215,.7);a.add(c);const u=new uk(16777215,1.5);u.position.set(15,20,10),u.castShadow=!0,u.shadow.mapSize.width=1024,u.shadow.mapSize.height=1024,a.add(u);const d=new uk(4478310,.8);d.position.set(-10,5,-10),a.add(d);const h=new Sk(20,20,5592405,3355443);h.position.y=-.01,a.add(h);const p=new Ek(2);a.add(p);const f=new xO;a.add(f);const m=new xO;a.add(m),n.current={scene:a,camera:o,renderer:s,controls:l,toolGroup:f,wellboreGroup:m};const g=new ResizeObserver(()=>{if(!t.parentElement)return;const e=t.parentElement.clientWidth,n=t.parentElement.clientHeight;e>0&&n>0&&(o.aspect=e/n,o.updateProjectionMatrix(),s.setSize(e,n))});let v;t.parentElement&&g.observe(t.parentElement);const x=()=>{v=requestAnimationFrame(x),l.update(),s.render(a,o)};return x(),()=>{cancelAnimationFrame(v),g.disconnect(),s.dispose()}},[e]),n})(l);return(0,t.useEffect)(()=>{if(!l.current||!c.current)return;const e=l.current,{camera:t,toolGroup:n}=c.current,r=r=>{const i=new yk,a=new ZT,l=e.getBoundingClientRect();if(0===l.width||0===l.height)return;a.x=(r.clientX-l.left)/l.width*2-1,a.y=-(r.clientY-l.top)/l.height*2+1,i.setFromCamera(a,t);const c=i.intersectObjects(n.children,!0).find(e=>e.object.userData.component);if(c){const e=c.object.userData.component;s(e.id===(null===o||void 0===o?void 0:o.id)?null:e)}else s(null)};return e.addEventListener("click",r),()=>e.removeEventListener("click",r)},[c,s,o]),(0,t.useEffect)(()=>{if(!c.current)return;const{toolGroup:e,controls:t,camera:i}=c.current;for(;e.children.length;){var a;const t=e.children[0];var s;if(e.remove(t),null===(a=t.geometry)||void 0===a||a.dispose(),Array.isArray(t.material))t.material.forEach(e=>e.dispose());else null===(s=t.material)||void 0===s||s.dispose()}let l=0;if(n.length>0){const t=.018,n=new IO(t,t,20,8),r=new FO({color:13421772,metalness:.5,roughness:.5}),i=new EA(n,r);i.position.y=10,e.add(i)}if(n.forEach((t,i)=>{try{if(i>0){const r=((e,t)=>{if(e.bottomConnection&&t.topConnection&&e.bottomConnection.replace("-Pin","")===t.topConnection.replace("-Box","")&&e.bottomConnection.endsWith("-Pin")&&t.topConnection.endsWith("-Box"))return!0;return!(!t.latchMechanism||!e.latchProfile||t.latchMechanism!==e.latchProfile)})(n[i-1],t),a=r?65280:16711680,o=Math.max(t.maxOD/2/12*4,.08),s=new UO(o+.02,.015,8,32),c=new XC({color:a,transparent:!0,opacity:.8}),u=new EA(s,c);u.rotation.x=Math.PI/2,u.position.y=l,e.add(u)}const a=t.length,s=Ok(t,r,o);s.position.y=l,l-=a,e.add(s)}catch(a){console.error("Error creating tool mesh:",a)}}),n.length>0){const e=l/2;t.target.set(0,e,0)}else t.target.set(0,-1,0),i.position.set(8,5,8);t.update()},[n,r,c,o]),(0,t.useEffect)(()=>{if(!c.current)return;const{wellboreGroup:e}=c.current;for(;e.children.length;){var t,n;const r=e.children[0];e.remove(r),null===(t=r.geometry)||void 0===t||t.dispose(),Array.isArray(r.material)?r.material.forEach(e=>e.dispose()):null===(n=r.material)||void 0===n||n.dispose()}if(a){const t=200,n=4,r=Math.max(i.tubingID/2/12*n,.05),a=new IO(r,r,t,32,1,!0),o=new BO({color:43775,transparent:!0,opacity:.15,side:2,depthWrite:!1,blending:2}),s=new EA(a,o);s.position.y=-50,e.add(s)}},[i,a,c]),(0,M.jsxs)("div",{className:"md:col-span-2 bg-gradient-to-b from-gray-900 to-black rounded-lg overflow-hidden relative border border-gray-700 shadow-inner h-full min-h-[500px] flex flex-col",children:[(0,M.jsx)("div",{className:"flex-1 w-full h-full relative",children:(0,M.jsx)("canvas",{ref:l,className:"w-full h-full block absolute inset-0"})}),(0,M.jsx)("div",{className:"absolute top-4 left-4 pointer-events-none",children:(0,M.jsxs)("div",{className:"bg-black/60 backdrop-blur-sm p-3 rounded-lg border border-gray-700 text-xs text-gray-300 shadow-lg",children:[(0,M.jsx)("p",{className:"font-bold text-white mb-1",children:"3D View Controls"}),(0,M.jsxs)("ul",{className:"space-y-1",children:[(0,M.jsxs)("li",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:"w-2 h-2 rounded-full bg-cyan-500"})," Left Click + Drag to Orbit"]}),(0,M.jsxs)("li",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:"w-2 h-2 rounded-full bg-cyan-500"})," Right Click + Drag to Pan"]}),(0,M.jsxs)("li",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:"w-2 h-2 rounded-full bg-cyan-500"})," Scroll to Zoom"]}),(0,M.jsxs)("li",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:"w-2 h-2 rounded-full bg-yellow-500"})," Click Component for Details"]}),(0,M.jsxs)("li",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:"w-2 h-2 rounded-full border border-green-500"})," Green Ring: Valid Connection"]}),(0,M.jsxs)("li",{className:"flex items-center gap-2",children:[(0,M.jsx)("span",{className:"w-2 h-2 rounded-full border border-red-500"})," Red Ring: Invalid Connection"]})]})]})}),(0,M.jsx)("div",{className:"absolute top-4 right-4 bg-black/60 backdrop-blur-sm p-3 rounded-lg border border-gray-700 text-xs shadow-lg",children:(0,M.jsxs)("div",{className:"flex items-center mb-2",children:[(0,M.jsx)("input",{type:"checkbox",id:"show-wellbore",checked:e.showWellbore,onChange:t=>e.onShowWellboreChange(t.target.checked),className:"mr-2 h-4 w-4 rounded border-gray-600 bg-gray-700 text-cyan-600 focus:ring-cyan-500"}),(0,M.jsx)("label",{htmlFor:"show-wellbore",className:"text-gray-200 font-medium",children:"Show Tubing Context"})]})})]})},Rk=e=>{let{label:t,value:n,sublabel:r,wire:i}=e;return(0,M.jsxs)("div",{className:"flex justify-between p-3 bg-gray-700 rounded-md transition-all duration-200 flex-col items-start ".concat(i?"ring-1 ring-cyan-500/30":""),children:[(0,M.jsxs)("div",{className:"flex justify-between w-full",children:[(0,M.jsx)("span",{className:"text-gray-400 text-sm",children:t}),(0,M.jsx)("span",{className:"text-white font-mono text-lg",children:n})]}),r&&(0,M.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:r})]})},Dk=e=>{let{calculations:t,hasTools:n}=e;const{totalWeight:r,totalLength:i,pressureAreaForce:a,weightDelta:o}=t,s=n?r>a?{status:"GO: String is Overbalanced",delta:"Margin: +".concat(o.toFixed(0)," lbs"),className:"bg-green-600 text-white"}:{status:"NO-GO: String is Underbalanced",delta:"Deficit: ".concat(o.toFixed(0)," lbs. Add stem."),className:"bg-red-600 text-white"}:{status:"--",delta:"Add components to calculate.",className:"bg-gray-600 text-gray-300"};return(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-600 pb-2",children:"Real-Time Validation"}),(0,M.jsxs)("div",{className:"space-y-3",children:[(0,M.jsx)(Rk,{label:"Total String Weight",value:"".concat(r.toFixed(0)," lbs")}),(0,M.jsx)(Rk,{label:"Total String Length",value:"".concat(i.toFixed(2)," ft")}),(0,M.jsx)(Rk,{label:"Pressure-Area Force",value:"".concat(a.toFixed(0)," lbs"),sublabel:'Force to overcome at WHP. (Based on 0.108" wire)',wire:!0}),(0,M.jsxs)("div",{className:"p-4 rounded-md text-center font-bold text-lg transition-all duration-300 ".concat(s.className),children:[(0,M.jsx)("span",{children:s.status}),(0,M.jsx)("p",{className:"text-sm font-normal",children:s.delta})]})]})]})},Lk=e=>{let{isValid:t}=e;return(0,M.jsxs)("div",{className:"flex justify-center items-center py-1",children:[(0,M.jsx)("div",{className:"h-4 w-0.5 ".concat(t?"bg-green-500/50":"bg-red-500/50")}),(0,M.jsx)("div",{className:"px-2 py-0.5 rounded text-[10px] font-bold border ".concat(t?"bg-green-900/30 border-green-600 text-green-400":"bg-red-900/30 border-red-600 text-red-400"),children:t?"LINK OK":"MISMATCH"}),(0,M.jsx)("div",{className:"h-4 w-0.5 ".concat(t?"bg-green-500/50":"bg-red-500/50")})]})},Ik=e=>{let{toolString:n,onSelectComponent:r}=e;return(0,M.jsxs)("div",{className:"flex flex-col flex-1 mt-6",children:[(0,M.jsx)("h2",{className:"text-xl font-semibold text-white mb-4 border-b border-gray-600 pb-2",children:"Bill of Materials"}),(0,M.jsx)("div",{className:"flex-1 space-y-0 overflow-y-auto pr-1",children:0===n.length?(0,M.jsx)("p",{className:"text-gray-500 text-center italic mt-4",children:"String assembly is empty."}):n.map((e,i)=>{const a="#".concat(e.color.toString(16).padStart(6,"0"));let o=null;if(i>0){const t=((e,t)=>{if(e.bottomConnection&&t.topConnection&&e.bottomConnection.replace("-Pin","")===t.topConnection.replace("-Box","")&&e.bottomConnection.endsWith("-Pin")&&t.topConnection.endsWith("-Box"))return!0;return!(!t.latchMechanism||!e.latchProfile||t.latchMechanism!==e.latchProfile)})(n[i-1],e);o=(0,M.jsx)(Lk,{isValid:t})}return(0,M.jsxs)(t.Fragment,{children:[o,(0,M.jsxs)("div",{className:"bg-gray-700 p-2 rounded-md border-l-4 cursor-pointer hover:bg-gray-600 transition-colors mb-2",style:{borderLeftColor:a},onClick:()=>r(e),children:[(0,M.jsxs)("div",{className:"flex justify-between items-start",children:[(0,M.jsxs)("p",{className:"font-semibold text-white text-sm",children:[i+1,". ",e.name]}),(0,M.jsx)("span",{className:"text-[10px] text-gray-500 bg-gray-800 px-1 rounded",children:e.id})]}),(0,M.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["OD: ",e.maxOD,'" | Len: ',e.length,"' | Wt: ",e.weight," lbs"]}),(0,M.jsxs)("div",{className:"flex justify-between mt-1 text-xs",children:[(0,M.jsxs)("span",{className:"text-cyan-300/80",children:["Top: ",e.topConnection]}),(0,M.jsxs)("span",{className:"text-cyan-300/80",children:["Bot: ",e.bottomConnection]})]})]})]},"".concat(e.id,"-").concat(i))})})]})},Uk=e=>{let{label:t,value:n,highlight:r}=e;return void 0===n||null===n||"none"===n||""===n?null:(0,M.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-700/50 last:border-0",children:[(0,M.jsx)("span",{className:"text-sm text-gray-400",children:t}),(0,M.jsx)("span",{className:"text-sm font-medium text-right ".concat(r?"text-cyan-400":"text-white"),children:n})]})},Fk=e=>{let{title:t,children:n}=e;return(0,M.jsxs)("div",{className:"mb-5",children:[(0,M.jsx)("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-2",children:t}),(0,M.jsx)("div",{className:"bg-gray-700/50 rounded-lg px-3 py-1",children:n})]})},Bk=e=>{let{component:t,onClose:n}=e;return(0,M.jsxs)("div",{className:"flex flex-col h-full animate-fadeIn",children:[(0,M.jsxs)("div",{className:"flex justify-between items-start mb-6 border-b border-gray-600 pb-4",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-xl font-bold text-white leading-tight",children:t.name}),(0,M.jsx)("p",{className:"text-xs text-cyan-500 mt-1 font-mono",children:t.id})]}),(0,M.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-white hover:bg-gray-700 p-1 rounded transition-colors","aria-label":"Close details panel",children:(0,M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,M.jsxs)("div",{className:"flex-1 overflow-y-auto pr-2",children:[(0,M.jsxs)(Fk,{title:"Dimensions & Weight",children:[(0,M.jsx)(Uk,{label:"Length",value:"".concat(t.length.toFixed(2)," ft")}),(0,M.jsx)(Uk,{label:"Weight",value:"".concat(t.weight.toFixed(1)," lbs")}),(0,M.jsx)(Uk,{label:"Max OD",value:"".concat(t.maxOD.toFixed(3)," in")})]}),(0,M.jsxs)(Fk,{title:"Connectivity",children:[(0,M.jsx)(Uk,{label:"Top Connection",value:t.topConnection,highlight:!0}),(0,M.jsx)(Uk,{label:"Bottom Connection",value:t.bottomConnection,highlight:!0})]}),(t.latchProfile||t.latchMechanism||t.specialFeature)&&(0,M.jsxs)(Fk,{title:"Operational Specifications",children:[(0,M.jsx)(Uk,{label:"Fish Neck",value:t.latchProfile}),(0,M.jsx)(Uk,{label:"Latch Mechanism",value:t.latchMechanism}),(0,M.jsx)(Uk,{label:"Features",value:t.specialFeature})]})]}),(0,M.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:(0,M.jsxs)("a",{href:"/maintenance-guide?id=".concat(t.id),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-gray-700 hover:bg-gray-600 text-cyan-400 hover:text-cyan-300 py-3 px-4 rounded-md transition-all duration-200 text-sm font-medium group border border-gray-600 hover:border-cyan-500/50 shadow-sm",children:[(0,M.jsx)("span",{children:"Component Maintenance Guide"}),(0,M.jsx)("svg",{className:"w-4 h-4 opacity-70 group-hover:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,M.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})},zk=["toolString","dashboardCalculations","selectedComponent","onSelectComponent"],Hk=e=>{let{toolString:t,dashboardCalculations:n,selectedComponent:r,onSelectComponent:i}=e;c(e,zk);return(0,M.jsx)("div",{className:"md:col-span-1 bg-gray-800 rounded-lg shadow-lg p-4 overflow-y-auto flex flex-col h-full",children:r?(0,M.jsx)(Bk,{component:r,onClose:()=>null===i||void 0===i?void 0:i(null)}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Dk,{calculations:n||{totalWeight:0,totalLength:0,pressureAreaForce:0,weightDelta:0},hasTools:t.length>0}),(0,M.jsx)(Ik,{toolString:t,onSelectComponent:i||(()=>{})})]})})},Vk=e=>{let{notification:n}=e;const{message:r,type:i,visible:a}=n,[o,s]=(0,t.useState)(!1);(0,t.useEffect)(()=>{if(!a){const e=setTimeout(()=>s(!1),300);return()=>clearTimeout(e)}s(!0)},[a]);const l=a?"opacity-100 visible transform -translate-x-1/2 translate-y-0":"opacity-0 invisible transform -translate-x-1/2 -translate-y-12";return o||a?(0,M.jsx)("div",{className:"".concat("fixed top-5 left-1/2 p-4 rounded-md shadow-lg text-white font-semibold transition-all duration-300 ease-in-out"," ").concat({success:"bg-green-600",warn:"bg-yellow-500",error:"bg-red-600",info:"bg-blue-500"}[i]," ").concat(l),children:(0,M.jsx)("span",{children:r})}):null},Wk=e=>{let{onExit:n}=e;const[r,i]=(0,t.useState)([]),[a,o]=(0,t.useState)(null),[s,c]=(0,t.useState)({tubingID:2.875,nippleID:2.313,whp:1500}),[u,d]=(0,t.useState)({casingOD:7,casingID:6.184,tubingOD:3.5,tubingID:2.992,tubingDepth:8500,packerDepth:8450,nippleProfile:"XN",nippleDepth:8300,perfTop:8600,perfBottom:8700,fluidDensity:8.4,fluidType:"Brine",viscosity:1.2,surfaceTemp:60,bottomHoleTemp:180}),[h,p]=(0,t.useState)([]),[f,m]=(0,t.useState)({message:"",type:"info",visible:!1}),g=(0,t.useRef)(null),v=(0,t.useRef)(null),[x,y]=(0,t.useState)(!0),[b,w]=(0,t.useState)(!0),[_,S]=(0,t.useState)(!0),E=(0,t.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";g.current&&clearTimeout(g.current),m({message:e,type:t,visible:!0}),g.current=window.setTimeout(()=>{m(e=>l(l({},e),{},{visible:!1}))},4e3)},[]),T=(0,t.useCallback)(e=>{const t=VE[e];if(!t)return void E("Error: Component '".concat(e,"' not in DB."),"error");let n=!1,a="thread";if(0===r.length){if(!t.topConnection.startsWith("wire-")&&!t.topConnection.startsWith("bar-"))return void E("Assembly must start with a Rope Socket or Bar Socket.","error");n=!0}else{const e=r[r.length-1];if(t.topConnection.replace("-Box","")===e.bottomConnection.replace("-Pin","")&&e.bottomConnection.endsWith("-Pin")&&t.topConnection.endsWith("-Box")&&(n=!0,a="thread"),!n&&t.latchMechanism&&e.latchProfile&&t.latchMechanism===e.latchProfile&&(n=!0,a="latch"),!n){const n=e.bottomConnection||e.latchProfile,r=t.topConnection||t.latchMechanism;return void E("Connection Mismatch: Cannot connect ".concat(r," (new) to ").concat(n," (last)."),"error")}}t.maxOD>s.nippleID?E("Warning: ".concat(t.name," OD (").concat(t.maxOD,'") exceeds Min. Nipple ID (').concat(s.nippleID,'").'),"warn"):t.maxOD>s.tubingID&&E("Warning: ".concat(t.name," OD (").concat(t.maxOD,'") exceeds Tubing ID (').concat(s.tubingID,'").'),"warn"),i(e=>[...e,t]),"latch"===a&&E("Successfully latched ".concat(t.name," onto ").concat(r[r.length-1].name,"."),"success")},[r,s,E]),N=(0,t.useCallback)(()=>{i([]),o(null),E("Tool string cleared.","success")},[E]);(0,t.useEffect)(()=>{a&&!r.find(e=>e.id===a.id)&&o(null)},[r,a]);const C=(0,t.useCallback)(()=>{if(0===r.length)return void E("Nothing to export. Tool string is empty.","error");const e={toolString:r,wellData:s,wellboreData:u,surveyData:h},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download="toolstring_".concat(Date.now(),".json"),i.click(),URL.revokeObjectURL(n),E("Tool string exported successfully.","success")},[r,s,u,h,E]),A=(0,t.useCallback)(()=>{var e;null===(e=v.current)||void 0===e||e.click()},[]),j=(0,t.useCallback)(e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){const e=new FileReader;e.onload=e=>{try{var t;const n=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);i(n.toolString||[]),c(n.wellData||s),d(n.wellboreData||u),p(n.surveyData||[]),E("Tool string imported successfully.","success")}catch(n){E("Failed to import file. Invalid format.","error")}},e.readAsText(n)}v.current&&(v.current.value="")},[s,u,E]);return(0,M.jsxs)("div",{className:"relative h-screen w-screen bg-slate-950 text-slate-100 overflow-hidden font-sans selection:bg-emerald-500/30 selection:text-emerald-200",children:[n&&(0,M.jsx)("div",{className:"absolute top-4 left-4 z-50",children:(0,M.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white rounded-lg transition-all border border-slate-700 shadow-xl",children:[(0,M.jsx)(U,{className:"w-4 h-4"}),(0,M.jsx)("span",{className:"text-sm font-medium",children:"Exit Assembler"})]})}),(0,M.jsx)("input",{type:"file",ref:v,accept:".json",style:{display:"none"},onChange:j}),(0,M.jsx)(Vk,{notification:f}),(0,M.jsx)("div",{className:"absolute top-0 left-0 right-0 z-20 pointer-events-none",children:(0,M.jsx)("div",{className:"pointer-events-auto",children:(0,M.jsx)(WE,{onClear:N,onExport:C,onImport:A})})}),(0,M.jsxs)("div",{className:"absolute inset-0 pt-16 flex",children:[(0,M.jsx)(nM,{toolString:r,onAddComponent:T,selectedComponent:a,onSelectComponent:o,wellData:s,setWellData:c,wellboreData:u,setWellboreData:d,surveyData:h,setSurveyData:p,showNotification:E}),(0,M.jsx)("div",{className:"flex-1 relative",children:(0,M.jsx)(kk,{toolString:r,wellData:s,wellboreData:u,surveyData:h,selectedComponent:a,onSelectComponent:o,showWellbore:x,showSchematic:b,showSurveyPath:_,onShowWellboreChange:y,onShowSchematicChange:w,onShowSurveyPathChange:S})}),(0,M.jsx)(Hk,{selectedComponent:a,toolString:r,wellboreData:u,surveyData:h,onWellboreDataChange:d,onSurveyDataChange:p,showWellbore:x,showSchematic:b,showSurveyPath:_,onToggleWellbore:()=>y(!x),onToggleSchematic:()=>w(!b),onToggleSurvey:()=>S(!_)})]})]})},Gk=p("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Xk=p("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),qk=e=>{let{onExit:n}=e;const[r,i]=(0,t.useState)("DASHBOARD"),[a]=(0,t.useState)(null),[o]=(0,t.useState)(null);return(0,M.jsx)("div",{className:"w-full h-screen bg-gradient-to-br from-slate-950 to-slate-900 overflow-auto",children:(0,M.jsxs)("div",{className:"container mx-auto px-6 py-8 max-w-7xl",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,M.jsx)(C,{className:"w-8 h-8 text-purple-400"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-sm font-semibold text-purple-400 uppercase tracking-wider",children:"Training Module 5"}),(0,M.jsx)("p",{className:"text-xs text-slate-500",children:"Slickline Operations Laboratory"})]})]}),n&&(0,M.jsxs)("button",{onClick:n,className:"flex items-center space-x-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg transition-colors",children:[(0,M.jsx)(I,{className:"w-4 h-4"}),(0,M.jsx)("span",{children:"Exit to Training"})]})]}),(0,M.jsxs)("div",{className:"min-h-[600px]",children:["DASHBOARD"===r&&(0,M.jsxs)("div",{className:"space-y-12 animate-in fade-in duration-700",children:[(0,M.jsxs)("header",{className:"border-b border-slate-800/50 pb-12",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,M.jsx)("span",{className:"bg-purple-500/10 text-purple-400 border border-purple-500/20 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-[0.3em]",children:"WellTegra.Lab"}),(0,M.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})]}),(0,M.jsxs)("h1",{className:"text-7xl font-bold text-white tracking-tighter leading-none mb-4",children:["Slickline ",(0,M.jsx)("span",{className:"text-purple-400",children:"Operations"})]}),(0,M.jsx)("p",{className:"text-slate-400 font-medium max-w-2xl text-lg leading-relaxed",children:"Modular tool string assembly simulator for slickline downhole operations. Features physics-based validation, wire selection, and real-time clearance checking."})]}),(0,M.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,M.jsxs)("div",{onClick:()=>i("JOB_SETUP"),className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl cursor-pointer hover:border-purple-500/50 transition-all group",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-purple-500/10 rounded-2xl flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:(0,M.jsx)(v,{className:"w-8 h-8 text-purple-400"})}),(0,M.jsx)("span",{className:"text-2xl font-bold text-purple-400 opacity-20 group-hover:opacity-100 transition-opacity",children:"01"})]}),(0,M.jsx)("h3",{className:"text-xl font-bold text-white mb-3",children:"Well Setup"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed mb-4",children:"Define borehole conditions, tubing ID, restrictions, and environment"}),(0,M.jsxs)("div",{className:"flex items-center text-purple-400 text-sm font-medium",children:[(0,M.jsx)("span",{children:"Configure well"}),(0,M.jsx)(Gk,{className:"ml-2 w-4 h-4"})]})]}),(0,M.jsxs)("div",{onClick:()=>a?i("WIRE_SELECTION"):null,className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl ".concat(a?"cursor-pointer hover:border-purple-500/50":"opacity-50 cursor-not-allowed"," transition-all group"),children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-purple-500/10 rounded-2xl flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:(0,M.jsx)(j,{className:"w-8 h-8 text-purple-400"})}),(0,M.jsx)("span",{className:"text-2xl font-bold text-purple-400 opacity-20 group-hover:opacity-100 transition-opacity",children:"02"})]}),(0,M.jsx)("h3",{className:"text-xl font-bold text-white mb-3",children:"Wire Selection"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed mb-4",children:"Choose conveyance wire rated for your environment (Sweet/Sour)"}),(0,M.jsxs)("div",{className:"flex items-center text-purple-400 text-sm font-medium",children:[(0,M.jsx)("span",{children:"Select wire"}),(0,M.jsx)(Gk,{className:"ml-2 w-4 h-4"})]})]}),(0,M.jsxs)("div",{onClick:()=>a&&o?i("TOOL_ASSEMBLER"):null,className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl ".concat(a&&o?"cursor-pointer hover:border-purple-500/50":"opacity-50 cursor-not-allowed"," transition-all group"),children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-purple-500/10 rounded-2xl flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:(0,M.jsx)(A,{className:"w-8 h-8 text-purple-400"})}),(0,M.jsx)("span",{className:"text-2xl font-bold text-purple-400 opacity-20 group-hover:opacity-100 transition-opacity",children:"03"})]}),(0,M.jsx)("h3",{className:"text-xl font-bold text-white mb-3",children:"Tool Assembler"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed mb-4",children:"Build tool string with real-time physics validation and clearance checks"}),(0,M.jsxs)("div",{className:"flex items-center text-purple-400 text-sm font-medium",children:[(0,M.jsx)("span",{children:"Assemble tools"}),(0,M.jsx)(Gk,{className:"ml-2 w-4 h-4"})]})]}),(0,M.jsxs)("div",{onClick:()=>i("TEMPLATES"),className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl cursor-pointer hover:border-purple-500/50 transition-all group",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-purple-500/10 rounded-2xl flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:(0,M.jsx)(Xk,{className:"w-8 h-8 text-purple-400"})}),(0,M.jsx)("span",{className:"text-2xl font-bold text-purple-400 opacity-20 group-hover:opacity-100 transition-opacity",children:"04"})]}),(0,M.jsx)("h3",{className:"text-xl font-bold text-white mb-3",children:"Templates"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed mb-4",children:"Pre-configured job templates for common operations"}),(0,M.jsxs)("div",{className:"flex items-center text-purple-400 text-sm font-medium",children:[(0,M.jsx)("span",{children:"Browse templates"}),(0,M.jsx)(Gk,{className:"ml-2 w-4 h-4"})]})]})]}),(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-10 rounded-3xl",children:[(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-6",children:"Key Features"}),(0,M.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h4",{className:"text-purple-400 font-semibold mb-2",children:"Physics Validation"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Real-time buoyancy calculations, tension modeling, and hydrostatic load profiles"})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h4",{className:"text-purple-400 font-semibold mb-2",children:"Connection Checking"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Validates pin/box connections and ensures tool compatibility"})]}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h4",{className:"text-purple-400 font-semibold mb-2",children:"Thermal Modeling"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Accounts for thermal expansion and temperature effects on equipment"})]})]})]})]}),"JOB_SETUP"===r&&(0,M.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-800/50 pb-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-4xl font-bold text-white mb-2",children:"Well Environment Setup"}),(0,M.jsx)("p",{className:"text-slate-400",children:"Define precise borehole conditions for physics calculations"})]}),(0,M.jsxs)("button",{onClick:()=>i("DASHBOARD"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[(0,M.jsx)(I,{className:"w-5 h-5"}),(0,M.jsx)("span",{children:"Back"})]})]}),(0,M.jsx)("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl",children:(0,M.jsxs)("p",{className:"text-center text-slate-400 py-20",children:["Job Setup interface - Configure well parameters, tubing ID, restrictions, pressure, temperature, and fluid density.",(0,M.jsx)("br",{}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{className:"text-purple-400 font-semibold",children:"Full implementation requires React forms and validation logic"})]})})]}),"WIRE_SELECTION"===r&&(0,M.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-800/50 pb-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-4xl font-bold text-white mb-2",children:"Select Conveyance Wire"}),(0,M.jsxs)("p",{className:"text-slate-400",children:["Choose wire specification rated for ",null===a||void 0===a?void 0:a.environment," environment"]})]}),(0,M.jsxs)("button",{onClick:()=>i("DASHBOARD"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[(0,M.jsx)(I,{className:"w-5 h-5"}),(0,M.jsx)("span",{children:"Back"})]})]}),(0,M.jsx)("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl",children:(0,M.jsxs)("p",{className:"text-center text-slate-400 py-20",children:["Wire Selection interface - Choose from high-tensile steel wires with different breaking loads and specifications.",(0,M.jsx)("br",{}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{className:"text-purple-400 font-semibold",children:"Displays MBL (Minimum Breaking Load), cross-sectional area, and material specs"})]})})]}),"TOOL_ASSEMBLER"===r&&(0,M.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-800/50 pb-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-4xl font-bold text-white mb-2",children:"Tool String Assembler"}),(0,M.jsx)("p",{className:"text-slate-400",children:"Build and validate your tool string with real-time physics"})]}),(0,M.jsxs)("button",{onClick:()=>i("DASHBOARD"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[(0,M.jsx)(I,{className:"w-5 h-5"}),(0,M.jsx)("span",{children:"Back"})]})]}),(0,M.jsx)("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl",children:(0,M.jsxs)("p",{className:"text-center text-slate-400 py-20",children:["Tool Assembler interface - Drag-and-drop tool arrangement with connection validation, clearance checks, and force balance visualization.",(0,M.jsx)("br",{}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{className:"text-purple-400 font-semibold",children:"Features tension gauge, safety index meter, and AI-powered suggestions"})]})})]}),"TEMPLATES"===r&&(0,M.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-800/50 pb-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-4xl font-bold text-white mb-2",children:"Job Templates"}),(0,M.jsx)("p",{className:"text-slate-400",children:"Pre-configured tool strings for common operations"})]}),(0,M.jsxs)("button",{onClick:()=>i("DASHBOARD"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[(0,M.jsx)(I,{className:"w-5 h-5"}),(0,M.jsx)("span",{children:"Back"})]})]}),(0,M.jsx)("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl",children:(0,M.jsxs)("p",{className:"text-center text-slate-400 py-20",children:["Template library with pre-configured job setups for gauge cutter runs, nipple fishing, and PLT surveys.",(0,M.jsx)("br",{}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{className:"text-purple-400 font-semibold",children:"Quick-start templates accelerate common operations"})]})})]})]})]})})},Yk=p("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Kk=p("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),Zk=e=>{let{onExit:n}=e;const[r,i]=(0,t.useState)("DASHBOARD"),a=[{id:"drilling",title:"Drilling Well Control",progress:65,color:"text-orange-500",bg:"bg-orange-500/10"},{id:"intervention",title:"Well Intervention",progress:42,color:"text-red-500",bg:"bg-red-500/10"},{id:"completions",title:"Completions Lab",progress:10,color:"text-amber-500",bg:"bg-amber-500/10"}],o=[{type:"simulation",title:"Slickline RIH Success",detail:"Held 3500 PSI test",time:"2h ago",status:"success"},{type:"quiz",title:"Barrier Philosophy",detail:"Score: 92%",time:"5h ago",status:"success"},{type:"simulation",title:"BOP Emergency Drill",detail:"Fast expansion detected",time:"1d ago",status:"warning"}];return(0,M.jsx)("div",{className:"w-full h-screen bg-gradient-to-br from-slate-950 to-slate-900 overflow-auto",children:(0,M.jsxs)("div",{className:"container mx-auto px-6 py-8 max-w-7xl",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,M.jsx)(P,{className:"w-8 h-8 text-red-400"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-sm font-semibold text-red-400 uppercase tracking-wider",children:"Training Module 6"}),(0,M.jsx)("p",{className:"text-xs text-slate-500",children:"Well Control Academy"})]})]}),n&&(0,M.jsxs)("button",{onClick:n,className:"flex items-center space-x-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg transition-colors",children:[(0,M.jsx)(I,{className:"w-4 h-4"}),(0,M.jsx)("span",{children:"Exit to Training"})]})]}),(0,M.jsxs)("div",{className:"min-h-[600px]",children:["DASHBOARD"===r&&(0,M.jsxs)("div",{className:"space-y-12 animate-in fade-in duration-700",children:[(0,M.jsxs)("header",{className:"border-b border-slate-800/50 pb-12",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,M.jsx)("span",{className:"bg-red-500/10 text-red-400 border border-red-500/20 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-[0.3em]",children:"WellTegra Specialist System"}),(0,M.jsx)("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})]}),(0,M.jsxs)("h1",{className:"text-7xl font-bold text-white tracking-tighter leading-none mb-4",children:["The Digital ",(0,M.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-br from-red-400 to-red-700",children:"Barrier Lab"})]}),(0,M.jsx)("p",{className:"text-slate-400 font-medium max-w-2xl text-lg leading-relaxed",children:"Standardizing technical expertise through high-fidelity digital simulation and physics-based instruction. Master kill sheet calculations, well control procedures, and critical safety protocols."})]}),(0,M.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,M.jsx)("div",{className:"lg:col-span-8",children:(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-10 rounded-3xl relative overflow-hidden group",children:[(0,M.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,M.jsx)("div",{className:"flex items-center justify-between mb-12 relative z-10",children:(0,M.jsxs)("div",{className:"flex items-center gap-6",children:[(0,M.jsx)("div",{className:"p-5 rounded-[1.75rem] bg-red-500/10 text-red-400 shadow-sm",children:(0,M.jsx)(Yk,{size:32})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-4xl font-black tracking-tighter uppercase text-white",children:"Certification Tracks"}),(0,M.jsx)("p",{className:"text-[11px] font-bold text-slate-500 uppercase tracking-[0.3em] mt-2",children:"Active Progression Map"})]})]})}),(0,M.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10",children:a.map(e=>(0,M.jsxs)("div",{className:"p-10 border bg-white/[0.02] border-white/5 hover:bg-white/[0.05] rounded-[2.5rem] transition-all group/card cursor-pointer hover:-translate-y-2 duration-500",children:[(0,M.jsx)("div",{className:"w-20 h-20 ".concat(e.bg," ").concat(e.color," rounded-[2rem] flex items-center justify-center mb-10 transition-all duration-700 group-hover/card:scale-110 shadow-sm"),children:(0,M.jsx)(L,{size:40})}),(0,M.jsx)("h3",{className:"font-black text-2xl leading-tight mb-4 tracking-tight text-white",children:e.title}),(0,M.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,M.jsx)("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]",children:"Mastery"}),(0,M.jsxs)("span",{className:"text-sm font-black ".concat(e.color),children:[e.progress,"%"]})]}),(0,M.jsx)("div",{className:"w-full h-3 rounded-full overflow-hidden shadow-inner bg-slate-800",children:(0,M.jsx)("div",{className:"h-full bg-current transition-all duration-1000 ".concat(e.color),style:{width:"".concat(e.progress,"%")}})})]},e.id))})]})}),(0,M.jsx)("div",{className:"lg:col-span-4",children:(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-12 rounded-3xl h-full",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,M.jsx)("span",{className:"text-[11px] font-black text-red-400 uppercase tracking-[0.25em]",children:"Expert Matrix"}),(0,M.jsx)(Kk,{size:20,className:"text-orange-500"})]}),(0,M.jsx)("div",{className:"text-5xl font-black text-white mb-6 tracking-tighter",children:"ELITE"}),(0,M.jsx)("div",{className:"w-full bg-white/10 h-3 rounded-full overflow-hidden shadow-inner",children:(0,M.jsx)("div",{className:"bg-gradient-to-r from-red-600 to-red-400 h-full w-[88%] shadow-[0_0_20px_rgba(239,68,68,0.6)]"})}),(0,M.jsx)("p",{className:"mt-4 text-[10px] font-black text-slate-500 uppercase tracking-widest text-right",children:"Lvl 4 Practitioner"})]})})]}),(0,M.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,M.jsxs)("div",{onClick:()=>i("LEARNING_CENTER"),className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl cursor-pointer hover:border-red-500/50 transition-all group",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-red-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-red-500/20 transition-colors",children:(0,M.jsx)(N,{className:"w-8 h-8 text-red-400"})}),(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-3",children:"Learning Center"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Educational modules covering IWCF standards, formulas, concepts, and technical glossary"}),(0,M.jsxs)("div",{className:"mt-6 flex items-center text-red-400 text-sm font-medium",children:[(0,M.jsx)("span",{children:"Start learning"}),(0,M.jsx)("span",{className:"ml-2",children:"\u2192"})]})]}),(0,M.jsxs)("div",{onClick:()=>i("KILL_SHEET"),className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl cursor-pointer hover:border-orange-500/50 transition-all group",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-orange-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-orange-500/20 transition-colors",children:(0,M.jsx)(P,{className:"w-8 h-8 text-orange-400"})}),(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-3",children:"Kill Sheet Calculator"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Interactive simulator for kill operations with real-time pressure calculations and BOP control"}),(0,M.jsxs)("div",{className:"mt-6 flex items-center text-orange-400 text-sm font-medium",children:[(0,M.jsx)("span",{children:"Launch simulator"}),(0,M.jsx)("span",{className:"ml-2",children:"\u2192"})]})]}),(0,M.jsxs)("div",{onClick:()=>i("QUIZ"),className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl cursor-pointer hover:border-amber-500/50 transition-all group",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-amber-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-amber-500/20 transition-colors",children:(0,M.jsx)(y,{className:"w-8 h-8 text-amber-400"})}),(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-3",children:"Knowledge Assessment"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm leading-relaxed",children:"IWCF-standard quiz scenarios with AI-generated questions and detailed explanations"}),(0,M.jsxs)("div",{className:"mt-6 flex items-center text-amber-400 text-sm font-medium",children:[(0,M.jsx)("span",{children:"Take quiz"}),(0,M.jsx)("span",{className:"ml-2",children:"\u2192"})]})]})]}),(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 p-10 rounded-3xl",children:[(0,M.jsxs)("h3",{className:"text-[13px] font-black uppercase tracking-[0.3em] mb-8 flex items-center gap-5 text-white",children:[(0,M.jsx)(v,{size:24,className:"text-red-600"})," Recent Operations"]}),(0,M.jsx)("div",{className:"space-y-4",children:o.map((e,t)=>(0,M.jsxs)("div",{className:"p-8 rounded-[2rem] border bg-white/[0.02] border-white/5 hover:border-red-500/30 transition-all flex items-start gap-6 group/item",children:[(0,M.jsx)("div",{className:"mt-1.5 p-4 rounded-[1.5rem] transition-all duration-500 group-hover/item:scale-110 ".concat("success"===e.status?"bg-emerald-500/10 text-emerald-500":"bg-orange-500/10 text-orange-500"),children:(0,M.jsx)(v,{size:24})}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,M.jsx)("h4",{className:"font-black text-[15px] uppercase tracking-tight text-white",children:e.title}),(0,M.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:e.time})]}),(0,M.jsx)("p",{className:"text-[12px] font-bold text-slate-500 uppercase tracking-tight opacity-70",children:e.detail})]})]},t))})]})]}),"LEARNING_CENTER"===r&&(0,M.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-800/50 pb-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-4xl font-bold text-white mb-2",children:"Learning Center"}),(0,M.jsx)("p",{className:"text-slate-400",children:"IWCF curriculum modules, formulas, and technical glossary"})]}),(0,M.jsxs)("button",{onClick:()=>i("DASHBOARD"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[(0,M.jsx)(I,{className:"w-5 h-5"}),(0,M.jsx)("span",{children:"Back"})]})]}),(0,M.jsx)("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl",children:(0,M.jsxs)("p",{className:"text-center text-slate-400 py-20",children:["Learning Center with educational modules covering well control principles, kill sheets, BOP equipment, kick detection, and fracture gradients.",(0,M.jsx)("br",{}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{className:"text-red-400 font-semibold",children:"Includes interactive briefing mode with AI tutor and formula demonstrations"})]})})]}),"KILL_SHEET"===r&&(0,M.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-800/50 pb-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-4xl font-bold text-white mb-2",children:"Kill Sheet Calculator"}),(0,M.jsx)("p",{className:"text-slate-400",children:"Real-time well control simulation with physics-based calculations"})]}),(0,M.jsxs)("button",{onClick:()=>i("DASHBOARD"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[(0,M.jsx)(I,{className:"w-5 h-5"}),(0,M.jsx)("span",{children:"Back"})]})]}),(0,M.jsx)("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl",children:(0,M.jsxs)("p",{className:"text-center text-slate-400 py-20",children:["Kill Sheet Simulator with live pressure graphs, wellbore visualization, BOP stack control, and multi-modal operations (standard kill, gas migration, stripping, wireline, coiled tubing).",(0,M.jsx)("br",{}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{className:"text-red-400 font-semibold",children:"Features MAASP breach detection, emergency shut-in sequences, and real-time safety systems"})]})})]}),"QUIZ"===r&&(0,M.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-700",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-800/50 pb-6",children:[(0,M.jsxs)("div",{children:[(0,M.jsx)("h2",{className:"text-4xl font-bold text-white mb-2",children:"Knowledge Assessment"}),(0,M.jsx)("p",{className:"text-slate-400",children:"IWCF-standard scenarios with detailed technical explanations"})]}),(0,M.jsxs)("button",{onClick:()=>i("DASHBOARD"),className:"flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[(0,M.jsx)(I,{className:"w-5 h-5"}),(0,M.jsx)("span",{children:"Back"})]})]}),(0,M.jsx)("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl",children:(0,M.jsxs)("p",{className:"text-center text-slate-400 py-20",children:["AI-powered quiz system generating IWCF-standard questions across topics including Well Control Principles, Kill Sheets, BOP Equipment, Kick Detection, Fracture Gradient, and Stripping Operations.",(0,M.jsx)("br",{}),(0,M.jsx)("br",{}),(0,M.jsx)("span",{className:"text-red-400 font-semibold",children:"Provides instant feedback with technical briefings and detailed explanations"})]})})]})]})]})})},Jk=e=>{let{showBanner:n=!1,assignmentReason:r=null}=e;const[i,a]=(0,t.useState)(0),[o,s]=(0,t.useState)({}),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)({}),[p,f]=(0,t.useState)(0),[m,g]=(0,t.useState)(!1),[v,x]=(0,t.useState)(!1),[w,S]=(0,t.useState)(!1),[T,R]=(0,t.useState)(!1),[D,L]=(0,t.useState)(!1),[I,U]=(0,t.useState)(!1),F=[{id:1,title:"Micro-Annulus Diagnostics",videoId:"7eWPe5Y8ve4",description:"Learn to identify micro-annulus conditions and their impact on well integrity."},{id:2,title:"P&A Barrier Verification",videoId:"tbVD-J995yM",description:"Master barrier verification techniques for plug and abandonment operations."}],B=[{id:1,title:"Physics-Informed Safety Constraint",question:"Node-02 shows 12% integrity in ML model but physics constraints flag a critical violation. What is the correct action?",options:[{id:"a",text:"Trust the ML model (12% is acceptable)",correct:!1},{id:"b",text:"Override to physics mode - treat as Critical (0%)",correct:!0},{id:"c",text:"Average the two scores (6%)",correct:!1},{id:"d",text:"Ignore both and proceed",correct:!1}],explanation:"Physics constraints catch risks that pure ML might miss. When physics flags a violation, it must override ML predictions."},{id:2,title:"Rapid Bleed Down Detection",question:"During execution, annulus pressure drops 200 psi in 3 minutes. What does this indicate?",options:[{id:"a",text:"Normal thermal cooling",correct:!1},{id:"b",text:"Barrier integrity failure - STOP operations",correct:!0},{id:"c",text:"Equipment malfunction - continue monitoring",correct:!1},{id:"d",text:"Expected behavior - no action needed",correct:!1}],explanation:"Rapid pressure drops indicate barrier failure. Operations must cease immediately and competency training is triggered."},{id:3,title:"Closed-Loop Learning",question:"Why does the system redirect you to training after detecting a safety anomaly?",options:[{id:"a",text:"As punishment for making mistakes",correct:!1},{id:"b",text:"To demonstrate closed-loop competency development",correct:!0},{id:"c",text:"Random training assignment",correct:!1},{id:"d",text:"System error",correct:!1}],explanation:"The Brahan Vertex Engine demonstrates closed-loop learning: Detect anomaly \u2192 Trigger training \u2192 Verify understanding \u2192 Resume operations."}],z=e=>{h(l(l({},d),{},{[e]:!0}))},H=F.every(e=>d[e.id]);return m?(0,M.jsx)(V,{onExit:()=>g(!1)}):v?(0,M.jsx)(rw,{onExit:()=>x(!1)}):w?(0,M.jsx)(HE,{onExit:()=>S(!1)}):T?(0,M.jsx)(Wk,{onExit:()=>R(!1)}):D?(0,M.jsx)(qk,{onExit:()=>L(!1)}):I?(0,M.jsx)(Zk,{onExit:()=>U(!1)}):(0,M.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-100 p-6",children:[n&&r&&(0,M.jsx)("div",{className:"max-w-4xl mx-auto mb-6 p-4 bg-red-950/30 border-2 border-red-500 rounded-lg animate-pulse",children:(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)(_,{className:"w-6 h-6 text-red-400"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h3",{className:"text-red-400 font-bold text-lg",children:"System Trigger: Remedial Training Assigned"}),(0,M.jsx)("p",{className:"text-red-300 text-sm mt-1",children:r})]})]})}),(0,M.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,M.jsxs)("div",{className:"mb-8",children:[(0,M.jsxs)("h1",{className:"text-4xl font-bold text-blue-400 mb-2 flex items-center gap-3",children:[(0,M.jsx)(y,{className:"w-10 h-10"}),"Competency Training Module"]}),(0,M.jsx)("p",{className:"text-slate-400",children:"Interactive learning triggered by safety anomalies - Closed-Loop Competency Development"})]}),(0,M.jsxs)("div",{className:"mb-12 space-y-6",children:[(0,M.jsx)("div",{className:"bg-gradient-to-r from-blue-900/30 to-slate-900/30 border-2 border-blue-500/50 rounded-lg p-6 hover:border-blue-400 transition-all",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-blue-500/20 rounded-xl flex items-center justify-center",children:(0,M.jsx)(N,{className:"w-8 h-8 text-blue-400"})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-1",children:"Hydrostatic Training Academy"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm",children:"Advanced well control training: IADC WellSharp & IWCF standards, interactive simulator, exam prep"})]})]}),(0,M.jsx)("button",{onClick:()=>g(!0),className:"px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold transition-all shadow-lg shadow-blue-500/50 hover:shadow-blue-500/70",children:"Enter Academy \u2192"})]})}),(0,M.jsx)("div",{className:"bg-gradient-to-r from-amber-900/30 to-slate-900/30 border-2 border-amber-500/50 rounded-lg p-6 hover:border-amber-400 transition-all",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-amber-500/20 rounded-xl flex items-center justify-center",children:(0,M.jsx)(b,{className:"w-8 h-8 text-amber-400"})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-1",children:"Brahan Hub - Visionary Integrity"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm",children:"AI-powered predictive well integrity monitoring: Christmas tree diagnostics, maintenance forecasting, telemetry analysis"})]})]}),(0,M.jsx)("button",{onClick:()=>x(!0),className:"px-8 py-4 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-bold transition-all shadow-lg shadow-amber-500/50 hover:shadow-amber-500/70",children:"Launch Hub \u2192"})]})}),(0,M.jsx)("div",{className:"bg-gradient-to-r from-cyan-900/30 to-slate-900/30 border-2 border-cyan-500/50 rounded-lg p-6 hover:border-cyan-400 transition-all",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-cyan-500/20 rounded-xl flex items-center justify-center",children:(0,M.jsx)(C,{className:"w-8 h-8 text-cyan-400"})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-1",children:"3D Wellbore Visualizer"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm",children:"Interactive 3D well design: deviation path visualization, schematic editor, component library, survey data"})]})]}),(0,M.jsx)("button",{onClick:()=>S(!0),className:"px-8 py-4 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg font-bold transition-all shadow-lg shadow-cyan-500/50 hover:shadow-cyan-500/70",children:"Open Visualizer \u2192"})]})}),(0,M.jsx)("div",{className:"bg-gradient-to-r from-emerald-900/30 to-slate-900/30 border-2 border-emerald-500/50 rounded-lg p-6 hover:border-emerald-400 transition-all",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-emerald-500/20 rounded-xl flex items-center justify-center",children:(0,M.jsx)(A,{className:"w-8 h-8 text-emerald-400"})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-1",children:"3D Slickline Tool String Assembler"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm",children:"Intelligent tool string builder: component compatibility, physics calculations, connection validation, clearance checks"})]})]}),(0,M.jsx)("button",{onClick:()=>R(!0),className:"px-8 py-4 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-bold transition-all shadow-lg shadow-emerald-500/50 hover:shadow-emerald-500/70",children:"Build String \u2192"})]})}),(0,M.jsx)("div",{className:"bg-gradient-to-r from-purple-900/30 to-slate-900/30 border-2 border-purple-500/50 rounded-lg p-6 hover:border-purple-400 transition-all",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-purple-500/20 rounded-xl flex items-center justify-center",children:(0,M.jsx)(j,{className:"w-8 h-8 text-purple-400"})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-1",children:"Slickline Operations Lab"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm",children:"Modular tool string assembly simulator: job setup, wire selection, physics validation, thermal modeling"})]})]}),(0,M.jsx)("button",{onClick:()=>L(!0),className:"px-8 py-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-bold transition-all shadow-lg shadow-purple-500/50 hover:shadow-purple-500/70",children:"Enter Lab \u2192"})]})}),(0,M.jsx)("div",{className:"bg-gradient-to-r from-red-900/30 to-slate-900/30 border-2 border-red-500/50 rounded-lg p-6 hover:border-red-400 transition-all",children:(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsxs)("div",{className:"flex items-center gap-4",children:[(0,M.jsx)("div",{className:"w-16 h-16 bg-red-500/20 rounded-xl flex items-center justify-center",children:(0,M.jsx)(P,{className:"w-8 h-8 text-red-400"})}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h3",{className:"text-2xl font-bold text-white mb-1",children:"Well Control Academy"}),(0,M.jsx)("p",{className:"text-slate-400 text-sm",children:"Digital Barrier Lab: kill sheet calculator, IWCF learning center, quiz assessments, emergency procedures"})]})]}),(0,M.jsx)("button",{onClick:()=>U(!0),className:"px-8 py-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold transition-all shadow-lg shadow-red-500/50 hover:shadow-red-500/70",children:"Launch Academy \u2192"})]})})]}),(0,M.jsxs)("div",{className:"mb-12",children:[(0,M.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Step 1: Video Training"}),(0,M.jsx)("div",{className:"grid gap-6",children:F.map(e=>(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6",children:[(0,M.jsxs)("div",{className:"mb-4",children:[(0,M.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),(0,M.jsx)("p",{className:"text-slate-400 text-sm",children:e.description})]}),(0,M.jsx)("div",{className:"aspect-video bg-slate-950 rounded-lg overflow-hidden mb-4",children:(0,M.jsx)("iframe",{width:"100%",height:"100%",src:"https://www.youtube.com/embed/".concat(e.videoId),title:e.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onLoad:()=>{return t=e.id,void setTimeout(()=>{z(t)},1e4);var t}})}),(0,M.jsx)("button",{onClick:()=>z(e.id),disabled:!d[e.id],className:"w-full px-6 py-3 rounded-lg font-bold transition-all ".concat(d[e.id]?"bg-green-600 text-white":"bg-slate-800 text-slate-600 cursor-not-allowed"),children:d[e.id]?(0,M.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,M.jsx)(O,{className:"w-5 h-5"}),"Competency Verified"]}):(0,M.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,M.jsx)(k,{className:"w-5 h-5"}),"Watch video to verify (simulated: 10s timer)"]})})]},e.id))}),!H&&(0,M.jsx)("div",{className:"mt-6 p-4 bg-yellow-950/30 border border-yellow-500 rounded-lg",children:(0,M.jsx)("p",{className:"text-yellow-400 text-center",children:"\u23f3 Complete all video modules before proceeding to the quiz"})})]}),null===c&&H?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Step 2: Knowledge Assessment"}),(0,M.jsxs)("div",{className:"mb-6 bg-slate-900 rounded-lg p-4",children:[(0,M.jsxs)("div",{className:"flex justify-between text-sm text-slate-400 mb-2",children:[(0,M.jsx)("span",{children:"Progress"}),(0,M.jsxs)("span",{children:[Object.keys(o).length," / ",B.length," answered"]})]}),(0,M.jsx)("div",{className:"w-full bg-slate-800 h-2 rounded-full overflow-hidden",children:(0,M.jsx)("div",{className:"h-full bg-blue-500 transition-all duration-500",style:{width:"".concat(Object.keys(o).length/B.length*100,"%")}})})]}),(0,M.jsx)("div",{className:"space-y-6",children:B.map((e,t)=>(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6",children:[(0,M.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,M.jsx)("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 font-bold",children:t+1}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsx)("h3",{className:"text-lg font-bold text-white mb-1",children:e.title}),(0,M.jsx)("p",{className:"text-slate-300",children:e.question})]})]}),(0,M.jsx)("div",{className:"space-y-2 ml-11",children:e.options.map(t=>(0,M.jsxs)("label",{className:"flex items-center gap-3 p-3 rounded-lg border transition-all cursor-pointer ".concat(o[e.id]===t.id?"bg-blue-500/20 border-blue-500":"bg-slate-800 border-slate-700 hover:border-slate-600"),children:[(0,M.jsx)("input",{type:"radio",name:"question-".concat(e.id),value:t.id,checked:o[e.id]===t.id,onChange:()=>{return n=e.id,r=t.id,void s(l(l({},o),{},{[n]:r}));var n,r},className:"w-4 h-4 accent-blue-500"}),(0,M.jsx)("span",{className:"text-slate-200",children:t.text})]},t.id))}),o[e.id]&&(0,M.jsx)("div",{className:"mt-4 ml-11 p-3 bg-slate-800 border border-slate-700 rounded-lg",children:(0,M.jsxs)("p",{className:"text-sm text-slate-400 italic",children:["\ud83d\udca1 ",(0,M.jsx)("strong",{children:"Key Concept:"})," ",e.explanation]})})]},e.id))}),(0,M.jsx)("div",{className:"mt-8 flex justify-center",children:(0,M.jsx)("button",{onClick:()=>{let e=0;B.forEach(t=>{const n=t.options.find(e=>e.id===o[t.id]);null!==n&&void 0!==n&&n.correct&&e++}),u(Math.round(e/B.length*100))},disabled:Object.keys(o).length<B.length,className:"px-8 py-4 rounded-lg font-bold text-lg transition-all ".concat(Object.keys(o).length<B.length?"bg-slate-800 text-slate-600 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-500/50"),children:"Submit Training Assessment"})})]}):null===c?null:(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-8 text-center",children:[c>=80?(0,M.jsx)(O,{className:"w-20 h-20 text-green-400 mx-auto mb-4"}):(0,M.jsx)(E,{className:"w-20 h-20 text-red-400 mx-auto mb-4"}),(0,M.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:c>=80?"Training Complete!":"Additional Study Required"}),(0,M.jsxs)("div",{className:"text-6xl font-bold text-blue-400 my-6",children:[c,"%"]}),(0,M.jsx)("p",{className:"text-slate-400 mb-6 max-w-2xl mx-auto",children:c>=80?"You have successfully demonstrated understanding of physics-informed safety constraints and closed-loop competency development. You may resume operations.":"Please review the key concepts and retake the training module."}),(0,M.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,M.jsx)("button",{onClick:()=>{a(0),s({}),u(null),h({}),f(0)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-bold transition",children:"Retake Training"}),c>=80&&(0,M.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold transition",children:"Return to Dashboard"})]}),(0,M.jsxs)("div",{className:"mt-8 pt-6 border-t border-slate-800",children:[(0,M.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Answer Review"}),(0,M.jsx)("div",{className:"space-y-3 text-left max-w-2xl mx-auto",children:B.map((e,t)=>{const n=e.options.find(t=>t.id===o[e.id]),r=null===n||void 0===n?void 0:n.correct;return(0,M.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-slate-800 rounded",children:[r?(0,M.jsx)(O,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}):(0,M.jsx)(E,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),(0,M.jsxs)("div",{className:"flex-1",children:[(0,M.jsxs)("p",{className:"text-sm font-bold text-white",children:["Question ",t+1]}),(0,M.jsx)("p",{className:"text-sm text-slate-400",children:null===n||void 0===n?void 0:n.text})]})]},e.id)})})]})]})]})]})},$k=p("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Qk=p("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),eR=e=>{let{onCommand:n}=e;const[r,i]=(0,t.useState)(!1),[a,o]=(0,t.useState)(""),[s,l]=(0,t.useState)("SYSTEM_READY // PRESS PTT"),c=window.SpeechRecognition||window.webkitSpeechRecognition,u=c?new c:null;(0,t.useEffect)(()=>{if(u)return u.continuous=!1,u.lang="en-US",u.interimResults=!1,u.maxAlternatives=1,u.onstart=()=>{l("LISTENING... [SPEAK NOW]")},u.onend=()=>{i(!1),setTimeout(()=>l("SYSTEM_READY // PRESS PTT"),3e3)},u.onresult=e=>{const t=e.results.length-1,n=e.results[t][0].transcript.toLowerCase();o('"'.concat(n,'"')),d(n)},u.onerror=e=>{l("ERR: ".concat(e.error.toUpperCase())),i(!1)},()=>{u&&u.abort()};l("ERR: BROWSER_INCOMPATIBLE")},[]);const d=e=>{e.includes("open planner")||e.includes("plan")||e.includes("planner")?(n("NAVIGATE_PLANNER"),l("CMD: NAVIGATING_TO_PLANNER")):e.includes("show dashboard")||e.includes("executive")||e.includes("dashboard")?(n("NAVIGATE_EXECUTIVE"),l("CMD: NAVIGATING_TO_DASHBOARD")):e.includes("scheduler")||e.includes("schedule")?(n("NAVIGATE_SCHEDULER"),l("CMD: NAVIGATING_TO_SCHEDULER")):e.includes("execution")||e.includes("execute")?(n("NAVIGATE_EXECUTION"),l("CMD: NAVIGATING_TO_EXECUTION")):e.includes("training")||e.includes("competency")?(n("NAVIGATE_COMPETENCY"),l("CMD: NAVIGATING_TO_TRAINING")):e.includes("physics mode on")||e.includes("enable physics")?(n("PHYSICS_MODE_ON"),l("CMD: PHYSICS_MODE_ENABLED")):e.includes("physics mode off")||e.includes("disable physics")?(n("PHYSICS_MODE_OFF"),l("CMD: PHYSICS_MODE_DISABLED")):e.includes("status")||e.includes("report")?(n("SHOW_STATUS"),l("CMD: GENERATING_STATUS_REPORT")):e.includes("emergency")||e.includes("stop")||e.includes("abort")?(n("EMERGENCY_STOP"),l("\u26a0 ALARM: EMERGENCY_STOP_TRIGGERED")):l("ERR: UNKNOWN_COMMAND")};return(0,M.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col items-end gap-2 font-mono",children:[(r||a)&&(0,M.jsxs)("div",{className:"bg-slate-900/90 border-l-4 border-cyan-500 p-3 rounded-l-lg backdrop-blur-md shadow-2xl mb-2 min-w-[200px] animate-in slide-in-from-right",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between text-[9px] text-cyan-400 mb-1 tracking-widest uppercase",children:[(0,M.jsx)("span",{children:"Voice Log"}),(0,M.jsx)(v,{size:10,className:r?"animate-pulse":""})]}),(0,M.jsx)("div",{className:"text-white text-xs font-bold uppercase",children:a||"..."}),(0,M.jsx)("div",{className:"text-[9px] mt-1 font-bold ".concat(s.includes("ERR")?"text-red-400":s.includes("CMD")?"text-green-400":"text-slate-500"),children:s})]}),(0,M.jsxs)("button",{onClick:()=>{r?(u.stop(),i(!1)):u&&(u.start(),i(!0))},className:"relative group flex items-center gap-3 px-5 py-4 rounded-full border-2 shadow-[0_0_20px_rgba(0,0,0,0.5)] transition-all duration-300\n          ".concat(r?"bg-red-600 border-red-500 text-white animate-pulse":"bg-slate-800 border-slate-600 text-slate-400 hover:border-cyan-400 hover:text-cyan-400"),children:[r?(0,M.jsx)($k,{size:24}):(0,M.jsx)(Qk,{size:24}),(0,M.jsx)("span",{className:"absolute right-full mr-4 bg-slate-800 text-xs px-2 py-1 rounded border border-slate-700 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:r?"Stop Listening":"Push to Talk (PTT)"})]}),(0,M.jsx)("div",{className:"text-[9px] text-slate-600 bg-black/50 px-2 py-1 rounded backdrop-blur-sm",children:'Try: "Open Planner", "Show Dashboard", "Physics Mode On", "Emergency Stop"'})]})},tR=[{id:"well-alpha",name:"Node-01",nickname:"Alpha",integrityScore:85,safetyLocked:!1,aiRecommendation:{method:"Standard Intervention",summary:"Well integrity verified. Standard procedures apply.",successProbability:92}},{id:"well-bravo",name:"Node-02",nickname:"Asset Bravo",integrityScore:12,safetyLocked:!1,aiRecommendation:{method:"Enhanced Monitoring",summary:"ML model shows acceptable risk. Physics constraints NOT applied.",successProbability:78}},{id:"well-charlie",name:"Node-03",nickname:"Charlie",integrityScore:45,safetyLocked:!0,safetyLockReasons:["Barrier verification pending","Historical NPT on similar wells"],aiRecommendation:{method:"Barrier Verification Required",summary:"Safety locked pending barrier diagnostics.",successProbability:65}}];function nR(e){let{icon:t,label:n,active:r,onClick:i}=e;return(0,M.jsxs)("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition ".concat(r?"bg-blue-600 text-white":"text-slate-400 hover:bg-slate-800 hover:text-white"),children:[t,(0,M.jsx)("span",{className:"font-medium text-sm",children:n})]})}function rR(e){let{wells:t,physicsMode:n,onSelectWell:r}=e;return(0,M.jsxs)("div",{className:"p-8 space-y-6",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between",children:[(0,M.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Executive Dashboard"}),n&&(0,M.jsx)("div",{className:"px-4 py-2 bg-red-950/30 border border-red-500 rounded-lg text-red-400 text-sm font-bold",children:"\ud83d\udd2c PHYSICS MODE ACTIVE"})]}),(0,M.jsx)("div",{className:"grid grid-cols-3 gap-6",children:t.map(e=>(0,M.jsxs)("div",{onClick:()=>r(e),className:"bg-slate-900 border border-slate-800 rounded-lg p-6 cursor-pointer hover:border-blue-500 transition",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,M.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name}),e.safetyLocked&&(0,M.jsx)(w,{className:"w-5 h-5 text-red-400"})]}),(0,M.jsxs)("div",{className:"mb-4",children:[(0,M.jsx)("div",{className:"text-xs text-slate-500 mb-1",children:"Integrity Score"}),(0,M.jsxs)("div",{className:"text-4xl font-bold ".concat(e.integrityScore>=80?"text-green-400":e.integrityScore>=50?"text-amber-400":e.integrityScore>=20?"text-red-400":"text-red-600"),children:[e.integrityScore,"%"]})]}),(0,M.jsx)("div",{className:"text-sm text-slate-400",children:e.aiRecommendation.method}),"well-bravo"===e.id&&n&&(0,M.jsx)("div",{className:"mt-3 p-2 bg-red-950/30 border border-red-900 rounded text-xs text-red-400",children:"\u26a0\ufe0f Physics override: 12% \u2192 0% (CRITICAL)"})]},e.id))})]})}function iR(){return(0,M.jsxs)("div",{className:"p-8",children:[(0,M.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Operation Scheduler"}),(0,M.jsx)("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6",children:(0,M.jsx)("p",{className:"text-slate-400",children:"Timeline view of planned interventions would appear here."})})]})}function aR(e){let{selectedWell:t}=e;return(0,M.jsxs)("div",{className:"p-8",children:[(0,M.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Intervention Planner"}),t?(0,M.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6",children:[(0,M.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Well Details"}),(0,M.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("span",{className:"text-slate-400",children:"Name:"}),(0,M.jsx)("span",{className:"text-white font-bold",children:t.name})]}),(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("span",{className:"text-slate-400",children:"Integrity:"}),(0,M.jsxs)("span",{className:"font-bold ".concat(t.integrityScore>=80?"text-green-400":t.integrityScore>=50?"text-amber-400":"text-red-400"),children:[t.integrityScore,"%"]})]}),(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)("span",{className:"text-slate-400",children:"Status:"}),(0,M.jsx)("span",{className:t.safetyLocked?"text-red-400":"text-green-400",children:t.safetyLocked?"LOCKED":"UNLOCKED"})]})]}),(0,M.jsxs)("div",{className:"mt-6 p-4 bg-slate-800 rounded",children:[(0,M.jsx)("div",{className:"text-xs text-slate-500 mb-2",children:"AI Recommendation"}),(0,M.jsx)("div",{className:"text-sm text-white",children:t.aiRecommendation.summary})]})]}),(0,M.jsx)("div",{className:"h-96 relative bg-slate-900 border border-slate-800 rounded-lg flex items-center justify-center",children:(0,M.jsxs)("div",{className:"text-center p-8",children:[(0,M.jsx)(m,{className:"w-16 h-16 mx-auto mb-4 text-slate-600"}),(0,M.jsx)("h3",{className:"text-lg font-bold text-slate-400 mb-2",children:"Wellbore Visualization"}),(0,M.jsxs)("div",{className:"text-sm text-slate-500 mb-4",children:[t.name," - Integrity: ",t.integrityScore,"%"]}),(0,M.jsx)("div",{className:"inline-block px-4 py-2 rounded-lg ".concat(t.integrityScore>=80?"bg-green-900/30 text-green-400 border border-green-800":t.integrityScore>=50?"bg-amber-900/30 text-amber-400 border border-amber-800":t.integrityScore>=20?"bg-red-900/30 text-red-400 border border-red-800":"bg-red-950/50 text-red-300 border border-red-900"),children:t.integrityScore>=80?"\u2713 GREEN - APPROVED":t.integrityScore>=50?"\u26a0 AMBER - CAUTION":t.integrityScore>=20?"\u26a0 RED - WARNING":"\u26d4 CRITICAL - LOCKED"})]})})]}):(0,M.jsx)("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-6 text-center",children:(0,M.jsx)("p",{className:"text-slate-400",children:"Select a well from the Executive View to see planning details."})})]})}function oR(e){let{onExecute:t,physicsMode:n}=e;return(0,M.jsxs)("div",{className:"p-8",children:[(0,M.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Operational Execution"}),(0,M.jsxs)("div",{className:"bg-slate-900 border border-slate-800 rounded-lg p-8",children:[(0,M.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Pre-Execution Checklist"}),(0,M.jsxs)("div",{className:"space-y-3 mb-8",children:[(0,M.jsx)(sR,{label:"Barrier verification complete",checked:!n}),(0,M.jsx)(sR,{label:"Well integrity confirmed",checked:!n}),(0,M.jsx)(sR,{label:"Physics constraints satisfied",checked:!n}),(0,M.jsx)(sR,{label:"HSE approval obtained",checked:!0})]}),n&&(0,M.jsx)("div",{className:"mb-6 p-4 bg-red-950/30 border border-red-500 rounded-lg",children:(0,M.jsxs)("div",{className:"flex items-center gap-3 text-red-400",children:[(0,M.jsx)(_,{className:"w-6 h-6"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"font-bold",children:"Physics Constraint Active"}),(0,M.jsx)("div",{className:"text-sm",children:"Node-02 flagged as critical. Execution blocked until barriers verified."})]})]})}),(0,M.jsx)("button",{onClick:t,className:"w-full py-4 rounded-lg font-bold text-lg transition ".concat(n?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"),children:n?"\u26a0\ufe0f Confirm Operational Phase (BLOCKED)":"\u2713 Confirm Operational Phase"})]})]})}function sR(e){let{label:t,checked:n}=e;return(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[n?(0,M.jsx)(S,{className:"w-5 h-5 text-green-400"}):(0,M.jsx)(E,{className:"w-5 h-5 text-red-400"}),(0,M.jsx)("span",{className:n?"text-slate-300":"text-red-400",children:t})]})}const lR=function(){const[e,n]=(0,t.useState)(!0),[r,i]=(0,t.useState)("executive"),[a,o]=(0,t.useState)(!1),[s,c]=(0,t.useState)(tR),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(!1),[w,_]=(0,t.useState)(null),[S,E]=(0,t.useState)(82),[N,C]=(0,t.useState)(420),[A,j]=(0,t.useState)(!1),[P,O]=(0,t.useState)([]);(0,t.useEffect)(()=>{const e=tR.map(e=>"well-bravo"===e.id&&a?l(l({},e),{},{integrityScore:0,safetyLocked:!0,safetyLockReasons:["Physics constraint violation detected","Rapid pressure decline exceeds thermal model","Barrier integrity questionable - ML override required"],aiRecommendation:{method:"CRITICAL - Physics Override",summary:"Physics-informed model detects risk that pure ML missed. Well must be treated as critical (0% integrity).",successProbability:15}}):e);c(e),a?R("critical","Physics mode ENABLED - Node-02 flagged as CRITICAL (0%)"):R("success","Physics mode DISABLED - Node-02 restored to ML baseline (12%)")},[a]);const k=()=>{const e=s.find(e=>"well-bravo"===e.id);return a&&e&&e.safetyLocked?(_("Procedural Violation Detected: Attempted execution on safety-locked well (Node-02) with physics constraints active. Barrier integrity unverified. Rapid bleed down risk flagged by physics engine."),p(!0),R("critical","EXECUTION BLOCKED - Redirecting to competency training"),!1):(R("success","Execution authorized - All safety gates passed"),!0)},R=(e,t)=>{O(n=>[...n,{id:Date.now(),type:e,message:t,timestamp:(new Date).toLocaleTimeString()}])},D=()=>{n(!1)};return e?(0,M.jsx)(T,{onComplete:D}):(0,M.jsxs)("div",{className:"min-h-screen bg-slate-950 text-slate-100 flex",children:[(0,M.jsxs)("aside",{className:"w-64 bg-slate-900 border-r border-slate-800 flex flex-col",children:[(0,M.jsx)("div",{className:"p-6 border-b border-slate-800",children:(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)(f,{className:"w-8 h-8 text-blue-400"}),(0,M.jsxs)("div",{children:[(0,M.jsx)("h1",{className:"text-lg font-bold text-white",children:"Brahan Vertex"}),(0,M.jsx)("p",{className:"text-xs text-slate-400",children:"Mission Control"})]})]})}),(0,M.jsxs)("nav",{className:"flex-1 p-4 space-y-2",children:[(0,M.jsx)(nR,{icon:(0,M.jsx)(m,{className:"w-5 h-5"}),label:"Executive View",active:"executive"===r,onClick:()=>i("executive")}),(0,M.jsx)(nR,{icon:(0,M.jsx)(g,{className:"w-5 h-5"}),label:"Scheduler",active:"scheduler"===r,onClick:()=>i("scheduler")}),(0,M.jsx)(nR,{icon:(0,M.jsx)(v,{className:"w-5 h-5"}),label:"Planner",active:"planner"===r,onClick:()=>i("planner")}),(0,M.jsx)(nR,{icon:(0,M.jsx)(x,{className:"w-5 h-5"}),label:"Execution",active:"execution"===r,onClick:()=>i("execution")}),(0,M.jsx)(nR,{icon:(0,M.jsx)(y,{className:"w-5 h-5"}),label:"Competency",active:"competency"===r,onClick:()=>i("competency")})]}),(0,M.jsxs)("div",{className:"p-4 border-t border-slate-800",children:[(0,M.jsxs)("label",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg cursor-pointer hover:bg-slate-700 transition",children:[(0,M.jsxs)("div",{className:"flex items-center gap-3",children:[(0,M.jsx)(b,{className:"w-5 h-5 ".concat(a?"text-red-400":"text-slate-500")}),(0,M.jsx)("span",{className:"text-sm font-bold",children:"Physics Mode"})]}),(0,M.jsx)("input",{type:"checkbox",checked:a,onChange:e=>o(e.target.checked),className:"w-5 h-5 accent-red-500"})]}),a&&(0,M.jsx)("div",{className:"mt-2 p-2 bg-red-950/30 border border-red-900 rounded text-xs text-red-400",children:"\u26a0\ufe0f Physics constraints active - Node-02 flagged CRITICAL"})]})]}),(0,M.jsx)("main",{className:"flex-1 overflow-y-auto",children:(()=>{if(h)return(0,M.jsx)(Jk,{showBanner:!0,assignmentReason:w});switch(r){case"executive":default:return(0,M.jsx)(rR,{wells:s,physicsMode:a,onSelectWell:d});case"scheduler":return(0,M.jsx)(iR,{});case"planner":return(0,M.jsx)(aR,{selectedWell:u});case"execution":return(0,M.jsx)(oR,{onExecute:k,physicsMode:a});case"competency":return(0,M.jsx)(Jk,{showBanner:!1})}})()}),(0,M.jsx)(eR,{onCommand:e=>{switch(console.log("Voice Command Received:",e),R("success","Voice Command: ".concat(e)),e){case"NAVIGATE_PLANNER":i("planner"),p(!1);break;case"NAVIGATE_EXECUTIVE":i("executive"),p(!1);break;case"NAVIGATE_SCHEDULER":i("scheduler"),p(!1);break;case"NAVIGATE_EXECUTION":i("execution"),p(!1);break;case"NAVIGATE_COMPETENCY":i("competency"),p(!0);break;case"PHYSICS_MODE_ON":o(!0),R("critical","VOICE CMD: Physics mode enabled - Node-02 flagged CRITICAL");break;case"PHYSICS_MODE_OFF":o(!1),R("success","VOICE CMD: Physics mode disabled - Node-02 restored to ML baseline");break;case"SHOW_STATUS":const t="SYSTEM STATUS: ".concat(s.filter(e=>e.safetyLocked).length," wells locked, Physics Mode ").concat(a?"ACTIVE":"INACTIVE");R("success",t),alert(t);break;case"EMERGENCY_STOP":o(!0),i("execution"),R("critical","\u26a0 EMERGENCY STOP TRIGGERED VIA VOICE COMMAND");break;default:R("critical","Unknown voice command: ".concat(e))}}})]})};r.createRoot(document.getElementById("root")).render((0,M.jsx)(t.StrictMode,{children:(0,M.jsx)(lR,{})}))})()})();
//# sourceMappingURL=main.65a62001.js.map