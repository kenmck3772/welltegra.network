<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plug & Abandonment Demo Course | The Brahan Engine</title>
    <meta name="description" content="Comprehensive Plug and Abandonment (P&A) training course covering regulatory frameworks, barrier systems, liability, and global best practices.">
    <link rel="icon" type="image/jpeg" href="assets/images/logo.jpg">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg: #0b1220;
            --panel: #0f172a;
            --card: #1e293b;
            --border: #334155;
            --fg: #e2e8f0;
            --muted: #94a3b8;
            --accent: #14b8a6;
            --accent-hover: #2dd4bf;
            --primary-color: #2563eb;
            --primary-dark: #1e40af;
            --secondary-color: #10b981;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --bg-light: #0f172a;
            --bg-white: #1e293b;
            --border-color: #334155;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            --nav-bg: #0b1220;
            --nav-border: #334155;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg);
        }

        /* Unified Navigation */
        .unified-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: linear-gradient(180deg, rgba(11,18,32,.98), rgba(15,23,42,.95));
            backdrop-filter: blur(8px);
            border-bottom: 1px solid var(--nav-border);
        }
        .header-wrap {
            max-width: 1400px;
            margin: 0 auto;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .brand img {
            height: 40px;
            width: auto;
            border-radius: 8px;
        }
        .brand-text h1 {
            font-size: 1.25rem;
            font-weight: 800;
            color: white;
            letter-spacing: -0.025em;
        }
        .brand-text span {
            font-size: 0.75rem;
            color: #94a3b8;
        }
        .main-nav {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .main-nav-link {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            border-radius: 8px;
            text-decoration: none;
            color: #94a3b8;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.2s;
        }
        .main-nav-link:hover {
            color: white;
            background: rgba(255,255,255,0.05);
        }
        .main-nav-link.active {
            color: var(--accent);
            background: rgba(20, 184, 166, 0.15);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #1e40af 0%, #2563eb 100%);
            color: white;
            padding: 60px 20px;
            text-align: center;
        }
        .hero h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 12px;
        }
        .hero p {
            font-size: 1.2rem;
            opacity: 0.95;
            max-width: 800px;
            margin: 0 auto 24px;
        }
        .hero-meta {
            display: flex;
            gap: 24px;
            justify-content: center;
            font-size: 0.95rem;
            opacity: 0.9;
        }
        .hero-meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Progress Bar */
        .progress-container {
            background: var(--bg-white);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: var(--shadow-md);
        }
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        .progress-title {
            font-weight: 700;
            font-size: 1.1rem;
        }
        .progress-percent {
            font-weight: 700;
            color: var(--accent);
            font-size: 1.2rem;
        }
        .progress-bar {
            width: 100%;
            height: 12px;
            background: var(--border-color);
            border-radius: 6px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--secondary-color));
            border-radius: 6px;
            transition: width 0.3s ease;
        }

        /* Video Section */
        .video-section {
            background: var(--bg-white);
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: var(--shadow-md);
        }
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        .video-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        /* Module List */
        .modules-section {
            margin-bottom: 32px;
        }
        .module-card {
            background: var(--bg-white);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            border-left: 4px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .module-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(37, 99, 235, 0.05), transparent);
            transition: left 0.5s;
        }
        .module-card:hover::before {
            left: 100%;
        }
        .module-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateX(8px) scale(1.01);
        }
        .module-card.completed {
            border-left-color: var(--success);
        }
        .module-card.completed:hover {
            box-shadow: 0 8px 30px rgba(34, 197, 94, 0.2);
        }
        .module-card.in-progress {
            border-left-color: var(--warning);
            animation: pulse 3s infinite;
        }
        .module-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .module-card.locked:hover {
            transform: none;
        }
        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }
        .module-title-group {
            flex: 1;
        }
        .module-number {
            font-size: 0.875rem;
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: 4px;
        }
        .module-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 4px;
        }
        .module-duration {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        .module-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
        }
        .module-status.completed {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success);
        }
        .module-status.in-progress {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }
        .module-status.locked {
            background: var(--bg-light);
            color: var(--text-secondary);
        }
        .module-description {
            color: var(--text-secondary);
            margin-bottom: 12px;
            line-height: 1.6;
        }
        .module-content {
            display: none;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
            margin-top: 16px;
        }
        .module-content.active {
            display: block;
        }
        .key-points {
            margin-bottom: 16px;
        }
        .key-points h4 {
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        .key-points ul {
            margin-left: 20px;
            color: var(--text-secondary);
        }
        .key-points li {
            margin-bottom: 6px;
        }

        /* Quiz Section */
        .quiz-section {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 8px;
            margin-top: 16px;
        }
        .quiz-title {
            font-weight: 700;
            margin-bottom: 16px;
        }
        .quiz-question {
            margin-bottom: 20px;
        }
        .quiz-question p {
            font-weight: 600;
            margin-bottom: 12px;
        }
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .quiz-option {
            padding: 12px;
            background: var(--bg-white);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .quiz-option:hover {
            border-color: var(--accent);
        }
        .quiz-option.selected {
            border-color: var(--primary-color);
            background: rgba(37, 99, 235, 0.05);
        }
        .quiz-option.correct {
            border-color: var(--success);
            background: rgba(34, 197, 94, 0.1);
        }
        .quiz-option.incorrect {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
        }

        /* Action Buttons */
        .module-actions {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        .btn-primary:hover {
            background: var(--primary-dark);
        }
        .btn-secondary {
            background: var(--bg-light);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        .btn-secondary:hover {
            background: var(--border-color);
        }
        .btn-success {
            background: var(--success);
            color: white;
        }

        /* Related Resources */
        .resources-section {
            background: var(--bg-white);
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 32px;
            box-shadow: var(--shadow-md);
        }
        .resources-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 24px;
        }
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
        }
        .resource-card {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--accent);
            transition: all 0.2s;
        }
        .resource-card:hover {
            box-shadow: var(--shadow-sm);
        }
        .resource-card h4 {
            font-weight: 700;
            margin-bottom: 8px;
        }
        .resource-card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 12px;
        }
        .resource-link {
            color: var(--primary-color);
            font-weight: 600;
            text-decoration: none;
            font-size: 0.95rem;
        }
        .resource-link:hover {
            text-decoration: underline;
        }

        /* Certificate Section */
        .certificate-section {
            background: linear-gradient(135deg, var(--success) 0%, var(--secondary-color) 100%);
            color: white;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            display: none;
        }
        .certificate-section.show {
            display: block;
        }
        .certificate-section h2 {
            font-size: 2rem;
            margin-bottom: 16px;
        }
        .certificate-section p {
            font-size: 1.1rem;
            opacity: 0.95;
            margin-bottom: 24px;
        }

        /* Interactive Elements */
        .interactive-section {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.05), rgba(20, 184, 166, 0.05));
            border: 2px solid var(--accent);
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
        }

        /* Risk Cards (Module 1) */
        .risk-card {
            background: var(--bg-white);
            padding: 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid var(--border-color);
            position: relative;
            overflow: hidden;
            user-select: none;
        }
        .risk-card * {
            cursor: pointer;
            pointer-events: none;
        }
        .risk-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(239, 68, 68, 0.1), transparent);
            transition: left 0.5s;
        }
        .risk-card:hover::before {
            left: 100%;
        }
        .risk-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.2);
            border-color: var(--danger);
        }
        .risk-card.active {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.05);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }

        /* Golden Rules (Module 7) */
        .golden-rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }
        .golden-rule-card {
            background: var(--bg-white);
            padding: 24px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid var(--border-color);
            text-align: center;
            user-select: none;
        }
        .golden-rule-card * {
            cursor: pointer;
            pointer-events: none;
        }
        .golden-rule-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: var(--shadow-lg);
            border-color: var(--success);
        }
        .golden-rule-card.active {
            border-color: var(--success);
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(20, 184, 166, 0.1));
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
        }
        .rule-number {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--secondary-color));
            color: white;
            font-size: 2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }
        .golden-rule-card h4 {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: var(--primary-color);
        }
        .golden-rule-card p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        .rule-application {
            background: var(--bg-white);
            padding: 20px;
            border-radius: 8px;
            margin-top: 16px;
            display: none;
        }
        .rule-application.active {
            display: block;
            animation: slideDown 0.3s ease;
        }
        .interactive-title {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .interactive-title::before {
            content: "üéØ";
            font-size: 1.3rem;
        }

        /* Barrier Builder */
        .barrier-builder {
            display: flex;
            gap: 20px;
            margin-top: 16px;
        }
        .barrier-components {
            flex: 1;
            background: var(--bg-white);
            padding: 16px;
            border-radius: 8px;
            border: 2px dashed var(--border-color);
        }
        .barrier-preview {
            flex: 1;
            background: var(--bg-white);
            padding: 16px;
            border-radius: 8px;
            min-height: 300px;
            position: relative;
        }
        .component-item {
            background: var(--bg-light);
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            border-left: 4px solid var(--accent);
            cursor: move;
            transition: all 0.2s;
            user-select: none;
        }
        .component-item:hover {
            transform: translateX(4px);
            box-shadow: var(--shadow-sm);
        }
        .component-item.dragging {
            opacity: 0.5;
        }
        .barrier-layer {
            padding: 16px;
            margin-bottom: 8px;
            border-radius: 6px;
            border: 2px dashed transparent;
            min-height: 60px;
            transition: all 0.2s;
        }
        .barrier-layer.drag-over {
            border-color: var(--accent);
            background: rgba(20, 184, 166, 0.1);
        }
        .barrier-layer.filled {
            border-style: solid;
            background: var(--bg-light);
        }
        .barrier-layer.cement {
            border-left-color: #94a3b8;
            background: linear-gradient(90deg, rgba(148, 163, 184, 0.2), transparent);
        }
        .barrier-layer.casing {
            border-left-color: #64748b;
            background: linear-gradient(90deg, rgba(100, 116, 139, 0.2), transparent);
        }
        .barrier-layer.formation {
            border-left-color: #78716c;
            background: linear-gradient(90deg, rgba(120, 113, 108, 0.2), transparent);
        }

        /* Regulatory Comparison */
        .reg-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }
        .reg-card {
            background: var(--bg-white);
            padding: 20px;
            border-radius: 8px;
            border-top: 4px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
            user-select: none;
        }
        .reg-card * {
            cursor: pointer;
            pointer-events: none;
        }
        .reg-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }
        .reg-card.selected {
            border-top-color: var(--accent);
            background: rgba(20, 184, 166, 0.05);
            box-shadow: 0 0 15px rgba(20, 184, 166, 0.3);
        }
        .reg-card h5 {
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--primary-color);
        }
        .reg-details {
            background: var(--bg-white);
            padding: 20px;
            border-radius: 8px;
            margin-top: 16px;
            display: none;
        }
        .reg-details.active {
            display: block;
            animation: slideDown 0.3s ease;
        }
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(20, 184, 166, 0.7);
                border-color: var(--accent);
            }
            50% {
                box-shadow: 0 0 0 15px rgba(20, 184, 166, 0);
                border-color: var(--warning);
            }
        }

        /* Enhanced Visual Animations */
        @keyframes successPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -1000px 0;
            }
            100% {
                background-position: 1000px 0;
            }
        }

        @keyframes fillUp {
            from {
                transform: scaleY(0);
                transform-origin: bottom;
            }
            to {
                transform: scaleY(1);
                transform-origin: bottom;
            }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 5px rgba(20, 184, 166, 0.5),
                           0 0 10px rgba(20, 184, 166, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(20, 184, 166, 0.8),
                           0 0 30px rgba(20, 184, 166, 0.4);
            }
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        @keyframes cardFlip {
            0% {
                transform: rotateY(0deg);
            }
            50% {
                transform: rotateY(90deg);
            }
            100% {
                transform: rotateY(0deg);
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* Visual Enhancement Classes */
        .success-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: linear-gradient(135deg, var(--success), var(--secondary-color));
            color: white;
            border-radius: 24px;
            font-weight: 700;
            animation: successPulse 1s ease infinite;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
        }

        .progress-ring {
            width: 120px;
            height: 120px;
            position: relative;
            margin: 0 auto;
        }

        .progress-ring-circle {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        .progress-ring-bg {
            fill: none;
            stroke: var(--border-color);
            stroke-width: 8;
        }

        .progress-ring-fill {
            fill: none;
            stroke: url(#progress-gradient);
            stroke-width: 8;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s ease;
        }

        .visual-meter {
            height: 24px;
            background: linear-gradient(90deg,
                var(--success) 0%,
                var(--warning) 50%,
                var(--danger) 100%);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }

        .visual-meter::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg,
                transparent,
                rgba(255,255,255,0.3),
                transparent);
            animation: shimmer 2s infinite;
        }

        .meter-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 100%;
            background: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            transition: left 0.3s ease;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 9999;
            animation: confetti-fall 3s linear forwards;
        }

        .interactive-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--accent);
            animation: fadeInUp 0.5s ease;
        }

        .card-3d {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .card-3d:hover {
            transform: rotateY(10deg) rotateX(10deg);
        }

        .glow-on-hover:hover {
            animation: glow 2s infinite;
        }

        .slide-in-left {
            animation: slideInLeft 0.5s ease;
        }

        .slide-in-right {
            animation: slideInRight 0.5s ease;
        }

        .fade-in-up {
            animation: fadeInUp 0.5s ease;
        }

        .bounce-in {
            animation: bounce 0.5s ease;
        }

        /* Global Standards Explorer */
        .standards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }
        .country-card {
            background: var(--bg-white);
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid var(--border-color);
            position: relative;
            overflow: hidden;
            user-select: none;
        }
        .country-card * {
            cursor: pointer;
            pointer-events: none;
        }
        .country-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(20, 184, 166, 0.1), transparent);
            transition: left 0.5s;
        }
        .country-card:hover::before {
            left: 100%;
        }
        .country-card:hover {
            border-color: var(--accent);
            transform: scale(1.08) rotate(2deg);
            box-shadow: 0 8px 25px rgba(20, 184, 166, 0.3);
        }
        .country-card.active {
            border-color: var(--success);
            background: rgba(34, 197, 94, 0.05);
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.4);
        }
        .country-flag {
            font-size: 2.5rem;
            margin-bottom: 8px;
        }
        .country-name {
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--text-primary);
        }
        .country-type {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        /* Liability Timeline */
        .timeline-container {
            margin-top: 16px;
            position: relative;
            padding: 20px 0;
        }
        .timeline {
            position: relative;
            padding-left: 40px;
        }
        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--accent), var(--warning));
        }
        .timeline-item {
            position: relative;
            margin-bottom: 24px;
            padding: 16px;
            background: var(--bg-white);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .timeline-item:hover {
            box-shadow: var(--shadow-md);
            transform: translateX(4px);
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -33px;
            top: 20px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--accent);
            border: 3px solid var(--bg-light);
            z-index: 1;
        }
        .timeline-year {
            font-weight: 700;
            color: var(--accent);
            font-size: 1.1rem;
            margin-bottom: 4px;
        }
        .timeline-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Financial Calculator */
        .calculator {
            background: var(--bg-white);
            padding: 20px;
            border-radius: 8px;
            margin-top: 16px;
        }
        .calc-input-group {
            margin-bottom: 16px;
        }
        .calc-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        .calc-input {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.2s;
        }
        .calc-input:focus {
            outline: none;
            border-color: var(--accent);
        }
        .calc-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--border-color);
            outline: none;
            -webkit-appearance: none;
        }
        .calc-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
        }
        .calc-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            border: none;
        }
        .calc-result {
            background: linear-gradient(135deg, var(--accent), var(--secondary-color));
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            margin-top: 16px;
        }
        .calc-result-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 4px;
        }
        .calc-result-value {
            font-size: 2rem;
            font-weight: 700;
        }

        /* Responsive Design */

        /* Tablet */
        @media (max-width: 1024px) {
            .container {
                padding: 32px 16px;
            }
            .video-section {
                padding: 24px 16px;
            }
            .resources-section {
                padding: 24px 16px;
            }
            .resource-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        /* Mobile */
        @media (max-width: 768px) {
            /* Header */
            .header-wrap {
                flex-wrap: wrap;
                padding: 10px 12px;
            }
            .brand img {
                height: 32px;
            }
            .brand-text h1 {
                font-size: 1rem;
            }
            .brand-text span {
                font-size: 0.65rem;
            }
            .main-nav {
                width: 100%;
                order: 3;
                margin-top: 8px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            .main-nav-link {
                font-size: 0.8rem;
                padding: 6px 10px;
                white-space: nowrap;
            }

            /* Hero */
            .hero {
                padding: 40px 16px;
            }
            .hero h1 {
                font-size: 1.75rem;
                line-height: 1.3;
            }
            .hero p {
                font-size: 0.95rem;
                margin-bottom: 16px;
            }
            .hero-meta {
                flex-direction: column;
                gap: 8px;
                font-size: 0.85rem;
            }

            /* Container */
            .container {
                padding: 24px 12px;
            }

            /* Progress */
            .progress-container {
                padding: 16px;
                margin-bottom: 20px;
            }
            .progress-title {
                font-size: 1rem;
            }
            .progress-percent {
                font-size: 1.1rem;
            }

            /* Video */
            .video-section {
                padding: 20px 12px;
                margin-bottom: 20px;
            }
            .video-section h2 {
                font-size: 1.35rem;
                margin-bottom: 16px;
            }
            .video-info {
                flex-direction: column;
                gap: 8px;
                align-items: flex-start;
            }

            /* Modules */
            .modules-section h2 {
                font-size: 1.35rem;
                margin-bottom: 16px;
            }
            .module-card {
                padding: 16px;
                margin-bottom: 12px;
            }
            .module-header {
                flex-direction: column;
                gap: 8px;
            }
            .module-number {
                font-size: 0.8rem;
            }
            .module-title {
                font-size: 1.1rem;
                line-height: 1.3;
            }
            .module-duration {
                font-size: 0.8rem;
            }
            .module-status {
                align-self: flex-start;
                padding: 4px 10px;
                font-size: 0.8rem;
            }
            .module-description {
                font-size: 0.9rem;
            }

            /* Quiz */
            .quiz-section {
                padding: 16px;
            }
            .quiz-title {
                font-size: 1rem;
            }
            .quiz-question p {
                font-size: 0.95rem;
            }
            .quiz-option {
                padding: 10px;
                font-size: 0.9rem;
            }

            /* Buttons */
            .module-actions {
                flex-direction: column;
                gap: 8px;
            }
            .btn {
                width: 100%;
                justify-content: center;
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            /* Resources */
            .resources-section {
                padding: 20px 12px;
                margin-bottom: 20px;
            }
            .resources-title {
                font-size: 1.35rem;
                margin-bottom: 16px;
            }
            .resource-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            .resource-card {
                padding: 16px;
            }
            .resource-card h4 {
                font-size: 1rem;
            }
            .resource-card p {
                font-size: 0.875rem;
            }

            /* Certificate */
            .certificate-section {
                padding: 24px 16px;
            }
            .certificate-section h2 {
                font-size: 1.5rem;
            }
            .certificate-section p {
                font-size: 0.95rem;
            }
        }

        /* Small Mobile */
        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.5rem;
            }
            .hero p {
                font-size: 0.875rem;
            }
            .hero-meta-item {
                font-size: 0.8rem;
            }

            .module-title {
                font-size: 1rem;
            }

            .video-section h2,
            .modules-section h2,
            .resources-title {
                font-size: 1.25rem;
            }

            .main-nav-link span {
                display: none;
            }
            .main-nav-link {
                padding: 8px;
            }
        }

        /* Touch improvements for all mobile devices */
        @media (hover: none) and (pointer: coarse) {
            .module-card {
                -webkit-tap-highlight-color: transparent;
            }
            .btn {
                min-height: 44px;
            }
            .quiz-option {
                min-height: 44px;
            }
        }

        /* Before/After Slider */
        .before-after-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .before-after-slider {
            position: relative;
            width: 100%;
            height: 400px;
            overflow: hidden;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        .before-image, .after-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
        }

        .before-image {
            background: linear-gradient(180deg, #1e293b 0%, #0f172a 50%, #78350f 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .after-image {
            background: linear-gradient(180deg, #0f172a 0%, #1e293b 50%, #064e3b 100%);
            clip-path: inset(0 50% 0 0);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .slider-handle {
            position: absolute;
            top: 0;
            left: 50%;
            width: 4px;
            height: 100%;
            background: var(--accent);
            cursor: ew-resize;
            transform: translateX(-50%);
            z-index: 10;
        }

        .slider-handle::before {
            content: '‚¨å';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #0b1220;
            font-weight: 900;
            box-shadow: 0 4px 12px rgba(20, 184, 166, 0.5);
        }

        .well-visual {
            position: relative;
            width: 120px;
            height: 300px;
            border: 3px solid currentColor;
            border-radius: 8px;
            margin: 20px auto;
        }

        .well-label {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-align: center;
        }

        .well-description {
            font-size: 0.9rem;
            text-align: center;
            max-width: 300px;
        }

        .before-content {
            color: var(--danger);
        }

        .after-content {
            color: var(--success);
        }

        .leak-indicator {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--danger);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .seal-indicator {
            position: absolute;
            width: 100%;
            background: var(--success);
            opacity: 0.8;
        }

        /* Well Depth Visualizer */
        .depth-visualizer {
            background: linear-gradient(180deg, #0ea5e9 0%, #1e293b 30%, #0f172a 70%, #78350f 100%);
            border-radius: 12px;
            padding: 30px;
            position: relative;
            overflow: hidden;
        }

        .depth-scale {
            position: relative;
            height: 500px;
            border-left: 4px solid var(--accent);
            margin: 0 auto;
            max-width: 600px;
        }

        .depth-marker {
            position: absolute;
            left: 0;
            width: 100%;
            padding: 12px 20px;
            background: rgba(15, 23, 42, 0.9);
            border: 2px solid var(--accent);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(4px);
        }

        .depth-marker:hover {
            transform: translateX(10px);
            border-color: var(--accent-hover);
            box-shadow: 0 4px 12px rgba(20, 184, 166, 0.4);
        }

        .depth-marker.active {
            background: rgba(20, 184, 166, 0.2);
            border-color: var(--accent-hover);
            transform: translateX(15px);
        }

        .depth-label {
            font-weight: 700;
            color: var(--accent);
            font-size: 1rem;
        }

        .depth-description {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .depth-info-panel {
            background: var(--card);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            display: none;
            animation: fadeInUp 0.5s ease;
        }

        .depth-info-panel.active {
            display: block;
        }

        .depth-info-panel h4 {
            color: var(--accent);
            margin-bottom: 12px;
        }

    </style>
</head>
<body>
    <!-- Navigation -->
    <header class="unified-header">
        <div class="header-wrap">
            <a href="index.html" class="brand">
                <img src="assets/images/logo.jpg" alt="WellTegra Logo">
                <div class="brand-text">
                    <h1>The Brahan Engine</h1>
                    <span>Stop Paying the NPT Tax</span>
                </div>
            </a>
            <nav class="main-nav">
                <a href="index.html" class="main-nav-link">Dashboard</a>
                <a href="sop-library.html" class="main-nav-link">SOP Library</a>
                <a href="equipment.html" class="main-nav-link">Equipment</a>
                <a href="intervention-guide.html" class="main-nav-link">Guide</a>
                <a href="pa-course.html" class="main-nav-link active">P&A Course</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <h1>Plug & Abandonment Demo Course</h1>
        <p>Master the regulatory frameworks, technical barriers, and long-term liability considerations essential for safe and compliant well abandonment operations</p>
        <div class="hero-meta">
            <div class="hero-meta-item">
                <span>‚è±Ô∏è</span>
                <span>~12 minutes core content</span>
            </div>
            <div class="hero-meta-item">
                <span>üìö</span>
                <span>7 comprehensive modules</span>
            </div>
            <div class="hero-meta-item">
                <span>üéØ</span>
                <span>Certificate of completion</span>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container">
        <!-- Progress Tracker -->
        <div class="progress-container">
            <div class="progress-header">
                <div class="progress-title">Your Progress</div>
                <div class="progress-percent" id="progress-percent">0%</div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
        </div>

        <!-- Video Section -->
        <div class="video-section">
            <h2 style="margin-bottom: 20px; font-size: 1.75rem;">Interactive Course Video</h2>
            <div style="background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(20, 184, 166, 0.1)); padding: 16px; border-radius: 8px; margin-bottom: 16px; border-left: 4px solid var(--accent);">
                <p style="margin: 0; font-weight: 600; color: var(--primary-color);">
                    üéØ Interactive Learning Mode: The video will pause at key moments for you to practice what you've learned!
                </p>
            </div>
            <div class="video-wrapper">
                <div id="youtube-player"></div>
            </div>

            <!-- Video Checkpoint Alert -->
            <div id="checkpoint-alert" style="display: none; margin-top: 16px; padding: 20px; background: linear-gradient(135deg, var(--warning), var(--accent)); color: white; border-radius: 8px; text-align: center;">
                <h3 style="margin-bottom: 12px; font-size: 1.3rem;">‚è∏Ô∏è Checkpoint Reached!</h3>
                <p id="checkpoint-message" style="margin-bottom: 16px; font-size: 1.1rem;"></p>
                <p style="font-size: 0.95rem; opacity: 0.9;">Scroll down to complete the interactive exercise, then click Continue.</p>
                <button id="continue-btn" class="btn" style="background: white; color: var(--accent); margin-top: 12px; font-weight: 700;" onclick="continueVideo()" disabled>
                    ‚úì Complete Exercise First
                </button>
            </div>

            <div class="video-info" style="margin-top: 16px;">
                <div>
                    <strong>Duration:</strong> 11:45 | <strong>Checkpoints:</strong> 5 Interactive Elements
                </div>
                <div id="current-checkpoint" style="color: var(--text-secondary); font-size: 0.9rem;">
                    üìç Next checkpoint: Module 2 at 2:46
                </div>
            </div>
        </div>

        <!-- Course Modules -->
        <div class="modules-section">
            <h2 style="margin-bottom: 24px; font-size: 1.75rem;">Course Modules</h2>

            <!-- Module 1 -->
            <div class="module-card" data-module="1" onclick="toggleModule(1)">
                <div class="module-header">
                    <div class="module-title-group">
                        <div class="module-number">MODULE 1</div>
                        <div class="module-title">Introduction to P&A Importance</div>
                        <div class="module-duration">üìπ Video: 00:00 - 01:50</div>
                    </div>
                    <div class="module-status" id="status-1">
                        <span>‚≠ï</span>
                        <span>Not Started</span>
                    </div>
                </div>
                <div class="module-description">
                    Understanding why proper well abandonment is critical for environmental protection, public safety, and regulatory compliance.
                </div>
                <div class="module-content" id="content-1">
                    <div class="key-points">
                        <h4>Key Learning Points:</h4>
                        <ul>
                            <li>Wells at end of productive life cannot be simply left open</li>
                            <li>Severe risks include groundwater contamination, soil pollution, and greenhouse gas leaks</li>
                            <li>P&A permanently seals wells using specialized equipment</li>
                            <li>Primary goal: protect environment and public safety</li>
                            <li>Legal and regulatory obligations for operators</li>
                        </ul>
                    </div>

                    <!-- Interactive Environmental Risk Visualizer -->
                    <div class="interactive-section">
                        <div class="interactive-title">Interactive: Environmental Risks of Abandoned Wells</div>
                        <p style="margin-bottom: 16px; color: var(--text-secondary);">Click on each risk area to explore the environmental and safety consequences of improperly abandoned wells.</p>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 16px;">
                            <div class="risk-card" onclick="selectRisk('groundwater')" data-risk="groundwater">
                                <div style="font-size: 3rem; text-align: center; margin-bottom: 8px;">üíß</div>
                                <h4 style="text-align: center; font-size: 1rem; margin-bottom: 8px;">Groundwater Contamination</h4>
                                <p style="font-size: 0.85rem; color: var(--text-secondary); text-align: center;">Click to explore</p>
                            </div>

                            <div class="risk-card" onclick="selectRisk('soil')" data-risk="soil">
                                <div style="font-size: 3rem; text-align: center; margin-bottom: 8px;">üå±</div>
                                <h4 style="text-align: center; font-size: 1rem; margin-bottom: 8px;">Soil Pollution</h4>
                                <p style="font-size: 0.85rem; color: var(--text-secondary); text-align: center;">Click to explore</p>
                            </div>

                            <div class="risk-card" onclick="selectRisk('greenhouse')" data-risk="greenhouse">
                                <div style="font-size: 3rem; text-align: center; margin-bottom: 8px;">üåç</div>
                                <h4 style="text-align: center; font-size: 1rem; margin-bottom: 8px;">Greenhouse Gas Leaks</h4>
                                <p style="font-size: 0.85rem; color: var(--text-secondary); text-align: center;">Click to explore</p>
                            </div>

                            <div class="risk-card" onclick="selectRisk('safety')" data-risk="safety">
                                <div style="font-size: 3rem; text-align: center; margin-bottom: 8px;">‚ö†Ô∏è</div>
                                <h4 style="text-align: center; font-size: 1rem; margin-bottom: 8px;">Public Safety</h4>
                                <p style="font-size: 0.85rem; color: var(--text-secondary); text-align: center;">Click to explore</p>
                            </div>
                        </div>

                        <div class="risk-details reg-details" id="risk-groundwater">
                            <h4 style="color: var(--danger); margin-bottom: 12px;">üíß Groundwater Contamination</h4>
                            <p><strong>What happens:</strong> Well fluids (brine, oil, gas, chemicals) leak into freshwater aquifers used for drinking water.</p>
                            <p style="margin-top: 8px;"><strong>Impact:</strong> Entire communities can lose access to safe drinking water. Cleanup costs can exceed millions of dollars.</p>
                            <p style="margin-top: 8px;"><strong>Real Example:</strong> In some regions, thousands of abandoned wells contaminate groundwater, requiring expensive water treatment or new water sources.</p>
                            <p style="margin-top: 8px;"><strong>Prevention:</strong> Proper P&A creates permanent barriers preventing fluid migration into aquifers.</p>
                        </div>

                        <div class="risk-details reg-details" id="risk-soil">
                            <h4 style="color: var(--danger); margin-bottom: 12px;">üå± Soil Pollution</h4>
                            <p><strong>What happens:</strong> Hydrocarbons and chemicals seep to surface, contaminating agricultural land and ecosystems.</p>
                            <p style="margin-top: 8px;"><strong>Impact:</strong> Land becomes unusable for farming or development. Vegetation dies, wildlife affected, property values plummet.</p>
                            <p style="margin-top: 8px;"><strong>Cleanup Cost:</strong> Soil remediation can cost $100K-$1M+ per site and take years to complete.</p>
                            <p style="margin-top: 8px;"><strong>Prevention:</strong> Proper wellhead abandonment and surface restoration prevents leakage pathways.</p>
                        </div>

                        <div class="risk-details reg-details" id="risk-greenhouse">
                            <h4 style="color: var(--danger); margin-bottom: 12px;">üåç Greenhouse Gas Emissions</h4>
                            <p><strong>What happens:</strong> Methane (CH‚ÇÑ) and CO‚ÇÇ escape from poorly sealed wells into atmosphere.</p>
                            <p style="margin-top: 8px;"><strong>Impact:</strong> Methane is 25x more potent than CO‚ÇÇ as greenhouse gas. One leaking well = emissions of thousands of cars.</p>
                            <p style="margin-top: 8px;"><strong>Global Scale:</strong> Millions of abandoned wells worldwide contribute significantly to climate change.</p>
                            <p style="margin-top: 8px;"><strong>Prevention:</strong> Permanent cement seals block gas migration pathways upward.</p>
                        </div>

                        <div class="risk-details reg-details" id="risk-safety">
                            <h4 style="color: var(--danger); margin-bottom: 12px;">‚ö†Ô∏è Public Safety Hazards</h4>
                            <p><strong>What happens:</strong> Gas accumulation in buildings, explosive risk, asphyxiation hazards, physical well bore collapse.</p>
                            <p style="margin-top: 8px;"><strong>Impact:</strong> Injuries, deaths, property damage. Liability extends to current landowner and operator.</p>
                            <p style="margin-top: 8px;"><strong>Legal Consequence:</strong> Criminal charges possible if negligence leads to injury or death.</p>
                            <p style="margin-top: 8px;"><strong>Prevention:</strong> Complete P&A eliminates pathways for dangerous gases and secures wellhead.</p>
                        </div>

                        <p style="margin-top: 16px; padding: 12px; background: rgba(239, 68, 68, 0.1); border-radius: 6px; border-left: 4px solid var(--danger);">
                            <strong>‚ö†Ô∏è Bottom Line:</strong> The cost of proper P&A ($100K-$10M) is far less than cleanup costs, legal liability, and environmental damage from improper abandonment. This is why regulations exist and why "just walking away" is never an option.
                        </p>

                        <!-- Before/After P&A Slider -->
                        <div class="interactive-section" style="margin-top: 24px;">
                            <div class="interactive-title">Interactive: Before & After P&A Comparison</div>
                            <p style="margin-bottom: 16px; color: var(--text-secondary);">Drag the slider to compare an improperly abandoned well vs. a properly sealed well</p>

                            <div class="before-after-container">
                                <div class="before-after-slider" id="beforeAfterSlider">
                                    <!-- BEFORE: Leaking Well -->
                                    <div class="before-image">
                                        <div class="before-content">
                                            <div class="well-label">‚ùå IMPROPERLY ABANDONED</div>
                                            <div class="well-visual" style="border-color: var(--danger);">
                                                <div class="leak-indicator" style="top: 20%; left: -10px;"></div>
                                                <div class="leak-indicator" style="top: 40%; right: -10px;"></div>
                                                <div class="leak-indicator" style="top: 60%; left: -10px;"></div>
                                                <div class="leak-indicator" style="bottom: 10%; right: -10px;"></div>
                                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 3rem;">üíÄ</div>
                                            </div>
                                            <div class="well-description">
                                                ‚Ä¢ Leaking fluids<br>
                                                ‚Ä¢ Groundwater contamination<br>
                                                ‚Ä¢ Gas emissions<br>
                                                ‚Ä¢ Safety hazard
                                            </div>
                                        </div>
                                    </div>

                                    <!-- AFTER: Properly Sealed Well -->
                                    <div class="after-image" id="afterImage">
                                        <div class="after-content">
                                            <div class="well-label">‚úÖ PROPERLY SEALED P&A</div>
                                            <div class="well-visual" style="border-color: var(--success);">
                                                <div class="seal-indicator" style="height: 30%; bottom: 0;">
                                                    <div style="text-align: center; padding-top: 5px; font-size: 0.7rem;">Cement Plug</div>
                                                </div>
                                                <div class="seal-indicator" style="height: 25%; top: 35%;">
                                                    <div style="text-align: center; padding-top: 5px; font-size: 0.7rem;">Barrier</div>
                                                </div>
                                                <div style="position: absolute; top: 5%; left: 50%; transform: translateX(-50%); font-size: 0.8rem;">Surface Seal</div>
                                            </div>
                                            <div class="well-description">
                                                ‚Ä¢ Multiple barriers<br>
                                                ‚Ä¢ No leakage<br>
                                                ‚Ä¢ Permanent protection<br>
                                                ‚Ä¢ Environmentally safe
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Slider Handle -->
                                    <div class="slider-handle" id="sliderHandle"></div>
                                </div>
                            </div>

                            <p style="margin-top: 16px; text-align: center; font-style: italic; color: var(--muted);">
                                Move the slider to see the dramatic difference proper P&A makes
                            </p>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <div class="quiz-title">Knowledge Check</div>
                        <div class="quiz-question">
                            <p>What are the primary risks of improperly abandoned wells?</p>
                            <div class="quiz-options">
                                <label class="quiz-option">
                                    <input type="radio" name="q1" value="a"> Economic losses only
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q1" value="b"> Groundwater contamination, soil pollution, and greenhouse gas leaks
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q1" value="c"> Equipment depreciation
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q1" value="d"> Lost production revenue
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="module-actions">
                        <button class="btn btn-primary" onclick="completeModule(1)">Mark Complete & Continue</button>
                    </div>
                </div>
            </div>

            <!-- Module 2 -->
            <div class="module-card" data-module="2" onclick="toggleModule(2)">
                <div class="module-header">
                    <div class="module-title-group">
                        <div class="module-number">MODULE 2</div>
                        <div class="module-title">Regulatory Frameworks: Prescriptive vs Goal-Setting</div>
                        <div class="module-duration">üìπ Video: 01:51 - 02:46</div>
                    </div>
                    <div class="module-status" id="status-2">
                        <span>üîí</span>
                        <span>Locked</span>
                    </div>
                </div>
                <div class="module-description">
                    Comparing the two fundamental approaches governments use to regulate P&A operations globally.
                </div>
                <div class="module-content" id="content-2">
                    <div class="key-points">
                        <h4>Key Learning Points:</h4>
                        <ul>
                            <li><strong>Prescriptive Regulations (USA):</strong> Detailed step-by-step requirements (e.g., specific cement plug lengths)</li>
                            <li>Advantages: Consistency and clear compliance path</li>
                            <li>Disadvantages: Can stifle innovation and adaptation</li>
                            <li><strong>Goal-Setting Regulations (UK/Norway):</strong> Define objective without dictating method</li>
                            <li>Requirement: Rigorous documentation proving effectiveness</li>
                            <li>Advantage: Encourages innovation and best practices</li>
                        </ul>
                    </div>

                    <!-- Interactive Regulatory Comparison -->
                    <div class="interactive-section">
                        <div class="interactive-title">Interactive: Compare Regulatory Frameworks</div>
                        <p style="margin-bottom: 16px; color: var(--text-secondary);">Click on each regulatory approach to explore their characteristics, advantages, and real-world applications.</p>

                        <div class="reg-comparison">
                            <div class="reg-card" data-reg="prescriptive" onclick="selectRegulation('prescriptive')">
                                <h5>üìã Prescriptive</h5>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">Detailed step-by-step requirements</p>
                                <p style="font-size: 0.85rem; margin-top: 8px;"><strong>Primary Use:</strong> United States</p>
                            </div>

                            <div class="reg-card" data-reg="goal-setting" onclick="selectRegulation('goal-setting')">
                                <h5>üéØ Goal-Setting</h5>
                                <p style="font-size: 0.9rem; color: var(--text-secondary);">Define objectives, flexible methods</p>
                                <p style="font-size: 0.85rem; margin-top: 8px;"><strong>Primary Use:</strong> UK, Norway</p>
                            </div>
                        </div>

                        <div class="reg-details" id="reg-details-prescriptive">
                            <h4 style="color: var(--primary-color); margin-bottom: 12px;">Prescriptive Regulations</h4>
                            <p><strong>How it works:</strong> Detailed, step-by-step instructions (e.g., "cement plug must be 100 feet long")</p>
                            <p style="margin-top: 8px;"><strong>Advantages:</strong></p>
                            <ul style="margin-left: 20px; margin-top: 4px;">
                                <li>Clear compliance pathway</li>
                                <li>Consistency across operators</li>
                                <li>Easy to audit and enforce</li>
                                <li>Reduces ambiguity</li>
                            </ul>
                            <p style="margin-top: 8px;"><strong>Disadvantages:</strong></p>
                            <ul style="margin-left: 20px; margin-top: 4px;">
                                <li>Can stifle innovation</li>
                                <li>May not adapt to unique situations</li>
                                <li>Slower to update with new technologies</li>
                            </ul>
                            <p style="margin-top: 8px;"><strong>Real-world example:</strong> US state regulations often specify exact cement plug lengths, casing removal depths, and testing procedures that must be followed precisely.</p>
                        </div>

                        <div class="reg-details" id="reg-details-goal-setting">
                            <h4 style="color: var(--primary-color); margin-bottom: 12px;">Goal-Setting Regulations</h4>
                            <p><strong>How it works:</strong> Define the end goal (e.g., "well must never leak") without dictating exact methods</p>
                            <p style="margin-top: 8px;"><strong>Advantages:</strong></p>
                            <ul style="margin-left: 20px; margin-top: 4px;">
                                <li>Encourages innovation and best practices</li>
                                <li>Adapts to unique well conditions</li>
                                <li>Promotes continuous improvement</li>
                                <li>Allows use of latest technologies</li>
                            </ul>
                            <p style="margin-top: 8px;"><strong>Disadvantages:</strong></p>
                            <ul style="margin-left: 20px; margin-top: 4px;">
                                <li>Requires extensive documentation</li>
                                <li>Higher burden of proof on operators</li>
                                <li>More complex regulatory oversight</li>
                                <li>Potential for inconsistency</li>
                            </ul>
                            <p style="margin-top: 8px;"><strong>Real-world example:</strong> Norway's "rock-to-rock" barrier requirement allows operators to choose their method, but they must scientifically prove it will prevent leaks in perpetuity.</p>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <div class="quiz-title">Knowledge Check</div>
                        <div class="quiz-question">
                            <p>Which regulatory approach requires operators to prove their methods work through rigorous documentation?</p>
                            <div class="quiz-options">
                                <label class="quiz-option">
                                    <input type="radio" name="q2" value="a"> Prescriptive regulations
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q2" value="b"> Goal-setting regulations
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q2" value="c"> Both equally
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q2" value="d"> Neither approach requires documentation
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="module-actions">
                        <button class="btn btn-primary" onclick="completeModule(2)">Mark Complete & Continue</button>
                    </div>
                </div>
            </div>

            <!-- Module 3 -->
            <div class="module-card" data-module="3" onclick="toggleModule(3)">
                <div class="module-header">
                    <div class="module-title-group">
                        <div class="module-number">MODULE 3</div>
                        <div class="module-title">Global Standards & Country-Specific Approaches</div>
                        <div class="module-duration">üìπ Video: 02:47 - 06:49</div>
                    </div>
                    <div class="module-status" id="status-3">
                        <span>üîí</span>
                        <span>Locked</span>
                    </div>
                </div>
                <div class="module-description">
                    Exploring ISO 16530-1 standards and how different countries (Norway, UK, USA, Australia) implement P&A regulations.
                </div>
                <div class="module-content" id="content-3">
                    <div class="key-points">
                        <h4>Key Learning Points:</h4>
                        <ul>
                            <li><strong>ISO 16530-1:</strong> Universal global standard defining core P&A principles</li>
                            <li>Defines permanent barriers as foundational requirement</li>
                            <li><strong>Norway:</strong> Gold standard "rock-to-rock" barrier; scientific proof required</li>
                            <li><strong>United Kingdom:</strong> Goal-setting with liability in perpetuity</li>
                            <li><strong>United States:</strong> Primarily prescriptive state rules; federal shift to performance-based (Gulf of Mexico)</li>
                            <li><strong>Australia:</strong> Transitioning from prescriptive to goal-setting; strong evidence required for leaving equipment</li>
                        </ul>
                    </div>

                    <!-- Interactive Global Standards Explorer -->
                    <div class="interactive-section">
                        <div class="interactive-title">Interactive: Explore Global P&A Standards</div>
                        <p style="margin-bottom: 16px; color: var(--text-secondary);">Click on each country to explore how they implement P&A regulations under the ISO 16530-1 framework.</p>

                        <div class="standards-grid">
                            <div class="country-card" data-country="norway" onclick="exploreCountry('norway')">
                                <div class="country-flag">üá≥üá¥</div>
                                <div class="country-name">Norway</div>
                                <div class="country-type">Goal-Setting</div>
                            </div>

                            <div class="country-card" data-country="uk" onclick="exploreCountry('uk')">
                                <div class="country-flag">üá¨üáß</div>
                                <div class="country-name">United Kingdom</div>
                                <div class="country-type">Goal-Setting</div>
                            </div>

                            <div class="country-card" data-country="usa" onclick="exploreCountry('usa')">
                                <div class="country-flag">üá∫üá∏</div>
                                <div class="country-name">United States</div>
                                <div class="country-type">Prescriptive</div>
                            </div>

                            <div class="country-card" data-country="australia" onclick="exploreCountry('australia')">
                                <div class="country-flag">üá¶üá∫</div>
                                <div class="country-name">Australia</div>
                                <div class="country-type">Transitioning</div>
                            </div>
                        </div>

                        <div class="country-details reg-details" id="country-details-norway">
                            <h4 style="color: var(--primary-color); margin-bottom: 12px;">üá≥üá¥ Norway - The Gold Standard</h4>
                            <p><strong>Regulatory Approach:</strong> Goal-setting with rigorous scientific validation</p>
                            <p style="margin-top: 8px;"><strong>Key Requirement:</strong> "Rock-to-rock" barrier - operators must scientifically prove their P&A design will prevent leaks in perpetuity.</p>
                            <p style="margin-top: 8px;"><strong>Innovation:</strong> Encourages cutting-edge technology and methods, but demands comprehensive documentation and proof.</p>
                            <p style="margin-top: 8px;"><strong>Why it's considered the gold standard:</strong> Combines flexibility with the highest safety standards, requiring operators to think beyond simple compliance.</p>
                        </div>

                        <div class="country-details reg-details" id="country-details-uk">
                            <h4 style="color: var(--primary-color); margin-bottom: 12px;">üá¨üáß United Kingdom - Perpetual Accountability</h4>
                            <p><strong>Regulatory Approach:</strong> Goal-setting with liability in perpetuity</p>
                            <p style="margin-top: 8px;"><strong>Key Requirement:</strong> Well must never leak - operators choose methods but bear responsibility forever.</p>
                            <p style="margin-top: 8px;"><strong>Trailing Liability:</strong> If current owner goes bankrupt, regulators can pursue previous owners for decommissioning costs.</p>
                            <p style="margin-top: 8px;"><strong>Impact:</strong> Creates culture of meticulous planning and long-term thinking, as liability truly never ends.</p>
                        </div>

                        <div class="country-details reg-details" id="country-details-usa">
                            <h4 style="color: var(--primary-color); margin-bottom: 12px;">üá∫üá∏ United States - State-by-State Prescriptive</h4>
                            <p><strong>Regulatory Approach:</strong> Primarily prescriptive state regulations</p>
                            <p style="margin-top: 8px;"><strong>Key Requirement:</strong> Detailed step-by-step instructions (e.g., "cement plug must be X feet long at Y depth").</p>
                            <p style="margin-top: 8px;"><strong>Evolution:</strong> Federal regulators in complex areas like Gulf of Mexico shifting toward performance-based models.</p>
                            <p style="margin-top: 8px;"><strong>Advantage:</strong> Clear compliance pathway, easy to audit and enforce across thousands of operators.</p>
                        </div>

                        <div class="country-details reg-details" id="country-details-australia">
                            <h4 style="color: var(--primary-color); margin-bottom: 12px;">üá¶üá∫ Australia - In Transition</h4>
                            <p><strong>Regulatory Approach:</strong> Actively transitioning from prescriptive to goal-setting</p>
                            <p style="margin-top: 8px;"><strong>Key Requirement:</strong> Strong evidence required if equipment is left in place rather than removed.</p>
                            <p style="margin-top: 8px;"><strong>Current Focus:</strong> Building regulatory capacity and operator expertise for goal-setting framework.</p>
                            <p style="margin-top: 8px;"><strong>Future:</strong> Moving toward Norwegian-style scientific validation with Australian environmental considerations.</p>
                        </div>

                        <p style="margin-top: 16px; font-size: 0.9rem; padding: 12px; background: var(--bg-light); border-radius: 6px;">
                            <strong>üåç ISO 16530-1 Role:</strong> Provides universal grammar defining permanent barriers and core principles, allowing each country to implement based on their specific needs while maintaining global safety standards.
                        </p>
                    </div>

                    <div class="quiz-section">
                        <div class="quiz-title">Knowledge Check</div>
                        <div class="quiz-question">
                            <p>What is ISO 16530-1's role in global P&A operations?</p>
                            <div class="quiz-options">
                                <label class="quiz-option">
                                    <input type="radio" name="q3" value="a"> It replaces all national regulations
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q3" value="b"> It defines core principles and acts as a bridge between regulatory systems
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q3" value="c"> It only applies to offshore operations
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q3" value="d"> It is voluntary guidance with no legal weight
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="module-actions">
                        <button class="btn btn-primary" onclick="completeModule(3)">Mark Complete & Continue</button>
                    </div>
                </div>
            </div>

            <!-- Module 4 -->
            <div class="module-card" data-module="4" onclick="toggleModule(4)">
                <div class="module-header">
                    <div class="module-title-group">
                        <div class="module-number">MODULE 4</div>
                        <div class="module-title">Technical Barrier Systems</div>
                        <div class="module-duration">üìπ Video: 06:50 - 07:42</div>
                    </div>
                    <div class="module-status" id="status-4">
                        <span>üîí</span>
                        <span>Locked</span>
                    </div>
                </div>
                <div class="module-description">
                    Understanding barrier design, components, and verification requirements for permanent well sealing.
                </div>
                <div class="module-content" id="content-4">
                    <div class="key-points">
                        <h4>Key Learning Points:</h4>
                        <ul>
                            <li>Barrier system blocks fluid movement permanently</li>
                            <li>Components: Cement plug + steel casing + surrounding rock formation</li>
                            <li>Objective: Restore natural seal that existed before drilling</li>
                            <li>Verification methods: Pressure testing and logging</li>
                            <li>Mandatory integrity confirmation before completion</li>
                            <li>Multiple barriers for redundancy and safety</li>
                        </ul>
                    </div>

                    <!-- Interactive Barrier Builder -->
                    <div class="interactive-section">
                        <div class="interactive-title">Interactive: Build a P&A Barrier</div>
                        <p style="margin-bottom: 16px; color: var(--text-secondary);">Drag and drop the three essential components to build a proper P&A barrier in the correct sequence.</p>

                        <div class="barrier-builder">
                            <div class="barrier-components">
                                <h4 style="margin-bottom: 12px; font-size: 1rem;">Available Components</h4>
                                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 12px;">Drag these to the right ‚Üí</p>

                                <div class="component-item" draggable="true" data-type="cement" data-name="Cement Plug"
                                     ondragstart="drag(event)" ondragend="dragEnd(event)">
                                    <strong>üèóÔ∏è Cement Plug</strong>
                                    <p style="font-size: 0.85rem; margin-top: 4px; color: var(--text-secondary);">Primary sealing material</p>
                                </div>

                                <div class="component-item" draggable="true" data-type="casing" data-name="Steel Casing"
                                     ondragstart="drag(event)" ondragend="dragEnd(event)">
                                    <strong>‚öôÔ∏è Steel Casing</strong>
                                    <p style="font-size: 0.85rem; margin-top: 4px; color: var(--text-secondary);">Structural integrity</p>
                                </div>

                                <div class="component-item" draggable="true" data-type="formation" data-name="Rock Formation"
                                     ondragstart="drag(event)" ondragend="dragEnd(event)">
                                    <strong>ü™® Rock Formation</strong>
                                    <p style="font-size: 0.85rem; margin-top: 4px; color: var(--text-secondary);">Natural geological seal</p>
                                </div>

                                <button class="btn btn-secondary" onclick="resetBarrier()" style="margin-top: 16px; width: 100%;">
                                    Reset Barrier
                                </button>
                            </div>

                            <div class="barrier-preview">
                                <h4 style="margin-bottom: 12px; font-size: 1rem;">Barrier Design</h4>
                                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 16px;">Drop components here in correct order ‚Üì</p>

                                <div class="barrier-layer" data-type="formation"
                                     ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDragOver(event)">
                                    Drop formation here
                                </div>

                                <div class="barrier-layer" data-type="casing"
                                     ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDragOver(event)">
                                    Drop casing here
                                </div>

                                <div class="barrier-layer" data-type="cement"
                                     ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="clearDragOver(event)">
                                    Drop cement here
                                </div>

                                <div id="barrier-result" style="display: none; margin-top: 16px; padding: 16px; background: rgba(34, 197, 94, 0.1); border-radius: 8px; border-left: 4px solid var(--success);"></div>
                            </div>
                        </div>

                        <p style="margin-top: 16px; font-size: 0.9rem; color: var(--text-secondary);">
                            <strong>üí° Tip:</strong> A proper barrier requires all three components working together - the rock formation provides natural containment, steel casing provides structural integrity, and cement creates the permanent seal.
                        </p>
                    </div>

                    <div class="quiz-section">
                        <div class="quiz-title">Knowledge Check</div>
                        <div class="quiz-question">
                            <p>What are the three main components of a proper P&A barrier?</p>
                            <div class="quiz-options">
                                <label class="quiz-option">
                                    <input type="radio" name="q4" value="a"> Cement, steel, and rock formation
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q4" value="b"> Cement, mud, and gravel
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q4" value="c"> Steel, concrete, and plastic
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q4" value="d"> Only cement is required
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="module-actions">
                        <button class="btn btn-primary" onclick="completeModule(4)">Mark Complete & Continue</button>
                        <a href="sop-library.html" class="btn btn-secondary">View Related SOPs</a>
                    </div>
                </div>
            </div>

            <!-- Module 5 -->
            <div class="module-card" data-module="5" onclick="toggleModule(5)">
                <div class="module-header">
                    <div class="module-title-group">
                        <div class="module-number">MODULE 5</div>
                        <div class="module-title">Liability in Perpetuity & Long-Term Responsibility</div>
                        <div class="module-duration">üìπ Video: 07:43 - 09:48</div>
                    </div>
                    <div class="module-status" id="status-5">
                        <span>üîí</span>
                        <span>Locked</span>
                    </div>
                </div>
                <div class="module-description">
                    Critical understanding of permanent liability, trailing liability, and why operators remain responsible indefinitely.
                </div>
                <div class="module-content" id="content-5">
                    <div class="key-points">
                        <h4>Key Learning Points:</h4>
                        <ul>
                            <li><strong>Liability in Perpetuity:</strong> Responsibility continues indefinitely after plugging</li>
                            <li>Current owner liable for leaks occurring decades after abandonment</li>
                            <li>Cannot simply walk away after job completion</li>
                            <li><strong>Trailing Liability (UK):</strong> Regulators can pursue previous owners if current owner goes bankrupt</li>
                            <li>Prevents offloading risky assets to unstable operators</li>
                            <li>Encourages thorough due diligence in asset transactions</li>
                            <li>Long-term planning essential for corporate risk management</li>
                        </ul>
                    </div>

                    <!-- Interactive Liability Timeline -->
                    <div class="interactive-section">
                        <div class="interactive-title">Interactive: Perpetual Liability Timeline</div>
                        <p style="margin-bottom: 16px; color: var(--text-secondary);">Click on timeline events to see how liability persists across generations. This visualization demonstrates why "in perpetuity" truly means forever.</p>

                        <div class="timeline-container">
                            <div class="timeline">
                                <div class="timeline-item" data-year="0" onclick="highlightTimelineItem(0)">
                                    <div class="timeline-year">Year 0: Well Plugged</div>
                                    <div class="timeline-description">
                                        Well is permanently abandoned using approved P&A procedures. Operator believes job is complete.
                                        <strong style="display: block; margin-top: 4px; color: var(--accent);">‚ö†Ô∏è Liability begins - and never ends.</strong>
                                    </div>
                                </div>

                                <div class="timeline-item" data-year="10" onclick="highlightTimelineItem(10)">
                                    <div class="timeline-year">Year 10: First Decade</div>
                                    <div class="timeline-description">
                                        Barriers remain intact. Operator still liable for any leaks or integrity issues.
                                        Original engineers may still be with company, institutional knowledge preserved.
                                    </div>
                                </div>

                                <div class="timeline-item" data-year="25" onclick="highlightTimelineItem(25)">
                                    <div class="timeline-year">Year 25: Generation Shift</div>
                                    <div class="timeline-description">
                                        Original P&A team has retired. New generation manages liability.
                                        Documentation becomes critical - institutional knowledge fading.
                                        <strong style="display: block; margin-top: 4px; color: var(--warning);">Current owner still liable, regardless of ownership changes.</strong>
                                    </div>
                                </div>

                                <div class="timeline-item" data-year="50" onclick="highlightTimelineItem(50)">
                                    <div class="timeline-year">Year 50: Half Century</div>
                                    <div class="timeline-description">
                                        Two generations since plugging. Company may have changed hands multiple times.
                                        If leak occurs, current owner bears full responsibility AND cleanup costs.
                                        <strong style="display: block; margin-top: 4px; color: var(--danger);">UK Trailing Liability: Previous owners can also be pursued.</strong>
                                    </div>
                                </div>

                                <div class="timeline-item" data-year="100" onclick="highlightTimelineItem(100)">
                                    <div class="timeline-year">Year 100+: Perpetuity</div>
                                    <div class="timeline-description">
                                        A century later, the well must still never leak. No statute of limitations exists.
                                        Demonstrates why "permanent" barrier design is critical - there is no end date.
                                        <strong style="display: block; margin-top: 4px; color: var(--success);">This is why proper P&A design and documentation matters.</strong>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 20px; padding: 16px; background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(245, 158, 11, 0.1)); border-radius: 8px; border-left: 4px solid var(--danger);">
                            <p style="font-weight: 600; margin-bottom: 8px;">üí° Key Insight: The Forever Responsibility</p>
                            <p style="font-size: 0.9rem; color: var(--text-secondary);">
                                Unlike most business transactions with defined liability periods, P&A liability truly has no expiration date.
                                This drives conservative design choices, meticulous documentation, and long-term financial planning.
                                Companies must consider: "Will this barrier work in 100 years? Can we prove it?"
                            </p>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <div class="quiz-title">Knowledge Check</div>
                        <div class="quiz-question">
                            <p>What is "trailing liability" in P&A operations?</p>
                            <div class="quiz-options">
                                <label class="quiz-option">
                                    <input type="radio" name="q5" value="a"> Liability only lasts 10 years
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q5" value="b"> Previous owners can be pursued if current owner goes bankrupt
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q5" value="c"> Liability transfers to the government
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q5" value="d"> Liability ends when the well is plugged
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="module-actions">
                        <button class="btn btn-primary" onclick="completeModule(5)">Mark Complete & Continue</button>
                    </div>
                </div>
            </div>

            <!-- Module 6 -->
            <div class="module-card" data-module="6" onclick="toggleModule(6)">
                <div class="module-header">
                    <div class="module-title-group">
                        <div class="module-number">MODULE 6</div>
                        <div class="module-title">Financial Assurance & Innovation</div>
                        <div class="module-duration">üìπ Video: 09:49 - 11:24</div>
                    </div>
                    <div class="module-status" id="status-6">
                        <span>üîí</span>
                        <span>Locked</span>
                    </div>
                </div>
                <div class="module-description">
                    Understanding bonding requirements, financial guarantees, and innovative approaches like rigs-to-reefs programs.
                </div>
                <div class="module-content" id="content-6">
                    <div class="key-points">
                        <h4>Key Learning Points:</h4>
                        <ul>
                            <li><strong>Financial Bonds:</strong> Companies must post bonds guaranteeing P&A funding</li>
                            <li>Regulators updating bond amounts to reflect real-world costs</li>
                            <li>Prevents abandonment of wells due to financial insolvency</li>
                            <li>Bond amounts increasing globally to match actual decommissioning costs</li>
                            <li><strong>Rigs-to-Reefs:</strong> Offshore platforms converted to artificial reefs in some regions</li>
                            <li>Requires strict environmental review confirming benefits > risks</li>
                            <li>Not universally accepted; jurisdiction-specific approval needed</li>
                        </ul>
                    </div>

                    <!-- Interactive Financial Calculator -->
                    <div class="interactive-section">
                        <div class="interactive-title">Interactive: P&A Bond Calculator</div>
                        <p style="margin-bottom: 16px; color: var(--text-secondary);">Calculate estimated P&A bonding requirements based on well characteristics. Adjust parameters to see how depth, complexity, and location affect financial assurance needs.</p>

                        <div class="calculator">
                            <div class="calc-input-group">
                                <label class="calc-label" for="well-depth">Well Depth (feet)</label>
                                <input type="number" id="well-depth" class="calc-input" value="10000" min="0" max="35000" step="1000" onchange="calculatePABond()">
                                <small style="color: var(--text-secondary);">Deeper wells = higher complexity and cost</small>
                            </div>

                            <div class="calc-input-group">
                                <label class="calc-label" for="complexity">Operation Complexity: <span id="complexity-value">Medium</span></label>
                                <input type="range" id="complexity" class="calc-slider" value="2" min="1" max="3" step="1" oninput="calculatePABond()">
                                <div style="display: flex; justify-content: space-between; font-size: 0.85rem; color: var(--text-secondary); margin-top: 4px;">
                                    <span>Low</span>
                                    <span>Medium</span>
                                    <span>High</span>
                                </div>
                                <small style="color: var(--text-secondary);">Complexity factors: multiple zones, high pressure, contamination, difficult access</small>
                            </div>

                            <div class="calc-input-group">
                                <label class="calc-label" for="location">Well Location</label>
                                <select id="location" class="calc-input" onchange="calculatePABond()">
                                    <option value="onshore">Onshore (Land)</option>
                                    <option value="shallow-water" selected>Shallow Water (< 500 ft)</option>
                                    <option value="deep-water">Deep Water (500-5000 ft)</option>
                                    <option value="ultra-deep">Ultra-Deep Water (> 5000 ft)</option>
                                </select>
                                <small style="color: var(--text-secondary);">Offshore operations significantly increase costs due to logistics and equipment</small>
                            </div>

                            <div class="calc-result">
                                <div class="calc-result-label">Estimated P&A Bond Requirement</div>
                                <div class="calc-result-value" id="bond-amount">$750,000</div>
                                <small style="display: block; margin-top: 8px; opacity: 0.9;">
                                    This is a simplified educational calculation. Actual bonding requirements vary by jurisdiction and specific well conditions.
                                </small>
                            </div>

                            <div style="margin-top: 16px; padding: 12px; background: var(--bg-light); border-radius: 6px; font-size: 0.9rem;">
                                <p style="margin-bottom: 8px;"><strong>üìä Understanding the Factors:</strong></p>
                                <ul style="margin-left: 20px; color: var(--text-secondary);">
                                    <li><strong>Depth:</strong> Base rate of ~$50/foot increases with complexity</li>
                                    <li><strong>Complexity:</strong> 1x (simple) to 3x (high complexity) multiplier</li>
                                    <li><strong>Location:</strong> Offshore adds 1.5x to 4x due to logistics, rig costs, weather delays</li>
                                    <li><strong>Actual Costs:</strong> Can range from $100K (simple onshore) to $10M+ (ultra-deep complex)</li>
                                </ul>
                            </div>
                        </div>

                        <div style="margin-top: 20px; padding: 16px; background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(16, 185, 129, 0.1)); border-radius: 8px; border-left: 4px solid var(--accent);">
                            <p style="font-weight: 600; margin-bottom: 8px;">üí∞ Why Bonds Are Increasing</p>
                            <p style="font-size: 0.9rem; color: var(--text-secondary);">
                                Historically, bond amounts were often underestimated. When operators went bankrupt, governments had to cover shortfalls using taxpayer money.
                                Modern regulators now require bonds that reflect true P&A costs, protecting taxpayers and ensuring wells don't become "orphaned."
                            </p>
                        </div>
                    </div>

                    <div class="quiz-section">
                        <div class="quiz-title">Knowledge Check</div>
                        <div class="quiz-question">
                            <p>What is the purpose of financial bonds in P&A operations?</p>
                            <div class="quiz-options">
                                <label class="quiz-option">
                                    <input type="radio" name="q6" value="a"> To pay worker salaries
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q6" value="b"> To guarantee funding for P&A completion
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q6" value="c"> To cover production taxes
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q6" value="d"> To fund environmental monitoring only
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="module-actions">
                        <button class="btn btn-primary" onclick="completeModule(6)">Mark Complete & Continue</button>
                    </div>
                </div>
            </div>

            <!-- Module 7 -->
            <div class="module-card" data-module="7" onclick="toggleModule(7)">
                <div class="module-header">
                    <div class="module-title-group">
                        <div class="module-number">MODULE 7</div>
                        <div class="module-title">The Three Golden Rules of P&A</div>
                        <div class="module-duration">üìπ Video: 11:25 - 11:45</div>
                    </div>
                    <div class="module-status" id="status-7">
                        <span>üîí</span>
                        <span>Locked</span>
                    </div>
                </div>
                <div class="module-description">
                    Final synthesis: The three fundamental principles every P&A professional must follow.
                </div>
                <div class="module-content" id="content-7">
                    <div class="key-points">
                        <h4>The Three Golden Rules:</h4>
                        <ul>
                            <li><strong>1. Check Local Law:</strong> Regulations vary globally - always know your jurisdiction's specific requirements</li>
                            <li><strong>2. Prove Safety:</strong> Use best materials, verify all barriers, document every step meticulously</li>
                            <li><strong>3. Plan for the Future:</strong> Remember liability lasts generations - build for long-term integrity</li>
                        </ul>
                        <h4 style="margin-top: 16px;">Course Completion Criteria:</h4>
                        <ul>
                            <li>Understand prescriptive vs goal-setting regulatory frameworks</li>
                            <li>Recognize global standard ISO 16530-1 and country-specific approaches</li>
                            <li>Comprehend technical barrier systems and verification requirements</li>
                            <li>Appreciate liability in perpetuity and trailing liability concepts</li>
                            <li>Know financial assurance requirements and innovative programs</li>
                        </ul>
                    </div>

                    <!-- Interactive Three Golden Rules Checklist -->
                    <div class="interactive-section">
                        <div class="interactive-title">Interactive: Apply the Three Golden Rules</div>
                        <p style="margin-bottom: 16px; color: var(--text-secondary);">Click each rule to explore how it applies to real-world P&A planning. These are the foundational principles every professional must follow.</p>

                        <div class="golden-rules-grid">
                            <div class="golden-rule-card" onclick="selectGoldenRule(1)" data-rule="1">
                                <div class="rule-number">1</div>
                                <h4>Check Local Law</h4>
                                <p>Know your jurisdiction's requirements</p>
                            </div>

                            <div class="golden-rule-card" onclick="selectGoldenRule(2)" data-rule="2">
                                <div class="rule-number">2</div>
                                <h4>Prove Safety</h4>
                                <p>Verify, document, demonstrate</p>
                            </div>

                            <div class="golden-rule-card" onclick="selectGoldenRule(3)" data-rule="3">
                                <div class="rule-number">3</div>
                                <h4>Plan for the Future</h4>
                                <p>Build for generations, not decades</p>
                            </div>
                        </div>

                        <div class="rule-application reg-details" id="rule-app-1">
                            <h4 style="color: var(--primary-color); margin-bottom: 12px;">üìã Rule 1: Check Local Law</h4>
                            <p><strong>Why it matters:</strong> P&A regulations vary dramatically by jurisdiction. What's acceptable in Texas may be illegal in Norway.</p>
                            <p style="margin-top: 12px;"><strong>Practical Application:</strong></p>
                            <ul style="margin-left: 20px; margin-top: 8px;">
                                <li>Before planning: Identify all applicable federal, state/provincial, and local regulations</li>
                                <li>Determine if prescriptive (follow exact steps) or goal-setting (prove your method works)</li>
                                <li>Check for recent regulatory updates - requirements change frequently</li>
                                <li>For multi-jurisdictional projects: Apply most stringent requirements</li>
                                <li>Engage legal/regulatory experts early in planning</li>
                            </ul>
                            <p style="margin-top: 12px; padding: 12px; background: rgba(37, 99, 235, 0.1); border-radius: 6px;">
                                <strong>üí° Pro Tip:</strong> Create a regulatory compliance checklist specific to your well's location before designing P&A program.
                            </p>
                        </div>

                        <div class="rule-application reg-details" id="rule-app-2">
                            <h4 style="color: var(--primary-color); margin-bottom: 12px;">‚úÖ Rule 2: Prove Safety</h4>
                            <p><strong>Why it matters:</strong> In goal-setting jurisdictions, you must scientifically demonstrate your P&A design will work forever. Even in prescriptive jurisdictions, proving safety protects you from liability.</p>
                            <p style="margin-top: 12px;"><strong>Practical Application:</strong></p>
                            <ul style="margin-left: 20px; margin-top: 8px;">
                                <li><strong>Materials:</strong> Use highest quality cement, tested for downhole conditions</li>
                                <li><strong>Verification:</strong> Pressure test every barrier - don't assume success</li>
                                <li><strong>Logging:</strong> Run cement bond logs, temperature logs to confirm placement</li>
                                <li><strong>Documentation:</strong> Record everything - procedures, test results, deviations, decisions</li>
                                <li><strong>Third-party review:</strong> Have independent experts validate critical decisions</li>
                                <li><strong>Photos/video:</strong> Visual evidence of surface conditions, equipment used</li>
                            </ul>
                            <p style="margin-top: 12px; padding: 12px; background: rgba(37, 99, 235, 0.1); border-radius: 6px;">
                                <strong>üí° Pro Tip:</strong> Document as if you'll need to defend this work in court 50 years from now - because you might.
                            </p>
                        </div>

                        <div class="rule-application reg-details" id="rule-app-3">
                            <h4 style="color: var(--primary-color); margin-bottom: 12px;">üîÆ Rule 3: Plan for the Future</h4>
                            <p><strong>Why it matters:</strong> Liability is perpetual. Your company (or its successor) will be responsible for this well in 100+ years.</p>
                            <p style="margin-top: 12px;"><strong>Practical Application:</strong></p>
                            <ul style="margin-left: 20px; margin-top: 8px;">
                                <li><strong>Conservative design:</strong> Exceed minimum requirements - design for worst-case scenarios</li>
                                <li><strong>Material longevity:</strong> Will cement remain intact for centuries? Consider corrosion, pressure cycling</li>
                                <li><strong>Climate change:</strong> Could sea level rise, permafrost thaw, seismic activity affect barriers?</li>
                                <li><strong>Institutional knowledge:</strong> Create records that future generations can understand</li>
                                <li><strong>Financial planning:</strong> Set aside funds for monitoring and potential remediation</li>
                                <li><strong>Succession planning:</strong> Ensure corporate records survive mergers, bankruptcies, ownership changes</li>
                            </ul>
                            <p style="margin-top: 12px; padding: 12px; background: rgba(37, 99, 235, 0.1); border-radius: 6px;">
                                <strong>üí° Pro Tip:</strong> Ask yourself: "If I have to explain this decision to a regulator in 2100, will I be proud of the choices we made today?"
                            </p>
                        </div>

                        <p style="margin-top: 16px; padding: 16px; background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(20, 184, 166, 0.1)); border-radius: 8px; border-left: 4px solid var(--success);">
                            <strong>üéØ Integration:</strong> These three rules work together. Checking local law tells you WHAT to do. Proving safety shows HOW you'll do it. Planning for the future explains WHY you're doing it this way. Master all three for successful P&A operations.
                        </p>
                    </div>

                    <div class="quiz-section">
                        <div class="quiz-title">Final Assessment</div>
                        <div class="quiz-question">
                            <p>Why is "planning for the future" critical in P&A operations?</p>
                            <div class="quiz-options">
                                <label class="quiz-option">
                                    <input type="radio" name="q7" value="a"> To reduce current operational costs
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q7" value="b"> Because liability can last for generations
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q7" value="c"> To comply with short-term regulations
                                </label>
                                <label class="quiz-option">
                                    <input type="radio" name="q7" value="d"> It's only a recommendation, not a requirement
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="module-actions">
                        <button class="btn btn-success" onclick="completeModule(7)">Complete Course & Get Certificate</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Related Resources -->
        <div class="resources-section">
            <h2 class="resources-title">Related WellTegra Resources</h2>
            <div class="resource-grid">
                <div class="resource-card">
                    <h4>üîß Bridge Plug Setting SOP</h4>
                    <p>Critical procedure for establishing P&A barriers with bridge plugs</p>
                    <a href="sop-library.html#sop_002" class="resource-link">View SOP ‚Üí</a>
                </div>
                <div class="resource-card">
                    <h4>üîß Bridge Plug Retrieval SOP</h4>
                    <p>Troubleshooting and retrieval procedures for complex P&A scenarios</p>
                    <a href="sop-library.html#sop_003" class="resource-link">View SOP ‚Üí</a>
                </div>
                <div class="resource-card">
                    <h4>üì¶ Well Abandonment Package</h4>
                    <p>Pre-configured equipment assemblies for P&A operations</p>
                    <a href="equipment.html" class="resource-link">View Equipment ‚Üí</a>
                </div>
                <div class="resource-card">
                    <h4>üìö Intervention Planning Guide</h4>
                    <p>6-phase methodology for complex well interventions</p>
                    <a href="intervention-guide.html" class="resource-link">View Guide ‚Üí</a>
                </div>
                <div class="resource-card">
                    <h4>‚ö†Ô∏è Well 666 Case Study</h4>
                    <p>Lessons learned from "The Perfect Storm" - P&A considerations</p>
                    <a href="well-666.html" class="resource-link">View Case Study ‚Üí</a>
                </div>
                <div class="resource-card">
                    <h4>üîç Equipment Catalog</h4>
                    <p>Complete inventory of P&A tools and pressure control equipment</p>
                    <a href="equipment.html" class="resource-link">Browse Catalog ‚Üí</a>
                </div>
            </div>
        </div>

        <!-- Certificate Section -->
        <div class="certificate-section" id="certificate">
            <h2>üéì Congratulations!</h2>
            <p>You have successfully completed the Plug & Abandonment Demo Course</p>
            <p><strong>Certificate ID:</strong> <span id="cert-id"></span></p>
            <p><strong>Completion Date:</strong> <span id="cert-date"></span></p>
            <button class="btn" style="background: var(--success); color: white;" onclick="downloadCertificate()">Download Certificate</button>
        </div>
    </div>

    <script>
        // YouTube IFrame API
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        var checkpoints = [
            { time: 110, module: 1, title: "P&A Importance", exercise: "Explore environmental risks" },
            { time: 166, module: 2, title: "Regulatory Frameworks", exercise: "Compare regulatory approaches" },
            { time: 409, module: 3, title: "Global Standards", exercise: "Explore country regulations" },
            { time: 462, module: 4, title: "Barrier Systems", exercise: "Build a P&A barrier" },
            { time: 588, module: 5, title: "Perpetual Liability", exercise: "Explore liability timeline" },
            { time: 684, module: 6, title: "Financial Assurance", exercise: "Calculate bond requirements" },
            { time: 705, module: 7, title: "Three Golden Rules", exercise: "Review professional principles" }
        ];
        var currentCheckpointIndex = 0;
        var checkpointCompleted = false;
        var videoInterval;

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '100%',
                width: '100%',
                videoId: 'V7Rn45Xjjp0',
                playerVars: {
                    'enablejsapi': 1,
                    'origin': window.location.origin
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            updateNextCheckpoint();
        }

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING) {
                startCheckpointMonitoring();
            } else {
                stopCheckpointMonitoring();
            }
        }

        function startCheckpointMonitoring() {
            videoInterval = setInterval(() => {
                const currentTime = player.getCurrentTime();
                const nextCheckpoint = checkpoints[currentCheckpointIndex];

                if (nextCheckpoint && currentTime >= nextCheckpoint.time && !checkpointCompleted) {
                    reachCheckpoint(nextCheckpoint);
                }
            }, 1000);
        }

        function stopCheckpointMonitoring() {
            if (videoInterval) {
                clearInterval(videoInterval);
            }
        }

        function reachCheckpoint(checkpoint) {
            player.pauseVideo();
            checkpointCompleted = true;

            // Show checkpoint alert
            document.getElementById('checkpoint-alert').style.display = 'block';
            document.getElementById('checkpoint-message').textContent =
                `Module ${checkpoint.module}: ${checkpoint.title} - ${checkpoint.exercise}`;

            // Scroll to and highlight interactive element
            const moduleCard = document.querySelector(`[data-module="${checkpoint.module}"]`);
            if (moduleCard) {
                // Open the module
                toggleModule(checkpoint.module);

                // Highlight the interactive section
                setTimeout(() => {
                    const interactiveSection = moduleCard.querySelector('.interactive-section');
                    if (interactiveSection) {
                        interactiveSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        interactiveSection.style.animation = 'pulse 2s infinite';
                    }
                }, 500);
            }
        }

        function continueVideo() {
            // Hide checkpoint alert
            document.getElementById('checkpoint-alert').style.display = 'none';

            // Remove highlight animation
            const allInteractive = document.querySelectorAll('.interactive-section');
            allInteractive.forEach(section => {
                section.style.animation = '';
            });

            // Move to next checkpoint
            currentCheckpointIndex++;
            checkpointCompleted = false;
            updateNextCheckpoint();

            // Resume video
            player.playVideo();
        }

        function updateNextCheckpoint() {
            const nextCheckpoint = checkpoints[currentCheckpointIndex];
            const checkpointDiv = document.getElementById('current-checkpoint');

            if (nextCheckpoint) {
                const minutes = Math.floor(nextCheckpoint.time / 60);
                const seconds = nextCheckpoint.time % 60;
                checkpointDiv.textContent =
                    `üìç Next checkpoint: Module ${nextCheckpoint.module} at ${minutes}:${seconds.toString().padStart(2, '0')}`;
            } else {
                checkpointDiv.textContent = 'üéâ All checkpoints completed!';
            }
        }

        // Create confetti effect
        function createConfetti() {
            const colors = ['#22c55e', '#10b981', '#14b8a6', '#2563eb', '#f59e0b'];
            const confettiCount = 50;

            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                document.body.appendChild(confetti);

                setTimeout(() => confetti.remove(), 5000);
            }
        }

        // Enable continue button when interactive element is completed
        function enableContinue() {
            const continueBtn = document.getElementById('continue-btn');
            continueBtn.disabled = false;
            continueBtn.textContent = '‚ñ∂Ô∏è Continue Video';
            continueBtn.style.background = 'var(--success)';
            continueBtn.style.color = 'white';

            // Add visual feedback
            continueBtn.style.animation = 'successPulse 1s ease 3';

            // Show success message with animation
            const checkpointAlert = document.getElementById('checkpoint-alert');
            checkpointAlert.style.background = 'linear-gradient(135deg, var(--success), var(--secondary-color))';
            checkpointAlert.style.animation = 'bounce 0.5s ease';
        }

        // Course state management
        const courseState = {
            completedModules: new Set(),
            currentModule: null
        };

        // Load saved progress
        function loadProgress() {
            const saved = localStorage.getItem('pa-course-progress');
            if (saved) {
                const data = JSON.parse(saved);
                courseState.completedModules = new Set(data.completed || []);
                updateProgress();
                updateModuleStates();
            }
        }

        // Save progress
        function saveProgress() {
            localStorage.setItem('pa-course-progress', JSON.stringify({
                completed: Array.from(courseState.completedModules),
                lastAccess: new Date().toISOString()
            }));
        }

        // Toggle module content
        function toggleModule(moduleNum) {
            const card = document.querySelector(`[data-module="${moduleNum}"]`);
            const content = document.getElementById(`content-${moduleNum}`);
            const status = document.getElementById(`status-${moduleNum}`);

            // Check if module is locked
            if (moduleNum > 1 && !courseState.completedModules.has(moduleNum - 1)) {
                alert(`Please complete Module ${moduleNum - 1} first`);
                return;
            }

            // Toggle content
            const isActive = content.classList.contains('active');

            // Close all other modules
            document.querySelectorAll('.module-content').forEach(c => c.classList.remove('active'));

            if (!isActive) {
                content.classList.add('active');

                // Mark as in progress if not completed
                if (!courseState.completedModules.has(moduleNum)) {
                    card.classList.add('in-progress');
                    status.innerHTML = '<span>‚è≥</span><span>In Progress</span>';
                    status.className = 'module-status in-progress';
                }
            }
        }

        // Complete module
        function completeModule(moduleNum) {
            // Check quiz answer
            const correctAnswers = {
                1: 'b', 2: 'b', 3: 'b', 4: 'a', 5: 'b', 6: 'b', 7: 'b'
            };

            const selected = document.querySelector(`input[name="q${moduleNum}"]:checked`);
            if (!selected) {
                alert('Please answer the knowledge check question');
                return;
            }

            const options = document.querySelectorAll(`input[name="q${moduleNum}"]`);
            options.forEach(opt => {
                const label = opt.parentElement;
                label.classList.remove('selected', 'correct', 'incorrect');
                if (opt.checked) {
                    label.classList.add('selected');
                    if (opt.value === correctAnswers[moduleNum]) {
                        label.classList.add('correct');
                    } else {
                        label.classList.add('incorrect');
                        alert('Incorrect answer. Please review the material and try again.');
                        return;
                    }
                }
            });

            if (selected.value !== correctAnswers[moduleNum]) {
                return;
            }

            // Mark as completed
            courseState.completedModules.add(moduleNum);
            const card = document.querySelector(`[data-module="${moduleNum}"]`);
            const status = document.getElementById(`status-${moduleNum}`);

            card.classList.remove('in-progress');
            card.classList.add('completed');
            status.innerHTML = '<span>‚úÖ</span><span>Completed</span>';
            status.className = 'module-status completed';

            // Add visual celebration
            createConfetti();
            card.style.animation = 'successPulse 0.5s ease';

            // Close current module
            document.getElementById(`content-${moduleNum}`).classList.remove('active');

            // Unlock next module with animation
            if (moduleNum < 7) {
                const nextCard = document.querySelector(`[data-module="${moduleNum + 1}"]`);
                nextCard.classList.remove('locked');
                nextCard.style.animation = 'fadeInUp 0.5s ease';
                document.getElementById(`status-${moduleNum + 1}`).innerHTML = '<span>‚≠ï</span><span>Not Started</span>';
                document.getElementById(`status-${moduleNum + 1}`).className = 'module-status';
            }

            // Update progress
            updateProgress();
            saveProgress();

            // Check if course completed
            if (moduleNum === 7) {
                showCertificate();
            }
        }

        // Update progress bar
        function updateProgress() {
            const total = 7;
            const completed = courseState.completedModules.size;
            const percent = Math.round((completed / total) * 100);

            const percentEl = document.getElementById('progress-percent');
            const fillEl = document.getElementById('progress-fill');

            percentEl.textContent = `${percent}%`;
            percentEl.style.animation = 'successPulse 0.5s ease';

            fillEl.style.width = `${percent}%`;
            fillEl.style.animation = 'shimmer 2s infinite';

            // Add glow effect when progress increases
            const progressBar = document.querySelector('.progress-bar');
            progressBar.style.boxShadow = '0 0 20px rgba(20, 184, 166, 0.4)';
            setTimeout(() => {
                progressBar.style.boxShadow = '';
            }, 1000);
        }

        // Update module states on load
        function updateModuleStates() {
            courseState.completedModules.forEach(moduleNum => {
                const card = document.querySelector(`[data-module="${moduleNum}"]`);
                const status = document.getElementById(`status-${moduleNum}`);

                card.classList.add('completed');
                status.innerHTML = '<span>‚úÖ</span><span>Completed</span>';
                status.className = 'module-status completed';
            });

            // Unlock next uncompleted module
            const nextModule = courseState.completedModules.size + 1;
            if (nextModule <= 7) {
                const nextCard = document.querySelector(`[data-module="${nextModule}"]`);
                if (nextCard) {
                    nextCard.classList.remove('locked');
                }
            }
        }

        // Show certificate
        function showCertificate() {
            const certSection = document.getElementById('certificate');
            const certId = 'PA-' + Date.now().toString(36).toUpperCase();
            const certDate = new Date().toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            document.getElementById('cert-id').textContent = certId;
            document.getElementById('cert-date').textContent = certDate;
            certSection.classList.add('show');
            certSection.style.animation = 'fadeInUp 1s ease';
            certSection.scrollIntoView({ behavior: 'smooth' });

            // Big confetti celebration for course completion
            createConfetti();
            setTimeout(() => createConfetti(), 1000);
            setTimeout(() => createConfetti(), 2000);

            // Save certificate data
            localStorage.setItem('pa-course-certificate', JSON.stringify({
                id: certId,
                date: certDate,
                completed: new Date().toISOString()
            }));
        }

        // Download certificate
        function downloadCertificate() {
            alert('Certificate download functionality would generate a PDF certificate with your completion details.');
            // In production, this would trigger PDF generation
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadProgress();

            // Check if already completed
            const cert = localStorage.getItem('pa-course-certificate');
            if (cert) {
                const data = JSON.parse(cert);
                document.getElementById('cert-id').textContent = data.id;
                document.getElementById('cert-date').textContent = data.date;
                document.getElementById('certificate').classList.add('show');
            }
        });

        // ============================================
        // INTERACTIVE ELEMENTS
        // ============================================

        // Before/After Slider (Module 1)
        document.addEventListener('DOMContentLoaded', () => {
            const slider = document.getElementById('beforeAfterSlider');
            const handle = document.getElementById('sliderHandle');
            const afterImage = document.getElementById('afterImage');

            if (slider && handle && afterImage) {
                let isDragging = false;

                function updateSlider(x) {
                    const rect = slider.getBoundingClientRect();
                    let position = ((x - rect.left) / rect.width) * 100;
                    position = Math.max(0, Math.min(100, position));

                    handle.style.left = position + '%';
                    afterImage.style.clipPath = `inset(0 ${100 - position}% 0 0)`;
                }

                handle.addEventListener('mousedown', () => {
                    isDragging = true;
                });

                document.addEventListener('mousemove', (e) => {
                    if (isDragging) {
                        updateSlider(e.clientX);
                    }
                });

                document.addEventListener('mouseup', () => {
                    isDragging = false;
                });

                // Touch support
                handle.addEventListener('touchstart', () => {
                    isDragging = true;
                });

                document.addEventListener('touchmove', (e) => {
                    if (isDragging && e.touches[0]) {
                        updateSlider(e.touches[0].clientX);
                    }
                });

                document.addEventListener('touchend', () => {
                    isDragging = false;
                });

                // Click anywhere on slider to move
                slider.addEventListener('click', (e) => {
                    updateSlider(e.clientX);
                });
            }
        });

        // Environmental Risk Visualizer (Module 1)
        function selectRisk(risk) {
            // Remove all active states
            document.querySelectorAll('.risk-card').forEach(card => {
                card.classList.remove('active');
                card.style.animation = '';
            });
            document.querySelectorAll('.risk-details').forEach(detail => detail.classList.remove('active'));

            // Activate selected risk with animation
            const card = document.querySelector(`[data-risk="${risk}"]`);
            if (card) {
                card.classList.add('active');
                card.style.animation = 'cardFlip 0.6s ease';

                const detail = document.getElementById(`risk-${risk}`);
                detail.classList.add('active');
                detail.style.animation = 'fadeInUp 0.5s ease';

                // Enable continue button
                enableContinue();
            }
        }

        // Three Golden Rules (Module 7)
        function selectGoldenRule(ruleNum) {
            // Remove all active states
            document.querySelectorAll('.golden-rule-card').forEach(card => {
                card.classList.remove('active');
                card.style.animation = '';
            });
            document.querySelectorAll('.rule-application').forEach(app => app.classList.remove('active'));

            // Activate selected rule with animation
            const card = document.querySelector(`[data-rule="${ruleNum}"]`);
            if (card) {
                card.classList.add('active');
                card.style.animation = 'bounce 0.5s ease';

                const app = document.getElementById(`rule-app-${ruleNum}`);
                app.classList.add('active');
                app.style.animation = 'slideInLeft 0.5s ease';

                // Enable continue button
                enableContinue();
            }
        }

        // Regulatory Comparison Tool
        function selectRegulation(type) {
            // Remove all selected states
            document.querySelectorAll('.reg-card').forEach(card => {
                card.classList.remove('selected');
                card.style.animation = '';
            });
            document.querySelectorAll('.reg-details').forEach(detail => detail.classList.remove('active'));

            // Select clicked card with animation
            const card = document.querySelector(`[data-reg="${type}"]`);
            if (card) {
                card.classList.add('selected');
                card.style.animation = 'successPulse 0.5s ease';

                const detail = document.getElementById(`reg-details-${type}`);
                detail.classList.add('active');
                detail.style.animation = 'slideInRight 0.5s ease';

                // Enable continue button after interaction
                enableContinue();
            }
        }

        // Global Standards Explorer
        function exploreCountry(country) {
            // Toggle active state
            document.querySelectorAll('.country-card').forEach(card => {
                if (card.dataset.country === country) {
                    card.classList.toggle('active');
                    card.style.animation = 'bounce 0.5s ease';
                } else {
                    card.classList.remove('active');
                    card.style.animation = '';
                }
            });

            // Show country details
            const details = document.getElementById(`country-details-${country}`);
            if (details) {
                const isActive = details.classList.contains('active');
                document.querySelectorAll('.country-details').forEach(d => d.classList.remove('active'));
                if (!isActive) {
                    details.classList.add('active');
                    details.style.animation = 'fadeInUp 0.5s ease';

                    // Enable continue button after exploring a country
                    enableContinue();
                }
            }
        }

        // Barrier Builder - Drag and Drop
        let draggedComponent = null;

        function allowDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.add('drag-over');
        }

        function clearDragOver(event) {
            event.currentTarget.classList.remove('drag-over');
        }

        function drag(event) {
            draggedComponent = {
                type: event.target.dataset.type,
                name: event.target.dataset.name
            };
            event.target.classList.add('dragging');
        }

        function dragEnd(event) {
            event.target.classList.remove('dragging');
        }

        function drop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('drag-over');

            const layer = event.currentTarget;
            const requiredType = layer.dataset.type;

            if (draggedComponent && draggedComponent.type === requiredType) {
                layer.classList.add('filled', requiredType);
                layer.innerHTML = `<strong>${draggedComponent.name}</strong><br><small>‚úì Correctly placed</small>`;

                // Add visual feedback for successful drop
                layer.style.animation = 'bounce 0.5s ease';
                layer.style.boxShadow = '0 0 20px rgba(34, 197, 94, 0.6)';

                checkBarrierComplete();
            } else {
                // Visual feedback for incorrect drop
                layer.style.animation = 'shake 0.5s ease';
                setTimeout(() => {
                    layer.style.animation = '';
                }, 500);
                alert(`This layer requires: ${requiredType}. You dragged: ${draggedComponent.type}`);
            }
        }

        function checkBarrierComplete() {
            const layers = document.querySelectorAll('.barrier-layer');
            const allFilled = Array.from(layers).every(layer => layer.classList.contains('filled'));

            if (allFilled) {
                const result = document.getElementById('barrier-result');
                if (result) {
                    result.style.display = 'block';
                    result.innerHTML = '<strong style="color: var(--success);">‚úì Barrier Complete!</strong><p>You have successfully designed a proper P&A barrier with all three essential components in the correct sequence.</p>';
                    result.style.animation = 'fadeInUp 0.5s ease';

                    // Visual celebration for completing barrier
                    createConfetti();

                    // Animate the barrier layers
                    layers.forEach((layer, index) => {
                        setTimeout(() => {
                            layer.style.animation = 'successPulse 0.5s ease';
                        }, index * 100);
                    });

                    // Enable continue button after completing barrier
                    enableContinue();
                }
            }
        }

        function resetBarrier() {
            document.querySelectorAll('.barrier-layer').forEach(layer => {
                layer.classList.remove('filled', 'cement', 'casing', 'formation');
                layer.innerHTML = `Drop ${layer.dataset.type} here`;
            });
            const result = document.getElementById('barrier-result');
            if (result) result.style.display = 'none';
        }

        // Financial Calculator
        function calculatePABond() {
            const depth = parseFloat(document.getElementById('well-depth').value) || 0;
            const complexity = parseFloat(document.getElementById('complexity').value) || 1;
            const location = document.getElementById('location').value;

            // Base calculation (simplified for educational purposes)
            let baseCost = depth * 50; // $50 per foot base rate

            // Complexity multiplier
            baseCost *= complexity;

            // Location factor
            const locationFactors = {
                'onshore': 1.0,
                'shallow-water': 1.5,
                'deep-water': 2.5,
                'ultra-deep': 4.0
            };
            baseCost *= locationFactors[location] || 1.0;

            // Display results
            document.getElementById('bond-amount').textContent =
                '$' + baseCost.toLocaleString('en-US', {maximumFractionDigits: 0});

            // Update slider display
            document.getElementById('complexity-value').textContent =
                complexity === 1 ? 'Low' : complexity === 2 ? 'Medium' : 'High';

            // Enable continue button after calculation
            enableContinue();
        }

        // Liability Timeline Interaction
        function highlightTimelineItem(year) {
            document.querySelectorAll('.timeline-item').forEach(item => {
                if (item.dataset.year === year.toString()) {
                    item.style.background = 'rgba(20, 184, 166, 0.1)';
                    item.style.transform = 'translateX(8px)';
                } else {
                    item.style.background = 'var(--bg-white)';
                    item.style.transform = 'translateX(4px)';
                }
            });

            // Enable continue button after clicking timeline items
            enableContinue();
        }
    </script>
</body>
</html>
