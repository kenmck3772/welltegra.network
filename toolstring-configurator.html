<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toolstring Configurator | WellTegra</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Manifest for PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#1e3a8a">

    <style>
        body {
            background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            min-height: 100vh;
        }

        .tool-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .tool-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .tool-card.selected {
            border: 2px solid #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }

        .toolstring-item {
            background: rgba(31, 41, 55, 0.9);
            border-left: 3px solid #3b82f6;
        }

        .offline-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
        }

        .offline-indicator.online {
            background: #10b981;
            color: white;
        }

        .offline-indicator.offline {
            background: #ef4444;
            color: white;
        }

        .sync-badge {
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 9999px;
        }

        .sync-badge.synced {
            background: #10b981;
            color: white;
        }

        .sync-badge.pending {
            background: #f59e0b;
            color: white;
        }
    </style>
</head>
<body>
    <!-- Offline/Online Indicator -->
    <div id="connection-indicator" class="offline-indicator online">
        <i class="fas fa-wifi"></i> <span id="connection-text">Connected to Edge Core</span>
    </div>

    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-4xl font-bold text-white mb-2">
                        <i class="fas fa-tools text-blue-500"></i> Toolstring Configurator
                    </h1>
                    <p class="text-gray-300">Sprint 12: Edge Core & Offline-First Test Application</p>
                </div>
                <div class="text-right">
                    <p class="text-gray-300">User: <span id="current-user" class="text-white font-semibold">Finlay MacLeod</span></p>
                    <p class="text-gray-400 text-sm">Role: <span id="current-role">Field-Engineer</span></p>
                    <button id="logout-btn" class="mt-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Left Panel: Tool Catalog -->
            <div class="lg:col-span-2">
                <div class="bg-gray-800 rounded-lg p-6 shadow-xl">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-2xl font-bold text-white">
                            <i class="fas fa-box text-blue-500"></i> Equipment Catalog
                        </h2>
                        <input
                            type="text"
                            id="search-tools"
                            placeholder="Search tools..."
                            class="px-4 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        >
                    </div>

                    <!-- Category Tabs -->
                    <div class="flex space-x-2 mb-4 overflow-x-auto">
                        <button class="category-tab px-4 py-2 bg-blue-600 text-white rounded-lg whitespace-nowrap" data-category="all">
                            All Tools
                        </button>
                        <button class="category-tab px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 whitespace-nowrap" data-category="fishing_tools">
                            Fishing
                        </button>
                        <button class="category-tab px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 whitespace-nowrap" data-category="running_tools">
                            Running
                        </button>
                        <button class="category-tab px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 whitespace-nowrap" data-category="wireline_tools">
                            Wireline
                        </button>
                        <button class="category-tab px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 whitespace-nowrap" data-category="completion_tools">
                            Completion
                        </button>
                    </div>

                    <!-- Tools Grid -->
                    <div id="tools-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[600px] overflow-y-auto">
                        <!-- Tools will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Right Panel: Current Toolstring -->
            <div>
                <div class="bg-gray-800 rounded-lg p-6 shadow-xl sticky top-4">
                    <h2 class="text-2xl font-bold text-white mb-4">
                        <i class="fas fa-list text-green-500"></i> Current Toolstring
                    </h2>

                    <!-- Configuration Form -->
                    <div class="mb-4 space-y-3">
                        <div>
                            <label class="block text-gray-300 text-sm font-semibold mb-1">Configuration Name *</label>
                            <input
                                type="text"
                                id="config-name"
                                placeholder="e.g., W666 Fishing Run 1"
                                class="w-full px-3 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            >
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-semibold mb-1">Well ID</label>
                            <select id="well-id" class="w-full px-3 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Select Well...</option>
                                <option value="W001">W001</option>
                                <option value="W042">W042</option>
                                <option value="W108">W108</option>
                                <option value="W223">W223</option>
                                <option value="W314">W314</option>
                                <option value="W555">W555</option>
                                <option value="W666">W666</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-gray-300 text-sm font-semibold mb-1">Operation Type</label>
                            <select id="operation-type" class="w-full px-3 py-2 bg-gray-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Select Operation...</option>
                                <option value="Fishing">Fishing</option>
                                <option value="Completion">Completion</option>
                                <option value="Wireline">Wireline</option>
                                <option value="Jarring">Jarring</option>
                                <option value="Milling">Milling</option>
                            </select>
                        </div>
                    </div>

                    <!-- Selected Tools List -->
                    <div class="mb-4">
                        <p class="text-gray-400 text-sm mb-2">Tools Selected: <span id="tool-count" class="text-white font-bold">0</span></p>
                        <div id="selected-tools" class="space-y-2 max-h-60 overflow-y-auto">
                            <p class="text-gray-500 text-center py-4">No tools selected</p>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="space-y-2">
                        <button id="save-config-btn" class="w-full px-4 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition">
                            <i class="fas fa-save"></i> Save Configuration
                        </button>
                        <button id="clear-btn" class="w-full px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition">
                            <i class="fas fa-times"></i> Clear All
                        </button>
                        <button id="view-saved-btn" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition">
                            <i class="fas fa-folder-open"></i> View Saved Configs
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Saved Configurations Section -->
        <div id="saved-configs-section" class="mt-8 hidden">
            <div class="bg-gray-800 rounded-lg p-6 shadow-xl">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-white">
                        <i class="fas fa-database text-purple-500"></i> Saved Configurations
                    </h2>
                    <button id="close-saved-btn" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
                <div id="saved-configs-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Saved configs will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Load JavaScript -->
    <script src="/assets/js/toolstring-configurator.js"></script>
</body>
</html>
